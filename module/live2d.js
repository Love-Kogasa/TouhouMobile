var D2 = Object.defineProperty;
var tf = Object.getOwnPropertySymbols;
var N2 = Object.prototype.hasOwnProperty, F2 = Object.prototype.propertyIsEnumerable;
var yo = (i, t, e) => t in i ? D2(i, t, { enumerable: !0, configurable: !0, writable: !0, value: e }) : i[t] = e, ef = (i, t) => {
  for (var e in t || (t = {}))
    N2.call(t, e) && yo(i, e, t[e]);
  if (tf)
    for (var e of tf(t))
      F2.call(t, e) && yo(i, e, t[e]);
  return i;
};
var Dt = (i, t, e) => (yo(i, typeof t != "symbol" ? t + "" : t, e), e);
var ar = (i, t, e) => new Promise((a, n) => {
  var s = (m) => {
    try {
      u(e.next(m));
    } catch (g) {
      n(g);
    }
  }, o = (m) => {
    try {
      u(e.throw(m));
    } catch (g) {
      n(g);
    }
  }, u = (m) => m.done ? a(m.value) : Promise.resolve(m.value).then(s, o);
  u((e = e.apply(i, t)).next());
});
window._iconfont_svg_string_3847283 = '<svg><symbol id="icon-rest" viewBox="0 0 1280 1024"><path d="M352 512c88.22 0 160-71.78 160-160s-71.78-160-160-160-160 71.78-160 160 71.78 160 160 160z m704-256H608c-17.68 0-32 14.32-32 32v288H128V160c0-17.68-14.32-32-32-32H32C14.32 128 0 142.32 0 160v704c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32v-96h1024v96c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32V480c0-123.72-100.28-224-224-224z"  ></path></symbol><symbol id="icon-about" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272z m-32-344c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"  ></path></symbol><symbol id="icon-like" viewBox="0 0 1024 1024"><path d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"  ></path></symbol><symbol id="icon-skin" viewBox="0 0 1024 1024"><path d="M870 126H663.8c-17.4 0-32.9 11.9-37 29.3C614.3 208.1 567 246 512 246s-102.3-37.9-114.8-90.7c-4.1-17.4-19.5-29.3-37-29.3H154c-24.3 0-44 19.7-44 44v252c0 24.3 19.7 44 44 44h75v388c0 24.3 19.7 44 44 44h478c24.3 0 44-19.7 44-44V466h75c24.3 0 44-19.7 44-44V170c0-24.3-19.7-44-44-44z"  ></path></symbol><symbol id="icon-setting" viewBox="0 0 1024 1024"><path d="M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1-21.2-21.2-49.2-32.8-79.1-32.8z"  ></path><path d="M924.8 626.1l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9c10.1-8.6 13.8-22.6 9.3-35.2l-0.9-2.6c-18.1-50.4-44.8-96.8-79.6-137.7l-1.8-2.1c-8.6-10.1-22.5-13.9-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9c-2.4-13.1-12.7-23.3-25.8-25.7l-2.7-0.5c-52-9.4-106.8-9.4-158.8 0l-2.7 0.5c-13.1 2.4-23.4 12.6-25.8 25.7l-15.8 85.3c-35.9 13.6-69.1 32.9-98.9 57.3l-81.8-29.1c-12.5-4.4-26.5-0.7-35.1 9.5l-1.8 2.1c-34.8 41.1-61.5 87.4-79.6 137.7l-0.9 2.6c-4.5 12.5-0.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5c-10.1 8.6-13.8 22.6-9.3 35.2l0.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1c8.6 10.1 22.5 13.9 35.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3c2.4 13.1 12.7 23.3 25.8 25.7l2.7 0.5c26.1 4.7 52.7 7.1 79.4 7.1 26.7 0 53.4-2.4 79.4-7.1l2.7-0.5c13.1-2.4 23.4-12.6 25.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9c12.5 4.4 26.5 0.7 35.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l0.9-2.6c4.3-12.4 0.6-26.3-9.5-35z m-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"  ></path></symbol><symbol id="icon-switch" viewBox="0 0 1024 1024"><path d="M512 565c133.7 0 242-108.3 242-242S645.7 81 512 81 270 189.3 270 323s108.3 242 242 242z m4.8 299.3a264.4 264.4 0 0 1 0-205.6c2.3-5.4 4.8-10.8 7.4-16a4 4 0 0 0-3.7-5.8H512a311.4 311.4 0 0 1-122.2-24.7 319.8 319.8 0 0 1-57.9-32 4 4 0 0 0-4.2-0.3C208.7 645.3 128 771.7 128 917v25a4 4 0 0 0 4 4h429.9a4 4 0 0 0 3-6.7 261.9 261.9 0 0 1-48.1-75zM760 568c-106 0-192 86-192 192s86 192 192 192 192-86 192-192-86-192-192-192z m-98.4 136a4 4 0 0 1 4-4h124v-33.4c0-16 20.8-22.1 29.4-8.7l36.9 57.5a16 16 0 0 1-13.5 24.6H665.6a4 4 0 0 1-4-4z m196.8 112a4 4 0 0 1-4 4h-124v33.4c0 16-20.8 22.1-29.4 8.7l-36.9-57.5a16 16 0 0 1 13.5-24.6h176.8a4 4 0 0 1 4 4z"  ></path></symbol><symbol id="icon-loading" viewBox="0 0 1024 1024"><path d="M563.2 819.2a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z m-320.4608-153.6a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m592.7936 25.6a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8zM947.2 477.1328a76.8 76.8 0 1 1 0 153.6 76.8 76.8 0 0 1 0-153.6zM128 307.2a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m782.6432-40.6016a51.2 51.2 0 1 1 0 102.4 51.2 51.2 0 0 1 0-102.4zM409.6 0a153.6 153.6 0 1 1 0 307.2 153.6 153.6 0 0 1 0-307.2z m384 153.6a25.6 25.6 0 1 1 0 51.2 25.6 25.6 0 0 1 0-51.2z"  ></path></symbol></svg>', function(i) {
  var e = (e = document.getElementsByTagName("script"))[e.length - 1], t = e.getAttribute("data-injectcss"), e = e.getAttribute("data-disable-injectsvg");
  if (!e) {
    var a, n, s, o, u, m = function(x, w) {
      w.parentNode.insertBefore(x, w);
    };
    if (t && !i.__iconfont__svg__cssinject__) {
      i.__iconfont__svg__cssinject__ = !0;
      try {
        document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>");
      } catch (x) {
        console && console.log(x);
      }
    }
    a = function() {
      var x, w = document.createElement("div");
      w.innerHTML = i._iconfont_svg_string_3847283, (w = w.getElementsByTagName("svg")[0]) && (w.setAttribute("aria-hidden", "true"), w.style.position = "absolute", w.style.width = 0, w.style.height = 0, w.style.overflow = "hidden", w = w, (x = document.body).firstChild ? m(w, x.firstChild) : x.appendChild(w));
    }, document.addEventListener ? ~["complete", "loaded", "interactive"].indexOf(document.readyState) ? setTimeout(a, 0) : (n = function() {
      document.removeEventListener("DOMContentLoaded", n, !1), a();
    }, document.addEventListener("DOMContentLoaded", n, !1)) : document.attachEvent && (s = a, o = i.document, u = !1, A(), o.onreadystatechange = function() {
      o.readyState == "complete" && (o.onreadystatechange = null, g());
    });
  }
  function g() {
    u || (u = !0, s());
  }
  function A() {
    try {
      o.documentElement.doScroll("left");
    } catch (x) {
      return void setTimeout(A, 50);
    }
    g();
  }
}(window);
const q0 = document.createElement("script");
document.head.append(q0);
const H2 = `
var __NONECONSOLE = {log(){}};(function(){var j=true;function aa(){if(j){return;}this._$MT=null;this._$5S=null;this._$NP=0;aa._$42++;this._$5S=new y(this);}aa._$0s=1;aa._$4s=2;aa._$42=0;aa._$62=function(aQ,aU){try{if(aU instanceof ArrayBuffer){aU=new DataView(aU);}if(!(aU instanceof DataView)){throw new J("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");}var aS=new K(aU);var aM=aS._$ST();var aK=aS._$ST();var aJ=aS._$ST();var aN;if(aM==109&&aK==111&&aJ==99){aN=aS._$ST();}else{throw new J("_$gi _$C _$li , _$Q0 _$P0.");}aS._$gr(aN);if(aN>ay._$T7){aQ._$NP|=aa._$4s;var aR=ay._$T7;var aI="_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+aR+" < _$f0 : "+aN+" )@_$SS#loadModel()\\
";throw new J(aI);}var aL=aS._$nP();if(aN>=ay._$s7){var aH=aS._$9T();var aT=aS._$9T();if(aH!=-30584||aT!=-30584){aQ._$NP|=aa._$0s;throw new J("_$gi _$C _$li , _$0 _$6 _$Ui.");}}aQ._$KS(aL);var aP=aQ.getModelContext();aP.setDrawParam(aQ.getDrawParam());aP.init();}catch(aO){q._$Rb(aO);}};aa.prototype._$KS=function(aH){this._$MT=aH;};aa.prototype.getModelImpl=function(){if(this._$MT==null){this._$MT=new w();this._$MT._$zP();}return this._$MT;};aa.prototype.getCanvasWidth=function(){if(this._$MT==null){return 0;}return this._$MT.getCanvasWidth();};aa.prototype.getCanvasHeight=function(){if(this._$MT==null){return 0;}return this._$MT.getCanvasHeight();};aa.prototype.getParamFloat=function(aH){if(typeof aH!="number"){aH=this._$5S.getParamIndex(z.getID(aH));}return this._$5S.getParamFloat(aH);};aa.prototype.setParamFloat=function(aH,aJ,aI){if(typeof aH!="number"){aH=this._$5S.getParamIndex(z.getID(aH));}if(arguments.length<3){aI=1;}this._$5S.setParamFloat(aH,this._$5S.getParamFloat(aH)*(1-aI)+aJ*aI);};aa.prototype.addToParamFloat=function(aH,aJ,aI){if(typeof aH!="number"){aH=this._$5S.getParamIndex(z.getID(aH));}if(arguments.length<3){aI=1;}this._$5S.setParamFloat(aH,this._$5S.getParamFloat(aH)+aJ*aI);};aa.prototype.multParamFloat=function(aH,aJ,aI){if(typeof aH!="number"){aH=this._$5S.getParamIndex(z.getID(aH));}if(arguments.length<3){aI=1;}this._$5S.setParamFloat(aH,this._$5S.getParamFloat(aH)*(1+(aJ-1)*aI));};aa.prototype.getParamIndex=function(aH){return this._$5S.getParamIndex(z.getID(aH));};aa.prototype.loadParam=function(){this._$5S.loadParam();};aa.prototype.saveParam=function(){this._$5S.saveParam();};aa.prototype.init=function(){this._$5S.init();};aa.prototype.update=function(){this._$5S.update();};aa.prototype._$Rs=function(){q._$li("_$60 _$PT _$Rs()");return -1;};aa.prototype._$Ds=function(aH){q._$li("_$60 _$PT _$SS#_$Ds() \\n");};aa.prototype._$K2=function(){};aa.prototype.draw=function(){};aa.prototype.getModelContext=function(){return this._$5S;};aa.prototype._$s2=function(){return this._$NP;};aa.prototype._$P7=function(aK,aR,aH,a0){var aU=-1;var aY=0;var aM=this;var aJ=0.5;var aI=0.15;var aX=true;if(aH==0){for(var aV=0;aV<aK.length;aV++){var aP=aK[aV];var aO=aR[aV];var aS=(aM.getParamFloat(aP)!=0);aM.setPartsOpacity(aO,(aS?1:0));}return;}else{if(aK.length==1){var aP=aK[0];var aT=(aM.getParamFloat(aP)!=0);var aO=aR[0];var aQ=aM.getPartsOpacity(aO);var aW=aH/a0;if(aT){aQ+=aW;if(aQ>1){aQ=1;}}else{aQ-=aW;if(aQ<0){aQ=0;}}aM.setPartsOpacity(aO,aQ);}else{for(var aV=0;aV<aK.length;aV++){var aP=aK[aV];var aS=(aM.getParamFloat(aP)!=0);if(aS){if(aU>=0){break;}aU=aV;var aO=aR[aV];aY=aM.getPartsOpacity(aO);aY+=aH/a0;if(aY>1){aY=1;}}}if(aU<0){__NONECONSOLE.log("No _$wi _$q0/ _$U default[%s]",aK[0]);aU=0;aY=1;aM.loadParam();aM.setParamFloat(aK[aU],aY);aM.saveParam();}for(var aV=0;aV<aK.length;aV++){var aO=aR[aV];if(aU==aV){aM.setPartsOpacity(aO,aY);}else{var aL=aM.getPartsOpacity(aO);var aZ;if(aY<aJ){aZ=aY*(aJ-1)/aJ+1;}else{aZ=(1-aY)*aJ/(1-aJ);}if(aX){var aN=(1-aZ)*(1-aY);if(aN>aI){aZ=1-aI/(1-aY);}}if(aL>aZ){aL=aZ;}aM.setPartsOpacity(aO,aL);}}}}};aa.prototype.setPartsOpacity=function(aI,aH){if(typeof aI!="number"){aI=this._$5S.getPartsDataIndex(i.getID(aI));}this._$5S.setPartsOpacity(aI,aH);};aa.prototype.getPartsDataIndex=function(aH){if(!(aH instanceof i)){aH=i.getID(aH);}return this._$5S.getPartsDataIndex(aH);};aa.prototype.getPartsOpacity=function(aH){if(typeof aH!="number"){aH=this._$5S.getPartsDataIndex(i.getID(aH));}if(aH<0){return 0;}return this._$5S.getPartsOpacity(aH);};aa.prototype.getDrawParam=function(){};aa.prototype.getDrawDataIndex=function(aH){return this._$5S.getDrawDataIndex(Z.getID(aH));};aa.prototype.getDrawData=function(aH){return this._$5S.getDrawData(aH);};aa.prototype.getTransformedPoints=function(aH){var aI=this._$5S._$C2(aH);if(aI instanceof ag){return(aI).getTransformedPoints();}return null;};aa.prototype.getIndexArray=function(aI){if(aI<0||aI>=this._$5S._$aS.length){return null;}var aH=this._$5S._$aS[aI];if(aH!=null&&aH.getType()==a._$wb){if(aH instanceof b){return aH.getIndexArray();}}return null;};function W(aJ){if(j){return;}this.clipContextList=new Array();this.glcontext=aJ.gl;this.dp_webgl=aJ;this.curFrameNo=0;this.firstError_clipInNotUpdate=true;this.colorBuffer=0;this.isInitGLFBFunc=false;this.tmpBoundsOnModel=new av();if(Q.glContext.length>Q.frameBuffers.length){this.curFrameNo=this.getMaskRenderTexture();}else{}this.tmpModelToViewMatrix=new ac();this.tmpMatrix2=new ac();this.tmpMatrixForMask=new ac();this.tmpMatrixForDraw=new ac();this.CHANNEL_COLORS=new Array();var aI=new o();aI=new o();aI.r=0;aI.g=0;aI.b=0;aI.a=1;this.CHANNEL_COLORS.push(aI);aI=new o();aI.r=1;aI.g=0;aI.b=0;aI.a=0;this.CHANNEL_COLORS.push(aI);aI=new o();aI.r=0;aI.g=1;aI.b=0;aI.a=0;this.CHANNEL_COLORS.push(aI);aI=new o();aI.r=0;aI.g=0;aI.b=1;aI.a=0;this.CHANNEL_COLORS.push(aI);for(var aH=0;aH<this.CHANNEL_COLORS.length;aH++){this.dp_webgl.setChannelFlagAsColor(aH,this.CHANNEL_COLORS[aH]);}}W.CHANNEL_COUNT=4;W.RENDER_TEXTURE_USE_MIPMAP=false;W.NOT_USED_FRAME=-100;W.prototype._$L7=function(){if(this.tmpModelToViewMatrix){this.tmpModelToViewMatrix=null;}if(this.tmpMatrix2){this.tmpMatrix2=null;}if(this.tmpMatrixForMask){this.tmpMatrixForMask=null;}if(this.tmpMatrixForDraw){this.tmpMatrixForDraw=null;}if(this.tmpBoundsOnModel){this.tmpBoundsOnModel=null;}if(this.CHANNEL_COLORS){for(var aH=this.CHANNEL_COLORS.length-1;aH>=0;--aH){this.CHANNEL_COLORS.splice(aH,1);}this.CHANNEL_COLORS=[];}this.releaseShader();};W.prototype.releaseShader=function(){var aI=Q.frameBuffers.length;for(var aH=0;aH<aI;aH++){this.gl.deleteFramebuffer(Q.frameBuffers[aH].framebuffer);}Q.frameBuffers=[];Q.glContext=[];};W.prototype.init=function(aO,aN,aL){for(var aM=0;aM<aN.length;aM++){var aH=aN[aM].getClipIDList();if(aH==null){continue;}var aJ=this.findSameClip(aH);if(aJ==null){aJ=new U(this,aO,aH);this.clipContextList.push(aJ);}var aI=aN[aM].getDrawDataID();var aK=aO.getDrawDataIndex(aI);aJ.addClippedDrawData(aI,aK);var aP=aL[aM];aP.clipBufPre_clipContext=aJ;}};W.prototype.getMaskRenderTexture=function(){var aH=null;aH=this.dp_webgl.createFramebuffer();Q.frameBuffers[this.dp_webgl.glno]=aH;return this.dp_webgl.glno;};W.prototype.setupClip=function(a1,aQ){var aK=0;for(var aO=0;aO<this.clipContextList.length;aO++){var aP=this.clipContextList[aO];this.calcClippedDrawTotalBounds(a1,aP);if(aP.isUsing){aK++;}}if(aK>0){var aM=aQ.gl.getParameter(aQ.gl.FRAMEBUFFER_BINDING);var aW=new Array(4);aW[0]=0;aW[1]=0;aW[2]=aQ.gl.canvas.width;aW[3]=aQ.gl.canvas.height;aQ.gl.viewport(0,0,Q.clippingMaskBufferSize,Q.clippingMaskBufferSize);this.setupLayoutBounds(aK);aQ.gl.bindFramebuffer(aQ.gl.FRAMEBUFFER,Q.frameBuffers[this.curFrameNo].framebuffer);aQ.gl.clearColor(0,0,0,0);aQ.gl.clear(aQ.gl.COLOR_BUFFER_BIT);for(var aO=0;aO<this.clipContextList.length;aO++){var aP=this.clipContextList[aO];var aT=aP.allClippedDrawRect;var aN=aP.layoutChannelNo;var aV=aP.layoutBounds;var aJ=0.05;this.tmpBoundsOnModel._$jL(aT);this.tmpBoundsOnModel.expand(aT.width*aJ,aT.height*aJ);var aZ=aV.width/this.tmpBoundsOnModel.width;var aY=aV.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity();this.tmpMatrix2.translate(-1,-1,0);this.tmpMatrix2.scale(2,2,1);this.tmpMatrix2.translate(aV.x,aV.y,0);this.tmpMatrix2.scale(aZ,aY,1);this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0);this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m);this.tmpMatrix2.identity();this.tmpMatrix2.translate(aV.x,aV.y,0);this.tmpMatrix2.scale(aZ,aY,1);this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0);this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);var aH=this.tmpMatrixForMask.getArray();for(var aX=0;aX<16;aX++){aP.matrixForMask[aX]=aH[aX];}var a0=this.tmpMatrixForDraw.getArray();for(var aX=0;aX<16;aX++){aP.matrixForDraw[aX]=a0[aX];}var aS=aP.clippingMaskDrawIndexList.length;for(var aU=0;aU<aS;aU++){var aR=aP.clippingMaskDrawIndexList[aU];var aI=a1.getDrawData(aR);var aL=a1._$C2(aR);aQ.setClipBufPre_clipContextForMask(aP);aI.draw(aQ,a1,aL);}}aQ.gl.bindFramebuffer(aQ.gl.FRAMEBUFFER,aM);aQ.setClipBufPre_clipContextForMask(null);aQ.gl.viewport(aW[0],aW[1],aW[2],aW[3]);}};W.prototype.getColorBuffer=function(){return this.colorBuffer;};W.prototype.findSameClip=function(aK){for(var aN=0;aN<this.clipContextList.length;aN++){var aO=this.clipContextList[aN];var aH=aO.clipIDList.length;if(aH!=aK.length){continue;}var aI=0;for(var aM=0;aM<aH;aM++){var aL=aO.clipIDList[aM];for(var aJ=0;aJ<aH;aJ++){if(aK[aJ]==aL){aI++;break;}}}if(aI==aH){return aO;}}return null;};W.prototype.calcClippedDrawTotalBounds=function(a6,aV){var aU=a6._$Ri.getModelImpl().getCanvasWidth();var a5=a6._$Ri.getModelImpl().getCanvasHeight();var aJ=aU>a5?aU:a5;var aT=aJ;var aR=aJ;var aS=0;var aP=0;var aL=aV.clippedDrawContextList.length;for(var aM=0;aM<aL;aM++){var aW=aV.clippedDrawContextList[aM];var aN=aW.drawDataIndex;var aK=a6._$C2(aN);if(aK._$yo()){var aX=aK.getTransformedPoints();var a4=aX.length;var aI=[];var aH=[];var aO=0;for(var a3=aw._$i2;a3<a4;a3+=aw._$No){aI[aO]=aX[a3];aH[aO]=aX[a3+1];aO++;}var a2=Math.min.apply(null,aI);var a1=Math.min.apply(null,aH);var a0=Math.max.apply(null,aI);var aZ=Math.max.apply(null,aH);if(a2<aT){aT=a2;}if(a1<aR){aR=a1;}if(a0>aS){aS=a0;}if(aZ>aP){aP=aZ;}}}if(aT==aJ){aV.allClippedDrawRect.x=0;aV.allClippedDrawRect.y=0;aV.allClippedDrawRect.width=0;aV.allClippedDrawRect.height=0;aV.isUsing=false;}else{var aQ=aS-aT;var aY=aP-aR;aV.allClippedDrawRect.x=aT;aV.allClippedDrawRect.y=aR;aV.allClippedDrawRect.width=aQ;aV.allClippedDrawRect.height=aY;aV.isUsing=true;}};W.prototype.setupLayoutBounds=function(aQ){var aI=aQ/W.CHANNEL_COUNT;var aP=aQ%W.CHANNEL_COUNT;aI=~~aI;aP=~~aP;var aH=0;for(var aJ=0;aJ<W.CHANNEL_COUNT;aJ++){var aM=aI+(aJ<aP?1:0);if(aM==0){}else{if(aM==1){var aL=this.clipContextList[aH++];aL.layoutChannelNo=aJ;aL.layoutBounds.x=0;aL.layoutBounds.y=0;aL.layoutBounds.width=1;aL.layoutBounds.height=1;}else{if(aM==2){for(var aO=0;aO<aM;aO++){var aN=aO%2;var aK=0;aN=~~aN;var aL=this.clipContextList[aH++];aL.layoutChannelNo=aJ;aL.layoutBounds.x=aN*0.5;aL.layoutBounds.y=0;aL.layoutBounds.width=0.5;aL.layoutBounds.height=1;}}else{if(aM<=4){for(var aO=0;aO<aM;aO++){var aN=aO%2;var aK=aO/2;aN=~~aN;aK=~~aK;var aL=this.clipContextList[aH++];aL.layoutChannelNo=aJ;aL.layoutBounds.x=aN*0.5;aL.layoutBounds.y=aK*0.5;aL.layoutBounds.width=0.5;aL.layoutBounds.height=0.5;}}else{if(aM<=9){for(var aO=0;aO<aM;aO++){var aN=aO%3;var aK=aO/3;aN=~~aN;aK=~~aK;var aL=this.clipContextList[aH++];aL.layoutChannelNo=aJ;aL.layoutBounds.x=aN/3;aL.layoutBounds.y=aK/3;aL.layoutBounds.width=1/3;aL.layoutBounds.height=1/3;}}else{q._$li("_$6 _$0P mask count : %d",aM);}}}}}}};function U(aH,aK,aI){this.clipIDList=new Array();this.clipIDList=aI;this.clippingMaskDrawIndexList=new Array();for(var aJ=0;aJ<aI.length;aJ++){this.clippingMaskDrawIndexList.push(aK.getDrawDataIndex(aI[aJ]));}this.clippedDrawContextList=new Array();this.isUsing=true;this.layoutChannelNo=0;this.layoutBounds=new av();this.allClippedDrawRect=new av();this.matrixForMask=new Float32Array(16);this.matrixForDraw=new Float32Array(16);this.owner=aH;}U.prototype.addClippedDrawData=function(aJ,aI){var aH=new R(aJ,aI);this.clippedDrawContextList.push(aH);};function R(aI,aH){this._$gP=aI;this.drawDataIndex=aH;}function I(){if(j){return;}this.color=null;}function ah(){if(j){return;}this._$dP=null;this._$eo=null;this._$V0=null;this._$dP=1000;this._$eo=1000;this._$V0=1;this._$a0();}ah._$JT=function(aP,aN,aO){var aQ=aP/aN;var a1=aO/aN;var aU=a1;var aZ=1/3;var aR=2/3;var a0=1-(1-a1)*(1-a1);var a2=1-(1-aU)*(1-aU);var aM=0;var aL=((1-a1)*aZ)*a0+(aU*aR+(1-aU)*aZ)*(1-a0);var aK=(aU+(1-aU)*aR)*a2+(a1*aZ+(1-a1)*aR)*(1-a2);var aJ=1;var aY=aJ-3*aK+3*aL-aM;var aX=3*aK-6*aL+3*aM;var aW=3*aL-3*aM;var aV=aM;if(aQ<=0){return 0;}else{if(aQ>=1){return 1;}}var aS=aQ;var aI=aS*aS;var aH=aS*aI;var aT=aY*aH+aX*aI+aW*aS+aV;return aT;};ah.prototype._$a0=function(){};ah.prototype.setFadeIn=function(aH){this._$dP=aH;};ah.prototype.setFadeOut=function(aH){this._$eo=aH;};ah.prototype._$pT=function(aH){this._$V0=aH;};ah.prototype.getFadeOut=function(){return this._$eo;};ah.prototype._$4T=function(){return this._$eo;};ah.prototype._$mT=function(){return this._$V0;};ah.prototype.getDurationMSec=function(){return -1;};ah.prototype.getLoopDurationMSec=function(){return -1;};ah.prototype.updateParam=function(aJ,aN){if(!aN._$AT||aN._$9L){return;}var aL=P.getUserTimeMSec();if(aN._$z2<0){aN._$z2=aL;aN._$bs=aL;var aM=this.getDurationMSec();if(aN._$Do<0){aN._$Do=(aM<=0)?-1:aN._$z2+aM;}}var aI=this._$V0;var aH=(this._$dP==0)?1:A._$r2(((aL-aN._$bs)/(this._$dP)));var aK=(this._$eo==0||aN._$Do<0)?1:A._$r2(((aN._$Do-aL)/(this._$eo)));aI=aI*aH*aK;if(!((0<=aI&&aI<=1))){__NONECONSOLE.log("### assert!! ### ");}this.updateParamExe(aJ,aL,aI,aN);if(aN._$Do>0&&aN._$Do<aL){aN._$9L=true;}};ah.prototype.updateParamExe=function(aH,aI,aJ,aK){};function q(){}q._$8s=0;q._$fT=new Object();q.start=function(aI){var aH=q._$fT[aI];if(aH==null){aH=new af();aH._$r=aI;q._$fT[aI]=aH;}aH._$0S=P.getSystemTimeMSec();};q.dump=function(aJ){var aH=q._$fT[aJ];if(aH!=null){var aI=P.getSystemTimeMSec();var aK=aI-aH._$0S;__NONECONSOLE.log(aJ+" : "+aK+"ms");return aK;}else{return -1;}};q.end=function(aJ){var aH=q._$fT[aJ];if(aH!=null){var aI=P.getSystemTimeMSec();return aI-aH._$0S;}else{return -1;}};q._$li=function(aI,aH){__NONECONSOLE.log("_$li : "+aI+"\\n",aH);};q._$Ji=function(aI,aH){__NONECONSOLE.log(aI,aH);};q._$dL=function(aI,aH){__NONECONSOLE.log(aI,aH);__NONECONSOLE.log("\\n");};q._$KL=function(aJ,aI){for(var aH=0;aH<aI;aH++){if(aH%16==0&&aH>0){__NONECONSOLE.log("\\n");}else{if(aH%8==0&&aH>0){__NONECONSOLE.log("  ");}}__NONECONSOLE.log("%02X ",(aJ[aH]&255));}__NONECONSOLE.log("\\n");};q._$nr=function(aL,aI,aK){__NONECONSOLE.log("%s\\n",aL);var aH=aI.length;for(var aJ=0;aJ<aH;++aJ){__NONECONSOLE.log("%5d",aI[aJ]);__NONECONSOLE.log("%s\\n",aK);__NONECONSOLE.log(",");}__NONECONSOLE.log("\\n");};q._$Rb=function(aH){__NONECONSOLE.log("dump exception : "+aH);__NONECONSOLE.log("stack :: "+aH.stack);};function af(){this._$r=null;this._$0S=null;}function F(){if(j){return;}this.x=null;this.y=null;this.width=null;this.height=null;}F.prototype._$8P=function(){return 0.5*(this.x+this.x+this.width);};F.prototype._$6P=function(){return 0.5*(this.y+this.y+this.height);};F.prototype._$EL=function(){return this.x+this.width;};F.prototype._$5T=function(){return this.y+this.height;};F.prototype._$jL=function(aI,aK,aJ,aH){this.x=aI;this.y=aK;this.width=aJ;this.height=aH;};F.prototype._$jL=function(aH){this.x=aH.x;this.y=aH.y;this.width=aH.width;this.height=aH.height;};function i(aH){if(j){return;}ak.prototype.constructor.call(this,aH);}i.prototype=new ak();i._$tP=new Object();i._$27=function(){i._$tP.clear();};i.getID=function(aH){var aI=i._$tP[aH];if(aI==null){aI=new i(aH);i._$tP[aH]=aI;}return aI;};i.prototype._$3s=function(){return new i();};function S(){}function z(aH){if(j){return;}ak.prototype.constructor.call(this,aH);}z.prototype=new ak();z._$tP=new Object();z._$27=function(){z._$tP.clear();};z.getID=function(aH){var aI=z._$tP[aH];if(aI==null){aI=new z(aH);z._$tP[aH]=aI;}return aI;};z.prototype._$3s=function(){return new z();};function w(){if(j){return;}this._$vo=null;this._$F2=null;this._$ao=400;this._$1S=400;w._$42++;}w._$42=0;w.prototype._$zP=function(){if(this._$vo==null){this._$vo=new an();}if(this._$F2==null){this._$F2=new Array();}};w.prototype.getCanvasWidth=function(){return this._$ao;};w.prototype.getCanvasHeight=function(){return this._$1S;};w.prototype._$F0=function(aH){this._$vo=aH._$nP();this._$F2=aH._$nP();this._$ao=aH._$6L();this._$1S=aH._$6L();};w.prototype._$6S=function(aH){this._$F2.push(aH);};w.prototype._$Xr=function(){return this._$F2;};w.prototype._$E2=function(){return this._$vo;};function u(){if(j){return;}this.p1=new N();this.p2=new N();this._$Fo=0;this._$Db=0;this._$L2=0;this._$M2=0;this._$ks=0;this._$9b=0;this._$iP=0;this._$iT=0;this._$lL=new Array();this._$qP=new Array();this.setup(0.3,0.5,0.1);}u.prototype.setup=function(aJ,aI,aH){this._$ks=this._$Yb();this.p2._$xT();if(arguments.length==3){this._$Fo=aJ;this._$L2=aI;this.p1._$p=aH;this.p2._$p=aH;this.p2.y=aJ;this.setup();}};u.prototype.getPhysicsPoint1=function(){return this.p1;};u.prototype.getPhysicsPoint2=function(){return this.p2;};u.prototype._$qr=function(){return this._$Db;};u.prototype._$pr=function(aH){this._$Db=aH;};u.prototype._$5r=function(){return this._$M2;};u.prototype._$Cs=function(){return this._$9b;};u.prototype._$Yb=function(){return(-180*(Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y)))/Math.PI);};u.prototype.addSrcParam=function(aJ,aH,aL,aI){var aK=new h(aJ,aH,aL,aI);this._$lL.push(aK);};u.prototype.addTargetParam=function(aJ,aH,aK,aI){var aL=new aF(aJ,aH,aK,aI);this._$qP.push(aL);};u.prototype.update=function(aI,aL){if(this._$iP==0){this._$iP=this._$iT=aL;this._$Fo=(Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));return;}var aK=(aL-this._$iT)/1000;if(aK!=0){for(var aJ=this._$lL.length-1;aJ>=0;--aJ){var aM=this._$lL[aJ];aM._$oP(aI,this);}this._$oo(aI,aK);this._$M2=this._$Yb();this._$9b=(this._$M2-this._$ks)/aK;this._$ks=this._$M2;}for(var aJ=this._$qP.length-1;aJ>=0;--aJ){var aH=this._$qP[aJ];aH._$YS(aI,this);}this._$iT=aL;};u.prototype._$oo=function(aN,aI){if(aI<0.033){aI=0.033;}var aU=1/aI;this.p1.vx=(this.p1.x-this.p1._$s0)*aU;this.p1.vy=(this.p1.y-this.p1._$70)*aU;this.p1.ax=(this.p1.vx-this.p1._$7L)*aU;this.p1.ay=(this.p1.vy-this.p1._$HL)*aU;this.p1.fx=this.p1.ax*this.p1._$p;this.p1.fy=this.p1.ay*this.p1._$p;this.p1._$xT();var aM=-(Math.atan2((this.p1.y-this.p2.y),this.p1.x-this.p2.x));var aL;var aV;var aR=Math.cos(aM);var aH=Math.sin(aM);var aW=9.8*this.p2._$p;var aQ=(this._$Db*aC._$bS);var aP=(aW*Math.cos(aM-aQ));aL=(aP*aH);aV=(aP*aR);var aK=(-this.p1.fx*aH*aH);var aT=(-this.p1.fy*aH*aR);var aJ=((-this.p2.vx*this._$L2));var aS=((-this.p2.vy*this._$L2));this.p2.fx=((aL+aK+aJ));this.p2.fy=((aV+aT+aS));this.p2.ax=this.p2.fx/this.p2._$p;this.p2.ay=this.p2.fy/this.p2._$p;this.p2.vx+=this.p2.ax*aI;this.p2.vy+=this.p2.ay*aI;this.p2.x+=this.p2.vx*aI;this.p2.y+=this.p2.vy*aI;var aO=(Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/aO;this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/aO;this.p2.vx=(this.p2.x-this.p2._$s0)*aU;this.p2.vy=(this.p2.y-this.p2._$70)*aU;this.p2._$xT();};function N(){this._$p=1;this.x=0;this.y=0;this.vx=0;this.vy=0;this.ax=0;this.ay=0;this.fx=0;this.fy=0;this._$s0=0;this._$70=0;this._$7L=0;this._$HL=0;}N.prototype._$xT=function(){this._$s0=this.x;this._$70=this.y;this._$7L=this.vx;this._$HL=this.vy;};function at(aJ,aI,aH){this._$wL=null;this.scale=null;this._$V0=null;this._$wL=aJ;this.scale=aI;this._$V0=aH;}at.prototype._$oP=function(aI,aH){};function h(aJ,aK,aI,aH){at.prototype.constructor.call(this,aK,aI,aH);this._$tL=null;this._$tL=aJ;}h.prototype=new at();h.prototype._$oP=function(aJ,aH){var aK=this.scale*aJ.getParamFloat(this._$wL);var aL=aH.getPhysicsPoint1();switch(this._$tL){default:case u.Src.SRC_TO_X:aL.x=aL.x+(aK-aL.x)*this._$V0;break;case u.Src.SRC_TO_Y:aL.y=aL.y+(aK-aL.y)*this._$V0;break;case u.Src.SRC_TO_G_ANGLE:var aI=aH._$qr();aI=aI+(aK-aI)*this._$V0;aH._$pr(aI);break;}};function d(aJ,aI,aH){this._$wL=null;this.scale=null;this._$V0=null;this._$wL=aJ;this.scale=aI;this._$V0=aH;}d.prototype._$YS=function(aI,aH){};function aF(aI,aK,aJ,aH){d.prototype.constructor.call(this,aK,aJ,aH);this._$YP=null;this._$YP=aI;}aF.prototype=new d();aF.prototype._$YS=function(aI,aH){switch(this._$YP){default:case u.Target.TARGET_FROM_ANGLE:aI.setParamFloat(this._$wL,this.scale*aH._$5r(),this._$V0);break;case u.Target.TARGET_FROM_ANGLE_V:aI.setParamFloat(this._$wL,this.scale*aH._$Cs(),this._$V0);break;}};u.Src=function(){};u.Src.SRC_TO_X="SRC_TO_X";u.Src.SRC_TO_Y="SRC_TO_Y";u.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE";u.Target=function(){};u.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE";u.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V";function X(){if(j){return;}this._$fL=0;this._$gL=0;this._$B0=1;this._$z0=1;this._$qT=0;this.reflectX=false;this.reflectY=false;}X.prototype.init=function(aH){this._$fL=aH._$fL;this._$gL=aH._$gL;this._$B0=aH._$B0;this._$z0=aH._$z0;this._$qT=aH._$qT;this.reflectX=aH.reflectX;this.reflectY=aH.reflectY;};X.prototype._$F0=function(aH){this._$fL=aH._$_T();this._$gL=aH._$_T();this._$B0=aH._$_T();this._$z0=aH._$_T();this._$qT=aH._$_T();if(aH.getFormatVersion()>=ay.LIVE2D_FORMAT_VERSION_V2_10_SDK2){this.reflectX=aH._$po();this.reflectY=aH._$po();}};X.prototype._$e=function(){};var ad=function(){};ad._$ni=function(aL,aJ,aR,aQ,aK,aI,aH,aS,aN){var aM=(aH*aI-aS*aK);if(aM==0){return null;}else{var aO=((aL-aR)*aI-(aJ-aQ)*aK)/aM;var aP;if(aK!=0){aP=(aL-aR-aO*aH)/aK;}else{aP=(aJ-aQ-aO*aS)/aI;}if(isNaN(aP)){aP=(aL-aR-aO*aH)/aK;if(isNaN(aP)){aP=(aJ-aQ-aO*aS)/aI;}if(isNaN(aP)){__NONECONSOLE.log("a is NaN @UtVector#_$ni() ");__NONECONSOLE.log("v1x : "+aK);__NONECONSOLE.log("v1x != 0 ? "+(aK!=0));}}if(aN==null){return new Array(aP,aO);}else{aN[0]=aP;aN[1]=aO;return aN;}}};function av(){if(j){return;}this.x=null;this.y=null;this.width=null;this.height=null;}av.prototype._$8P=function(){return this.x+0.5*this.width;};av.prototype._$6P=function(){return this.y+0.5*this.height;};av.prototype._$EL=function(){return this.x+this.width;};av.prototype._$5T=function(){return this.y+this.height;};av.prototype._$jL=function(aI,aK,aJ,aH){this.x=aI;this.y=aK;this.width=aJ;this.height=aH;};av.prototype._$jL=function(aH){this.x=aH.x;this.y=aH.y;this.width=aH.width;this.height=aH.height;};av.prototype.contains=function(aH,aI){return this.x<=this.x&&this.y<=this.y&&(this.x<=this.x+this.width)&&(this.y<=this.y+this.height);};av.prototype.expand=function(aH,aI){this.x-=aH;this.y-=aI;this.width+=aH*2;this.height+=aI*2;};function aG(){}aG._$Z2=function(bb,bo,bp,a2){var a1=bo._$Q2(bb,bp);var a3=bb._$vs();var ba=bb._$Tr();bo._$zr(a3,ba,a1);if(a1<=0){return a2[a3[0]];}else{if(a1==1){var bj=a2[a3[0]];var bi=a2[a3[1]];var a9=ba[0];return(bj+(bi-bj)*a9)|0;}else{if(a1==2){var bj=a2[a3[0]];var bi=a2[a3[1]];var a0=a2[a3[2]];var aZ=a2[a3[3]];var a9=ba[0];var a8=ba[1];var br=(bj+(bi-bj)*a9)|0;var bq=(a0+(aZ-a0)*a9)|0;return(br+(bq-br)*a8)|0;}else{if(a1==3){var aP=a2[a3[0]];var aO=a2[a3[1]];var bn=a2[a3[2]];var bm=a2[a3[3]];var aK=a2[a3[4]];var aJ=a2[a3[5]];var bg=a2[a3[6]];var bf=a2[a3[7]];var a9=ba[0];var a8=ba[1];var a6=ba[2];var bj=(aP+(aO-aP)*a9)|0;var bi=(bn+(bm-bn)*a9)|0;var a0=(aK+(aJ-aK)*a9)|0;var aZ=(bg+(bf-bg)*a9)|0;var br=(bj+(bi-bj)*a8)|0;var bq=(a0+(aZ-a0)*a8)|0;return(br+(bq-br)*a6)|0;}else{if(a1==4){var aT=a2[a3[0]];var aS=a2[a3[1]];var bu=a2[a3[2]];var bt=a2[a3[3]];var aN=a2[a3[4]];var aM=a2[a3[5]];var bl=a2[a3[6]];var bk=a2[a3[7]];var be=a2[a3[8]];var bc=a2[a3[9]];var aX=a2[a3[10]];var aW=a2[a3[11]];var a7=a2[a3[12]];var a5=a2[a3[13]];var aR=a2[a3[14]];var aQ=a2[a3[15]];var a9=ba[0];var a8=ba[1];var a6=ba[2];var a4=ba[3];var aP=(aT+(aS-aT)*a9)|0;var aO=(bu+(bt-bu)*a9)|0;var bn=(aN+(aM-aN)*a9)|0;var bm=(bl+(bk-bl)*a9)|0;var aK=(be+(bc-be)*a9)|0;var aJ=(aX+(aW-aX)*a9)|0;var bg=(a7+(a5-a7)*a9)|0;var bf=(aR+(aQ-aR)*a9)|0;var bj=(aP+(aO-aP)*a8)|0;var bi=(bn+(bm-bn)*a8)|0;var a0=(aK+(aJ-aK)*a8)|0;var aZ=(bg+(bf-bg)*a8)|0;var br=(bj+(bi-bj)*a6)|0;var bq=(a0+(aZ-a0)*a6)|0;return(br+(bq-br)*a4)|0;}else{var aV=1<<a1;var aY=new Float32Array(aV);for(var bh=0;bh<aV;bh++){var aI=bh;var aH=1;for(var aL=0;aL<a1;aL++){aH*=(aI%2==0)?(1-ba[aL]):ba[aL];aI/=2;}aY[bh]=aH;}var bs=new Float32Array(aV);for(var aU=0;aU<aV;aU++){bs[aU]=a2[a3[aU]];}var bd=0;for(var aU=0;aU<aV;aU++){bd+=aY[aU]*bs[aU];}return(bd+0.5)|0;}}}}}};aG._$br=function(ba,bo,bp,bg){var a1=bo._$Q2(ba,bp);var a2=ba._$vs();var a9=ba._$Tr();bo._$zr(a2,a9,a1);if(a1<=0){return bg[a2[0]];}else{if(a1==1){var bj=bg[a2[0]];var bi=bg[a2[1]];var a8=a9[0];return bj+(bi-bj)*a8;}else{if(a1==2){var bj=bg[a2[0]];var bi=bg[a2[1]];var a0=bg[a2[2]];var aZ=bg[a2[3]];var a8=a9[0];var a7=a9[1];return(1-a7)*(bj+(bi-bj)*a8)+a7*(a0+(aZ-a0)*a8);}else{if(a1==3){var aP=bg[a2[0]];var aO=bg[a2[1]];var bn=bg[a2[2]];var bm=bg[a2[3]];var aK=bg[a2[4]];var aJ=bg[a2[5]];var bf=bg[a2[6]];var be=bg[a2[7]];var a8=a9[0];var a7=a9[1];var a5=a9[2];return(1-a5)*((1-a7)*(aP+(aO-aP)*a8)+a7*(bn+(bm-bn)*a8))+a5*((1-a7)*(aK+(aJ-aK)*a8)+a7*(bf+(be-bf)*a8));}else{if(a1==4){var aT=bg[a2[0]];var aS=bg[a2[1]];var bs=bg[a2[2]];var br=bg[a2[3]];var aN=bg[a2[4]];var aM=bg[a2[5]];var bl=bg[a2[6]];var bk=bg[a2[7]];var bd=bg[a2[8]];var bb=bg[a2[9]];var aX=bg[a2[10]];var aW=bg[a2[11]];var a6=bg[a2[12]];var a4=bg[a2[13]];var aR=bg[a2[14]];var aQ=bg[a2[15]];var a8=a9[0];var a7=a9[1];var a5=a9[2];var a3=a9[3];return(1-a3)*((1-a5)*((1-a7)*(aT+(aS-aT)*a8)+a7*(bs+(br-bs)*a8))+a5*((1-a7)*(aN+(aM-aN)*a8)+a7*(bl+(bk-bl)*a8)))+a3*((1-a5)*((1-a7)*(bd+(bb-bd)*a8)+a7*(aX+(aW-aX)*a8))+a5*((1-a7)*(a6+(a4-a6)*a8)+a7*(aR+(aQ-aR)*a8)));}else{var aV=1<<a1;var aY=new Float32Array(aV);for(var bh=0;bh<aV;bh++){var aI=bh;var aH=1;for(var aL=0;aL<a1;aL++){aH*=(aI%2==0)?(1-a9[aL]):a9[aL];aI/=2;}aY[bh]=aH;}var bq=new Float32Array(aV);for(var aU=0;aU<aV;aU++){bq[aU]=bg[a2[aU]];}var bc=0;for(var aU=0;aU<aV;aU++){bc+=aY[aU]*bq[aU];}return bc;}}}}}};aG._$Vr=function(bV,bW,a5,aI,bC,a3,bX,bH){var aN=bW._$Q2(bV,a5);var bw=bV._$vs();var a2=bV._$Tr();bW._$zr(bw,a2,aN);var aJ=aI*2;var aQ=bX;if(aN<=0){var bI=bw[0];var bq=bC[bI];if(bH==2&&bX==0){P._$jT(bq,0,a3,0,aJ);}else{for(var bt=0;bt<aJ;){a3[aQ]=bq[bt++];a3[aQ+1]=bq[bt++];aQ+=bH;}}}else{if(aN==1){var bq=bC[bw[0]];var bp=bC[bw[1]];var b3=a2[0];var bT=1-b3;for(var bt=0;bt<aJ;){a3[aQ]=bq[bt]*bT+bp[bt]*b3;++bt;a3[aQ+1]=bq[bt]*bT+bp[bt]*b3;++bt;aQ+=bH;}}else{if(aN==2){var bq=bC[bw[0]];var bp=bC[bw[1]];var aZ=bC[bw[2]];var aY=bC[bw[3]];var b3=a2[0];var b1=a2[1];var bT=1-b3;var bP=1-b1;var b2=bP*bT;var b0=bP*b3;var bM=b1*bT;var bL=b1*b3;for(var bt=0;bt<aJ;){a3[aQ]=b2*bq[bt]+b0*bp[bt]+bM*aZ[bt]+bL*aY[bt];++bt;a3[aQ+1]=b2*bq[bt]+b0*bp[bt]+bM*aZ[bt]+bL*aY[bt];++bt;aQ+=bH;}}else{if(aN==3){var ba=bC[bw[0]];var a9=bC[bw[1]];var aP=bC[bw[2]];var aO=bC[bw[3]];var a6=bC[bw[4]];var a4=bC[bw[5]];var aL=bC[bw[6]];var aK=bC[bw[7]];var b3=a2[0];var b1=a2[1];var bZ=a2[2];var bT=1-b3;var bP=1-b1;var bN=1-bZ;var b8=bN*bP*bT;var b7=bN*bP*b3;var bU=bN*b1*bT;var bS=bN*b1*b3;var b6=bZ*bP*bT;var b5=bZ*bP*b3;var bQ=bZ*b1*bT;var bO=bZ*b1*b3;for(var bt=0;bt<aJ;){a3[aQ]=b8*ba[bt]+b7*a9[bt]+bU*aP[bt]+bS*aO[bt]+b6*a6[bt]+b5*a4[bt]+bQ*aL[bt]+bO*aK[bt];++bt;a3[aQ+1]=b8*ba[bt]+b7*a9[bt]+bU*aP[bt]+bS*aO[bt]+b6*a6[bt]+b5*a4[bt]+bQ*aL[bt]+bO*aK[bt];++bt;aQ+=bH;}}else{if(aN==4){var bD=bC[bw[0]];var bB=bC[bw[1]];var bo=bC[bw[2]];var bm=bC[bw[3]];var by=bC[bw[4]];var bx=bC[bw[5]];var be=bC[bw[6]];var bd=bC[bw[7]];var bG=bC[bw[8]];var bE=bC[bw[9]];var bv=bC[bw[10]];var bu=bC[bw[11]];var bA=bC[bw[12]];var bz=bC[bw[13]];var bn=bC[bw[14]];var bl=bC[bw[15]];var b3=a2[0];var b1=a2[1];var bZ=a2[2];var bY=a2[3];var bT=1-b3;var bP=1-b1;var bN=1-bZ;var bK=1-bY;var bk=bK*bN*bP*bT;var bi=bK*bN*bP*b3;var aW=bK*bN*b1*bT;var aV=bK*bN*b1*b3;var bc=bK*bZ*bP*bT;var bb=bK*bZ*bP*b3;var aS=bK*bZ*b1*bT;var aR=bK*bZ*b1*b3;var bs=bY*bN*bP*bT;var br=bY*bN*bP*b3;var a1=bY*bN*b1*bT;var a0=bY*bN*b1*b3;var bh=bY*bZ*bP*bT;var bf=bY*bZ*bP*b3;var aU=bY*bZ*b1*bT;var aT=bY*bZ*b1*b3;for(var bt=0;bt<aJ;){a3[aQ]=bk*bD[bt]+bi*bB[bt]+aW*bo[bt]+aV*bm[bt]+bc*by[bt]+bb*bx[bt]+aS*be[bt]+aR*bd[bt]+bs*bG[bt]+br*bE[bt]+a1*bv[bt]+a0*bu[bt]+bh*bA[bt]+bf*bz[bt]+aU*bn[bt]+aT*bl[bt];++bt;a3[aQ+1]=bk*bD[bt]+bi*bB[bt]+aW*bo[bt]+aV*bm[bt]+bc*by[bt]+bb*bx[bt]+aS*be[bt]+aR*bd[bt]+bs*bG[bt]+br*bE[bt]+a1*bv[bt]+a0*bu[bt]+bh*bA[bt]+bf*bz[bt]+aU*bn[bt]+aT*bl[bt];++bt;aQ+=bH;}}else{var b4=1<<aN;var bJ=new Float32Array(b4);for(var bj=0;bj<b4;bj++){var aH=bj;var aM=1;for(var bF=0;bF<aN;bF++){aM*=(aH%2==0)?(1-a2[bF]):a2[bF];aH/=2;}bJ[bj]=aM;}var bg=new Float32Array(b4);for(var aX=0;aX<b4;aX++){bg[aX]=bC[bw[aX]];}for(var bt=0;bt<aJ;){var a8=0,a7=0;var bR=bt+1;for(var aX=0;aX<b4;aX++){a8+=bJ[aX]*bg[aX][bt];a7+=bJ[aX]*bg[aX][bR];}bt+=2;a3[aQ]=a8;a3[aQ+1]=a7;aQ+=bH;}}}}}}};function e(){if(j){return;}this.x=null;this.y=null;}e.prototype._$HT=function(aH,aI){this.x=aH;this.y=aI;};e.prototype._$HT=function(aH){this.x=aH.x;this.y=aH.y;};function ae(){if(j){return;}this._$gP=null;this._$dr=null;this._$GS=null;this._$qb=null;this._$Lb=null;this._$mS=null;this.clipID=null;this.clipIDList=new Array();}ae._$ur=-2;ae._$ES=500;ae._$wb=2;ae._$8S=3;ae._$52=ae._$ES;ae._$R2=ae._$ES;ae._$or=function(){return ae._$52;};ae._$Pr=function(){return ae._$R2;};ae.prototype.convertClipIDForV2_11=function(aI){var aH=[];if(aI==null){return null;}if(aI.length==0){return null;}if(!/,/.test(aI)){aH.push(aI.id);return aH;}aH=aI.id.split(",");return aH;};ae.prototype._$F0=function(aH){this._$gP=aH._$nP();this._$dr=aH._$nP();this._$GS=aH._$nP();this._$qb=aH._$6L();this._$Lb=aH._$cS();this._$mS=aH._$Tb();if(aH.getFormatVersion()>=ay._$T7){this.clipID=aH._$nP();this.clipIDList=this.convertClipIDForV2_11(this.clipID);}else{this.clipIDList=[];}this._$MS(this._$Lb);};ae.prototype.getClipIDList=function(){return this.clipIDList;};ae.prototype.init=function(aH){};ae.prototype._$Nr=function(aH,aI){aI._$IS[0]=false;aI._$Us=aG._$Z2(aH,this._$GS,aI._$IS,this._$Lb);if(Q._$Zs){}else{if(aI._$IS[0]){return;}}aI._$7s=aG._$br(aH,this._$GS,aI._$IS,this._$mS);};ae.prototype._$2b=function(aH,aI){};ae.prototype.getDrawDataID=function(){return this._$gP;};ae.prototype._$j2=function(aH){this._$gP=aH;};ae.prototype.getOpacity=function(aH,aI){return aI._$7s;};ae.prototype._$zS=function(aH,aI){return aI._$Us;};ae.prototype._$MS=function(aJ){for(var aI=aJ.length-1;aI>=0;--aI){var aH=aJ[aI];if(aH<ae._$52){ae._$52=aH;}else{if(aH>ae._$R2){ae._$R2=aH;}}}};ae.prototype.getTargetBaseDataID=function(){return this._$dr;};ae.prototype._$gs=function(aH){this._$dr=aH;};ae.prototype._$32=function(){return(this._$dr!=null&&(this._$dr!=n._$2o()));};ae.prototype.preDraw=function(aJ,aH,aI){};ae.prototype.draw=function(aJ,aH,aI){};ae.prototype.getType=function(){};ae.prototype._$B2=function(aI,aH,aJ){};function ax(){if(j){return;}this._$Eb=ax._$ps;this._$lT=1;this._$C0=1;this._$tT=1;this._$WL=1;this.culling=false;this.matrix4x4=new Float32Array(16);this.premultipliedAlpha=false;this.anisotropy=0;this.clippingProcess=ax.CLIPPING_PROCESS_NONE;this.clipBufPre_clipContextMask=null;this.clipBufPre_clipContextDraw=null;this.CHANNEL_COLORS=new Array();}ax._$ps=32;ax.CLIPPING_PROCESS_NONE=0;ax.CLIPPING_PROCESS_OVERWRITE_ALPHA=1;ax.CLIPPING_PROCESS_MULTIPLY_ALPHA=2;ax.CLIPPING_PROCESS_DRAW=3;ax.CLIPPING_PROCESS_CLEAR_ALPHA=4;ax.prototype.setChannelFlagAsColor=function(aH,aI){this.CHANNEL_COLORS[aH]=aI;};ax.prototype.getChannelFlagAsColor=function(aH){return this.CHANNEL_COLORS[aH];};ax.prototype._$ZT=function(){};ax.prototype._$Uo=function(aM,aK,aJ,aL,aN,aI,aH){};ax.prototype._$Rs=function(){return -1;};ax.prototype._$Ds=function(aH){};ax.prototype.setBaseColor=function(aK,aJ,aI,aH){if(aK<0){aK=0;}else{if(aK>1){aK=1;}}if(aJ<0){aJ=0;}else{if(aJ>1){aJ=1;}}if(aI<0){aI=0;}else{if(aI>1){aI=1;}}if(aH<0){aH=0;}else{if(aH>1){aH=1;}}this._$lT=aK;this._$C0=aJ;this._$tT=aI;this._$WL=aH;};ax.prototype._$WP=function(aH){this.culling=aH;};ax.prototype.setMatrix=function(aH){for(var aI=0;aI<16;aI++){this.matrix4x4[aI]=aH[aI];}};ax.prototype._$IT=function(){return this.matrix4x4;};ax.prototype.setPremultipliedAlpha=function(aH){this.premultipliedAlpha=aH;};ax.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha;};ax.prototype.setAnisotropy=function(aH){this.anisotropy=aH;};ax.prototype.getAnisotropy=function(){return this.anisotropy;};ax.prototype.getClippingProcess=function(){return this.clippingProcess;};ax.prototype.setClippingProcess=function(aH){this.clippingProcess=aH;};ax.prototype.setClipBufPre_clipContextForMask=function(aH){this.clipBufPre_clipContextMask=aH;};ax.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask;};ax.prototype.setClipBufPre_clipContextForDraw=function(aH){this.clipBufPre_clipContextDraw=aH;};ax.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw;};function o(){if(j){return;}this.a=1;this.r=1;this.g=1;this.b=1;this.scale=1;this._$ho=1;this.blendMode=Q.L2D_COLOR_BLEND_MODE_MULT;}function c(){if(j){return;}this._$kP=null;this._$dr=null;this._$Ai=true;this._$mS=null;}c._$ur=-2;c._$c2=1;c._$_b=2;c.prototype._$F0=function(aH){this._$kP=aH._$nP();this._$dr=aH._$nP();};c.prototype.readV2_opacity=function(aH){if(aH.getFormatVersion()>=ay.LIVE2D_FORMAT_VERSION_V2_10_SDK2){this._$mS=aH._$Tb();}};c.prototype.init=function(aH){};c.prototype._$Nr=function(aI,aH){};c.prototype.interpolateOpacity=function(aJ,aK,aI,aH){if(this._$mS==null){aI.setInterpolatedOpacity(1);}else{aI.setInterpolatedOpacity(aG._$br(aJ,aK,aH,this._$mS));}};c.prototype._$2b=function(aI,aH){};c.prototype._$nb=function(aL,aK,aM,aH,aI,aJ,aN){};c.prototype.getType=function(){};c.prototype._$gs=function(aH){this._$dr=aH;};c.prototype._$a2=function(aH){this._$kP=aH;};c.prototype.getTargetBaseDataID=function(){return this._$dr;};c.prototype.getBaseDataID=function(){return this._$kP;};c.prototype._$32=function(){return(this._$dr!=null&&(this._$dr!=n._$2o()));};function P(){}P._$W2=0;P._$CS=P._$W2;P._$Mo=function(){return true;};P._$XP=function(aI){try{var aJ=getTimeMSec();while(getTimeMSec()-aJ<aI){}}catch(aH){aH._$Rb();}};P.getUserTimeMSec=function(){return(P._$CS==P._$W2)?P.getSystemTimeMSec():P._$CS;};P.setUserTimeMSec=function(aH){P._$CS=aH;};P.updateUserTimeMSec=function(){return(P._$CS=P.getSystemTimeMSec());};P.getTimeMSec=function(){return new Date().getTime();};P.getSystemTimeMSec=function(){return new Date().getTime();};P._$Q=function(aH){};P._$jT=function(aM,aJ,aI,aL,aH){for(var aK=0;aK<aH;aK++){aI[aL+aK]=aM[aJ+aK];}};function aA(){if(j){return;}this._$VP=0;this._$wL=null;this._$GP=null;this._$8o=aA._$ds;this._$2r=-1;this._$O2=0;this._$ri=0;}aA._$ds=-2;aA.prototype._$F0=function(aH){this._$wL=aH._$nP();this._$VP=aH._$6L();this._$GP=aH._$nP();};aA.prototype.getParamIndex=function(aH){if(this._$2r!=aH){this._$8o=aA._$ds;}return this._$8o;};aA.prototype._$Pb=function(aI,aH){this._$8o=aI;this._$2r=aH;};aA.prototype.getParamID=function(){return this._$wL;};aA.prototype._$yP=function(aH){this._$wL=aH;};aA.prototype._$N2=function(){return this._$VP;};aA.prototype._$d2=function(){return this._$GP;};aA.prototype._$t2=function(aI,aH){this._$VP=aI;this._$GP=aH;};aA.prototype._$Lr=function(){return this._$O2;};aA.prototype._$wr=function(aH){this._$O2=aH;};aA.prototype._$SL=function(){return this._$ri;};aA.prototype._$AL=function(aH){this._$ri=aH;};function G(){}G.startsWith=function(aJ,aL,aK){var aH=aL+aK.length;if(aH>=aJ.length){return false;}for(var aI=aL;aI<aH;aI++){if(G.getChar(aJ,aI)!=aK.charAt(aI-aL)){return false;}}return true;};G.getChar=function(aI,aH){return String.fromCharCode(aI.getUint8(aH));};G.createString=function(aM,aL,aJ){var aH=new ArrayBuffer(aJ*2);var aK=new Uint16Array(aH);for(var aI=0;aI<aJ;aI++){aK[aI]=aM.getUint8(aL+aI);}return String.fromCharCode.apply(null,aK);};G._$LS=function(aP,aM,aR,aK){if(aP instanceof ArrayBuffer){aP=new DataView(aP);}var aL=aR;var aJ=false;var aQ=false;var aS=0;var aO=G.getChar(aP,aL);if(aO=="-"){aJ=true;aL++;}var aN=false;for(;aL<aM;aL++){aO=G.getChar(aP,aL);switch(aO){case"0":aS=aS*10;break;case"1":aS=aS*10+1;break;case"2":aS=aS*10+2;break;case"3":aS=aS*10+3;break;case"4":aS=aS*10+4;break;case"5":aS=aS*10+5;break;case"6":aS=aS*10+6;break;case"7":aS=aS*10+7;break;case"8":aS=aS*10+8;break;case"9":aS=aS*10+9;break;case".":aQ=true;aL++;aN=true;break;default:aN=true;break;}if(aN){break;}}if(aQ){var aI=0.1;var aH=false;for(;aL<aM;aL++){aO=G.getChar(aP,aL);switch(aO){case"0":break;case"1":aS+=aI*1;break;case"2":aS+=aI*2;break;case"3":aS+=aI*3;break;case"4":aS+=aI*4;break;case"5":aS+=aI*5;break;case"6":aS+=aI*6;break;case"7":aS+=aI*7;break;case"8":aS+=aI*8;break;case"9":aS+=aI*9;break;default:aH=true;break;}aI*=0.1;if(aH){break;}}}if(aJ){aS=-aS;}aK[0]=aL;return aS;};function g(){if(j){return;}this._$Ob=null;}g.prototype._$zP=function(){this._$Ob=new Array();};g.prototype._$F0=function(aH){this._$Ob=aH._$nP();};g.prototype._$Ur=function(aK){if(aK._$WS()){return true;}var aH=aK._$v2();for(var aJ=this._$Ob.length-1;aJ>=0;--aJ){var aI=this._$Ob[aJ].getParamIndex(aH);if(aI==aA._$ds){aI=aK.getParamIndex(this._$Ob[aJ].getParamID());}if(aK._$Xb(aI)){return true;}}return false;};g.prototype._$Q2=function(aL,aV){var aX=this._$Ob.length;var aJ=aL._$v2();var aN=0;var aI;var aQ;for(var aK=0;aK<aX;aK++){var aH=this._$Ob[aK];aI=aH.getParamIndex(aJ);if(aI==aA._$ds){aI=aL.getParamIndex(aH.getParamID());aH._$Pb(aI,aJ);}if(aI<0){throw new Exception("err 23242 : "+aH.getParamID());}var aU=aI<0?0:aL.getParamFloat(aI);aQ=aH._$N2();var aM=aH._$d2();var aP=-1;var aT=0;var aS;var aR;if(aQ<1){}else{if(aQ==1){aS=aM[0];if(aS-aw._$J<aU&&aU<aS+aw._$J){aP=0;aT=0;}else{aP=0;aV[0]=true;}}else{aS=aM[0];if(aU<aS-aw._$J){aP=0;aV[0]=true;}else{if(aU<aS+aw._$J){aP=0;}else{var aW=false;for(var aO=1;aO<aQ;++aO){aR=aM[aO];if(aU<aR+aw._$J){if(aR-aw._$J<aU){aP=aO;}else{aP=aO-1;aT=(aU-aS)/(aR-aS);aN++;}aW=true;break;}aS=aR;}if(!aW){aP=aQ-1;aT=0;aV[0]=true;}}}}}aH._$wr(aP);aH._$AL(aT);}return aN;};g.prototype._$zr=function(aN,aT,aP){var aR=1<<aP;if(aR+1>aw._$Qb){__NONECONSOLE.log("err 23245\\n");}var aS=this._$Ob.length;var aK=1;var aH=1;var aJ=0;for(var aQ=0;aQ<aR;++aQ){aN[aQ]=0;}for(var aL=0;aL<aS;++aL){var aI=this._$Ob[aL];if(aI._$SL()==0){var aO=aI._$Lr()*aK;if(aO<0&&Q._$3T){throw new Exception("err 23246");}for(var aQ=0;aQ<aR;++aQ){aN[aQ]+=aO;}}else{var aO=aK*aI._$Lr();var aM=aK*(aI._$Lr()+1);for(var aQ=0;aQ<aR;++aQ){aN[aQ]+=((aQ/aH|0)%2==0)?aO:aM;}aT[aJ++]=aI._$SL();aH*=2;}aK*=aI._$N2();}aN[aR]=65535;aT[aJ]=-1;};g.prototype._$h2=function(aJ,aH,aK){var aM=new Float32Array(aH);for(var aL=0;aL<aH;++aL){aM[aL]=aK[aL];}var aI=new aA();aI._$yP(aJ);aI._$t2(aH,aM);this._$Ob.push(aI);};g.prototype._$J2=function(aO){var aN=aO;var aM=this._$Ob.length;for(var aK=0;aK<aM;++aK){var aI=this._$Ob[aK];var aH=aI._$N2();var aJ=aN%aI._$N2();var aL=aI._$d2()[aJ];__NONECONSOLE.log("%s[%d]=%7.2f / ",aI.getParamID(),aJ,aL);aN/=aH;}__NONECONSOLE.log("\\n");};g.prototype.getParamCount=function(){return this._$Ob.length;};g.prototype._$zs=function(){return this._$Ob;};function ac(){this.m=new Float32Array(16);this.identity();}ac.prototype.identity=function(){for(var aH=0;aH<16;aH++){this.m[aH]=((aH%5)==0)?1:0;}};ac.prototype.getArray=function(){return this.m;};ac.prototype.getCopyMatrix=function(){return new Float32Array(this.m);};ac.prototype.setMatrix=function(aI){if(aI==null||aI.length!=16){return;}for(var aH=0;aH<16;aH++){this.m[aH]=aI[aH];}};ac.prototype.mult=function(aH,aJ,aI){if(aJ==null){return null;}if(this==aJ){this.mult_safe(this.m,aH.m,aJ.m,aI);}else{this.mult_fast(this.m,aH.m,aJ.m,aI);}return aJ;};ac.prototype.mult_safe=function(aI,aH,aM,aJ){if(aI==aM){var aL=new Array(16);this.mult_fast(aI,aH,aL,aJ);for(var aK=15;aK>=0;--aK){aM[aK]=aL[aK];}}else{this.mult_fast(aI,aH,aM,aJ);}};ac.prototype.mult_fast=function(aI,aH,aK,aJ){if(aJ){aK[0]=aI[0]*aH[0]+aI[4]*aH[1]+aI[8]*aH[2];aK[4]=aI[0]*aH[4]+aI[4]*aH[5]+aI[8]*aH[6];aK[8]=aI[0]*aH[8]+aI[4]*aH[9]+aI[8]*aH[10];aK[12]=aI[0]*aH[12]+aI[4]*aH[13]+aI[8]*aH[14]+aI[12];aK[1]=aI[1]*aH[0]+aI[5]*aH[1]+aI[9]*aH[2];aK[5]=aI[1]*aH[4]+aI[5]*aH[5]+aI[9]*aH[6];aK[9]=aI[1]*aH[8]+aI[5]*aH[9]+aI[9]*aH[10];aK[13]=aI[1]*aH[12]+aI[5]*aH[13]+aI[9]*aH[14]+aI[13];aK[2]=aI[2]*aH[0]+aI[6]*aH[1]+aI[10]*aH[2];aK[6]=aI[2]*aH[4]+aI[6]*aH[5]+aI[10]*aH[6];aK[10]=aI[2]*aH[8]+aI[6]*aH[9]+aI[10]*aH[10];aK[14]=aI[2]*aH[12]+aI[6]*aH[13]+aI[10]*aH[14]+aI[14];aK[3]=aK[7]=aK[11]=0;aK[15]=1;}else{aK[0]=aI[0]*aH[0]+aI[4]*aH[1]+aI[8]*aH[2]+aI[12]*aH[3];aK[4]=aI[0]*aH[4]+aI[4]*aH[5]+aI[8]*aH[6]+aI[12]*aH[7];aK[8]=aI[0]*aH[8]+aI[4]*aH[9]+aI[8]*aH[10]+aI[12]*aH[11];aK[12]=aI[0]*aH[12]+aI[4]*aH[13]+aI[8]*aH[14]+aI[12]*aH[15];aK[1]=aI[1]*aH[0]+aI[5]*aH[1]+aI[9]*aH[2]+aI[13]*aH[3];aK[5]=aI[1]*aH[4]+aI[5]*aH[5]+aI[9]*aH[6]+aI[13]*aH[7];aK[9]=aI[1]*aH[8]+aI[5]*aH[9]+aI[9]*aH[10]+aI[13]*aH[11];aK[13]=aI[1]*aH[12]+aI[5]*aH[13]+aI[9]*aH[14]+aI[13]*aH[15];aK[2]=aI[2]*aH[0]+aI[6]*aH[1]+aI[10]*aH[2]+aI[14]*aH[3];aK[6]=aI[2]*aH[4]+aI[6]*aH[5]+aI[10]*aH[6]+aI[14]*aH[7];aK[10]=aI[2]*aH[8]+aI[6]*aH[9]+aI[10]*aH[10]+aI[14]*aH[11];aK[14]=aI[2]*aH[12]+aI[6]*aH[13]+aI[10]*aH[14]+aI[14]*aH[15];aK[3]=aI[3]*aH[0]+aI[7]*aH[1]+aI[11]*aH[2]+aI[15]*aH[3];aK[7]=aI[3]*aH[4]+aI[7]*aH[5]+aI[11]*aH[6]+aI[15]*aH[7];aK[11]=aI[3]*aH[8]+aI[7]*aH[9]+aI[11]*aH[10]+aI[15]*aH[11];aK[15]=aI[3]*aH[12]+aI[7]*aH[13]+aI[11]*aH[14]+aI[15]*aH[15];}};ac.prototype.translate=function(aH,aJ,aI){this.m[12]=this.m[0]*aH+this.m[4]*aJ+this.m[8]*aI+this.m[12];this.m[13]=this.m[1]*aH+this.m[5]*aJ+this.m[9]*aI+this.m[13];this.m[14]=this.m[2]*aH+this.m[6]*aJ+this.m[10]*aI+this.m[14];this.m[15]=this.m[3]*aH+this.m[7]*aJ+this.m[11]*aI+this.m[15];};ac.prototype.scale=function(aJ,aI,aH){this.m[0]*=aJ;this.m[4]*=aI;this.m[8]*=aH;this.m[1]*=aJ;this.m[5]*=aI;this.m[9]*=aH;this.m[2]*=aJ;this.m[6]*=aI;this.m[10]*=aH;this.m[3]*=aJ;this.m[7]*=aI;this.m[11]*=aH;};ac.prototype.rotateX=function(aH){var aK=aC.fcos(aH);var aJ=aC._$9(aH);var aI=this.m[4];this.m[4]=aI*aK+this.m[8]*aJ;this.m[8]=aI*-aJ+this.m[8]*aK;aI=this.m[5];this.m[5]=aI*aK+this.m[9]*aJ;this.m[9]=aI*-aJ+this.m[9]*aK;aI=this.m[6];this.m[6]=aI*aK+this.m[10]*aJ;this.m[10]=aI*-aJ+this.m[10]*aK;aI=this.m[7];this.m[7]=aI*aK+this.m[11]*aJ;this.m[11]=aI*-aJ+this.m[11]*aK;};ac.prototype.rotateY=function(aH){var aK=aC.fcos(aH);var aJ=aC._$9(aH);var aI=this.m[0];this.m[0]=aI*aK+this.m[8]*-aJ;this.m[8]=aI*aJ+this.m[8]*aK;aI=this.m[1];this.m[1]=aI*aK+this.m[9]*-aJ;this.m[9]=aI*aJ+this.m[9]*aK;aI=m[2];this.m[2]=aI*aK+this.m[10]*-aJ;this.m[10]=aI*aJ+this.m[10]*aK;aI=m[3];this.m[3]=aI*aK+this.m[11]*-aJ;this.m[11]=aI*aJ+this.m[11]*aK;};ac.prototype.rotateZ=function(aH){var aK=aC.fcos(aH);var aJ=aC._$9(aH);var aI=this.m[0];this.m[0]=aI*aK+this.m[4]*aJ;this.m[4]=aI*-aJ+this.m[4]*aK;aI=this.m[1];this.m[1]=aI*aK+this.m[5]*aJ;this.m[5]=aI*-aJ+this.m[5]*aK;aI=this.m[2];this.m[2]=aI*aK+this.m[6]*aJ;this.m[6]=aI*-aJ+this.m[6]*aK;aI=this.m[3];this.m[3]=aI*aK+this.m[7]*aJ;this.m[7]=aI*-aJ+this.m[7]*aK;};function Z(aH){if(j){return;}ak.prototype.constructor.call(this,aH);}Z.prototype=new ak();Z._$tP=new Object();Z._$27=function(){Z._$tP.clear();};Z.getID=function(aH){var aI=Z._$tP[aH];if(aI==null){aI=new Z(aH);Z._$tP[aH]=aI;}return aI;};Z.prototype._$3s=function(){return new Z();};function aD(){if(j){return;}this._$7=1;this._$f=0;this._$H=0;this._$g=1;this._$k=0;this._$w=0;this._$hi=STATE_IDENTITY;this._$Z=_$pS;}aD._$kS=-1;aD._$pS=0;aD._$hb=1;aD.STATE_IDENTITY=0;aD._$gb=1;aD._$fo=2;aD._$go=4;aD.prototype.transform=function(aK,aI,aH){var aT,aS,aR,aM,aL,aJ;var aQ=0;var aN=0;switch(this._$hi){default:return;case (aD._$go|aD._$fo|aD._$gb):aT=this._$7;aS=this._$H;aR=this._$k;aM=this._$f;aL=this._$g;aJ=this._$w;while(--aH>=0){var aP=aK[aQ++];var aO=aK[aQ++];aI[aN++]=(aT*aP+aS*aO+aR);aI[aN++]=(aM*aP+aL*aO+aJ);}return;case (aD._$go|aD._$fo):aT=this._$7;aS=this._$H;aM=this._$f;aL=this._$g;while(--aH>=0){var aP=aK[aQ++];var aO=aK[aQ++];aI[aN++]=(aT*aP+aS*aO);aI[aN++]=(aM*aP+aL*aO);}return;case (aD._$go|aD._$gb):aS=this._$H;aR=this._$k;aM=this._$f;aJ=this._$w;while(--aH>=0){var aP=aK[aQ++];aI[aN++]=(aS*aK[aQ++]+aR);aI[aN++]=(aM*aP+aJ);}return;case (aD._$go):aS=this._$H;aM=this._$f;while(--aH>=0){var aP=aK[aQ++];aI[aN++]=(aS*aK[aQ++]);aI[aN++]=(aM*aP);}return;case (aD._$fo|aD._$gb):aT=this._$7;aR=this._$k;aL=this._$g;aJ=this._$w;while(--aH>=0){aI[aN++]=(aT*aK[aQ++]+aR);aI[aN++]=(aL*aK[aQ++]+aJ);}return;case (aD._$fo):aT=this._$7;aL=this._$g;while(--aH>=0){aI[aN++]=(aT*aK[aQ++]);aI[aN++]=(aL*aK[aQ++]);}return;case (aD._$gb):aR=this._$k;aJ=this._$w;while(--aH>=0){aI[aN++]=(aK[aQ++]+aR);aI[aN++]=(aK[aQ++]+aJ);}return;case (aD.STATE_IDENTITY):if(aK!=aI||aQ!=aN){P._$jT(aK,aQ,aI,aN,aH*2);}return;}};aD.prototype.update=function(){if(this._$H==0&&this._$f==0){if(this._$7==1&&this._$g==1){if(this._$k==0&&this._$w==0){this._$hi=aD.STATE_IDENTITY;this._$Z=aD._$pS;}else{this._$hi=aD._$gb;this._$Z=aD._$hb;}}else{if(this._$k==0&&this._$w==0){this._$hi=aD._$fo;this._$Z=aD._$kS;}else{this._$hi=(aD._$fo|aD._$gb);this._$Z=aD._$kS;}}}else{if(this._$7==0&&this._$g==0){if(this._$k==0&&this._$w==0){this._$hi=aD._$go;this._$Z=aD._$kS;}else{this._$hi=(aD._$go|aD._$gb);this._$Z=aD._$kS;}}else{if(this._$k==0&&this._$w==0){this._$hi=(aD._$go|aD._$fo);this._$Z=aD._$kS;}else{this._$hi=(aD._$go|aD._$fo|aD._$gb);this._$Z=aD._$kS;}}}};aD.prototype._$RT=function(aK){this._$IT(aK);var aJ=aK[0];var aH=aK[2];var aN=aK[1];var aM=aK[3];var aI=Math.sqrt(aJ*aJ+aN*aN);var aL=aJ*aM-aH*aN;if(aI==0){if(Q._$so){__NONECONSOLE.log("affine._$RT() / rt==0");}}else{aK[0]=aI;aK[1]=aL/aI;aK[2]=(aN*aM+aJ*aH)/aL;aK[3]=Math.atan2(aN,aJ);}};aD.prototype._$ho=function(aN,aM,aI,aH){var aL=new Float32Array(6);var aK=new Float32Array(6);aN._$RT(aL);aM._$RT(aK);var aJ=new Float32Array(6);aJ[0]=aL[0]+(aK[0]-aL[0])*aI;aJ[1]=aL[1]+(aK[1]-aL[1])*aI;aJ[2]=aL[2]+(aK[2]-aL[2])*aI;aJ[3]=aL[3]+(aK[3]-aL[3])*aI;aJ[4]=aL[4]+(aK[4]-aL[4])*aI;aJ[5]=aL[5]+(aK[5]-aL[5])*aI;aH._$CT(aJ);};aD.prototype._$CT=function(aJ){var aI=Math.cos(aJ[3]);var aH=Math.sin(aJ[3]);this._$7=aJ[0]*aI;this._$f=aJ[0]*aH;this._$H=aJ[1]*(aJ[2]*aI-aH);this._$g=aJ[1]*(aJ[2]*aH+aI);this._$k=aJ[4];this._$w=aJ[5];this.update();};aD.prototype._$IT=function(aH){aH[0]=this._$7;aH[1]=this._$f;aH[2]=this._$H;aH[3]=this._$g;aH[4]=this._$k;aH[5]=this._$w;};function Y(){if(j){return;}ah.prototype.constructor.call(this);this.motions=new Array();this._$7r=null;this._$7r=Y._$Co++;this._$D0=30;this._$yT=0;this._$E=true;this.loopFadeIn=true;this._$AS=-1;_$a0();}Y.prototype=new ah();Y._$cs="VISIBLE:";Y._$ar="LAYOUT:";Y._$Co=0;Y._$D2=[];Y._$1T=1;Y.loadMotion=function(aR){var aM=new Y();var aI=[0];var aP=aR.length;aM._$yT=0;for(var aJ=0;aJ<aP;++aJ){var aQ=(aR[aJ]&255);if(aQ=="\\n"||aQ=="\\r"){continue;}if(aQ=="#"){for(;aJ<aP;++aJ){if(aR[aJ]=="\\n"||aR[aJ]=="\\r"){break;}}continue;}if(aQ=="$"){var aT=aJ;var aK=-1;for(;aJ<aP;++aJ){aQ=(aR[aJ]&255);if(aQ=="\\r"||aQ=="\\n"){break;}if(aQ=="="){aK=aJ;break;}}var aO=false;if(aK>=0){if(aK==aT+4&&aR[aT+1]=="f"&&aR[aT+2]=="p"&&aR[aT+3]=="s"){aO=true;}for(aJ=aK+1;aJ<aP;++aJ){aQ=(aR[aJ]&255);if(aQ=="\\r"||aQ=="\\n"){break;}if(aQ==","||aQ==" "||aQ=="	"){continue;}var aL=G._$LS(aR,aP,aJ,aI);if(aI[0]>0){if(aO&&5<aL&&aL<121){aM._$D0=aL;}}aJ=aI[0];}}for(;aJ<aP;++aJ){if(aR[aJ]=="\\n"||aR[aJ]=="\\r"){break;}}continue;}if(("a"<=aQ&&aQ<="z")||("A"<=aQ&&aQ<="Z")||aQ=="_"){var aT=aJ;var aK=-1;for(;aJ<aP;++aJ){aQ=(aR[aJ]&255);if(aQ=="\\r"||aQ=="\\n"){break;}if(aQ=="="){aK=aJ;break;}}if(aK>=0){var aN=new t();if(G.startsWith(aR,aT,Y._$cs)){aN._$RP=t._$hs;aN._$4P=new String(aR,aT,aK-aT);}else{if(G.startsWith(aR,aT,Y._$ar)){aN._$4P=new String(aR,aT+7,aK-aT-7);if(G.startsWith(aR,aT+7,"ANCHOR_X")){aN._$RP=t._$xs;}else{if(G.startsWith(aR,aT+7,"ANCHOR_Y")){aN._$RP=t._$us;}else{if(G.startsWith(aR,aT+7,"SCALE_X")){aN._$RP=t._$qs;}else{if(G.startsWith(aR,aT+7,"SCALE_Y")){aN._$RP=t._$Ys;}else{if(G.startsWith(aR,aT+7,"X")){aN._$RP=t._$ws;}else{if(G.startsWith(aR,aT+7,"Y")){aN._$RP=t._$Ns;}}}}}}}else{aN._$RP=t._$Fr;aN._$4P=new String(aR,aT,aK-aT);}}aM.motions.push(aN);var aS=0;Y._$D2.clear();for(aJ=aK+1;aJ<aP;++aJ){aQ=(aR[aJ]&255);if(aQ=="\\r"||aQ=="\\n"){break;}if(aQ==","||aQ==" "||aQ=="	"){continue;}var aL=G._$LS(aR,aP,aJ,aI);if(aI[0]>0){Y._$D2.push(aL);aS++;var aH=aI[0];if(aH<aJ){__NONECONSOLE.log("_$n0 _$hi . @Live2DMotion loadMotion()\\n");break;}aJ=aH;}}aN._$I0=Y._$D2._$BL();if(aS>aM._$yT){aM._$yT=aS;}}}}aM._$AS=((1000*aM._$yT)/aM._$D0)|0;return aM;};Y.prototype.getDurationMSec=function(){return this._$AS;};Y.prototype.dump=function(){for(var aJ=0;aJ<this.motions.length;aJ++){var aH=this.motions[aJ];__NONECONSOLE.log("_$wL[%s] [%d]. ",aH._$4P,aH._$I0.length);for(var aI=0;aI<aH._$I0.length&&aI<10;aI++){__NONECONSOLE.log("%5.2f ,",aH._$I0[aI]);}__NONECONSOLE.log("\\n");}};Y.prototype.updateParamExe=function(aH,aL,aO,aX){var aM=aL-aX._$z2;var aV=aM*this._$D0/1000;var aJ=aV|0;var aP=aV-aJ;for(var aU=0;aU<this.motions.length;aU++){var aS=this.motions[aU];var aK=aS._$I0.length;var aQ=aS._$4P;if(aS._$RP==t._$hs){var aT=aS._$I0[(aJ>=aK?aK-1:aJ)];aH.setParamFloat(aQ,aT);}else{if(t._$ws<=aS._$RP&&aS._$RP<=t._$Ys){}else{var aR=aH.getParamFloat(aQ);var aY=aS._$I0[(aJ>=aK?aK-1:aJ)];var aW=aS._$I0[(aJ+1>=aK?aK-1:aJ+1)];var aI=aY+(aW-aY)*aP;var aN=aR+(aI-aR)*aO;aH.setParamFloat(aQ,aN);}}}if(aJ>=this._$yT){if(this._$E){aX._$z2=aL;if(this.loopFadeIn){aX._$bs=aL;}}else{aX._$9L=true;}}};Y.prototype._$r0=function(){return this._$E;};Y.prototype._$aL=function(aH){this._$E=aH;};Y.prototype.isLoopFadeIn=function(){return this.loopFadeIn;};Y.prototype.setLoopFadeIn=function(aH){this.loopFadeIn=aH;};function aE(){this._$P=new Float32Array(100);this.size=0;}aE.prototype.clear=function(){this.size=0;};aE.prototype.add=function(aI){if(this._$P.length<=this.size){var aH=new Float32Array(this.size*2);P._$jT(this._$P,0,aH,0,this.size);this._$P=aH;}this._$P[this.size++]=aI;};aE.prototype._$BL=function(){var aH=new Float32Array(this.size);P._$jT(this._$P,0,aH,0,this.size);return aH;};function t(){this._$4P=null;this._$I0=null;this._$RP=null;}t._$Fr=0;t._$hs=1;t._$ws=100;t._$Ns=101;t._$xs=102;t._$us=103;t._$qs=104;t._$Ys=105;function aw(){}aw._$Ms=1;aw._$Qs=2;aw._$i2=0;aw._$No=2;aw._$do=aw._$Ms;aw._$Ls=true;aw._$1r=5;aw._$Qb=65;aw._$J=0.0001;aw._$FT=0.001;aw._$Ss=3;function ay(){}ay._$o7=6;ay._$S7=7;ay._$s7=8;ay._$77=9;ay.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10;ay.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11;ay._$T7=ay.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1;ay._$Is=-2004318072;ay._$h0=0;ay._$4L=23;ay._$7P=33;ay._$uT=function(aH){__NONECONSOLE.log("_$bo :: _$6 _$mo _$E0 : %d\\n",aH);};ay._$9o=function(aH){if(aH<40){ay._$uT(aH);return null;}else{if(aH<50){ay._$uT(aH);return null;}else{if(aH<60){ay._$uT(aH);return null;}else{if(aH<100){switch(aH){case 65:return new E();case 66:return new g();case 67:return new aA();case 68:return new ab();case 69:return new X();case 70:return new b();default:ay._$uT(aH);return null;}}else{if(aH<150){switch(aH){case 131:return new f();case 133:return new s();case 136:return new w();case 137:return new an();case 142:return new aq();}}}}}}ay._$uT(aH);return null;};function y(aH){if(j){return;}this._$QT=true;this._$co=-1;this._$qo=0;this._$pb=new Array(y._$is);this._$_2=new Float32Array(y._$is);this._$vr=new Float32Array(y._$is);this._$Rr=new Float32Array(y._$is);this._$Or=new Float32Array(y._$is);this._$fs=new Float32Array(y._$is);this._$Js=new Array(y._$is);this._$3S=new Array();this._$aS=new Array();this._$Bo=null;this._$F2=new Array();this._$db=new Array();this._$8b=new Array();this._$Hr=new Array();this._$Ws=null;this._$Vs=null;this._$Er=null;this._$Es=new Int16Array(aw._$Qb);this._$ZP=new Float32Array(aw._$1r*2);this._$Ri=aH;this._$b0=y._$HP++;this.clipManager=null;this.dp_webgl=null;}y._$HP=0;y._$_0=true;y._$V2=-1;y._$W0=-1;y._$jr=false;y._$ZS=true;y._$tr=(-1000000);y._$lr=(1000000);y._$is=32;y._$e=false;y.prototype.getDrawDataIndex=function(aI){for(var aH=this._$aS.length-1;aH>=0;--aH){if(this._$aS[aH]!=null&&this._$aS[aH].getDrawDataID()==aI){return aH;}}return -1;};y.prototype.getDrawData=function(aH){if(aH instanceof Z){if(this._$Bo==null){this._$Bo=new Object();var aJ=this._$aS.length;for(var aI=0;aI<aJ;aI++){var aL=this._$aS[aI];var aK=aL.getDrawDataID();if(aK==null){continue;}this._$Bo[aK]=aL;}}return this._$Bo[id];}else{if(aH<this._$aS.length){return this._$aS[aH];}else{return null;}}};y.prototype.release=function(){this._$3S.clear();this._$aS.clear();this._$F2.clear();if(this._$Bo!=null){this._$Bo.clear();}this._$db.clear();this._$8b.clear();this._$Hr.clear();};y.prototype.init=function(){this._$co++;if(this._$F2.length>0){this.release();}var aO=this._$Ri.getModelImpl();var aT=aO._$Xr();var aS=aT.length;var aH=new Array();var a3=new Array();for(var aV=0;aV<aS;++aV){var a4=aT[aV];this._$F2.push(a4);this._$Hr.push(a4.init(this));var aK=a4.getBaseData();var aR=aK.length;for(var aU=0;aU<aR;++aU){aH.push(aK[aU]);}for(var aU=0;aU<aR;++aU){var aM=aK[aU].init(this);aM._$l2(aV);a3.push(aM);}var a1=a4.getDrawData();var aP=a1.length;for(var aU=0;aU<aP;++aU){var aZ=a1[aU];var a0=aZ.init(this);a0._$IP=aV;this._$aS.push(aZ);this._$8b.push(a0);}}var aY=aH.length;var aN=n._$2o();while(true){var aX=false;for(var aV=0;aV<aY;++aV){var aL=aH[aV];if(aL==null){continue;}var a2=aL.getTargetBaseDataID();if(a2==null||a2==aN||this.getBaseDataIndex(a2)>=0){this._$3S.push(aL);this._$db.push(a3[aV]);aH[aV]=null;aX=true;}}if(!aX){break;}}var aI=aO._$E2();if(aI!=null){var aJ=aI._$1s();if(aJ!=null){var aW=aJ.length;for(var aV=0;aV<aW;++aV){var aQ=aJ[aV];if(aQ==null){continue;}this._$02(aQ.getParamID(),aQ.getDefaultValue(),aQ.getMinValue(),aQ.getMaxValue());}}}this.clipManager=new W(this.dp_webgl);this.clipManager.init(this,this._$aS,this._$8b);this._$QT=true;};y.prototype.update=function(){if(y._$e){q.start("_$zL");}var aK=this._$_2.length;for(var aW=0;aW<aK;aW++){if(this._$_2[aW]!=this._$vr[aW]){this._$Js[aW]=y._$ZS;this._$vr[aW]=this._$_2[aW];}}var aX=false;var aQ=this._$3S.length;var aN=this._$aS.length;var aS=a._$or();var aZ=a._$Pr();var aU=aZ-aS+1;if(this._$Ws==null||this._$Ws.length<aU){this._$Ws=new Int16Array(aU);this._$Vs=new Int16Array(aU);}for(var aW=0;aW<aU;aW++){this._$Ws[aW]=y._$V2;this._$Vs[aW]=y._$V2;}if(this._$Er==null||this._$Er.length<aN){this._$Er=new Int16Array(aN);}for(var aW=0;aW<aN;aW++){this._$Er[aW]=y._$W0;}if(y._$e){q.dump("_$zL");}if(y._$e){q.start("_$UL");}var aL=null;for(var aV=0;aV<aQ;++aV){var aJ=this._$3S[aV];var aH=this._$db[aV];try{aJ._$Nr(this,aH);aJ._$2b(this,aH);}catch(aY){if(aL==null){aL=aY;}}}if(aL!=null){if(y._$_0){q._$Rb(aL);}}if(y._$e){q.dump("_$UL");}if(y._$e){q.start("_$DL");}var aR=null;for(var aO=0;aO<aN;++aO){var aM=this._$aS[aO];var aI=this._$8b[aO];try{aM._$Nr(this,aI);if(aI._$u2()){continue;}aM._$2b(this,aI);var aT=Math.floor(aM._$zS(this,aI)-aS);var aP;try{aP=this._$Vs[aT];}catch(aY){__NONECONSOLE.log("_$li :: %s / %s 				@@_$fS\\n",aY.toString(),aM.getDrawDataID().toString());aT=Math.floor(aM._$zS(this,aI)-aS);continue;}if(aP==y._$V2){this._$Ws[aT]=aO;}else{this._$Er[aP]=aO;}this._$Vs[aT]=aO;}catch(aY){if(aR==null){aR=aY;Q._$sT(Q._$H7);}}}if(aR!=null){if(y._$_0){q._$Rb(aR);}}if(y._$e){q.dump("_$DL");}if(y._$e){q.start("_$eL");}for(var aW=this._$Js.length-1;aW>=0;aW--){this._$Js[aW]=y._$jr;}this._$QT=false;if(y._$e){q.dump("_$eL");}return aX;};y.prototype.preDraw=function(aH){if(this.clipManager!=null){aH._$ZT();this.clipManager.setupClip(this,aH);}};y.prototype.draw=function(aM){if(this._$Ws==null){q._$li("call _$Ri.update() before _$Ri.draw() ");return;}var aP=this._$Ws.length;aM._$ZT();for(var aK=0;aK<aP;++aK){var aN=this._$Ws[aK];if(aN==y._$V2){continue;}do{var aH=this._$aS[aN];var aI=this._$8b[aN];if(aI._$yo()){var aJ=aI._$IP;var aL=this._$Hr[aJ];aI._$VS=aL.getPartsOpacity();aH.draw(aM,this,aI);}var aO=this._$Er[aN];if(aO<=aN||aO==y._$W0){break;}aN=aO;}while(true);}};y.prototype.getParamIndex=function(aH){for(var aI=this._$pb.length-1;aI>=0;--aI){if(this._$pb[aI]==aH){return aI;}}return this._$02(aH,0,y._$tr,y._$lr);};y.prototype._$BS=function(aH){return this.getBaseDataIndex(aH);};y.prototype.getBaseDataIndex=function(aH){for(var aI=this._$3S.length-1;aI>=0;--aI){if(this._$3S[aI]!=null&&this._$3S[aI].getBaseDataID()==aH){return aI;}}return -1;};y.prototype._$UT=function(aJ,aH){var aI=new Float32Array(aH);P._$jT(aJ,0,aI,0,aJ.length);return aI;};y.prototype._$02=function(aN,aM,aL,aH){if(this._$qo>=this._$pb.length){var aK=this._$pb.length;var aJ=new Array(aK*2);P._$jT(this._$pb,0,aJ,0,aK);this._$pb=aJ;this._$_2=this._$UT(this._$_2,aK*2);this._$vr=this._$UT(this._$vr,aK*2);this._$Rr=this._$UT(this._$Rr,aK*2);this._$Or=this._$UT(this._$Or,aK*2);var aI=new Array();P._$jT(this._$Js,0,aI,0,aK);this._$Js=aI;}this._$pb[this._$qo]=aN;this._$_2[this._$qo]=aM;this._$vr[this._$qo]=aM;this._$Rr[this._$qo]=aL;this._$Or[this._$qo]=aH;this._$Js[this._$qo]=y._$ZS;return this._$qo++;};y.prototype._$Zo=function(aI,aH){this._$3S[aI]=aH;};y.prototype.setParamFloat=function(aH,aI){if(aI<this._$Rr[aH]){aI=this._$Rr[aH];}if(aI>this._$Or[aH]){aI=this._$Or[aH];}this._$_2[aH]=aI;};y.prototype.loadParam=function(){var aH=this._$_2.length;if(aH>this._$fs.length){aH=this._$fs.length;}P._$jT(this._$fs,0,this._$_2,0,aH);};y.prototype.saveParam=function(){var aH=this._$_2.length;if(aH>this._$fs.length){this._$fs=new Float32Array(aH);}P._$jT(this._$_2,0,this._$fs,0,aH);};y.prototype._$v2=function(){return this._$co;};y.prototype._$WS=function(){return this._$QT;};y.prototype._$Xb=function(aH){return this._$Js[aH]==y._$ZS;};y.prototype._$vs=function(){return this._$Es;};y.prototype._$Tr=function(){return this._$ZP;};y.prototype.getBaseData=function(aH){return this._$3S[aH];};y.prototype.getParamFloat=function(aH){return this._$_2[aH];};y.prototype.getParamMax=function(aH){return this._$Or[aH];};y.prototype.getParamMin=function(aH){return this._$Rr[aH];};y.prototype.setPartsOpacity=function(aJ,aH){var aI=this._$Hr[aJ];aI.setPartsOpacity(aH);};y.prototype.getPartsOpacity=function(aI){var aH=this._$Hr[aI];return aH.getPartsOpacity();};y.prototype.getPartsDataIndex=function(aI){for(var aH=this._$F2.length-1;aH>=0;--aH){if(this._$F2[aH]!=null&&this._$F2[aH]._$p2()==aI){return aH;}}return -1;};y.prototype._$q2=function(aH){return this._$db[aH];};y.prototype._$C2=function(aH){return this._$8b[aH];};y.prototype._$Bb=function(aH){return this._$Hr[aH];};y.prototype._$5s=function(aO,aK){var aJ=this._$Ws.length;var aN=aO;for(var aL=0;aL<aJ;++aL){var aI=this._$Ws[aL];if(aI==y._$V2){continue;}do{var aM=this._$8b[aI];if(aM._$yo()){aM._$GT()._$B2(this,aM,aN);aN+=aK;}var aH=this._$Er[aI];if(aH<=aI||aH==y._$W0){break;}aI=aH;}while(true);}};y.prototype.setDrawParam=function(aH){this.dp_webgl=aH;};y.prototype.getDrawParam=function(){return this.dp_webgl;};function ap(){}ap._$0T=function(aH){return ap._$0T(new _$5(aH));};ap._$0T=function(aJ){if(!aJ.exists()){throw new _$ls(aJ._$3b());}var aH=aJ.length();var aI=new Int8Array(aH);var aM=new _$Xs(new _$kb(aJ),8192);var aK;var aL=0;while((aK=aM.read(aI,aL,aH-aL))>0){aL+=aK;}return aI;};ap._$C=function(aJ){var aI=null;var aL=null;try{aI=(aJ instanceof Array)?aJ:new _$Xs(aJ,8192);aL=new _$js();var aM=1000;var aK;var aH=new Int8Array(aM);while((aK=aI.read(aH))>0){aL.write(aH,0,aK);}return aL._$TS();}finally{if(aJ!=null){aJ.close();}if(aL!=null){aL.flush();aL.close();}}};function ar(){if(j){return;}this._$12=null;this._$bb=null;this._$_L=null;this._$jo=null;this._$iL=null;this._$0L=null;this._$Br=null;this._$Dr=null;this._$Cb=null;this._$mr=null;this._$_L=az.STATE_FIRST;this._$Br=4000;this._$Dr=100;this._$Cb=50;this._$mr=150;this._$jo=true;this._$iL="PARAM_EYE_L_OPEN";this._$0L="PARAM_EYE_R_OPEN";}ar.prototype._$T2=function(){var aI=P.getUserTimeMSec();var aH=Math._$10();return(aI+aH*(2*this._$Br-1));};ar.prototype._$uo=function(aH){this._$Br=aH;};ar.prototype._$QS=function(aI,aH,aJ){this._$Dr=aI;this._$Cb=aH;this._$mr=aJ;};ar.prototype._$7T=function(aI){var aK=P.getUserTimeMSec();var aH;var aJ=0;switch(this._$_L){case STATE_CLOSING:aJ=(aK-this._$bb)/this._$Dr;if(aJ>=1){aJ=1;this._$_L=az.STATE_CLOSED;this._$bb=aK;}aH=1-aJ;break;case STATE_CLOSED:aJ=(aK-this._$bb)/this._$Cb;if(aJ>=1){this._$_L=az.STATE_OPENING;this._$bb=aK;}aH=0;break;case STATE_OPENING:aJ=(aK-this._$bb)/this._$mr;if(aJ>=1){aJ=1;this._$_L=az.STATE_INTERVAL;this._$12=this._$T2();}aH=aJ;break;case STATE_INTERVAL:if(this._$12<aK){this._$_L=az.STATE_CLOSING;this._$bb=aK;}aH=1;break;case STATE_FIRST:default:this._$_L=az.STATE_INTERVAL;this._$12=this._$T2();aH=1;break;}if(!this._$jo){aH=-aH;}aI.setParamFloat(this._$iL,aH);aI.setParamFloat(this._$0L,aH);};var az=function(){};az.STATE_FIRST="STATE_FIRST";az.STATE_INTERVAL="STATE_INTERVAL";az.STATE_CLOSING="STATE_CLOSING";az.STATE_CLOSED="STATE_CLOSED";az.STATE_OPENING="STATE_OPENING";function x(){if(j){return;}ax.prototype.constructor.call(this);this._$sb=new Int32Array(x._$As);this._$U2=new Array();this.transform=null;this.gl=null;if(x._$NT==null){x._$NT=x._$9r(256);x._$vS=x._$9r(256);x._$no=x._$vb(256);}}x.prototype=new ax();x._$As=32;x._$Gr=false;x._$NT=null;x._$vS=null;x._$no=null;x._$9r=function(aH){var aI=new Float32Array(aH);return aI;};x._$vb=function(aH){var aI=new Int16Array(aH);return aI;};x._$cr=function(aI,aH){if(aI==null||aI._$yL()<aH.length){aI=x._$9r(aH.length*2);aI.put(aH);aI._$oT(0);}else{aI.clear();aI.put(aH);aI._$oT(0);}return aI;};x._$mb=function(aI,aH){if(aI==null||aI._$yL()<aH.length){aI=x._$vb(aH.length*2);aI.put(aH);aI._$oT(0);}else{aI.clear();aI.put(aH);aI._$oT(0);}return aI;};x._$Hs=function(){return x._$Gr;};x._$as=function(aH){x._$Gr=aH;};x.prototype.setGL=function(aH){this.gl=aH;};x.prototype.setTransform=function(aH){this.transform=aH;};x.prototype._$ZT=function(){};x.prototype._$Uo=function(aO,aH,aP,aI,aQ,aM,aK,aJ){if(aM<0.01){return;}var aL=this._$U2[aO];var aN=aM>0.9?Q.EXPAND_W:0;this.gl.drawElements(aL,aP,aI,aQ,aM,aN,this.transform,aJ);};x.prototype._$Rs=function(){throw new Error("_$Rs");};x.prototype._$Ds=function(aH){throw new Error("_$Ds");};x.prototype._$K2=function(){for(var aH=0;aH<this._$sb.length;aH++){var aI=this._$sb[aH];if(aI!=0){this.gl._$Sr(1,this._$sb,aH);this._$sb[aH]=0;}}};x.prototype.setTexture=function(aI,aH){if(this._$sb.length<aI+1){this._$nS(aI);}this._$sb[aI]=aH;};x.prototype.setTexture=function(aH,aI){if(this._$sb.length<aH+1){this._$nS(aH);}this._$U2[aH]=aI;};x.prototype._$nS=function(aH){var aK=Math.max(this._$sb.length*2,aH+1+10);var aI=new Int32Array(aK);P._$jT(this._$sb,0,aI,0,this._$sb.length);this._$sb=aI;var aJ=new Array();P._$jT(this._$U2,0,aJ,0,this._$U2.length);this._$U2=aJ;};function ab(){if(j){return;}c.prototype.constructor.call(this);this._$GS=null;this._$Y0=null;}ab.prototype=new c();ab._$Xo=new Float32Array(2);ab._$io=new Float32Array(2);ab._$0o=new Float32Array(2);ab._$Lo=new Float32Array(2);ab._$To=new Float32Array(2);ab._$Po=new Float32Array(2);ab._$gT=new Array();ab.prototype._$zP=function(){this._$GS=new g();this._$GS._$zP();this._$Y0=new Array();};ab.prototype.getType=function(){return c._$c2;};ab.prototype._$F0=function(aH){c.prototype._$F0.call(this,aH);this._$GS=aH._$nP();this._$Y0=aH._$nP();c.prototype.readV2_opacity.call(this,aH);};ab.prototype.init=function(aH){var aI=new al(this);aI._$Yr=new X();if(this._$32()){aI._$Wr=new X();}return aI;};ab.prototype._$Nr=function(bf,bx){if(!((this==bx._$GT()))){__NONECONSOLE.log("### assert!! ### ");}var bm=bx;if(!this._$GS._$Ur(bf)){return;}var bw=ab._$gT;bw[0]=false;var a2=this._$GS._$Q2(bf,bw);bx._$Ib(bw[0]);this.interpolateOpacity(bf,this._$GS,bx,bw);var a3=bf._$vs();var ba=bf._$Tr();this._$GS._$zr(a3,ba,a2);if(a2<=0){var bn=this._$Y0[a3[0]];bm._$Yr.init(bn);}else{if(a2==1){var bn=this._$Y0[a3[0]];var bl=this._$Y0[a3[1]];var a9=ba[0];bm._$Yr._$fL=bn._$fL+(bl._$fL-bn._$fL)*a9;bm._$Yr._$gL=bn._$gL+(bl._$gL-bn._$gL)*a9;bm._$Yr._$B0=bn._$B0+(bl._$B0-bn._$B0)*a9;bm._$Yr._$z0=bn._$z0+(bl._$z0-bn._$z0)*a9;bm._$Yr._$qT=bn._$qT+(bl._$qT-bn._$qT)*a9;}else{if(a2==2){var bn=this._$Y0[a3[0]];var bl=this._$Y0[a3[1]];var a1=this._$Y0[a3[2]];var a0=this._$Y0[a3[3]];var a9=ba[0];var a8=ba[1];var bC=bn._$fL+(bl._$fL-bn._$fL)*a9;var bB=a1._$fL+(a0._$fL-a1._$fL)*a9;bm._$Yr._$fL=bC+(bB-bC)*a8;bC=bn._$gL+(bl._$gL-bn._$gL)*a9;bB=a1._$gL+(a0._$gL-a1._$gL)*a9;bm._$Yr._$gL=bC+(bB-bC)*a8;bC=bn._$B0+(bl._$B0-bn._$B0)*a9;bB=a1._$B0+(a0._$B0-a1._$B0)*a9;bm._$Yr._$B0=bC+(bB-bC)*a8;bC=bn._$z0+(bl._$z0-bn._$z0)*a9;bB=a1._$z0+(a0._$z0-a1._$z0)*a9;bm._$Yr._$z0=bC+(bB-bC)*a8;bC=bn._$qT+(bl._$qT-bn._$qT)*a9;bB=a1._$qT+(a0._$qT-a1._$qT)*a9;bm._$Yr._$qT=bC+(bB-bC)*a8;}else{if(a2==3){var aP=this._$Y0[a3[0]];var aO=this._$Y0[a3[1]];var bu=this._$Y0[a3[2]];var bs=this._$Y0[a3[3]];var aK=this._$Y0[a3[4]];var aJ=this._$Y0[a3[5]];var bj=this._$Y0[a3[6]];var bi=this._$Y0[a3[7]];var a9=ba[0];var a8=ba[1];var a6=ba[2];var bC=aP._$fL+(aO._$fL-aP._$fL)*a9;var bB=bu._$fL+(bs._$fL-bu._$fL)*a9;var bz=aK._$fL+(aJ._$fL-aK._$fL)*a9;var by=bj._$fL+(bi._$fL-bj._$fL)*a9;bm._$Yr._$fL=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);bC=aP._$gL+(aO._$gL-aP._$gL)*a9;bB=bu._$gL+(bs._$gL-bu._$gL)*a9;bz=aK._$gL+(aJ._$gL-aK._$gL)*a9;by=bj._$gL+(bi._$gL-bj._$gL)*a9;bm._$Yr._$gL=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);bC=aP._$B0+(aO._$B0-aP._$B0)*a9;bB=bu._$B0+(bs._$B0-bu._$B0)*a9;bz=aK._$B0+(aJ._$B0-aK._$B0)*a9;by=bj._$B0+(bi._$B0-bj._$B0)*a9;bm._$Yr._$B0=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);bC=aP._$z0+(aO._$z0-aP._$z0)*a9;bB=bu._$z0+(bs._$z0-bu._$z0)*a9;bz=aK._$z0+(aJ._$z0-aK._$z0)*a9;by=bj._$z0+(bi._$z0-bj._$z0)*a9;bm._$Yr._$z0=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);bC=aP._$qT+(aO._$qT-aP._$qT)*a9;bB=bu._$qT+(bs._$qT-bu._$qT)*a9;bz=aK._$qT+(aJ._$qT-aK._$qT)*a9;by=bj._$qT+(bi._$qT-bj._$qT)*a9;bm._$Yr._$qT=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);}else{if(a2==4){var aT=this._$Y0[a3[0]];var aS=this._$Y0[a3[1]];var bE=this._$Y0[a3[2]];var bD=this._$Y0[a3[3]];var aN=this._$Y0[a3[4]];var aM=this._$Y0[a3[5]];var bp=this._$Y0[a3[6]];var bo=this._$Y0[a3[7]];var bh=this._$Y0[a3[8]];var bg=this._$Y0[a3[9]];var aY=this._$Y0[a3[10]];var aW=this._$Y0[a3[11]];var a7=this._$Y0[a3[12]];var a5=this._$Y0[a3[13]];var aR=this._$Y0[a3[14]];var aQ=this._$Y0[a3[15]];var a9=ba[0];var a8=ba[1];var a6=ba[2];var a4=ba[3];var bC=aT._$fL+(aS._$fL-aT._$fL)*a9;var bB=bE._$fL+(bD._$fL-bE._$fL)*a9;var bz=aN._$fL+(aM._$fL-aN._$fL)*a9;var by=bp._$fL+(bo._$fL-bp._$fL)*a9;var bv=bh._$fL+(bg._$fL-bh._$fL)*a9;var bt=aY._$fL+(aW._$fL-aY._$fL)*a9;var br=a7._$fL+(a5._$fL-a7._$fL)*a9;var bq=aR._$fL+(aQ._$fL-aR._$fL)*a9;bm._$Yr._$fL=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));bC=aT._$gL+(aS._$gL-aT._$gL)*a9;bB=bE._$gL+(bD._$gL-bE._$gL)*a9;bz=aN._$gL+(aM._$gL-aN._$gL)*a9;by=bp._$gL+(bo._$gL-bp._$gL)*a9;bv=bh._$gL+(bg._$gL-bh._$gL)*a9;bt=aY._$gL+(aW._$gL-aY._$gL)*a9;br=a7._$gL+(a5._$gL-a7._$gL)*a9;bq=aR._$gL+(aQ._$gL-aR._$gL)*a9;bm._$Yr._$gL=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));bC=aT._$B0+(aS._$B0-aT._$B0)*a9;bB=bE._$B0+(bD._$B0-bE._$B0)*a9;bz=aN._$B0+(aM._$B0-aN._$B0)*a9;by=bp._$B0+(bo._$B0-bp._$B0)*a9;bv=bh._$B0+(bg._$B0-bh._$B0)*a9;bt=aY._$B0+(aW._$B0-aY._$B0)*a9;br=a7._$B0+(a5._$B0-a7._$B0)*a9;bq=aR._$B0+(aQ._$B0-aR._$B0)*a9;bm._$Yr._$B0=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));bC=aT._$z0+(aS._$z0-aT._$z0)*a9;bB=bE._$z0+(bD._$z0-bE._$z0)*a9;bz=aN._$z0+(aM._$z0-aN._$z0)*a9;by=bp._$z0+(bo._$z0-bp._$z0)*a9;bv=bh._$z0+(bg._$z0-bh._$z0)*a9;bt=aY._$z0+(aW._$z0-aY._$z0)*a9;br=a7._$z0+(a5._$z0-a7._$z0)*a9;bq=aR._$z0+(aQ._$z0-aR._$z0)*a9;bm._$Yr._$z0=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));bC=aT._$qT+(aS._$qT-aT._$qT)*a9;bB=bE._$qT+(bD._$qT-bE._$qT)*a9;bz=aN._$qT+(aM._$qT-aN._$qT)*a9;by=bp._$qT+(bo._$qT-bp._$qT)*a9;bv=bh._$qT+(bg._$qT-bh._$qT)*a9;bt=aY._$qT+(aW._$qT-aY._$qT)*a9;br=a7._$qT+(a5._$qT-a7._$qT)*a9;bq=aR._$qT+(aQ._$qT-aR._$qT)*a9;bm._$Yr._$qT=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));}else{var aV=Math.pow(2,a2)|0;var aZ=new Float32Array(aV);for(var bk=0;bk<aV;bk++){var aI=bk;var aH=1;for(var aL=0;aL<a2;aL++){aH*=(aI%2==0)?(1-ba[aL]):ba[aL];aI/=2;}aZ[bk]=aH;}var bA=new Array();for(var aU=0;aU<aV;aU++){bA[aU]=this._$Y0[a3[aU]];}var be=0,bc=0,bd=0,bb=0,aX=0;for(var aU=0;aU<aV;aU++){be+=aZ[aU]*bA[aU]._$fL;bc+=aZ[aU]*bA[aU]._$gL;bd+=aZ[aU]*bA[aU]._$B0;bb+=aZ[aU]*bA[aU]._$z0;aX+=aZ[aU]*bA[aU]._$qT;}bm._$Yr._$fL=be;bm._$Yr._$gL=bc;bm._$Yr._$B0=bd;bm._$Yr._$z0=bb;bm._$Yr._$qT=aX;}}}}}var bn=this._$Y0[a3[0]];bm._$Yr.reflectX=bn.reflectX;bm._$Yr.reflectY=bn.reflectY;};ab.prototype._$2b=function(aM,aH){if(!((this==aH._$GT()))){__NONECONSOLE.log("### assert!! ### ");}var aR=aH;aR._$hS(true);if(!this._$32()){aR.setTotalScale_notForClient(aR._$Yr._$B0);aR.setTotalOpacity(aR.getInterpolatedOpacity());}else{var aT=this.getTargetBaseDataID();if(aR._$8r==c._$ur){aR._$8r=aM.getBaseDataIndex(aT);}if(aR._$8r<0){if(Q._$so){q._$li("_$L _$0P _$G :: %s",aT);}aR._$hS(false);}else{var aI=aM.getBaseData(aR._$8r);if(aI!=null){var aL=aM._$q2(aR._$8r);var aS=ab._$Xo;aS[0]=aR._$Yr._$fL;aS[1]=aR._$Yr._$gL;var aJ=ab._$io;aJ[0]=0;aJ[1]=-0.1;var aO=aL._$GT().getType();if(aO==c._$c2){aJ[1]=-10;}else{aJ[1]=-0.1;}var aQ=ab._$0o;this._$Jr(aM,aI,aL,aS,aJ,aQ);var aP=aC._$92(aJ,aQ);aI._$nb(aM,aL,aS,aS,1,0,2);aR._$Wr._$fL=aS[0];aR._$Wr._$gL=aS[1];aR._$Wr._$B0=aR._$Yr._$B0;aR._$Wr._$z0=aR._$Yr._$z0;aR._$Wr._$qT=aR._$Yr._$qT-aP*aC._$NS;var aK=aL.getTotalScale();aR.setTotalScale_notForClient(aK*aR._$Wr._$B0);var aN=aL.getTotalOpacity();aR.setTotalOpacity(aN*aR.getInterpolatedOpacity());aR._$Wr.reflectX=aR._$Yr.reflectX;aR._$Wr.reflectY=aR._$Yr.reflectY;aR._$hS(aL._$yo());}else{aR._$hS(false);}}}};ab.prototype._$nb=function(aJ,aR,aL,a4,aT,aO,a2){if(!((this==aR._$GT()))){__NONECONSOLE.log("### assert!! ### ");}var aH=aR;var aU=aH._$Wr!=null?aH._$Wr:aH._$Yr;var a0=Math.sin(aC._$bS*aU._$qT);var aP=Math.cos(aC._$bS*aU._$qT);var a3=aH.getTotalScale();var aW=aU.reflectX?-1:1;var aV=aU.reflectY?-1:1;var aS=aP*a3*aW;var aQ=-a0*a3*aV;var a1=a0*a3*aW;var aZ=aP*a3*aV;var aY=aU._$fL;var aX=aU._$gL;var aN,aM;var aI=aT*a2;for(var aK=aO;aK<aI;aK+=a2){aN=aL[aK];aM=aL[aK+1];a4[aK]=aS*aN+aQ*aM+aY;a4[aK+1]=a1*aN+aZ*aM+aX;}};ab.prototype._$Jr=function(aP,aK,aI,aR,aQ,aH){if(!((aK==aI._$GT()))){__NONECONSOLE.log("### assert!! ### ");}var aO=ab._$Lo;ab._$Lo[0]=aR[0];ab._$Lo[1]=aR[1];aK._$nb(aP,aI,aO,aO,1,0,2);var aL=ab._$To;var aS=ab._$Po;var aN=10;var aJ=1;for(var aM=0;aM<aN;aM++){aS[0]=aR[0]+aJ*aQ[0];aS[1]=aR[1]+aJ*aQ[1];aK._$nb(aP,aI,aS,aL,1,0,2);aL[0]-=aO[0];aL[1]-=aO[1];if(aL[0]!=0||aL[1]!=0){aH[0]=aL[0];aH[1]=aL[1];return;}aS[0]=aR[0]-aJ*aQ[0];aS[1]=aR[1]-aJ*aQ[1];aK._$nb(aP,aI,aS,aL,1,0,2);aL[0]-=aO[0];aL[1]-=aO[1];if(aL[0]!=0||aL[1]!=0){aL[0]=-aL[0];aL[0]=-aL[0];aH[0]=aL[0];aH[1]=aL[1];return;}aJ*=0.1;}if(Q._$so){__NONECONSOLE.log("_$L0 to transform _$SP\\n");}};function al(aH){B.prototype.constructor.call(this,aH);this._$8r=c._$ur;this._$Yr=null;this._$Wr=null;}al.prototype=new B();function a(){if(j){return;}ae.prototype.constructor.call(this);this._$gP=null;this._$dr=null;this._$GS=null;this._$qb=null;this._$Lb=null;this._$mS=null;}a.prototype=new ae();a._$ur=-2;a._$ES=500;a._$wb=2;a._$8S=3;a._$os=4;a._$52=a._$ES;a._$R2=a._$ES;a._$Sb=function(aJ){for(var aI=aJ.length-1;aI>=0;--aI){var aH=aJ[aI];if(aH<a._$52){a._$52=aH;}else{if(aH>a._$R2){a._$R2=aH;}}}};a._$or=function(){return a._$52;};a._$Pr=function(){return a._$R2;};a.prototype._$F0=function(aH){this._$gP=aH._$nP();this._$dr=aH._$nP();this._$GS=aH._$nP();this._$qb=aH._$6L();this._$Lb=aH._$cS();this._$mS=aH._$Tb();if(aH.getFormatVersion()>=ay._$T7){this.clipID=aH._$nP();this.clipIDList=this.convertClipIDForV2_11(this.clipID);}else{this.clipIDList=null;}a._$Sb(this._$Lb);};a.prototype.getClipIDList=function(){return this.clipIDList;};a.prototype._$Nr=function(aI,aH){aH._$IS[0]=false;aH._$Us=aG._$Z2(aI,this._$GS,aH._$IS,this._$Lb);if(Q._$Zs){}else{if(aH._$IS[0]){return;}}aH._$7s=aG._$br(aI,this._$GS,aH._$IS,this._$mS);};a.prototype._$2b=function(aH){};a.prototype.getDrawDataID=function(){return this._$gP;};a.prototype._$j2=function(aH){this._$gP=aH;};a.prototype.getOpacity=function(aH,aI){return aI._$7s;};a.prototype._$zS=function(aH,aI){return aI._$Us;};a.prototype.getTargetBaseDataID=function(){return this._$dr;};a.prototype._$gs=function(aH){this._$dr=aH;};a.prototype._$32=function(){return(this._$dr!=null&&(this._$dr!=n._$2o()));};a.prototype.getType=function(){};function aq(){if(j){return;}this._$NL=null;this._$3S=null;this._$aS=null;aq._$42++;}aq._$42=0;aq.prototype._$1b=function(){return this._$3S;};aq.prototype.getDrawDataList=function(){return this._$aS;};aq.prototype._$F0=function(aH){this._$NL=aH._$nP();this._$aS=aH._$nP();this._$3S=aH._$nP();};aq.prototype._$kr=function(aH){aH._$Zo(this._$3S);aH._$xo(this._$aS);this._$3S=null;this._$aS=null;};function v(){if(j){return;}aa.prototype.constructor.call(this);this._$zo=new x();}v.prototype=new aa();v.loadModel=function(aI){var aH=new v();aa._$62(aH,aI);return aH;};v.loadModel=function(aI){var aH=new v();aa._$62(aH,aI);return aH;};v._$to=function(){var aH=new v();return aH;};v._$er=function(aM){var aJ=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(aJ.exists()==false){throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+aJ._$PL());}var aH=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"];var aK=v.loadModel(aJ._$3b());for(var aI=0;aI<aH.length;aI++){var aL=new _$5(aH[aI]);if(aL.exists()==false){throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+aL._$PL());}aK.setTexture(aI,_$nL._$_o(aM,aL._$3b()));}return aK;};v.prototype.setGL=function(aH){this._$zo.setGL(aH);};v.prototype.setTransform=function(aH){this._$zo.setTransform(aH);};v.prototype.draw=function(){this._$5S.draw(this._$zo);};v.prototype._$K2=function(){this._$zo._$K2();};v.prototype.setTexture=function(aI,aH){if(this._$zo==null){q._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");}this._$zo.setTexture(aI,aH);};v.prototype.setTexture=function(aI,aH){if(this._$zo==null){q._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");}this._$zo.setTexture(aI,aH);};v.prototype._$Rs=function(){return this._$zo._$Rs();};v.prototype._$Ds=function(aH){this._$zo._$Ds(aH);};v.prototype.getDrawParam=function(){return this._$zo;};function ao(){if(j){return;}ah.prototype.constructor.call(this);this.motions=new Array();this._$o2=null;this._$7r=ao._$Co++;this._$D0=30;this._$yT=0;this._$E=false;this.loopFadeIn=true;this._$rr=-1;this._$eP=0;}ao.prototype=new ah();ao._$cs="VISIBLE:";ao._$ar="LAYOUT:";ao.MTN_PREFIX_FADEIN="FADEIN:";ao.MTN_PREFIX_FADEOUT="FADEOUT:";ao._$Co=0;ao._$1T=1;ao.loadMotion=function(aJ){var aI=ap._$C(aJ);var aH=ao.loadMotion(aI);return aH;};function p(aI,aH){return String.fromCharCode(aI.getUint8(aH));}ao.loadMotion=function(aT){if(aT instanceof ArrayBuffer){aT=new DataView(aT);}var aN=new ao();var aI=[0];var aQ=aT.byteLength;aN._$yT=0;for(var aJ=0;aJ<aQ;++aJ){var aS=p(aT,aJ);var aL=aS.charCodeAt(0);if(aS=="\\n"||aS=="\\r"){continue;}if(aS=="#"){for(;aJ<aQ;++aJ){if(p(aT,aJ)=="\\n"||p(aT,aJ)=="\\r"){break;}}continue;}if(aS=="$"){var aV=aJ;var aK=-1;for(;aJ<aQ;++aJ){aS=p(aT,aJ);if(aS=="\\r"||aS=="\\n"){break;}if(aS=="="){aK=aJ;break;}}var aP=false;if(aK>=0){if(aK==aV+4&&p(aT,aV+1)=="f"&&p(aT,aV+2)=="p"&&p(aT,aV+3)=="s"){aP=true;}for(aJ=aK+1;aJ<aQ;++aJ){aS=p(aT,aJ);if(aS=="\\r"||aS=="\\n"){break;}if(aS==","||aS==" "||aS=="	"){continue;}var aM=G._$LS(aT,aQ,aJ,aI);if(aI[0]>0){if(aP&&5<aM&&aM<121){aN._$D0=aM;}}aJ=aI[0];}}for(;aJ<aQ;++aJ){if(p(aT,aJ)=="\\n"||p(aT,aJ)=="\\r"){break;}}continue;}if((97<=aL&&aL<=122)||(65<=aL&&aL<=90)||aS=="_"){var aV=aJ;var aK=-1;for(;aJ<aQ;++aJ){aS=p(aT,aJ);if(aS=="\\r"||aS=="\\n"){break;}if(aS=="="){aK=aJ;break;}}if(aK>=0){var aO=new t();if(G.startsWith(aT,aV,ao._$cs)){aO._$RP=t._$hs;aO._$4P=G.createString(aT,aV,aK-aV);}else{if(G.startsWith(aT,aV,ao._$ar)){aO._$4P=G.createString(aT,aV+7,aK-aV-7);if(G.startsWith(aT,aV+7,"ANCHOR_X")){aO._$RP=t._$xs;}else{if(G.startsWith(aT,aV+7,"ANCHOR_Y")){aO._$RP=t._$us;}else{if(G.startsWith(aT,aV+7,"SCALE_X")){aO._$RP=t._$qs;}else{if(G.startsWith(aT,aV+7,"SCALE_Y")){aO._$RP=t._$Ys;}else{if(G.startsWith(aT,aV+7,"X")){aO._$RP=t._$ws;}else{if(G.startsWith(aT,aV+7,"Y")){aO._$RP=t._$Ns;}}}}}}}else{aO._$RP=t._$Fr;aO._$4P=G.createString(aT,aV,aK-aV);}}aN.motions.push(aO);var aU=0;var aR=[];for(aJ=aK+1;aJ<aQ;++aJ){aS=p(aT,aJ);if(aS=="\\r"||aS=="\\n"){break;}if(aS==","||aS==" "||aS=="	"){continue;}var aM=G._$LS(aT,aQ,aJ,aI);if(aI[0]>0){aR.push(aM);aU++;var aH=aI[0];if(aH<aJ){__NONECONSOLE.log("_$n0 _$hi . @Live2DMotion loadMotion()\\n");break;}aJ=aH-1;}}aO._$I0=new Float32Array(aR);if(aU>aN._$yT){aN._$yT=aU;}}}}aN._$rr=((1000*aN._$yT)/aN._$D0)|0;return aN;};ao.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr;};ao.prototype.getLoopDurationMSec=function(){return this._$rr;};ao.prototype.dump=function(){for(var aJ=0;aJ<this.motions.length;aJ++){var aH=this.motions[aJ];__NONECONSOLE.log("_$wL[%s] [%d]. ",aH._$4P,aH._$I0.length);for(var aI=0;aI<aH._$I0.length&&aI<10;aI++){__NONECONSOLE.log("%5.2f ,",aH._$I0[aI]);}__NONECONSOLE.log("\\n");}};ao.prototype.updateParamExe=function(aJ,aN,aQ,a3){var aO=aN-a3._$z2;var a0=aO*this._$D0/1000;var aK=a0|0;var aR=a0-aK;for(var aZ=0;aZ<this.motions.length;aZ++){var aV=this.motions[aZ];var aL=aV._$I0.length;var aT=aV._$4P;if(aV._$RP==t._$hs){var aX=aV._$I0[(aK>=aL?aL-1:aK)];aJ.setParamFloat(aT,aX);}else{if(t._$ws<=aV._$RP&&aV._$RP<=t._$Ys){}else{var aH=aJ.getParamIndex(aT);var a4=aJ.getModelContext();var aY=a4.getParamMax(aH);var aW=a4.getParamMin(aH);var aM=0.4;var aS=aM*(aY-aW);var aU=a4.getParamFloat(aH);var a2=aV._$I0[(aK>=aL?aL-1:aK)];var a1=aV._$I0[(aK+1>=aL?aL-1:aK+1)];var aI;if((a2<a1&&a1-a2>aS)||(a2>a1&&a2-a1>aS)){aI=a2;}else{aI=a2+(a1-a2)*aR;}var aP=aU+(aI-aU)*aQ;aJ.setParamFloat(aT,aP);}}}if(aK>=this._$yT){if(this._$E){a3._$z2=aN;if(this.loopFadeIn){a3._$bs=aN;}}else{a3._$9L=true;}}this._$eP=aQ;};ao.prototype._$r0=function(){return this._$E;};ao.prototype._$aL=function(aH){this._$E=aH;};ao.prototype._$S0=function(){return this._$D0;};ao.prototype._$U0=function(aH){this._$D0=aH;};ao.prototype.isLoopFadeIn=function(){return this.loopFadeIn;};ao.prototype.setLoopFadeIn=function(aH){this.loopFadeIn=aH;};function aE(){this._$P=new Float32Array(100);this.size=0;}aE.prototype.clear=function(){this.size=0;};aE.prototype.add=function(aI){if(this._$P.length<=this.size){var aH=new Float32Array(this.size*2);P._$jT(this._$P,0,aH,0,this.size);this._$P=aH;}this._$P[this.size++]=aI;};aE.prototype._$BL=function(){var aH=new Float32Array(this.size);P._$jT(this._$P,0,aH,0,this.size);return aH;};function t(){this._$4P=null;this._$I0=null;this._$RP=null;}t._$Fr=0;t._$hs=1;t._$ws=100;t._$Ns=101;t._$xs=102;t._$us=103;t._$qs=104;t._$Ys=105;function E(){if(j){return;}c.prototype.constructor.call(this);this._$o=0;this._$A=0;this._$GS=null;this._$Eo=null;}E.prototype=new c();E._$gT=new Array();E.prototype._$zP=function(){this._$GS=new g();this._$GS._$zP();};E.prototype._$F0=function(aH){c.prototype._$F0.call(this,aH);this._$A=aH._$6L();this._$o=aH._$6L();this._$GS=aH._$nP();this._$Eo=aH._$nP();c.prototype.readV2_opacity.call(this,aH);};E.prototype.init=function(aH){var aI=new H(this);var aJ=(this._$o+1)*(this._$A+1);if(aI._$Cr!=null){aI._$Cr=null;}aI._$Cr=new Float32Array(aJ*2);if(aI._$hr!=null){aI._$hr=null;}if(this._$32()){aI._$hr=new Float32Array(aJ*2);}else{aI._$hr=null;}return aI;};E.prototype._$Nr=function(aJ,aI){var aK=aI;if(!this._$GS._$Ur(aJ)){return;}var aL=this._$VT();var aH=E._$gT;aH[0]=false;aG._$Vr(aJ,this._$GS,aH,aL,this._$Eo,aK._$Cr,0,2);aI._$Ib(aH[0]);this.interpolateOpacity(aJ,this._$GS,aI,aH);};E.prototype._$2b=function(aK,aJ){var aL=aJ;aL._$hS(true);if(!this._$32()){aL.setTotalOpacity(aL.getInterpolatedOpacity());}else{var aH=this.getTargetBaseDataID();if(aL._$8r==c._$ur){aL._$8r=aK.getBaseDataIndex(aH);}if(aL._$8r<0){if(Q._$so){q._$li("_$L _$0P _$G :: %s",aH);}aL._$hS(false);}else{var aN=aK.getBaseData(aL._$8r);var aI=aK._$q2(aL._$8r);if(aN!=null&&aI._$yo()){var aM=aI.getTotalScale();aL.setTotalScale_notForClient(aM);var aO=aI.getTotalOpacity();aL.setTotalOpacity(aO*aL.getInterpolatedOpacity());aN._$nb(aK,aI,aL._$Cr,aL._$hr,this._$VT(),0,2);aL._$hS(true);}else{aL._$hS(false);}}}};E.prototype._$nb=function(aL,aI,aH,aM,aO,aK,aJ){if(true){var aN=aI;var aP=(aN._$hr!=null)?aN._$hr:aN._$Cr;E.transformPoints_sdk2(aH,aM,aO,aK,aJ,aP,this._$o,this._$A);}else{this.transformPoints_sdk1(aL,aI,aH,aM,aO,aK,aJ);}};E.transformPoints_sdk2=function(a0,bc,a5,aP,aI,aR,aQ,aU){var aW=a5*aI;var aV;var bn,bm;var aT=0;var aS=0;var bl=0;var bk=0;var bf=0;var be=0;var aZ=false;for(var ba=aP;ba<aW;ba+=aI){var bd,a7,a4,aX;a4=a0[ba];aX=a0[ba+1];bd=a4*aQ;a7=aX*aU;if(bd<0||a7<0||aQ<=bd||aU<=a7){var a1=aQ+1;if(!aZ){aZ=true;aT=0.25*(aR[((0)+(0)*a1)*2]+aR[((aQ)+(0)*a1)*2]+aR[((0)+(aU)*a1)*2]+aR[((aQ)+(aU)*a1)*2]);aS=0.25*(aR[((0)+(0)*a1)*2+1]+aR[((aQ)+(0)*a1)*2+1]+aR[((0)+(aU)*a1)*2+1]+aR[((aQ)+(aU)*a1)*2+1]);var aM=aR[((aQ)+(aU)*a1)*2]-aR[((0)+(0)*a1)*2];var aL=aR[((aQ)+(aU)*a1)*2+1]-aR[((0)+(0)*a1)*2+1];var bh=aR[((aQ)+(0)*a1)*2]-aR[((0)+(aU)*a1)*2];var bg=aR[((aQ)+(0)*a1)*2+1]-aR[((0)+(aU)*a1)*2+1];bl=(aM+bh)*0.5;bk=(aL+bg)*0.5;bf=(aM-bh)*0.5;be=(aL-bg)*0.5;if(bl==0&&bk==0){}if(bf==0&&be==0){}aT-=0.5*(bl+bf);aS-=0.5*(bk+be);}if((-2<a4&&a4<3)&&(-2<aX&&aX<3)){if(a4<=0){if(aX<=0){var a3=aR[((0)+(0)*a1)*2];var a2=aR[((0)+(0)*a1)*2+1];var a8=aT-2*bl;var a6=aS-2*bk;var aK=aT-2*bf;var aJ=aS-2*be;var aO=aT-2*bl-2*bf;var aN=aS-2*bk-2*be;var bj=0.5*(a4-(-2));var bi=0.5*(aX-(-2));if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{if(aX>=1){var aK=aR[((0)+(aU)*a1)*2];var aJ=aR[((0)+(aU)*a1)*2+1];var aO=aT-2*bl+1*bf;var aN=aS-2*bk+1*be;var a3=aT+3*bf;var a2=aS+3*be;var a8=aT-2*bl+3*bf;var a6=aS-2*bk+3*be;var bj=0.5*(a4-(-2));var bi=0.5*(aX-(1));if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{var aH=(a7|0);if(aH==aU){aH=aU-1;}var bj=0.5*(a4-(-2));var bi=a7-aH;var bb=aH/aU;var a9=(aH+1)/aU;var aK=aR[((0)+(aH)*a1)*2];var aJ=aR[((0)+(aH)*a1)*2+1];var a3=aR[((0)+(aH+1)*a1)*2];var a2=aR[((0)+(aH+1)*a1)*2+1];var aO=aT-2*bl+bb*bf;var aN=aS-2*bk+bb*be;var a8=aT-2*bl+a9*bf;var a6=aS-2*bk+a9*be;if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}}}else{if(1<=a4){if(aX<=0){var a8=aR[((aQ)+(0)*a1)*2];var a6=aR[((aQ)+(0)*a1)*2+1];var a3=aT+3*bl;var a2=aS+3*bk;var aO=aT+1*bl-2*bf;var aN=aS+1*bk-2*be;var aK=aT+3*bl-2*bf;var aJ=aS+3*bk-2*be;var bj=0.5*(a4-(1));var bi=0.5*(aX-(-2));if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{if(aX>=1){var aO=aR[((aQ)+(aU)*a1)*2];var aN=aR[((aQ)+(aU)*a1)*2+1];var aK=aT+3*bl+1*bf;var aJ=aS+3*bk+1*be;var a8=aT+1*bl+3*bf;var a6=aS+1*bk+3*be;var a3=aT+3*bl+3*bf;var a2=aS+3*bk+3*be;var bj=0.5*(a4-(1));var bi=0.5*(aX-(1));if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{var aH=(a7|0);if(aH==aU){aH=aU-1;}var bj=0.5*(a4-(1));var bi=a7-aH;var bb=aH/aU;var a9=(aH+1)/aU;var aO=aR[((aQ)+(aH)*a1)*2];var aN=aR[((aQ)+(aH)*a1)*2+1];var a8=aR[((aQ)+(aH+1)*a1)*2];var a6=aR[((aQ)+(aH+1)*a1)*2+1];var aK=aT+3*bl+bb*bf;var aJ=aS+3*bk+bb*be;var a3=aT+3*bl+a9*bf;var a2=aS+3*bk+a9*be;if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}}}else{if(aX<=0){var aY=(bd|0);if(aY==aQ){aY=aQ-1;}var bj=bd-aY;var bi=0.5*(aX-(-2));var bp=aY/aQ;var bo=(aY+1)/aQ;var a8=aR[((aY)+(0)*a1)*2];var a6=aR[((aY)+(0)*a1)*2+1];var a3=aR[((aY+1)+(0)*a1)*2];var a2=aR[((aY+1)+(0)*a1)*2+1];var aO=aT+bp*bl-2*bf;var aN=aS+bp*bk-2*be;var aK=aT+bo*bl-2*bf;var aJ=aS+bo*bk-2*be;if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{if(aX>=1){var aY=(bd|0);if(aY==aQ){aY=aQ-1;}var bj=bd-aY;var bi=0.5*(aX-(1));var bp=aY/aQ;var bo=(aY+1)/aQ;var aO=aR[((aY)+(aU)*a1)*2];var aN=aR[((aY)+(aU)*a1)*2+1];var aK=aR[((aY+1)+(aU)*a1)*2];var aJ=aR[((aY+1)+(aU)*a1)*2+1];var a8=aT+bp*bl+3*bf;var a6=aS+bp*bk+3*be;var a3=aT+bo*bl+3*bf;var a2=aS+bo*bk+3*be;if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{System.err.printf("_$li calc : %.4f , %.4f					@@BDBoxGrid\\n",a4,aX);}}}}}else{bc[ba]=aT+a4*bl+aX*bf;bc[ba+1]=aS+a4*bk+aX*be;}}else{bn=bd-(bd|0);bm=a7-(a7|0);aV=2*((bd|0)+((a7|0))*(aQ+1));if(bn+bm<1){bc[ba]=aR[aV]*(1-bn-bm)+aR[aV+2]*bn+aR[aV+2*(aQ+1)]*bm;bc[ba+1]=aR[aV+1]*(1-bn-bm)+aR[aV+3]*bn+aR[aV+2*(aQ+1)+1]*bm;}else{bc[ba]=aR[aV+2*(aQ+1)+2]*(bn-1+bm)+aR[aV+2*(aQ+1)]*(1-bn)+aR[aV+2]*(1-bm);bc[ba+1]=aR[aV+2*(aQ+1)+3]*(bn-1+bm)+aR[aV+2*(aQ+1)+1]*(1-bn)+aR[aV+3]*(1-bm);}}}};E.prototype.transformPoints_sdk1=function(aJ,aR,aL,a0,aU,aP,aZ){var aH=aR;var aO,aN;var aM=this._$o;var aQ=this._$A;var aI=aU*aZ;var aS,aY;var aV;var aX,aW;var aT=(aH._$hr!=null)?aH._$hr:aH._$Cr;for(var aK=aP;aK<aI;aK+=aZ){if(Q._$ts){aO=aL[aK];aN=aL[aK+1];if(aO<0){aO=0;}else{if(aO>1){aO=1;}}if(aN<0){aN=0;}else{if(aN>1){aN=1;}}aO*=aM;aN*=aQ;aS=(aO|0);aY=(aN|0);if(aS>aM-1){aS=aM-1;}if(aY>aQ-1){aY=aQ-1;}aX=aO-aS;aW=aN-aY;aV=2*(aS+aY*(aM+1));}else{aO=aL[aK]*aM;aN=aL[aK+1]*aQ;aX=aO-(aO|0);aW=aN-(aN|0);aV=2*((aO|0)+(aN|0)*(aM+1));}if(aX+aW<1){a0[aK]=aT[aV]*(1-aX-aW)+aT[aV+2]*aX+aT[aV+2*(aM+1)]*aW;a0[aK+1]=aT[aV+1]*(1-aX-aW)+aT[aV+3]*aX+aT[aV+2*(aM+1)+1]*aW;}else{a0[aK]=aT[aV+2*(aM+1)+2]*(aX-1+aW)+aT[aV+2*(aM+1)]*(1-aX)+aT[aV+2]*(1-aW);a0[aK+1]=aT[aV+2*(aM+1)+3]*(aX-1+aW)+aT[aV+2*(aM+1)+1]*(1-aX)+aT[aV+3]*(1-aW);}}};E.prototype._$VT=function(){return(this._$o+1)*(this._$A+1);};E.prototype.getType=function(){return c._$_b;};function H(aH){B.prototype.constructor.call(this,aH);this._$8r=c._$ur;this._$Cr=null;this._$hr=null;}H.prototype=new B();function s(){if(j){return;}this.visible=true;this._$g0=false;this._$NL=null;this._$3S=null;this._$aS=null;s._$42++;}s._$42=0;s.prototype._$zP=function(){this._$3S=new Array();this._$aS=new Array();};s.prototype._$F0=function(aH){this._$g0=aH._$8L();this.visible=aH._$8L();this._$NL=aH._$nP();this._$3S=aH._$nP();this._$aS=aH._$nP();};s.prototype.init=function(aI){var aH=new aj(this);aH.setPartsOpacity(this.isVisible()?1:0);return aH;};s.prototype._$6o=function(aH){if(this._$3S==null){throw new Error("_$3S _$6 _$Wo@_$6o");}this._$3S.push(aH);};s.prototype._$3o=function(aH){if(this._$aS==null){throw new Error("_$aS _$6 _$Wo@_$3o");}this._$aS.push(aH);};s.prototype._$Zo=function(aH){this._$3S=aH;};s.prototype._$xo=function(aH){this._$aS=aH;};s.prototype.isVisible=function(){return this.visible;};s.prototype._$uL=function(){return this._$g0;};s.prototype._$KP=function(aH){this.visible=aH;};s.prototype._$ET=function(aH){this._$g0=aH;};s.prototype.getBaseData=function(){return this._$3S;};s.prototype.getDrawData=function(){return this._$aS;};s.prototype._$p2=function(){return this._$NL;};s.prototype._$ob=function(aH){this._$NL=aH;};s.prototype.getPartsID=function(){return this._$NL;};s.prototype._$MP=function(aH){this._$NL=aH;};function aj(aH){this._$VS=null;this._$e0=null;this._$e0=aH;}aj.prototype=new S();aj.prototype.getPartsOpacity=function(){return this._$VS;};aj.prototype.setPartsOpacity=function(aH){this._$VS=aH;};function ak(aH){if(j){return;}this.id=aH;}ak._$L7=function(){z._$27();n._$27();Z._$27();i._$27();};ak.prototype.toString=function(){return this.id;};function D(){}D.prototype._$F0=function(aH){};function an(){if(j){return;}this._$4S=null;}an.prototype._$1s=function(){return this._$4S;};an.prototype._$zP=function(){this._$4S=new Array();};an.prototype._$F0=function(aH){this._$4S=aH._$nP();};an.prototype._$Ks=function(aH){this._$4S.push(aH);};function au(aH,aI){this.canvas=aH;this.context=aI;this.viewport=new Array(0,0,aH.width,aH.height);this._$6r=1;this._$xP=0;this._$3r=1;this._$uP=0;this._$Qo=-1;this.cacheImages={};}au.tr=new am();au._$50=new am();au._$Ti=new Array(0,0);au._$Pi=new Array(0,0);au._$B=new Array(0,0);au.prototype._$lP=function(aI,aK,aJ,aH){this.viewport=new Array(aI,aK,aJ,aH);};au.prototype._$bL=function(){this.context.save();var aH=this.viewport;if(aH!=null){this.context.beginPath();this.context._$Li(aH[0],aH[1],aH[2],aH[3]);this.context.clip();}};au.prototype._$ei=function(){this.context.restore();};au.prototype.drawElements=function(bc,bm,aX,aJ,bA,aM,bl,bz){try{if(bA!=this._$Qo){this._$Qo=bA;this.context.globalAlpha=bA;}var a2=bm.length;var aP=bc.width;var a5=bc.height;var bE=this.context;var a7=this._$xP;var a6=this._$uP;var a1=this._$6r;var aZ=this._$3r;var bD=au.tr;var aI=au._$Ti;var aH=au._$Pi;var bu=au._$B;for(var by=0;by<a2;by+=3){bE.save();var aW=bm[by];var aV=bm[by+1];var aT=bm[by+2];var aL=a7+a1*aX[aW*2];var aK=a6+aZ*aX[aW*2+1];var br=a7+a1*aX[aV*2];var bp=a6+aZ*aX[aV*2+1];var bh=a7+a1*aX[aT*2];var bf=a6+aZ*aX[aT*2+1];if(bl){bl._$PS(aL,aK,bu);aL=bu[0];aK=bu[1];bl._$PS(br,bp,bu);br=bu[0];bp=bu[1];bl._$PS(bh,bf,bu);bh=bu[0];bf=bu[1];}var aS=aP*aJ[aW*2];var aQ=a5-a5*aJ[aW*2+1];var bx=aP*aJ[aV*2];var bw=a5-a5*aJ[aV*2+1];var bk=aP*aJ[aT*2];var bj=a5-a5*aJ[aT*2+1];var a3=Math.atan2(bw-aQ,bx-aS);var a0=Math.atan2(bp-aK,br-aL);var aO=br-aL;var aN=bp-aK;var bi=Math.sqrt(aO*aO+aN*aN);var aU=bx-aS;var aR=bw-aQ;var bt=Math.sqrt(aU*aU+aR*aR);var bv=bi/bt;ad._$ni(bk,bj,aS,aQ,(bx-aS),(bw-aQ),-(bw-aQ),(bx-aS),aI);ad._$ni(bh,bf,aL,aK,(br-aL),(bp-aK),-(bp-aK),(br-aL),aH);var aY=(aH[0]-aI[0])/aI[1];var bs=Math.min(aS,bx,bk);var bg=Math.max(aS,bx,bk);var bq=Math.min(aQ,bw,bj);var be=Math.max(aQ,bw,bj);var bo=Math.floor(bs);var bb=Math.floor(bq);var a4=Math.ceil(bg);var bC=Math.ceil(be);bD.identity();bD.translate(aL,aK);bD.rotate(a0);bD.scale(1,aH[1]/aI[1]);bD.shear(aY,0);bD.scale(bv,bv);bD.rotate(-a3);bD.translate(-aS,-aQ);bD.setContext(bE);var a8=true;var a9=1.2;if(!aM){aM=a8?a9:0;}if(Q.IGNORE_EXPAND){aM=0;}if(Q.USE_CACHED_POLYGON_IMAGE){var bd=bz._$e0;bd.gl_cacheImage=bd.gl_cacheImage||{};if(!bd.gl_cacheImage[by]){var bn=au.createCanvas(a4-bo,bC-bb);Q.DEBUG_DATA.LDGL_CANVAS_MB=Q.DEBUG_DATA.LDGL_CANVAS_MB||0;Q.DEBUG_DATA.LDGL_CANVAS_MB+=(a4-bo)*(bC-bb)*4;var ba=bn.getContext("2d");ba.translate(-bo,-bb);au.clip(ba,bD,aM,bi,aS,aQ,bx,bw,bk,bj,aL,aK,br,bp,bh,bf);ba.drawImage(bc,0,0);bd.gl_cacheImage[by]={cacheCanvas:bn,cacheContext:ba};}bE.drawImage(bd.gl_cacheImage[by]["cacheCanvas"],bo,bb);}else{if(!Q.IGNORE_CLIP){au.clip(bE,bD,aM,bi,aS,aQ,bx,bw,bk,bj,aL,aK,br,bp,bh,bf);}if(Q.USE_ADJUST_TRANSLATION){bs=0;bg=aP;bq=0;be=a5;}bE.drawImage(bc,bs,bq,bg-bs,be-bq,bs,bq,bg-bs,be-bq);}bE.restore();}}catch(bB){q._$Rb(bB);}};au.clip=function(aK,aJ,aV,aI,aM,aL,aU,aT,aQ,aP,aO,aN,aH,aW,aS,aR){if(aV>0.02){au.expandClip(aK,aJ,aV,aI,aO,aN,aH,aW,aS,aR);}else{au.clipWithTransform(aK,null,aM,aL,aU,aT,aQ,aP);}};au.expandClip=function(aV,bg,aK,a3,aJ,aI,be,ba,aZ,aX){var aP=be-aJ;var aO=ba-aI;var bi=aZ-aJ;var bh=aX-aI;var bj=aP*bh-aO*bi>0?aK:-aK;var aL=-aO;var aH=aP;var bc=aZ-be;var a8=aX-ba;var a7=-a8;var a6=bc;var aQ=Math.sqrt(bc*bc+a8*a8);var bf=-bh;var bb=bi;var a2=Math.sqrt(bi*bi+bh*bh);var bd=aJ-bj*aL/a3;var a9=aI-bj*aH/a3;var aY=be-bj*aL/a3;var aW=ba-bj*aH/a3;var a5=be-bj*a7/aQ;var a4=ba-bj*a6/aQ;var aS=aZ-bj*a7/aQ;var aR=aX-bj*a6/aQ;var aN=aJ+bj*bf/a2;var aM=aI+bj*bb/a2;var a1=aZ+bj*bf/a2;var a0=aX+bj*bb/a2;var aU=au._$50;var aT=bg._$P2(aU);if(aT==null){return false;}au.clipWithTransform(aV,aU,bd,a9,aY,aW,a5,a4,aS,aR,a1,a0,aN,aM);return true;};au.clipWithTransform=function(aH,aI,aS,aN,aQ,aK,aP,aJ){if(arguments.length<(1+3*2)){q._$li("err : @LDGL.clip()");return;}if(!(arguments[1] instanceof am)){q._$li("err : a[0] is _$6 LDTransform @LDGL.clip()");return;}var aM=au._$B;var aO=aI;var aR=arguments;aH.beginPath();if(aO){aO._$PS(aR[2],aR[3],aM);aH.moveTo(aM[0],aM[1]);for(var aL=4;aL<aR.length;aL+=2){aO._$PS(aR[aL],aR[aL+1],aM);aH.lineTo(aM[0],aM[1]);}}else{aH.moveTo(aR[2],aR[3]);for(var aL=4;aL<aR.length;aL+=2){aH.lineTo(aR[aL],aR[aL+1]);}}aH.clip();};au.createCanvas=function(aH,aJ){var aI=document.createElement("canvas");aI.setAttribute("width",aH);aI.setAttribute("height",aJ);if(!aI){q._$li("err : "+aI);}return aI;};au.dumpValues=function(){var aI="";for(var aH=0;aH<arguments.length;aH++){aI+="["+aH+"]= "+arguments[aH].toFixed(3)+" , ";}__NONECONSOLE.log(aI);};function f(){if(j){return;}this._$TT=null;this._$LT=null;this._$FS=null;this._$wL=null;}f.prototype._$F0=function(aH){this._$TT=aH._$_T();this._$LT=aH._$_T();this._$FS=aH._$_T();this._$wL=aH._$nP();};f.prototype.getMinValue=function(){return this._$TT;};f.prototype.getMaxValue=function(){return this._$LT;};f.prototype.getDefaultValue=function(){return this._$FS;};f.prototype.getParamID=function(){return this._$wL;};function B(aH){if(j){return;}this._$e0=null;this._$IP=null;this._$JS=false;this._$AT=true;this._$e0=aH;this.totalScale=1;this._$7s=1;this.totalOpacity=1;}B.prototype._$yo=function(){return this._$AT&&!this._$JS;};B.prototype._$hS=function(aH){this._$AT=aH;};B.prototype._$GT=function(){return this._$e0;};B.prototype._$l2=function(aH){this._$IP=aH;};B.prototype.getPartsIndex=function(){return this._$IP;};B.prototype._$x2=function(){return this._$JS;};B.prototype._$Ib=function(aH){this._$JS=aH;};B.prototype.getTotalScale=function(){return this.totalScale;};B.prototype.setTotalScale_notForClient=function(aH){this.totalScale=aH;};B.prototype.getInterpolatedOpacity=function(){return this._$7s;};B.prototype.setInterpolatedOpacity=function(aH){this._$7s=aH;};B.prototype.getTotalOpacity=function(aH){return this.totalOpacity;};B.prototype.setTotalOpacity=function(aH){this.totalOpacity=aH;};function Q(){}Q._$2s="2.1.00_1";Q._$Kr=201001000;Q._$sP=true;Q._$so=true;Q._$cb=false;Q._$3T=true;Q._$Ts=true;Q._$fb=true;Q._$ts=true;Q.L2D_DEFORMER_EXTEND=true;Q._$Wb=false;Q._$yr=false;Q._$Zs=false;Q.L2D_NO_ERROR=0;Q._$i7=1000;Q._$9s=1001;Q._$es=1100;Q._$r7=2000;Q._$07=2001;Q._$b7=2002;Q._$H7=4000;Q.L2D_COLOR_BLEND_MODE_MULT=0;Q.L2D_COLOR_BLEND_MODE_ADD=1;Q.L2D_COLOR_BLEND_MODE_INTERPOLATE=2;Q._$6b=true;Q._$cT=0;Q.clippingMaskBufferSize=256;Q.glContext=new Array();Q.frameBuffers=new Array();Q.fTexture=new Array();Q.IGNORE_CLIP=false;Q.IGNORE_EXPAND=false;Q.EXPAND_W=2;Q.USE_ADJUST_TRANSLATION=true;Q.USE_CANVAS_TRANSFORM=true;Q.USE_CACHED_POLYGON_IMAGE=false;Q.DEBUG_DATA={};Q.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:true,USE_CACHED_POLYGON_IMAGE:true,EXPAND_W:4};Q.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:true,USE_CACHED_POLYGON_IMAGE:false,EXPAND_W:2};Q.PROFILE_IOS_DEFAULT=Q.PROFILE_IOS_QUALITY;Q.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:false,USE_CACHED_POLYGON_IMAGE:false,EXPAND_W:2};Q.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:false,USE_CACHED_POLYGON_IMAGE:false,EXPAND_W:2};Q.initProfile=function(){if(r.isIOS()){Q.setupProfile(Q.PROFILE_IOS_DEFAULT);}else{if(r.isAndroid()){Q.setupProfile(Q.PROFILE_ANDROID);}else{Q.setupProfile(Q.PROFILE_DESKTOP);}}};Q.setupProfile=function(aI,aJ){if(typeof aI=="number"){switch(aI){case 9901:aI=Q.PROFILE_IOS_SPEED;break;case 9902:aI=Q.PROFILE_IOS_QUALITY;break;case 9903:aI=Q.PROFILE_IOS_DEFAULT;break;case 9904:aI=Q.PROFILE_ANDROID;break;case 9905:aI=Q.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+aI);break;}}if(arguments.length<2){aJ=true;}if(aJ){__NONECONSOLE.log("profile : "+aI.PROFILE_NAME);}for(var aH in aI){Q[aH]=aI[aH];if(aJ){__NONECONSOLE.log("  ["+aH+"] = "+aI[aH]);}}};Q.init=function(){if(Q._$6b){__NONECONSOLE.log("Live2D %s",Q._$2s);Q._$6b=false;var aH=false;aH=true;Q.initProfile();}};Q.getVersionStr=function(){return Q._$2s;};Q.getVersionNo=function(){return Q._$Kr;};Q._$sT=function(aH){Q._$cT=aH;};Q.getError=function(){var aH=Q._$cT;Q._$cT=0;return aH;};Q.dispose=function(){Q.glContext=[];Q.frameBuffers=[];Q.fTexture=[];};Q.setGL=function(aJ,aI){var aH=aI||0;Q.glContext[aH]=aJ;};Q.getGL=function(aH){return Q.glContext[aH];};Q.setClippingMaskBufferSize=function(aH){Q.clippingMaskBufferSize=aH;};Q.getClippingMaskBufferSize=function(){return Q.clippingMaskBufferSize;};Q.deleteBuffer=function(aI){var aH=Q.getGL(aI);aH.deleteFramebuffer(Q.frameBuffers[aI].framebuffer);delete Q.frameBuffers[aI];delete Q.glContext[aI];};function A(){}A._$r2=function(aH){if(aH<0){return 0;}else{if(aH>1){return 1;}}return(0.5-0.5*Math.cos(aH*aC.PI_F));};function J(aH){if(j){return;}this._$ib=aH;}J._$fr=-1;J.prototype.toString=function(){return this._$ib;};function b(){if(j){return;}a.prototype.constructor.call(this);this._$LP=-1;this._$d0=0;this._$Yo=0;this._$JP=null;this._$5P=null;this._$BP=null;this._$Eo=null;this._$Qi=null;this._$6s=b._$ms;this.culling=true;this.gl_cacheImage=null;this.instanceNo=b._$42++;}b.prototype=new a();b._$42=0;b._$Os=30;b._$ms=0;b._$ns=1;b._$_s=2;b._$gT=new Array();b.prototype._$_S=function(aH){this._$LP=aH;};b.prototype.getTextureNo=function(){return this._$LP;};b.prototype._$ZL=function(){return this._$Qi;};b.prototype._$H2=function(){return this._$JP;};b.prototype.getNumPoints=function(){return this._$d0;};b.prototype.getType=function(){return a._$wb;};b.prototype._$B2=function(aL,aH,aO){var aM=aH;var aN=(aM._$hr!=null)?aM._$hr:aM._$Cr;var aK=aw._$do;switch(aK){default:case aw._$Ms:throw new Error("_$L _$ro ");case aw._$Qs:for(var aJ=this._$d0-1;aJ>=0;--aJ){var aI=aJ*aw._$No;aN[aI+4]=aO;}break;}};b.prototype._$zP=function(){this._$GS=new g();this._$GS._$zP();};b.prototype._$F0=function(aK){a.prototype._$F0.call(this,aK);this._$LP=aK._$6L();this._$d0=aK._$6L();this._$Yo=aK._$6L();var aH=aK._$nP();this._$BP=new Int16Array(this._$Yo*3);for(var aJ=this._$Yo*3-1;aJ>=0;--aJ){this._$BP[aJ]=aH[aJ];}this._$Eo=aK._$nP();this._$Qi=aK._$nP();if(aK.getFormatVersion()>=ay._$s7){this._$JP=aK._$6L();if(this._$JP!=0){if((this._$JP&1)!=0){var aI=aK._$6L();if(this._$5P==null){this._$5P=new Object();}this._$5P._$Hb=parseInt(aI);}if((this._$JP&b._$Os)!=0){this._$6s=(this._$JP&b._$Os)>>1;}else{this._$6s=b._$ms;}if((this._$JP&32)!=0){this.culling=false;}}}else{this._$JP=0;}};b.prototype.init=function(aL){var aN=new ag(this);var aI=this._$d0*aw._$No;var aH=this._$32();if(aN._$Cr!=null){aN._$Cr=null;}aN._$Cr=new Float32Array(aI);if(aN._$hr!=null){aN._$hr=null;}aN._$hr=aH?new Float32Array(aI):null;var aM=aw._$do;switch(aM){default:case aw._$Ms:if(aw._$Ls){for(var aJ=this._$d0-1;aJ>=0;--aJ){var aO=aJ<<1;this._$Qi[aO+1]=1-this._$Qi[aO+1];}}break;case aw._$Qs:for(var aJ=this._$d0-1;aJ>=0;--aJ){var aO=aJ<<1;var aK=aJ*aw._$No;var aQ=this._$Qi[aO];var aP=this._$Qi[aO+1];aN._$Cr[aK]=aQ;aN._$Cr[aK+1]=aP;aN._$Cr[aK+4]=0;if(aH){aN._$hr[aK]=aQ;aN._$hr[aK+1]=aP;aN._$hr[aK+4]=0;}}break;}return aN;};b.prototype._$Nr=function(aJ,aH){var aK=aH;if(!((this==aK._$GT()))){__NONECONSOLE.log("### assert!! ### ");}if(!this._$GS._$Ur(aJ)){return;}a.prototype._$Nr.call(this,aJ,aK);if(aK._$IS[0]){return;}var aI=b._$gT;aI[0]=false;aG._$Vr(aJ,this._$GS,aI,this._$d0,this._$Eo,aK._$Cr,aw._$i2,aw._$No);};b.prototype._$2b=function(aK,aI){try{if(!((this==aI._$GT()))){__NONECONSOLE.log("### assert!! ### ");}var aL=false;if(aI._$IS[0]){aL=true;}var aM=aI;if(!aL){a.prototype._$2b.call(this,aK);if(this._$32()){var aH=this.getTargetBaseDataID();if(aM._$8r==a._$ur){aM._$8r=aK.getBaseDataIndex(aH);}if(aM._$8r<0){if(Q._$so){q._$li("_$L _$0P _$G :: %s",aH);}}else{var aO=aK.getBaseData(aM._$8r);var aJ=aK._$q2(aM._$8r);if(aO!=null&&!aJ._$x2()){aO._$nb(aK,aJ,aM._$Cr,aM._$hr,this._$d0,aw._$i2,aw._$No);aM._$AT=true;}else{aM._$AT=false;}aM.baseOpacity=aJ.getTotalOpacity();}}}}catch(aN){throw aN;}};b.prototype.draw=function(aN,aK,aI){if(!((this==aI._$GT()))){__NONECONSOLE.log("### assert!! ### ");}if(aI._$IS[0]){return;}var aL=aI;var aJ=this._$LP;if(aJ<0){aJ=1;}var aH=this.getOpacity(aK,aL)*aI._$VS*aI.baseOpacity;var aM=(aL._$hr!=null)?aL._$hr:aL._$Cr;aN.setClipBufPre_clipContextForDraw(aI.clipBufPre_clipContext);aN._$WP(this.culling);aN._$Uo(aJ,3*this._$Yo,this._$BP,aM,this._$Qi,aH,this._$6s,aL);};b.prototype.dump=function(){__NONECONSOLE.log("  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) \\n",this._$LP,this._$d0,this._$Yo);__NONECONSOLE.log("  _$Oi _$di = { ");for(var aJ=0;aJ<this._$BP.length;aJ++){__NONECONSOLE.log("%5d ,",this._$BP[aJ]);}__NONECONSOLE.log("\\n  _$5i _$30");for(var aJ=0;aJ<this._$Eo.length;aJ++){__NONECONSOLE.log("\\n    _$30[%d] = ",aJ);var aH=this._$Eo[aJ];for(var aI=0;aI<aH.length;aI++){__NONECONSOLE.log("%6.2f, ",aH[aI]);}}__NONECONSOLE.log("\\n");};b.prototype._$72=function(aH){if(this._$5P==null){return null;}return this._$5P[aH];};b.prototype.getIndexArray=function(){return this._$BP;};function ag(aH){aB.prototype.constructor.call(this,aH);this._$8r=a._$ur;this._$Cr=null;this._$hr=null;}ag.prototype=new aB();ag.prototype.getTransformedPoints=function(){return(this._$hr!=null)?this._$hr:this._$Cr;};function k(){if(j){return;}this.x=null;this.y=null;}k.prototype._$HT=function(aH){this.x=aH.x;this.y=aH.y;};k.prototype._$HT=function(aH,aI){this.x=aH;this.y=aI;};function l(aH){if(j){return;}aa.prototype.constructor.call(this);this.drawParamWebGL=new C(aH);this.drawParamWebGL.setGL(Q.getGL(aH));}l.prototype=new aa();l.loadModel=function(aI){var aH=new l();aa._$62(aH,aI);return aH;};l.loadModel=function(aI,aK){var aJ=aK||0;var aH=new l(aJ);aa._$62(aH,aI);return aH;};l._$to=function(){var aH=new l();return aH;};l._$er=function(aM){var aJ=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(aJ.exists()==false){throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+aJ._$PL());}var aH=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"];var aK=l.loadModel(aJ._$3b());for(var aI=0;aI<aH.length;aI++){var aL=new _$5(aH[aI]);if(aL.exists()==false){throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+aL._$PL());}aK.setTexture(aI,_$nL._$_o(aM,aL._$3b()));}return aK;};l.prototype.setGL=function(aH){Q.setGL(aH);};l.prototype.setTransform=function(aH){this.drawParamWebGL.setTransform(aH);};l.prototype.update=function(){this._$5S.update();this._$5S.preDraw(this.drawParamWebGL);};l.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL);};l.prototype._$K2=function(){this.drawParamWebGL._$K2();};l.prototype.setTexture=function(aI,aH){if(this.drawParamWebGL==null){q._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");}this.drawParamWebGL.setTexture(aI,aH);};l.prototype.setTexture=function(aI,aH){if(this.drawParamWebGL==null){q._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!");}this.drawParamWebGL.setTexture(aI,aH);};l.prototype._$Rs=function(){return this.drawParamWebGL._$Rs();};l.prototype._$Ds=function(aH){this.drawParamWebGL._$Ds(aH);};l.prototype.getDrawParam=function(){return this.drawParamWebGL;};l.prototype.setMatrix=function(aH){this.drawParamWebGL.setMatrix(aH);};l.prototype.setPremultipliedAlpha=function(aH){this.drawParamWebGL.setPremultipliedAlpha(aH);};l.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha();};l.prototype.setAnisotropy=function(aH){this.drawParamWebGL.setAnisotropy(aH);};l.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy();};function V(){if(j){return;}this.motions=null;this._$eb=false;this.motions=new Array();}V.prototype._$tb=function(){return this.motions;};V.prototype.startMotion=function(aJ,aI){var aM=null;var aL=null;var aH=this.motions.length;for(var aK=0;aK<aH;++aK){aL=this.motions[aK];if(aL==null){continue;}aL._$qS(aL._$w0.getFadeOut());if(this._$eb){q._$Ji("MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)\\n",aH,aL._$sr);}}if(aJ==null){return -1;}aL=new M();aL._$w0=aJ;this.motions.push(aL);var aN=aL._$sr;if(this._$eb){q._$Ji("MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)\\n",aH,aN);}return aN;};V.prototype.updateParam=function(aJ){try{var aI=false;for(var aK=0;aK<this.motions.length;aK++){var aL=this.motions[aK];if(aL==null){this.motions.splice(aK,1);aK--;continue;}var aH=aL._$w0;if(aH==null){this.motions=this.motions.splice(aK,1);aK--;continue;}aH.updateParam(aJ,aL);aI=true;if(aL.isFinished()){if(this._$eb){q._$Ji("MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)\\n",this.motions.length-1,aL._$sr);}this.motions.splice(aK,1);aK--;}else{}}return aI;}catch(aM){q._$li(aM);return true;}};V.prototype.isFinished=function(aK){if(arguments.length>=1){for(var aI=0;aI<this.motions.length;aI++){var aJ=this.motions[aI];if(aJ==null){continue;}if(aJ._$sr==aK&&!aJ.isFinished()){return false;}}return true;}else{for(var aI=0;aI<this.motions.length;aI++){var aJ=this.motions[aI];if(aJ==null){this.motions.splice(aI,1);aI--;continue;}var aH=aJ._$w0;if(aH==null){this.motions.splice(aI,1);aI--;continue;}if(!aJ.isFinished()){return false;}}return true;}};V.prototype.stopAllMotions=function(){for(var aI=0;aI<this.motions.length;aI++){var aJ=this.motions[aI];if(aJ==null){this.motions.splice(aI,1);aI--;continue;}var aH=aJ._$w0;if(aH==null){this.motions.splice(aI,1);aI--;continue;}if(true){this.motions.splice(aI,1);aI--;}}};V.prototype._$Zr=function(aH){this._$eb=aH;};V.prototype._$e=function(){__NONECONSOLE.log("-- _$R --\\n");for(var aH=0;aH<this.motions.length;aH++){var aI=this.motions[aH];var aJ=aI._$w0;__NONECONSOLE.log("MotionQueueEnt[%d] :: %s\\n",this.motions.length,aJ.toString());}};function M(){this._$w0=null;this._$AT=true;this._$9L=false;this._$z2=-1;this._$bs=-1;this._$Do=-1;this._$sr=null;this._$sr=M._$Gs++;}M._$Gs=0;M.prototype.isFinished=function(){return this._$9L;};M.prototype._$qS=function(aJ){var aI=P.getUserTimeMSec();var aH=aI+aJ;if(this._$Do<0||aH<this._$Do){this._$Do=aH;}};M.prototype._$Bs=function(){return this._$sr;};function am(){this.m=new Array(1,0,0,0,1,0,0,0,1);}am.prototype.setContext=function(aI){var aH=this.m;aI.transform(aH[0],aH[1],aH[3],aH[4],aH[6],aH[7]);};am.prototype.toString=function(){var aI="LDTransform { ";for(var aH=0;aH<9;aH++){aI+=this.m[aH].toFixed(2)+" ,";}aI+=" }";return aI;};am.prototype.identity=function(){var aH=this.m;aH[0]=aH[4]=aH[8]=1;aH[1]=aH[2]=aH[3]=aH[5]=aH[6]=aH[7]=0;};am.prototype._$PS=function(aI,aK,aJ){if(aJ==null){aJ=new Array(0,0);}var aH=this.m;aJ[0]=aH[0]*aI+aH[3]*aK+aH[6];aJ[1]=aH[1]*aI+aH[4]*aK+aH[7];return aJ;};am.prototype._$P2=function(aK){if(!aK){aK=new am();}var aI=this.m;var aT=aI[0];var aS=aI[1];var aR=aI[2];var aQ=aI[3];var aP=aI[4];var aO=aI[5];var aN=aI[6];var aM=aI[7];var aL=aI[8];var aJ=aT*aP*aL+aS*aO*aN+aR*aQ*aM-aT*aO*aM-aR*aP*aN-aS*aQ*aL;if(aJ==0){return null;}else{var aH=1/aJ;aK.m[0]=aH*(aP*aL-aM*aO);aK.m[1]=aH*(aM*aR-aS*aL);aK.m[2]=aH*(aS*aO-aP*aR);aK.m[3]=aH*(aN*aO-aQ*aL);aK.m[4]=aH*(aT*aL-aN*aR);aK.m[5]=aH*(aQ*aR-aT*aO);aK.m[6]=aH*(aQ*aM-aN*aP);aK.m[7]=aH*(aN*aS-aT*aM);aK.m[8]=aH*(aT*aP-aQ*aS);return aK;}};am.prototype.transform=function(aI,aK,aJ){if(aJ==null){aJ=new Array(0,0);}var aH=this.m;aJ[0]=aH[0]*aI+aH[3]*aK+aH[6];aJ[1]=aH[1]*aI+aH[4]*aK+aH[7];return aJ;};am.prototype.translate=function(aI,aJ){var aH=this.m;aH[6]=aH[0]*aI+aH[3]*aJ+aH[6];aH[7]=aH[1]*aI+aH[4]*aJ+aH[7];aH[8]=aH[2]*aI+aH[5]*aJ+aH[8];};am.prototype.scale=function(aJ,aI){var aH=this.m;aH[0]*=aJ;aH[1]*=aJ;aH[2]*=aJ;aH[3]*=aI;aH[4]*=aI;aH[5]*=aI;};am.prototype.shear=function(aM,aL){var aH=this.m;var aK=aH[0]+aH[3]*aL;var aJ=aH[1]+aH[4]*aL;var aI=aH[2]+aH[5]*aL;aH[3]=aH[0]*aM+aH[3];aH[4]=aH[1]*aM+aH[4];aH[5]=aH[2]*aM+aH[5];aH[0]=aK;aH[1]=aJ;aH[2]=aI;};am.prototype.rotate=function(aM){var aH=this.m;var aN=Math.cos(aM);var aL=Math.sin(aM);var aK=aH[0]*aN+aH[3]*aL;var aJ=aH[1]*aN+aH[4]*aL;var aI=aH[2]*aN+aH[5]*aL;aH[3]=-aH[0]*aL+aH[3]*aN;aH[4]=-aH[1]*aL+aH[4]*aN;aH[5]=-aH[2]*aL+aH[5]*aN;aH[0]=aK;aH[1]=aJ;aH[2]=aI;};am.prototype.concatenate=function(aL){var aO=this.m;var aM=aL.m;var aS=aO[0]*aM[0]+aO[3]*aM[1]+aO[6]*aM[2];var aR=aO[1]*aM[0]+aO[4]*aM[1]+aO[7]*aM[2];var aQ=aO[2]*aM[0]+aO[5]*aM[1]+aO[8]*aM[2];var aP=aO[0]*aM[3]+aO[3]*aM[4]+aO[6]*aM[5];var aN=aO[1]*aM[3]+aO[4]*aM[4]+aO[7]*aM[5];var aK=aO[2]*aM[3]+aO[5]*aM[4]+aO[8]*aM[5];var aJ=aO[0]*aM[6]+aO[3]*aM[7]+aO[6]*aM[8];var aI=aO[1]*aM[6]+aO[4]*aM[7]+aO[7]*aM[8];var aH=aO[2]*aM[6]+aO[5]*aM[7]+aO[8]*aM[8];m[0]=aS;m[1]=aR;m[2]=aQ;m[3]=aP;m[4]=aN;m[5]=aK;m[6]=aJ;m[7]=aI;m[8]=aH;};function n(aH){if(j){return;}ak.prototype.constructor.call(this,aH);}n.prototype=new ak();n._$eT=null;n._$tP=new Object();n._$2o=function(){if(n._$eT==null){n._$eT=n.getID("DST_BASE");}return n._$eT;};n._$27=function(){n._$tP.clear();n._$eT=null;};n.getID=function(aH){var aI=n._$tP[aH];if(aI==null){aI=new n(aH);n._$tP[aH]=aI;}return aI;};n.prototype._$3s=function(){return new n();};function C(aH){if(j){return;}ax.prototype.constructor.call(this);this.textures=new Array();this.transform=null;this.gl=null;this.glno=aH;this.firstDraw=true;this.anisotropyExt=null;this.maxAnisotropy=0;this._$As=32;this._$Gr=false;this._$NT=null;this._$vS=null;this._$no=null;this.vertShader=null;this.fragShader=null;this.vertShaderOff=null;this.fragShaderOff=null;}C.prototype=new ax();C._$9r=function(aH){var aI=new Float32Array(aH);return aI;};C._$vb=function(aH){var aI=new Int16Array(aH);return aI;};C._$cr=function(aI,aH){if(aI==null||aI._$yL()<aH.length){aI=C._$9r(aH.length*2);aI.put(aH);aI._$oT(0);}else{aI.clear();aI.put(aH);aI._$oT(0);}return aI;};C._$mb=function(aI,aH){if(aI==null||aI._$yL()<aH.length){aI=C._$vb(aH.length*2);aI.put(aH);aI._$oT(0);}else{aI.clear();aI.put(aH);aI._$oT(0);}return aI;};C._$Hs=function(){return this._$Gr;};C._$as=function(aH){this._$Gr=aH;};C.prototype.getGL=function(){return this.gl;};C.prototype.setGL=function(aH){this.gl=aH;};C.prototype.setTransform=function(aH){this.transform=aH;};C.prototype._$ZT=function(){var aH=this.gl;if(this.firstDraw){this.initShader();this.firstDraw=false;this.anisotropyExt=aH.getExtension("EXT_texture_filter_anisotropic")||aH.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||aH.getExtension("MOZ_EXT_texture_filter_anisotropic");if(this.anisotropyExt){this.maxAnisotropy=aH.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);}}aH.disable(aH.SCISSOR_TEST);aH.disable(aH.STENCIL_TEST);aH.disable(aH.DEPTH_TEST);aH.frontFace(aH.CW);aH.enable(aH.BLEND);aH.colorMask(1,1,1,1);aH.bindBuffer(aH.ARRAY_BUFFER,null);aH.bindBuffer(aH.ELEMENT_ARRAY_BUFFER,null);};C.prototype._$Uo=function(aS,aT,aL,aU,aV,aN,aM,aO){if(aN<0.01&&this.clipBufPre_clipContextMask==null){return;}var aH=aN>0.9?Q.EXPAND_W:0;var a0=this.gl;if(this.gl==null){throw new Error("gl is null");}var a1=false;var aQ=1;var aP=1;var a3=1;var aZ=1;var aW=this._$C0*aP*aN;var a2=this._$tT*a3*aN;var a5=this._$WL*aZ*aN;var a7=this._$lT*aN;if(this.clipBufPre_clipContextMask!=null){a0.frontFace(a0.CCW);a0.useProgram(this.shaderProgram);this._$vS=T(a0,this._$vS,aU);this._$no=L(a0,this._$no,aL);a0.enableVertexAttribArray(this.a_position_Loc);a0.vertexAttribPointer(this.a_position_Loc,2,a0.FLOAT,false,0,0);this._$NT=T(a0,this._$NT,aV);a0.activeTexture(a0.TEXTURE1);a0.bindTexture(a0.TEXTURE_2D,this.textures[aS]);a0.uniform1i(this.s_texture0_Loc,1);a0.enableVertexAttribArray(this.a_texCoord_Loc);a0.vertexAttribPointer(this.a_texCoord_Loc,2,a0.FLOAT,false,0,0);a0.uniformMatrix4fv(this.u_matrix_Loc,false,this.getClipBufPre_clipContextMask().matrixForMask);var aY=this.getClipBufPre_clipContextMask().layoutChannelNo;var a4=this.getChannelFlagAsColor(aY);a0.uniform4f(this.u_channelFlag,a4.r,a4.g,a4.b,a4.a);var aI=this.getClipBufPre_clipContextMask().layoutBounds;a0.uniform4f(this.u_baseColor_Loc,aI.x*2-1,aI.y*2-1,aI._$EL()*2-1,aI._$5T()*2-1);a0.uniform1i(this.u_maskFlag_Loc,true);}else{a1=this.getClipBufPre_clipContextDraw()!=null;if(a1){a0.useProgram(this.shaderProgramOff);this._$vS=T(a0,this._$vS,aU);this._$no=L(a0,this._$no,aL);a0.enableVertexAttribArray(this.a_position_Loc_Off);a0.vertexAttribPointer(this.a_position_Loc_Off,2,a0.FLOAT,false,0,0);this._$NT=T(a0,this._$NT,aV);a0.activeTexture(a0.TEXTURE1);a0.bindTexture(a0.TEXTURE_2D,this.textures[aS]);a0.uniform1i(this.s_texture0_Loc_Off,1);a0.enableVertexAttribArray(this.a_texCoord_Loc_Off);a0.vertexAttribPointer(this.a_texCoord_Loc_Off,2,a0.FLOAT,false,0,0);a0.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,false,this.getClipBufPre_clipContextDraw().matrixForDraw);a0.uniformMatrix4fv(this.u_matrix_Loc_Off,false,this.matrix4x4);a0.activeTexture(a0.TEXTURE2);a0.bindTexture(a0.TEXTURE_2D,Q.fTexture[this.glno]);a0.uniform1i(this.s_texture1_Loc_Off,2);var aY=this.getClipBufPre_clipContextDraw().layoutChannelNo;var a4=this.getChannelFlagAsColor(aY);a0.uniform4f(this.u_channelFlag_Loc_Off,a4.r,a4.g,a4.b,a4.a);a0.uniform4f(this.u_baseColor_Loc_Off,aW,a2,a5,a7);}else{a0.useProgram(this.shaderProgram);this._$vS=T(a0,this._$vS,aU);this._$no=L(a0,this._$no,aL);a0.enableVertexAttribArray(this.a_position_Loc);a0.vertexAttribPointer(this.a_position_Loc,2,a0.FLOAT,false,0,0);this._$NT=T(a0,this._$NT,aV);a0.activeTexture(a0.TEXTURE1);a0.bindTexture(a0.TEXTURE_2D,this.textures[aS]);a0.uniform1i(this.s_texture0_Loc,1);a0.enableVertexAttribArray(this.a_texCoord_Loc);a0.vertexAttribPointer(this.a_texCoord_Loc,2,a0.FLOAT,false,0,0);a0.uniformMatrix4fv(this.u_matrix_Loc,false,this.matrix4x4);a0.uniform4f(this.u_baseColor_Loc,aW,a2,a5,a7);a0.uniform1i(this.u_maskFlag_Loc,false);}}if(this.culling){this.gl.enable(a0.CULL_FACE);}else{this.gl.disable(a0.CULL_FACE);}this.gl.enable(a0.BLEND);var a6;var aX;var aR;var aK;if(this.clipBufPre_clipContextMask!=null){a6=a0.ONE;aX=a0.ONE_MINUS_SRC_ALPHA;aR=a0.ONE;aK=a0.ONE_MINUS_SRC_ALPHA;}else{switch(aM){case b._$ms:a6=a0.ONE;aX=a0.ONE_MINUS_SRC_ALPHA;aR=a0.ONE;aK=a0.ONE_MINUS_SRC_ALPHA;break;case b._$ns:a6=a0.ONE;aX=a0.ONE;aR=a0.ZERO;aK=a0.ONE;break;case b._$_s:a6=a0.DST_COLOR;aX=a0.ONE_MINUS_SRC_ALPHA;aR=a0.ZERO;aK=a0.ONE;break;}}a0.blendEquationSeparate(a0.FUNC_ADD,a0.FUNC_ADD);a0.blendFuncSeparate(a6,aX,aR,aK);if(this.anisotropyExt){a0.texParameteri(a0.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);}var aJ=aL.length;a0.drawElements(a0.TRIANGLES,aJ,a0.UNSIGNED_SHORT,0);a0.bindTexture(a0.TEXTURE_2D,null);};function T(aJ,aH,aI){if(aH==null){aH=aJ.createBuffer();}aJ.bindBuffer(aJ.ARRAY_BUFFER,aH);aJ.bufferData(aJ.ARRAY_BUFFER,aI,aJ.DYNAMIC_DRAW);return aH;}function L(aJ,aH,aI){if(aH==null){aH=aJ.createBuffer();}aJ.bindBuffer(aJ.ELEMENT_ARRAY_BUFFER,aH);aJ.bufferData(aJ.ELEMENT_ARRAY_BUFFER,aI,aJ.DYNAMIC_DRAW);return aH;}C.prototype._$Rs=function(){throw new Error("_$Rs");};C.prototype._$Ds=function(aH){throw new Error("_$Ds");};C.prototype._$K2=function(){for(var aH=0;aH<this.textures.length;aH++){var aI=this.textures[aH];if(aI!=0){this.gl._$K2(1,this.textures,aH);this.textures[aH]=null;}}};C.prototype.setTexture=function(aH,aI){this.textures[aH]=aI;};C.prototype.initShader=function(){var aH=this.gl;this.loadShaders2();this.a_position_Loc=aH.getAttribLocation(this.shaderProgram,"a_position");this.a_texCoord_Loc=aH.getAttribLocation(this.shaderProgram,"a_texCoord");this.u_matrix_Loc=aH.getUniformLocation(this.shaderProgram,"u_mvpMatrix");this.s_texture0_Loc=aH.getUniformLocation(this.shaderProgram,"s_texture0");this.u_channelFlag=aH.getUniformLocation(this.shaderProgram,"u_channelFlag");this.u_baseColor_Loc=aH.getUniformLocation(this.shaderProgram,"u_baseColor");this.u_maskFlag_Loc=aH.getUniformLocation(this.shaderProgram,"u_maskFlag");this.a_position_Loc_Off=aH.getAttribLocation(this.shaderProgramOff,"a_position");this.a_texCoord_Loc_Off=aH.getAttribLocation(this.shaderProgramOff,"a_texCoord");this.u_matrix_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix");this.u_clipMatrix_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix");this.s_texture0_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,"s_texture0");this.s_texture1_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,"s_texture1");this.u_channelFlag_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,"u_channelFlag");this.u_baseColor_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,"u_baseColor");};C.prototype.disposeShader=function(){var aH=this.gl;if(this.shaderProgram){aH.deleteProgram(this.shaderProgram);this.shaderProgram=null;}if(this.shaderProgramOff){aH.deleteProgram(this.shaderProgramOff);this.shaderProgramOff=null;}};C.prototype.compileShader=function(aJ,aN){var aM=this.gl;var aH;var aL=aN;var aK=aM.createShader(aJ);if(aK==null){q._$Ji("_$L0 to create shader");return null;}aM.shaderSource(aK,aL);aM.compileShader(aK);var aH=aM.getShaderParameter(aK,aM.COMPILE_STATUS);if(!aH){var aI=aM.getShaderInfoLog(aK);q._$Ji("_$L0 to compile shader : "+aI);aM.deleteShader(aK);return null;}return aK;};C.prototype.loadShaders2=function(){var aN=this.gl;this.shaderProgram=aN.createProgram();if(!this.shaderProgram){return false;}this.shaderProgramOff=aN.createProgram();if(!this.shaderProgramOff){return false;}var aK="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}";var aM="precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}";var aL="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}";var aJ="precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}";this.vertShader=this.compileShader(aN.VERTEX_SHADER,aK);if(!this.vertShader){q._$Ji("Vertex shader compile _$li!");return false;}this.vertShaderOff=this.compileShader(aN.VERTEX_SHADER,aL);if(!this.vertShaderOff){q._$Ji("OffVertex shader compile _$li!");return false;}this.fragShader=this.compileShader(aN.FRAGMENT_SHADER,aM);if(!this.fragShader){q._$Ji("Fragment shader compile _$li!");return false;}this.fragShaderOff=this.compileShader(aN.FRAGMENT_SHADER,aJ);if(!this.fragShaderOff){q._$Ji("OffFragment shader compile _$li!");return false;}aN.attachShader(this.shaderProgram,this.vertShader);aN.attachShader(this.shaderProgram,this.fragShader);aN.attachShader(this.shaderProgramOff,this.vertShaderOff);aN.attachShader(this.shaderProgramOff,this.fragShaderOff);aN.linkProgram(this.shaderProgram);aN.linkProgram(this.shaderProgramOff);var aH=aN.getProgramParameter(this.shaderProgram,aN.LINK_STATUS);if(!aH){var aI=aN.getProgramInfoLog(this.shaderProgram);q._$Ji("_$L0 to link program: "+aI);if(this.vertShader){aN.deleteShader(this.vertShader);this.vertShader=0;}if(this.fragShader){aN.deleteShader(this.fragShader);this.fragShader=0;}if(this.shaderProgram){aN.deleteProgram(this.shaderProgram);this.shaderProgram=0;}if(this.vertShaderOff){aN.deleteShader(this.vertShaderOff);this.vertShaderOff=0;}if(this.fragShaderOff){aN.deleteShader(this.fragShaderOff);this.fragShaderOff=0;}if(this.shaderProgramOff){aN.deleteProgram(this.shaderProgramOff);this.shaderProgramOff=0;}return false;}return true;};C.prototype.createFramebuffer=function(){var aL=this.gl;var aK=Q.clippingMaskBufferSize;var aJ=aL.createFramebuffer();aL.bindFramebuffer(aL.FRAMEBUFFER,aJ);var aH=aL.createRenderbuffer();aL.bindRenderbuffer(aL.RENDERBUFFER,aH);aL.renderbufferStorage(aL.RENDERBUFFER,aL.RGBA4,aK,aK);aL.framebufferRenderbuffer(aL.FRAMEBUFFER,aL.COLOR_ATTACHMENT0,aL.RENDERBUFFER,aH);var aI=aL.createTexture();aL.bindTexture(aL.TEXTURE_2D,aI);aL.texImage2D(aL.TEXTURE_2D,0,aL.RGBA,aK,aK,0,aL.RGBA,aL.UNSIGNED_BYTE,null);aL.texParameteri(aL.TEXTURE_2D,aL.TEXTURE_MIN_FILTER,aL.LINEAR);aL.texParameteri(aL.TEXTURE_2D,aL.TEXTURE_MAG_FILTER,aL.LINEAR);aL.texParameteri(aL.TEXTURE_2D,aL.TEXTURE_WRAP_S,aL.CLAMP_TO_EDGE);aL.texParameteri(aL.TEXTURE_2D,aL.TEXTURE_WRAP_T,aL.CLAMP_TO_EDGE);aL.framebufferTexture2D(aL.FRAMEBUFFER,aL.COLOR_ATTACHMENT0,aL.TEXTURE_2D,aI,0);aL.bindTexture(aL.TEXTURE_2D,null);aL.bindRenderbuffer(aL.RENDERBUFFER,null);aL.bindFramebuffer(aL.FRAMEBUFFER,null);Q.fTexture[this.glno]=aI;return{framebuffer:aJ,renderbuffer:aH,texture:Q.fTexture[this.glno]};};function K(aH){if(j){return;}this._$P=new Int8Array(8);this._$R0=new DataView(this._$P.buffer);this._$3i=new Int8Array(1000);this._$hL=0;this._$v0=0;this._$S2=0;this._$Ko=new Array();this._$T=aH;this._$F=0;}K.prototype._$fP=function(){var aK=this._$ST();var aJ,aI,aH;if((aK&128)==0){return aK&255;}else{if(((aJ=this._$ST())&128)==0){return((aK&127)<<7)|(aJ&127);}else{if(((aI=this._$ST())&128)==0){return((aK&127)<<14)|((aJ&127)<<7)|(aI&255);}else{if(((aH=this._$ST())&128)==0){return((aK&127)<<21)|((aJ&127)<<14)|((aI&127)<<7)|(aH&255);}else{throw new J("_$L _$0P  _");}}}}};K.prototype.getFormatVersion=function(){return this._$S2;};K.prototype._$gr=function(aH){this._$S2=aH;};K.prototype._$3L=function(){return this._$fP();};K.prototype._$mP=function(){this._$zT();this._$F+=8;return this._$T.getFloat64(this._$F-8);};K.prototype._$_T=function(){this._$zT();this._$F+=4;return this._$T.getFloat32(this._$F-4);};K.prototype._$6L=function(){this._$zT();this._$F+=4;return this._$T.getInt32(this._$F-4);};K.prototype._$ST=function(){this._$zT();return this._$T.getInt8(this._$F++);};K.prototype._$9T=function(){this._$zT();this._$F+=2;return this._$T.getInt16(this._$F-2);};K.prototype._$2T=function(){this._$zT();this._$F+=8;throw new J("_$L _$q read long");};K.prototype._$po=function(){this._$zT();return this._$T.getInt8(this._$F++)!=0;};var O=true;K.prototype._$bT=function(){this._$zT();var aH=this._$3L();var aK=null;if(O){try{var aM=new ArrayBuffer(aH*2);aK=new Uint16Array(aM);for(var aJ=0;aJ<aH;++aJ){aK[aJ]=this._$T.getUint8(this._$F++);}return String.fromCharCode.apply(null,aK);}catch(aL){O=false;}}try{var aI=new Array();if(aK==null){for(var aJ=0;aJ<aH;++aJ){aI[aJ]=this._$T.getUint8(this._$F++);}}else{for(var aJ=0;aJ<aH;++aJ){aI[aJ]=aK[aJ];}}return String.fromCharCode.apply(null,aI);}catch(aL){__NONECONSOLE.log("read utf8 / _$rT _$L0 !! : "+aL);}};K.prototype._$cS=function(){this._$zT();var aI=this._$3L();var aH=new Int32Array(aI);for(var aJ=0;aJ<aI;aJ++){aH[aJ]=this._$T.getInt32(this._$F);this._$F+=4;}return aH;};K.prototype._$Tb=function(){this._$zT();var aI=this._$3L();var aH=new Float32Array(aI);for(var aJ=0;aJ<aI;aJ++){aH[aJ]=this._$T.getFloat32(this._$F);this._$F+=4;}return aH;};K.prototype._$5b=function(){this._$zT();var aI=this._$3L();var aH=new Float64Array(aI);for(var aJ=0;aJ<aI;aJ++){aH[aJ]=this._$T.getFloat64(this._$F);this._$F+=8;}return aH;};K.prototype._$nP=function(){return this._$Jb(-1);};K.prototype._$Jb=function(aJ){this._$zT();if(aJ<0){aJ=this._$3L();}if(aJ==ay._$7P){var aH=this._$6L();if(0<=aH&&aH<this._$Ko.length){return this._$Ko[aH];}else{throw new J("_$sL _$4i @_$m0");}}else{var aI=this._$4b(aJ);this._$Ko.push(aI);return aI;}};K.prototype._$4b=function(aN){if(aN==0){return null;}if(aN==50){var aK=this._$bT();var aI=Z.getID(aK);return aI;}else{if(aN==51){var aK=this._$bT();var aI=n.getID(aK);return aI;}else{if(aN==134){var aK=this._$bT();var aI=i.getID(aK);return aI;}else{if(aN==60){var aK=this._$bT();var aI=z.getID(aK);return aI;}}}}if(aN>=48){var aL=ay._$9o(aN);if(aL!=null){aL._$F0(this);return aL;}else{return null;}}switch(aN){case 1:return this._$bT();case 10:var aM=this._$6L();return new I(aM,true);case 11:return new av(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new av(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new e(this._$mP(),this._$mP());case 14:return new e(this._$_T(),this._$_T());case 15:var aH=this._$3L();var aI=new Array(aH);for(var aJ=0;aJ<aH;aJ++){aI[aJ]=this._$nP();}return aI;case 17:var aI=new aD(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());return aI;case 21:return new F(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new k(this._$6L(),this._$6L());case 23:throw new Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new J("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+aN);default:throw new J("_$6 _$q : _$nP() NO _$i : "+aN);}};K.prototype._$8L=function(){if(this._$hL==0){this._$v0=this._$ST();}else{if(this._$hL==8){this._$v0=this._$ST();this._$hL=0;}}return((this._$v0>>(7-this._$hL++))&1)==1;};K.prototype._$zT=function(){if(this._$hL!=0){this._$hL=0;}};function ai(){}ai.prototype._$wP=function(aM,aI,aK){for(var aL=0;aL<aK;aL++){for(var aH=0;aH<aI;aH++){var aJ=2*(aH+aL*aI);__NONECONSOLE.log("(% 7.3f , % 7.3f) , ",aM[aJ],aM[aJ+1]);}__NONECONSOLE.log("\\n");}__NONECONSOLE.log("\\n");};function aC(){}aC._$2S=Math.PI/180;aC._$bS=(Math.PI/180);aC._$wS=180/Math.PI;aC._$NS=(180/Math.PI);aC.PI_F=Math.PI;aC._$kT=[0,0.012368,0.024734,0.037097,0.049454,0.061803,0.074143,0.086471,0.098786,0.111087,0.12337,0.135634,0.147877,0.160098,0.172295,0.184465,0.196606,0.208718,0.220798,0.232844,0.244854,0.256827,0.268761,0.280654,0.292503,0.304308,0.316066,0.327776,0.339436,0.351044,0.362598,0.374097,0.385538,0.396921,0.408243,0.419502,0.430697,0.441826,0.452888,0.463881,0.474802,0.485651,0.496425,0.507124,0.517745,0.528287,0.538748,0.549126,0.559421,0.56963,0.579752,0.589785,0.599728,0.609579,0.619337,0.629,0.638567,0.648036,0.657406,0.666676,0.675843,0.684908,0.693867,0.70272,0.711466,0.720103,0.72863,0.737045,0.745348,0.753536,0.76161,0.769566,0.777405,0.785125,0.792725,0.800204,0.807561,0.814793,0.821901,0.828884,0.835739,0.842467,0.849066,0.855535,0.861873,0.868079,0.874153,0.880093,0.885898,0.891567,0.897101,0.902497,0.907754,0.912873,0.917853,0.922692,0.92739,0.931946,0.936359,0.940629,0.944755,0.948737,0.952574,0.956265,0.959809,0.963207,0.966457,0.96956,0.972514,0.97532,0.977976,0.980482,0.982839,0.985045,0.987101,0.989006,0.990759,0.992361,0.993811,0.995109,0.996254,0.997248,0.998088,0.998776,0.999312,0.999694,0.999924,1];aC._$92=function(aK,aI){var aH=Math.atan2(aK[1],aK[0]);var aJ=Math.atan2(aI[1],aI[0]);return aC._$tS(aH,aJ);};aC._$tS=function(aI,aH){var aJ=aI-aH;while(aJ<-Math.PI){aJ+=2*Math.PI;}while(aJ>Math.PI){aJ-=2*Math.PI;}return aJ;};aC._$9=function(aH){return Math.sin(aH);};aC.fcos=function(aH){return Math.cos(aH);};function aB(aH){if(j){return;}this._$e0=null;this._$IP=null;this._$Us=null;this._$7s=null;this._$IS=[false];this._$VS=null;this._$AT=true;this.baseOpacity=1;this.clipBufPre_clipContext=null;this._$e0=aH;}aB.prototype._$u2=function(){return this._$IS[0];};aB.prototype._$yo=function(){return this._$AT&&!this._$IS[0];};aB.prototype._$GT=function(){return this._$e0;};function r(){}r._$W2=0;r.SYSTEM_INFO=null;r.USER_AGENT=navigator.userAgent;r.isIPhone=function(){if(!r.SYSTEM_INFO){r.setup();}return r.SYSTEM_INFO._isIPhone;};r.isIOS=function(){if(!r.SYSTEM_INFO){r.setup();}return r.SYSTEM_INFO._isIPhone||r.SYSTEM_INFO._isIPad;};r.isAndroid=function(){if(!r.SYSTEM_INFO){r.setup();}return r.SYSTEM_INFO._isAndroid;};r.getOSVersion=function(){if(!r.SYSTEM_INFO){r.setup();}return r.SYSTEM_INFO.version;};r.getOS=function(){if(!r.SYSTEM_INFO){r.setup();}if(r.SYSTEM_INFO._isIPhone||r.SYSTEM_INFO._isIPad){return"iOS";}if(r.SYSTEM_INFO._isAndroid){return"Android";}else{return"_$Q0 OS";}};r.setup=function(){var aK=r.USER_AGENT;function aI(aO,aR){var aN=aO.substring(aR).split(/[ _,;.]/);var aQ=0;for(var aM=0;aM<=2;aM++){if(isNaN(aN[aM])){break;}var aP=parseInt(aN[aM]);if(aP<0||aP>999){q._$li("err : "+aP+" @UtHtml5.setup()");aQ=0;break;}aQ+=aP*Math.pow(1000,(2-aM));}return aQ;}var aL;var aH;var aJ=r.SYSTEM_INFO={userAgent:aK};if((aL=aK.indexOf("iPhone OS "))>=0){aJ.os="iPhone";aJ._isIPhone=true;aJ.version=aI(aK,aL+"iPhone OS ".length);}else{if((aL=aK.indexOf("iPad"))>=0){aL=aK.indexOf("CPU OS");if(aL<0){q._$li(" err : "+aK+" @UtHtml5.setup()");return;}aJ.os="iPad";aJ._isIPad=true;aJ.version=aI(aK,aL+"CPU OS ".length);}else{if((aL=aK.indexOf("Android"))>=0){aJ.os="Android";aJ._isAndroid=true;aJ.version=aI(aK,aL+"Android ".length);}else{aJ.os="-";aJ.version=-1;}}}};window.UtSystem=P;window.UtDebug=q;window.LDTransform=am;window.LDGL=au;window.Live2D=Q;window.Live2DModelWebGL=l;window.Live2DModelJS=v;window.Live2DMotion=ao;window.MotionQueueManager=V;window.PhysicsHair=u;window.AMotion=ah;window.PartsDataID=i;window.DrawDataID=Z;window.BaseDataID=n;window.ParamID=z;Q.init();var j=false;})();
`;
q0.append(H2);
var lh;
(function(i) {
  var t, e = function() {
    function A() {
    }
    return A.getVersion = function() {
      return g.ccall("csmGetVersion", "number", [], []);
    }, A.getLatestMocVersion = function() {
      return g.ccall("csmGetLatestMocVersion", "number", [], []);
    }, A.getMocVersion = function(x, w) {
      return g.ccall(
        "csmGetMocVersion",
        "number",
        ["number", "number"],
        [x, w]
      );
    }, A.getSizeofModel = function(x) {
      return g.ccall("csmGetSizeofModel", "number", ["number"], [x]);
    }, A.reviveMocInPlace = function(x, w) {
      return g.ccall(
        "csmReviveMocInPlace",
        "number",
        ["number", "number"],
        [x, w]
      );
    }, A.initializeModelInPlace = function(x, w, C) {
      return g.ccall(
        "csmInitializeModelInPlace",
        "number",
        ["number", "number", "number"],
        [x, w, C]
      );
    }, A.hasMocConsistency = function(x, w) {
      return g.ccall(
        "csmHasMocConsistency",
        "number",
        ["number", "number"],
        [x, w]
      );
    }, A.getParameterCount = function(x) {
      return g.ccall(
        "csmGetParameterCount",
        "number",
        ["number"],
        [x]
      );
    }, A.getParameterIds = function(x) {
      return g.ccall("csmGetParameterIds", "number", ["number"], [x]);
    }, A.getParameterMinimumValues = function(x) {
      return g.ccall(
        "csmGetParameterMinimumValues",
        "number",
        ["number"],
        [x]
      );
    }, A.getParameterTypes = function(x) {
      return g.ccall(
        "csmGetParameterTypes",
        "number",
        ["number"],
        [x]
      );
    }, A.getParameterMaximumValues = function(x) {
      return g.ccall(
        "csmGetParameterMaximumValues",
        "number",
        ["number"],
        [x]
      );
    }, A.getParameterDefaultValues = function(x) {
      return g.ccall(
        "csmGetParameterDefaultValues",
        "number",
        ["number"],
        [x]
      );
    }, A.getParameterValues = function(x) {
      return g.ccall(
        "csmGetParameterValues",
        "number",
        ["number"],
        [x]
      );
    }, A.getParameterKeyCounts = function(x) {
      return g.ccall(
        "csmGetParameterKeyCounts",
        "number",
        ["number"],
        [x]
      );
    }, A.getParameterKeyValues = function(x) {
      return g.ccall(
        "csmGetParameterKeyValues",
        "number",
        ["number"],
        [x]
      );
    }, A.getPartCount = function(x) {
      return g.ccall("csmGetPartCount", "number", ["number"], [x]);
    }, A.getPartIds = function(x) {
      return g.ccall("csmGetPartIds", "number", ["number"], [x]);
    }, A.getPartOpacities = function(x) {
      return g.ccall(
        "csmGetPartOpacities",
        "number",
        ["number"],
        [x]
      );
    }, A.getPartParentPartIndices = function(x) {
      return g.ccall(
        "csmGetPartParentPartIndices",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableCount = function(x) {
      return g.ccall(
        "csmGetDrawableCount",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableIds = function(x) {
      return g.ccall("csmGetDrawableIds", "number", ["number"], [x]);
    }, A.getDrawableConstantFlags = function(x) {
      return g.ccall(
        "csmGetDrawableConstantFlags",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableDynamicFlags = function(x) {
      return g.ccall(
        "csmGetDrawableDynamicFlags",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableTextureIndices = function(x) {
      return g.ccall(
        "csmGetDrawableTextureIndices",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableDrawOrders = function(x) {
      return g.ccall(
        "csmGetDrawableDrawOrders",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableRenderOrders = function(x) {
      return g.ccall(
        "csmGetDrawableRenderOrders",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableOpacities = function(x) {
      return g.ccall(
        "csmGetDrawableOpacities",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableMaskCounts = function(x) {
      return g.ccall(
        "csmGetDrawableMaskCounts",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableMasks = function(x) {
      return g.ccall(
        "csmGetDrawableMasks",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableVertexCounts = function(x) {
      return g.ccall(
        "csmGetDrawableVertexCounts",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableVertexPositions = function(x) {
      return g.ccall(
        "csmGetDrawableVertexPositions",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableVertexUvs = function(x) {
      return g.ccall(
        "csmGetDrawableVertexUvs",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableIndexCounts = function(x) {
      return g.ccall(
        "csmGetDrawableIndexCounts",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableIndices = function(x) {
      return g.ccall(
        "csmGetDrawableIndices",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableMultiplyColors = function(x) {
      return g.ccall(
        "csmGetDrawableMultiplyColors",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableScreenColors = function(x) {
      return g.ccall(
        "csmGetDrawableScreenColors",
        "number",
        ["number"],
        [x]
      );
    }, A.getDrawableParentPartIndices = function(x) {
      return g.ccall(
        "csmGetDrawableParentPartIndices",
        "number",
        ["number"],
        [x]
      );
    }, A.mallocMoc = function(x) {
      return g.ccall("csmMallocMoc", "number", ["number"], [x]);
    }, A.mallocModelAndInitialize = function(x) {
      return g.ccall(
        "csmMallocModelAndInitialize",
        "number",
        ["number"],
        [x]
      );
    }, A.malloc = function(x) {
      return g.ccall("csmMalloc", "number", ["number"], [x]);
    }, A.setLogFunction = function(x) {
      g.ccall("csmSetLogFunction", null, ["number"], [x]);
    }, A.updateModel = function(x) {
      g.ccall("csmUpdateModel", null, ["number"], [x]);
    }, A.readCanvasInfo = function(x, w, C, O) {
      g.ccall(
        "csmReadCanvasInfo",
        null,
        ["number", "number", "number", "number"],
        [x, w, C, O]
      );
    }, A.resetDrawableDynamicFlags = function(x) {
      g.ccall("csmResetDrawableDynamicFlags", null, ["number"], [x]);
    }, A.free = function(x) {
      g.ccall("csmFree", null, ["number"], [x]);
    }, A.initializeAmountOfMemory = function(x) {
      g.ccall("csmInitializeAmountOfMemory", null, ["number"], [x]);
    }, A;
  }(), u = (i.AlignofMoc = 64, i.AlignofModel = 16, i.MocVersion_Unknown = 0, i.MocVersion_30 = 1, i.MocVersion_33 = 2, i.MocVersion_40 = 3, i.MocVersion_42 = 4, i.MocVersion_50 = 5, i.ParameterType_Normal = 0, i.ParameterType_BlendShape = 1, function() {
    function A() {
    }
    return A.csmGetVersion = function() {
      return e.getVersion();
    }, A.csmGetLatestMocVersion = function() {
      return e.getLatestMocVersion();
    }, A.csmGetMocVersion = function(x, w) {
      return e.getMocVersion(x._ptr, w.byteLength);
    }, A;
  }()), u = (i.Version = u, function() {
    function A() {
    }
    return A.csmSetLogFunction = function(x) {
      A.logFunction = x, x = g.addFunction(A.wrapLogFunction, "vi"), e.setLogFunction(x);
    }, A.csmGetLogFunction = function() {
      return A.logFunction;
    }, A.wrapLogFunction = function(x) {
      x = g.UTF8ToString(x), A.logFunction(x);
    }, A;
  }()), u = (i.Logging = u, function() {
    function A(x) {
      var w = e.mallocMoc(x.byteLength);
      w && (new Uint8Array(g.HEAPU8.buffer, w, x.byteLength).set(
        new Uint8Array(x)
      ), this._ptr = e.reviveMocInPlace(w, x.byteLength), this._ptr || e.free(w));
    }
    return A.prototype.hasMocConsistency = function(x) {
      var w = e.mallocMoc(x.byteLength);
      if (w)
        return new Uint8Array(
          g.HEAPU8.buffer,
          w,
          x.byteLength
        ).set(new Uint8Array(x)), x = e.hasMocConsistency(
          w,
          x.byteLength
        ), e.free(w), x;
    }, A.fromArrayBuffer = function(x) {
      return x && (x = new A(x))._ptr ? x : null;
    }, A.prototype._release = function() {
      e.free(this._ptr), this._ptr = 0;
    }, A;
  }()), u = (i.Moc = u, function() {
    function A(x) {
      this._ptr = e.mallocModelAndInitialize(x._ptr), this._ptr && (this.parameters = new n(this._ptr), this.parts = new s(this._ptr), this.drawables = new o(this._ptr), this.canvasinfo = new a(this._ptr));
    }
    return A.fromMoc = function(x) {
      return x = new A(x), x._ptr ? x : null;
    }, A.prototype.update = function() {
      e.updateModel(this._ptr);
    }, A.prototype.release = function() {
      e.free(this._ptr), this._ptr = 0;
    }, A;
  }()), a = (i.Model = u, function(A) {
    var x, w, C, O, L, D, H;
    A && (C = (x = new Float32Array(2)).length * x.BYTES_PER_ELEMENT, w = e.malloc(C), (w = new Uint8Array(
      g.HEAPU8.buffer,
      w,
      C
    )).set(new Uint8Array(x.buffer)), L = (C = new Float32Array(2)).length * C.BYTES_PER_ELEMENT, O = e.malloc(L), (O = new Uint8Array(
      g.HEAPU8.buffer,
      O,
      L
    )).set(new Uint8Array(C.buffer)), D = (L = new Float32Array(1)).length * L.BYTES_PER_ELEMENT, H = e.malloc(D), (H = new Uint8Array(
      g.HEAPU8.buffer,
      H,
      D
    )).set(new Uint8Array(L.buffer)), e.readCanvasInfo(
      A,
      w.byteOffset,
      O.byteOffset,
      H.byteOffset
    ), x = new Float32Array(
      w.buffer,
      w.byteOffset,
      w.length
    ), C = new Float32Array(
      O.buffer,
      O.byteOffset,
      O.length
    ), L = new Float32Array(
      H.buffer,
      H.byteOffset,
      H.length
    ), this.CanvasWidth = x[0], this.CanvasHeight = x[1], this.CanvasOriginX = C[0], this.CanvasOriginY = C[1], this.PixelsPerUnit = L[0], e.free(w.byteOffset), e.free(O.byteOffset), e.free(H.byteOffset));
  }), n = (i.CanvasInfo = a, function(A) {
    this.count = e.getParameterCount(A), x = e.getParameterCount(A), this.ids = new Array(x);
    for (var x, w, C = new Uint32Array(
      g.HEAPU32.buffer,
      e.getParameterIds(A),
      x
    ), O = 0; O < C.length; O++)
      this.ids[O] = g.UTF8ToString(C[O]);
    x = e.getParameterCount(A), this.minimumValues = new Float32Array(
      g.HEAPF32.buffer,
      e.getParameterMinimumValues(A),
      x
    ), x = e.getParameterCount(A), this.types = new Int32Array(
      g.HEAP32.buffer,
      e.getParameterTypes(A),
      x
    ), x = e.getParameterCount(A), this.maximumValues = new Float32Array(
      g.HEAPF32.buffer,
      e.getParameterMaximumValues(A),
      x
    ), x = e.getParameterCount(A), this.defaultValues = new Float32Array(
      g.HEAPF32.buffer,
      e.getParameterDefaultValues(A),
      x
    ), x = e.getParameterCount(A), this.values = new Float32Array(
      g.HEAPF32.buffer,
      e.getParameterValues(A),
      x
    ), x = e.getParameterCount(A), this.keyCounts = new Int32Array(
      g.HEAP32.buffer,
      e.getParameterKeyCounts(A),
      x
    ), x = e.getParameterCount(A), w = new Int32Array(
      g.HEAP32.buffer,
      e.getParameterKeyCounts(A),
      x
    ), this.keyValues = new Array(x);
    for (var L = new Uint32Array(
      g.HEAPU32.buffer,
      e.getParameterKeyValues(A),
      x
    ), O = 0; O < L.length; O++)
      this.keyValues[O] = new Float32Array(
        g.HEAPF32.buffer,
        L[O],
        w[O]
      );
  }), s = (i.Parameters = n, function(A) {
    this.count = e.getPartCount(A), x = e.getPartCount(A), this.ids = new Array(x);
    for (var x, w = new Uint32Array(
      g.HEAPU32.buffer,
      e.getPartIds(A),
      x
    ), C = 0; C < w.length; C++)
      this.ids[C] = g.UTF8ToString(w[C]);
    x = e.getPartCount(A), this.opacities = new Float32Array(
      g.HEAPF32.buffer,
      e.getPartOpacities(A),
      x
    ), x = e.getPartCount(A), this.parentIndices = new Int32Array(
      g.HEAP32.buffer,
      e.getPartParentPartIndices(A),
      x
    );
  }), o = (i.Parts = s, function() {
    function A(x) {
      this._modelPtr = x;
      for (var w, C = null, O = (this.count = e.getDrawableCount(x), w = e.getDrawableCount(x), this.ids = new Array(w), new Uint32Array(
        g.HEAPU32.buffer,
        e.getDrawableIds(x),
        w
      )), L = 0; L < O.length; L++)
        this.ids[L] = g.UTF8ToString(O[L]);
      w = e.getDrawableCount(x), this.constantFlags = new Uint8Array(
        g.HEAPU8.buffer,
        e.getDrawableConstantFlags(x),
        w
      ), w = e.getDrawableCount(x), this.dynamicFlags = new Uint8Array(
        g.HEAPU8.buffer,
        e.getDrawableDynamicFlags(x),
        w
      ), w = e.getDrawableCount(x), this.textureIndices = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableTextureIndices(x),
        w
      ), w = e.getDrawableCount(x), this.drawOrders = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableDrawOrders(x),
        w
      ), w = e.getDrawableCount(x), this.renderOrders = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableRenderOrders(x),
        w
      ), w = e.getDrawableCount(x), this.opacities = new Float32Array(
        g.HEAPF32.buffer,
        e.getDrawableOpacities(x),
        w
      ), w = e.getDrawableCount(x), this.maskCounts = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableMaskCounts(x),
        w
      ), w = e.getDrawableCount(x), this.vertexCounts = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableVertexCounts(x),
        w
      ), w = e.getDrawableCount(x), this.indexCounts = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableIndexCounts(x),
        w
      ), w = e.getDrawableCount(x), this.multiplyColors = new Float32Array(
        g.HEAPF32.buffer,
        e.getDrawableMultiplyColors(x),
        4 * w
      ), w = e.getDrawableCount(x), this.screenColors = new Float32Array(
        g.HEAPF32.buffer,
        e.getDrawableScreenColors(x),
        4 * w
      ), w = e.getDrawableCount(x), this.parentPartIndices = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableParentPartIndices(x),
        w
      ), w = e.getDrawableCount(x), C = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableMaskCounts(x),
        w
      ), this.masks = new Array(w);
      for (var D = new Uint32Array(
        g.HEAPU32.buffer,
        e.getDrawableMasks(x),
        w
      ), L = 0; L < D.length; L++)
        this.masks[L] = new Int32Array(
          g.HEAP32.buffer,
          D[L],
          C[L]
        );
      w = e.getDrawableCount(x), C = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableVertexCounts(x),
        w
      ), this.vertexPositions = new Array(w);
      for (var H = new Uint32Array(
        g.HEAPU32.buffer,
        e.getDrawableVertexPositions(x),
        w
      ), L = 0; L < H.length; L++)
        this.vertexPositions[L] = new Float32Array(
          g.HEAPF32.buffer,
          H[L],
          2 * C[L]
        );
      w = e.getDrawableCount(x), C = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableVertexCounts(x),
        w
      ), this.vertexUvs = new Array(w);
      for (var k = new Uint32Array(
        g.HEAPU32.buffer,
        e.getDrawableVertexUvs(x),
        w
      ), L = 0; L < k.length; L++)
        this.vertexUvs[L] = new Float32Array(
          g.HEAPF32.buffer,
          k[L],
          2 * C[L]
        );
      w = e.getDrawableCount(x), C = new Int32Array(
        g.HEAP32.buffer,
        e.getDrawableIndexCounts(x),
        w
      ), this.indices = new Array(w);
      for (var G = new Uint32Array(
        g.HEAPU32.buffer,
        e.getDrawableIndices(x),
        w
      ), L = 0; L < G.length; L++)
        this.indices[L] = new Uint16Array(
          g.HEAPU16.buffer,
          G[L],
          C[L]
        );
    }
    return A.prototype.resetDynamicFlags = function() {
      e.resetDrawableDynamicFlags(this._modelPtr);
    }, A;
  }()), u = (i.Drawables = o, function() {
    function A() {
    }
    return A.hasBlendAdditiveBit = function(x) {
      return (1 & x) == 1;
    }, A.hasBlendMultiplicativeBit = function(x) {
      return (2 & x) == 2;
    }, A.hasIsDoubleSidedBit = function(x) {
      return (4 & x) == 4;
    }, A.hasIsInvertedMaskBit = function(x) {
      return (8 & x) == 8;
    }, A.hasIsVisibleBit = function(x) {
      return (1 & x) == 1;
    }, A.hasVisibilityDidChangeBit = function(x) {
      return (2 & x) == 2;
    }, A.hasOpacityDidChangeBit = function(x) {
      return (4 & x) == 4;
    }, A.hasDrawOrderDidChangeBit = function(x) {
      return (8 & x) == 8;
    }, A.hasRenderOrderDidChangeBit = function(x) {
      return (16 & x) == 16;
    }, A.hasVertexPositionsDidChangeBit = function(x) {
      return (32 & x) == 32;
    }, A.hasBlendColorDidChangeBit = function(x) {
      return (64 & x) == 64;
    }, A;
  }()), u = (i.Utils = u, function() {
    function A() {
    }
    return A.initializeAmountOfMemory = function(x) {
      16777216 < x && e.initializeAmountOfMemory(x);
    }, A;
  }()), m = (i.Memory = u, t = typeof document != "undefined" && document.currentScript ? document.currentScript.src : void 0, function(A) {
    A = A || {};
    var x, w, C = {};
    for (w in x = x || (A !== void 0 ? A : {}))
      x.hasOwnProperty(w) && (C[w] = x[w]);
    var O, L, D, H, z = !1, k = typeof window == "object", G = typeof importScripts == "function", z = typeof process == "object" && typeof process.versions == "object" && typeof process.versions.node == "string" && !k && !G, Y = !k && !z && !G, Ze = "", K = (z ? (Ze = __dirname + "/", D = function(Q, rt) {
      var _t = ai(Q);
      return _t || (O = O || require("fs"), Q = (L = L || require("path")).normalize(Q), _t = O.readFileSync(Q)), rt ? _t : _t.toString();
    }, H = function(Q) {
      return Bt(
        (Q = (Q = D(Q, !0)).buffer ? Q : new Uint8Array(Q)).buffer
      ), Q;
    }, 1 < process.argv.length && process.argv[1].replace(/\\/g, "/"), process.argv.slice(2), process.on("uncaughtException", function(Q) {
      throw Q;
    }), process.on("unhandledRejection", re), x.inspect = function() {
      return "[Emscripten Module object]";
    }) : Y ? (typeof read != "undefined" && (D = function(Q) {
      var rt = ai(Q);
      return rt ? ii(rt) : read(Q);
    }), H = function(Q) {
      var rt;
      if (!(rt = ai(Q))) {
        if (typeof readbuffer == "function")
          return new Uint8Array(readbuffer(Q));
        Bt(typeof (rt = read(Q, "binary")) == "object");
      }
      return rt;
    }, typeof print != "undefined" && ((console = typeof console == "undefined" ? {} : console).log = print, console.warn = console.error = typeof printErr != "undefined" ? printErr : print)) : (k || G) && (G ? Ze = self.location.href : document.currentScript && (Ze = document.currentScript.src), Ze = (Ze = t || Ze).indexOf("blob:") !== 0 ? Ze.substr(0, Ze.lastIndexOf("/") + 1) : "", D = function(Q) {
      try {
        var rt = new XMLHttpRequest();
        return rt.open("GET", Q, !1), rt.send(null), rt.responseText;
      } catch (_t) {
        if (Q = ai(Q))
          return ii(Q);
        throw _t;
      }
    }, G) && (H = function(Q) {
      try {
        var rt = new XMLHttpRequest();
        return rt.open("GET", Q, !1), rt.responseType = "arraybuffer", rt.send(null), new Uint8Array(rt.response);
      } catch (_t) {
        if (Q = ai(Q))
          return Q;
        throw _t;
      }
    }), x.print || console.log.bind(console)), J = x.printErr || console.warn.bind(console);
    for (w in C)
      C.hasOwnProperty(w) && (x[w] = C[w]);
    function nt() {
      return {
        exports: function(Q, rt, _t) {
          var ct = new ArrayBuffer(8), St = new Int32Array(ct), ie = new Float32Array(ct), ce = new Float64Array(ct);
          function Pt(h, d) {
            St[h] = d;
          }
          function kr() {
            return ce[0];
          }
          function ge(h) {
            ce[0] = h;
          }
          function jt(h) {
            ie[0] = h;
          }
          function Lt() {
            return ie[0];
          }
          ct = rt.buffer;
          var lo, Ft, Ce, Ni, ht, st, ca, r, ut, ni, ke, $, Vt, j, b, we, za, Ue, ho, uo, Il, Pl, Ml, X, Ur, lo = new Uint8Array(ct);
          return (ct = function(h, d) {
            var E, p;
            if (typeof Buffer == "undefined")
              for (E = atob(d), p = 0; p < E.length; p++)
                lo[h + p] = E.charCodeAt(p);
            else
              for (E = Buffer.from(d, "base64"), p = 0; p < E.length; p++)
                lo[h + p] = E[p];
          })(
            1024,
            "QW4gZXJyb3Igb2NjdXJyZWQgaW4gdGhlIGludGVycG9sYXRpb24gZm9yIGJsZW5kIHNoYXBlcy4gQ29tYmluYXRpb25Db3VudCBpcyAlZC4ACgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGlzIG1vYzMgc2l6ZSBpcyBpbnZhbGlkLgoAW0NTTV0gW0VdJXM6ICVzCgBbQ1NNXSBbV11Sb3RhdGlvbkRlZm9ybWVyOiBOb3QgZm91bmQgdHJhbnNmb3JtZWQgRGlyZWN0aW9uLgoAW0NTTV0gW0VdVXBkYXRlRGVmb3JtZXJIaWVyYXJjaHkoKTogVW5rbm93biBEZWZvcm1lciBUeXBlLgoAJXMKACAgAE1PQzMAImFkZHJlc3MiIGlzIG51bGwuACUwMlggAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBGaWxlVHlwZSBpcyBpbnZhbGlkLgoAImFkZHJlc3MiIGFsaWdubWVudCBpcyBpbnZhbGlkLgBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogVGhpcyBtb2MzIHZlciBpcyBpbnZhbGlkIFt2ZXI6JWRdLgoAInNpemUiIGlzIGludmFsaWQuAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGUgQ29yZSB1bnN1cHBvcnQgbGF0ZXIgdGhhbiBtb2MzIHZlcjpbJWRdLiBUaGlzIG1vYzMgdmVyIGlzIFslZF0uCgAibW9kZWwiIGlzIGludmFsaWQuAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBIZWFkZXIgc2VjdGlvbiBpcyBpbnZhbGlkLgoAIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AW0NTTV0gW0VdY3NtSGFzTW9jQ29uc2lzdGVuY3k6IERhdGEgc2VjdGlvbiBpcyBpbnZhbGlkLgoAIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgBbQ1NNXSBbRV1jc21SZXZpdmVNb2NJblBsYWNlIGlzIGZhaWxlZC4gQ29ycnVwdGVkICBtb2MzIGZpbGUuCgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIFRoZSBDb3JlIHVuc3VwcG9ydCBsYXRlciB0aGFuIG1vYzMgdmVyOlslZF0uIFRoaXMgbW9jMyB2ZXIgaXMgWyVkXS4KACJtb2MiIGlzIGludmFsaWQuAFtDU01dIFtFXWNzbUdldE1vY1ZlcnNpb24gaXMgZmFpbGVkLiBDb3JydXB0ZWQgbW9jMyBmaWxlLgoAInNpemUiIGlzIGludmFsaWQATGl2ZTJEIEN1YmlzbSBTREsgQ29yZSBWZXJzaW9uICVkLiVkLiVkAGNzbUdldE1vY1ZlcnNpb24AY3NtSGFzTW9jQ29uc2lzdGVuY3kAY3NtUmV2aXZlTW9jSW5QbGFjZQBjc21SZWFkQ2FudmFzSW5mbwBjc21HZXRTaXplb2ZNb2RlbABjc21Jbml0aWFsaXplTW9kZWxJblBsYWNlAGNzbVVwZGF0ZU1vZGVsAGNzbUdldFBhcmFtZXRlckNvdW50AGNzbUdldFBhcmFtZXRlcklkcwBjc21HZXRQYXJhbWV0ZXJUeXBlcwBjc21HZXRQYXJhbWV0ZXJNaW5pbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlck1heGltdW1WYWx1ZXMAY3NtR2V0UGFyYW1ldGVyRGVmYXVsdFZhbHVlcwBjc21HZXRQYXJhbWV0ZXJWYWx1ZXMAY3NtR2V0UGFydENvdW50AGNzbUdldFBhcnRJZHMAY3NtR2V0UGFydE9wYWNpdGllcwBjc21HZXRQYXJ0UGFyZW50UGFydEluZGljZXMAY3NtR2V0RHJhd2FibGVDb3VudABjc21HZXREcmF3YWJsZUlkcwBjc21HZXREcmF3YWJsZUNvbnN0YW50RmxhZ3MAY3NtR2V0RHJhd2FibGVEeW5hbWljRmxhZ3MAY3NtR2V0RHJhd2FibGVUZXh0dXJlSW5kaWNlcwBjc21HZXREcmF3YWJsZURyYXdPcmRlcnMAY3NtR2V0RHJhd2FibGVSZW5kZXJPcmRlcnMAY3NtR2V0RHJhd2FibGVPcGFjaXRpZXMAY3NtR2V0RHJhd2FibGVNYXNrQ291bnRzAGNzbUdldERyYXdhYmxlTWFza3MAY3NtR2V0RHJhd2FibGVWZXJ0ZXhDb3VudHMAY3NtR2V0RHJhd2FibGVWZXJ0ZXhQb3NpdGlvbnMAY3NtR2V0RHJhd2FibGVWZXJ0ZXhVdnMAY3NtR2V0RHJhd2FibGVJbmRleENvdW50cwBjc21HZXREcmF3YWJsZUluZGljZXMAY3NtR2V0RHJhd2FibGVNdWx0aXBseUNvbG9ycwBjc21HZXREcmF3YWJsZVNjcmVlbkNvbG9ycwBjc21HZXREcmF3YWJsZVBhcmVudFBhcnRJbmRpY2VzAGNzbVJlc2V0RHJhd2FibGVEeW5hbWljRmxhZ3MAY3NtR2V0UGFyYW1ldGVyS2V5Q291bnRzAGNzbUdldFBhcmFtZXRlcktleVZhbHVlcw=="
          ), ct(3228, "Cg=="), ct(3267, "//////8="), ct(3336, "LSsgICAwWDB4AChudWxsKQ=="), ct(3360, "EQAKABEREQAAAAAFAAAAAAAACQAAAAAL"), ct(
            3392,
            "EQAPChEREQMKBwABEwkLCwAACQYLAAALAAYRAAAAERER"
          ), ct(3441, "Cw=="), ct(3450, "EQAKChEREQAKAAACAAkLAAAACQALAAAL"), ct(3499, "DA=="), ct(3511, "DAAAAAAMAAAAAAkMAAAAAAAMAAAM"), ct(3557, "Dg=="), ct(3569, "DQAAAAQNAAAAAAkOAAAAAAAOAAAO"), ct(3615, "EA=="), ct(3627, "DwAAAAAPAAAAAAkQAAAAAAAQAAAQAAASAAAAEhIS"), ct(3682, "EgAAABISEgAAAAAAAAk="), ct(3731, "Cw=="), ct(3743, "CgAAAAAKAAAAAAkLAAAAAAALAAAL"), ct(3789, "DA=="), ct(
            3801,
            "DAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAwMTIzNDU2Nzg5QUJDREVGLTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAuAAAAAKgaAAAAAAAAAwAAAAQAAAAEAAAABgAAAIP5ogBETm4A/CkVANFXJwDdNPUAYtvAADyZlQBBkEMAY1H+ALveqwC3YcUAOm4kANJNQgBJBuAACeouAByS0QDrHf4AKbEcAOg+pwD1NYIARLsuAJzphAC0JnAAQX5fANaROQBTgzkAnPQ5AItfhAAo+b0A+B87AN7/lwAPmAUAES/vAApaiwBtH20Az342AAnLJwBGT7cAnmY/AC3qXwC6J3UA5evHAD178QD3OQcAklKKAPtr6gAfsV8ACF2NADADVgB7/EYA8KtrACC8zwA29JoA46kdAF5hkQAIG+YAhZllAKAUXwCNQGgAgNj/ACdzTQAGBjEAylYVAMmocwB74mAAa4zAABnERwDNZ8MACejcAFmDKgCLdsQAphyWAESv3QAZV9EApT4FAAUH/wAzfj8AwjLoAJhP3gC7fTIAJj3DAB5r7wCf+F4ANR86AH/yygDxhx0AfJAhAGokfADVbvoAMC13ABU7QwC1FMYAwxmdAK3EwgAsTUEADABdAIZ9RgDjcS0Am8aaADNiAAC00nwAtKeXADdV1QDXPvYAoxAYAE12/ABknSoAcNerAGN8+AB6sFcAFxXnAMBJVgA71tkAp4Q4ACQjywDWincAWlQjAAAfuQDxChsAGc7fAJ8x/wBmHmoAmVdhAKz7RwB+f9gAImW3ADLoiQDmv2AA78TNAGw2CQBdP9QAFt7XAFg73gDem5IA0iIoACiG6ADiWE0AxsoyAAjjFgDgfcsAF8BQAPMdpwAY4FsALhM0AIMSYgCDSAEA9Y5bAK2wfwAe6fIASEpDABBn0wCq3dgArl9CAGphzgAKKKQA05m0AAam8gBcd38Ao8KDAGE8iACKc3gAr4xaAG/XvQAtpmMA9L/LAI2B7wAmwWcAVcpFAMrZNgAoqNIAwmGNABLJdwAEJhQAEkabAMRZxADIxUQATbKRAAAX8wDUQ60AKUnlAP3VEAAAvvwAHpTMAHDO7gATPvUA7PGAALPnwwDH+CgAkwWUAMFxPgAuCbMAC0XzAIgSnACrIHsALrWfAEeSwgB7Mi8ADFVtAHKnkABr5x8AMcuWAHkWSgBBeeIA9N+JAOiUlwDi5oQAmTGXAIjtawBfXzYAu/0OAEiatABnpGwAcXJCAI1dMgCfFbgAvOUJAI0xJQD3dDkAMAUcAA0MAQBLCGgALO5YAEeqkAB05wIAvdYkAPd9pgBuSHIAnxbvAI6UpgC0kfYA0VNRAM8K8gAgmDMA9Ut+ALJjaADdPl8AQF0DAIWJfwBVUikAN2TAAG3YEAAySDIAW0x1AE5x1ABFVG4ACwnBACr1aQAUZtUAJwedAF0EUAC0O9sA6nbFAIf5FwBJa30AHSe6AJZpKQDGzKwArRRUAJDiagCI2YkALHJQAASkvgB3B5QA8zBwAAD8JwDqcagAZsJJAGTgPQCX3YMAoz+XAEOU/QANhowAMUHeAJI5nQDdcIwAF7fnAAjfOwAVNysAXICgAFqAkwAQEZIAD+jYAGyArwDb/0sAOJAPAFkYdgBipRUAYcu7AMeJuQAQQL0A0vIEAEl1JwDrtvYA2yK7AAoUqgCJJi8AZIN2AAk7MwAOlBoAUTqqAB2jwgCv7a4AXCYSAG3CTQAtepwAwFaXAAM/gwAJ8PYAK0CMAG0xmQA5tAcADCAVANjDWwD1ksQAxq1LAE7KpQCnN80A5qk2AKuSlADdQmgAGWPeAHaM7wBoi1IA/Ns3AK6hqwDfFTEAAK6hAAz72gBkTWYA7QW3ACllMABXVr8AR/86AGr5uQB1vvMAKJPfAKuAMABmjPYABMsVAPoiBgDZ5B0APbOkAFcbjwA2zQkATkLpABO+pAAzI7UA8KoaAE9lqADSwaUACz8PAFt4zQAj+XYAe4sEAIkXcgDGplMAb27iAO/rAACbSlgAxNq3AKpmugB2z88A0QIdALHxLQCMmcEAw613AIZI2gD3XaAAxoD0AKzwLwDd7JoAP1y8ANDebQCQxx8AKtu2AKMlOgAAr5oArVOTALZXBAApLbQAS4B+ANoHpwB2qg4Ae1mhABYSKgDcty0A+uX9AInb/gCJvv0A5HZsAAap/AA+gHAAhW4VAP2H/wAoPgcAYWczACoYhgBNveoAs+evAI9tbgCVZzkAMb9bAITXSAAw3xYAxy1DACVhNQDJcM4AMMu4AL9s/QCkAKIABWzkAFrdoAAhb0cAYhLSALlchABwYUkAa1bgAJlSAQBQVTcAHtW3ADPxxAATbl8AXTDkAIUuqQAdssMAoTI2AAi3pADqsdQAFvchAI9p5AAn/3cADAOAAI1ALQBPzaAAIKWZALOi0wAvXQoAtPlCABHaywB9vtAAm9vBAKsXvQDKooEACGpcAC5VFwAnAFUAfxTwAOEHhgAUC2QAlkGNAIe+3gDa/SoAayW2AHuJNAAF8/4Aub+eAGhqTwBKKqgAT8RaAC34vADXWpgA9MeVAA1NjQAgOqYApFdfABQ/sQCAOJUAzCABAHHdhgDJ3rYAv2D1AE1lEQABB2sAjLCsALLA0ABRVUgAHvsOAJVywwCjBjsAwEA1AAbcewDgRcwATin6ANbKyADo80EAfGTeAJtk2ADZvjEApJfDAHdY1ABp48UA8NoTALo6PABGGEYAVXVfANK99QBuksYArC5dAA5E7QAcPkIAYcSHACn96QDn1vMAInzKAG+RNQAI4MUA/9eNAG5q4gCw/cYAkwjBAHxddABrrbIAzW6dAD5yewDGEWoA98+pAClz3wC1yboAtwBRAOKyDQB0uiQA5X1gAHTYigANFSwAgRgMAH5mlAABKRYAn3p2AP39vgBWRe8A2X42AOzZEwCLurkAxJf8ADGoJwDxbsMAlMU2ANioVgC0qLUAz8wOABKJLQBvVzQALFaJAJnO4wDWILkAa16qAD4qnAARX8wA/QtKAOH0+wCOO20A4oYsAOnUhAD8tKkA7+7RAC41yQAvOWEAOCFEABvZyACB/AoA+0pqAC8c2ABTtIQATpmMAFQizAAqVdwAwMbWAAsZlgAacLgAaZVkACZaYAA/Uu4AfxEPAPS1EQD8y/UANLwtADS87gDoXcwA3V5gAGeOmwCSM+8AyRe4AGFYmwDhV7wAUYPGANg+EADdcUgALRzdAK8YoQAhLEYAWfPXANl6mACeVMAAT4b6AFYG/ADlea4AiSI2ADitIgBnk9wAVeiqAIImOADK55sAUQ2kAJkzsQCp1w4AaQVIAGWy8AB/iKcAiEyXAPnRNgAhkrMAe4JKAJjPIQBAn9wA3EdVAOF0OgBn60IA/p3fAF7UXwB7Z6QAuqx6AFX2ogAriCMAQbpVAFluCAAhKoYAOUeDAInj5gDlntQASftAAP9W6QAcD8oAxVmKAJT6KwDTwcUAD8XPANtargBHxYYAhUNiACGGOwAseZQAEGGHACpMewCALBoAQ78SAIgmkAB4PIkAqMTkAOXbewDEOsIAJvTqAPdnigANkr8AZaMrAD2TsQC9fAsApFHcACfdYwBp4d0AmpQZAKgplQBozigACe20AESfIABOmMoAcIJjAH58IwAPuTIAp/WOABRW5wAh8QgAtZ0qAG9+TQClGVEAtfmrAILf1gCW3WEAFjYCAMQ6nwCDoqEAcu1tADmNegCCuKkAazJcAEYnWwAANO0A0gB3APz0VQABWU0A4HGA"
          ), ct(
            6675,
            "QPsh+T8AAAAALUR0PgAAAICYRvg8AAAAYFHMeDsAAACAgxvwOQAAAEAgJXo4AAAAgCKC4zYAAAAAHfNpNThj7T7aD0k/Xph7P9oPyT9pN6wxaCEiM7QPFDNoIaIz2w9JP9sPSb/kyxZA5MsWwAAAAAAAAACA2w9JQNsPScAAAIA/AADAPwAAAADcz9E1AAAAAADAFT8="
          ), ct(6824, "BQ=="), ct(6836, "DQ=="), ct(6860, "DgAAAA8AAABYHAAAAAQ="), ct(6884, "AQ=="), ct(6899, "Cv////8="), ct(7156, "gCA="), Ft = {
            Int8Array,
            Int16Array,
            Int32Array,
            Uint8Array,
            Uint16Array,
            Uint32Array,
            Float32Array,
            Float64Array,
            NaN: NaN,
            Infinity: 1 / 0,
            Math
          }, Ce = rt.buffer, Ni = (ct = Q).memory, ht = _t, st = new Ft.Int8Array(Ce), ca = new Ft.Int16Array(Ce), r = new Ft.Int32Array(Ce), ut = new Ft.Uint8Array(Ce), ni = new Ft.Uint16Array(Ce), ke = new Ft.Uint32Array(Ce), $ = new Ft.Float32Array(Ce), Vt = new Ft.Float64Array(Ce), j = Ft.Math.imul, b = Ft.Math.fround, we = Ft.Math.abs, za = Ft.Math.clz32, Ue = Ft.Math.min, Ft.Math.max, ho = Ft.Math.floor, Ft.Math.ceil, Ft.Math.sqrt, ct.abort, Ft.NaN, uo = Ft.Infinity, Il = ct.a, Pl = ct.b, Ml = ct.c, X = 5251744, Ur = 0, ht[1] = function(h, d, E, p, f) {
            h |= 0, d |= 0, E |= 0, p |= 0, f |= 0;
            var T, l, c, _, v, y, S, I, P, M, R, N, F, B, U, V, Z, it, gt, Tt, Rt, Ut, xt, Zt, et = 0, yt = b(0), At = b(0), Mt = 0, Ct = b(0), te = b(0), ae = b(0), Oe = b(0), $e = b(0), Re = b(0), Le = b(0), De = b(0), Xe = b(0), je = b(0), Qe = b(0), hr = b(0), ur = b(0), pr = b(0), _r = b(0), Mr = b(0), Cr = b(0), Xr = b(0), Vr = b(0), Zl = (b(0), b(0), b(0), b(0), b(0), b(0), b(0), b(0), b(0), 0);
            if (X = Zt = X - 32 | 0, 1 <= (0 | f))
              for (T = r[16 + (r[h + 308 >> 2] + (d << 5) | 0) >> 2], et = r[h + 60 >> 2] + j(T, 24) | 0, d = (l = r[et + 8 >> 2]) + -1 | 0, N = (v = r[et + 4 >> 2]) + -1 | 0, F = P = (T = r[r[h + 152 >> 2] + (T << 2) >> 2]) + (l << 3) | 0, B = M = T + ((I = j(v, c = l + 1 | 0)) << 3) | 0, U = R = T + (l + I << 3) | 0, xt = r[et + 12 >> 2], y = b(0 | v), S = b(0 | l), h = 0; ae = $[4 + (et = (_ = h << 3) + E | 0) >> 2], At = b(ae * y), Oe = $[et >> 2], yt = b(Oe * S), et = ae >= b(1), At = !(ae < b(0) ^ 1) || et | Oe >= b(1) | Oe < b(0) ? (Zl || (Xe = $[4 + U >> 2], V = $[T + 4 >> 2], $e = b(Xe - V), Z = $[4 + F >> 2], it = $[4 + B >> 2], Re = b(Z - it), je = b(b($e - Re) * b(0.5)), gt = $[R >> 2], Tt = $[T >> 2], Le = b(gt - Tt), Rt = $[P >> 2], Ut = $[M >> 2], De = b(Rt - Ut), Qe = b(b(Le - De) * b(0.5)), Re = b(b(Re + $e) * b(0.5)), De = b(b(De + Le) * b(0.5)), Zl = 1, $e = b(
                b(b(b(b(V + Z) + it) + Xe) * b(0.25)) - b($e * b(0.5))
              ), Le = b(
                b(b(b(b(Tt + Rt) + Ut) + gt) * b(0.25)) - b(Le * b(0.5))
              )), ae < b(3) ^ 1 | Oe > b(-2) ^ 1 | (Oe < b(3) ^ 1 | ae > b(-2) ^ 1) ? ($[p + _ >> 2] = b(ae * Qe) + b(b(Oe * De) + Le), yt = b(ae * je), b(b(Oe * Re) + $e)) : (Oe <= b(0) ? ae <= b(0) ? (te = b(b(ae + b(2)) * b(0.5)), Ct = b(b(Oe + b(2)) * b(0.5)), yt = b(je + je), Xr = b($e - yt), At = b(Qe + Qe), Vr = b(Le - At), Mr = b($e - b(Re + Re)), hr = b(Mr - yt), Cr = b(Le - b(De + De)), ur = b(Cr - At), pr = $[T + 4 >> 2], _r = $[T >> 2]) : et ? (yt = b(je * b(3)), At = b($e - b(Re + Re)), Mr = b(yt + At), hr = b(Qe * b(3)), ur = b(Le - b(De + De)), Cr = b(hr + ur), te = b(b(ae + b(-1)) * b(0.5)), Ct = b(b(Oe + b(2)) * b(0.5)), pr = b(yt + $e), _r = b(hr + Le), hr = b(je + At), ur = b(Qe + ur), Xr = $[4 + B >> 2], Vr = $[M >> 2]) : (yt = b($e - b(Re + Re)), et = N, Mt = b(we(At)) < b(2147483648) ? ~~At : -2147483648, te = b(
                0 | (et = (0 | Mt) == (0 | v) ? et : Mt)
              ), Ct = b(te / y), hr = b(b(Ct * je) + yt), Xe = b(Ct * Qe), Ct = b(Le - b(De + De)), ur = b(Xe + Ct), ae = b(
                b(0 | (Mt = et + 1 | 0)) / y
              ), Mr = b(b(ae * je) + yt), Cr = b(b(ae * Qe) + Ct), Ct = b(b(Oe + b(2)) * b(0.5)), te = b(At - te), et = T + (j(et, c) << 3) | 0, Xr = $[et + 4 >> 2], Vr = $[et >> 2], et = T + (j(Mt, c) << 3) | 0, pr = $[et + 4 >> 2], _r = $[et >> 2]) : Oe >= b(1) ? ae <= b(0) ? (te = b(b(ae + b(2)) * b(0.5)), Ct = b(b(Oe + b(-1)) * b(0.5)), yt = b(je + je), hr = b(b(Re + $e) - yt), At = b(Qe + Qe), ur = b(b(De + Le) - At), pr = b(b(Re * b(3)) + $e), Xr = b(pr - yt), _r = b(b(De * b(3)) + Le), Vr = b(_r - At), Mr = $[4 + F >> 2], Cr = $[P >> 2]) : et ? (yt = b(je * b(3)), Mr = b(yt + b(Re + $e)), At = b(Qe * b(3)), Cr = b(At + b(De + Le)), Xe = yt, yt = b(b(Re * b(3)) + $e), pr = b(Xe + yt), Xe = At, At = b(b(De * b(3)) + Le), _r = b(Xe + At), te = b(b(ae + b(-1)) * b(0.5)), Ct = b(b(Oe + b(-1)) * b(0.5)), Xr = b(je + yt), Vr = b(Qe + At), hr = $[4 + U >> 2], ur = $[R >> 2]) : (yt = b(b(Re * b(3)) + $e), et = N, Mt = b(we(At)) < b(2147483648) ? ~~At : -2147483648, te = b(
                0 | (et = (0 | Mt) == (0 | v) ? et : Mt)
              ), Ct = b(te / y), Xr = b(b(Ct * je) + yt), Xe = b(Ct * Qe), Ct = b(b(De * b(3)) + Le), Vr = b(Xe + Ct), ae = b(
                b(0 | (Mt = et + 1 | 0)) / y
              ), pr = b(b(ae * je) + yt), _r = b(b(ae * Qe) + Ct), Ct = b(b(Oe + b(-1)) * b(0.5)), te = b(At - te), et = T + (j(et, c) + l << 3) | 0, hr = $[et + 4 >> 2], ur = $[et >> 2], et = T + (j(Mt, c) + l << 3) | 0, Mr = $[et + 4 >> 2], Cr = $[et >> 2]) : ae <= b(0) ? (te = b(b(ae + b(2)) * b(0.5)), et = d, Mt = b(we(At = yt)) < b(2147483648) ? ~~yt : -2147483648, yt = b(
                0 | (et = (0 | Mt) == (0 | l) ? et : Mt)
              ), Ct = b(At - yt), yt = b(yt / S), At = b(je + je), hr = b(b(b(yt * Re) + $e) - At), Xe = b(b(yt * De) + Le), yt = b(Qe + Qe), ur = b(Xe - yt), ae = b(b(0 | (Mt = et + 1 | 0)) / S), Xr = b(b(b(ae * Re) + $e) - At), Vr = b(b(b(ae * De) + Le) - yt), Mr = $[4 + (et = T + (et << 3) | 0) >> 2], Cr = $[et >> 2], pr = $[4 + (et = T + (Mt << 3) | 0) >> 2], _r = $[et >> 2]) : et ? (Xe = At = b(je * b(3)), et = d, Mt = b(we(yt)) < b(2147483648) ? ~~yt : -2147483648, Ct = b(
                0 | (et = (0 | Mt) == (0 | l) ? et : Mt)
              ), te = b(Ct / S), Mr = b(Xe + b(b(te * Re) + $e)), Oe = b(Qe * b(3)), Cr = b(Oe + b(b(te * De) + Le)), Xe = At, At = b(b(0 | (Mt = et + 1 | 0)) / S), pr = b(Xe + b(b(At * Re) + $e)), _r = b(Oe + b(b(At * De) + Le)), te = b(b(ae + b(-1)) * b(0.5)), Ct = b(yt - Ct), hr = $[4 + (et = T + (et + I << 3) | 0) >> 2], ur = $[et >> 2], Xr = $[4 + (et = T + (Mt + I << 3) | 0) >> 2], Vr = $[et >> 2]) : (Vt[16 + Zt >> 3] = ae, r[Zt >> 2] = h, Vt[8 + Zt >> 3] = Oe, vt(4, 1107, Zt)), b(Ct + te) <= b(1) ? ($[p + _ >> 2] = b(ur + b(b(Vr - ur) * Ct)) + b(b(Cr - ur) * te), yt = b(hr + b(b(Xr - hr) * Ct)), b(b(Mr - hr) * te)) : (yt = b(b(1) - Ct), At = b(b(1) - te), $[p + _ >> 2] = b(_r + b(b(Cr - _r) * yt)) + b(b(Vr - _r) * At), yt = b(pr + b(b(Mr - pr) * yt)), b(b(Xr - pr) * At)))) : (et = b(we(Xe = At)) < b(2147483648) ? ~~At : -2147483648, te = b(Xe - b(0 | et)), Mt = b(we(At = yt)) < b(2147483648) ? ~~yt : -2147483648, Ct = b(At - b(0 | Mt)), et = Mt + j(et, c) | 0, xt ? (yt = b(b(1) - te), At = b(b(1) - Ct), Mt = T + (et << 3) | 0, et = T + (et + c << 3) | 0, $[p + _ >> 2] = b(
                b(
                  b(yt * b(At * $[Mt >> 2])) + b(yt * b(Ct * $[Mt + 8 >> 2]))
                ) + b(te * b(At * $[et >> 2]))
              ) + b(te * b(Ct * $[et + 8 >> 2])), yt = b(
                b(
                  b(yt * b(At * $[Mt + 4 >> 2])) + b(yt * b(Ct * $[Mt + 12 >> 2]))
                ) + b(te * b(At * $[et + 4 >> 2]))
              ), b(te * b(Ct * $[et + 12 >> 2]))) : b(Ct + te) <= b(1) ? (yt = b(b(b(1) - Ct) - te), Mt = T + (et << 3) | 0, et = T + (et + c << 3) | 0, $[p + _ >> 2] = b(
                b(yt * $[Mt >> 2]) + b(Ct * $[Mt + 8 >> 2])
              ) + b(te * $[et >> 2]), yt = b(
                b(yt * $[Mt + 4 >> 2]) + b(Ct * $[Mt + 12 >> 2])
              ), b(te * $[et + 4 >> 2])) : (yt = b(b(Ct + b(-1)) + te), Mt = T + (et + c << 3) | 0, At = b(b(1) - Ct), ae = b(b(1) - te), et = T + (et << 3) | 0, $[p + _ >> 2] = b(
                b(yt * $[Mt + 8 >> 2]) + b(At * $[Mt >> 2])
              ) + b(ae * $[et + 8 >> 2]), yt = b(
                b(yt * $[Mt + 12 >> 2]) + b(At * $[Mt + 4 >> 2])
              ), b(ae * $[et + 12 >> 2]))), $[4 + (p + _ | 0) >> 2] = yt + At, (0 | f) != (0 | (h = h + 1 | 0)); )
                ;
            X = 32 + Zt | 0;
          }, ht[2] = function(h, d) {
            h |= 0, d |= 0;
            var y = 0, E = 0, p = 0, v = 0, S = 0, f = b(0), T = 0, l = 0, c = (b(0), 0), _ = 0, v = r[h + 320 >> 2], y = r[h + 316 >> 2], S = r[h + 308 >> 2];
            (0 | (E = r[8 + (p = S + (d << 5) | 0) >> 2])) == -1 ? (r[(_ = y) + (y = d << 2) >> 2] = r[r[h + 148 >> 2] + (r[p + 16 >> 2] << 2) >> 2], r[y + v >> 2] = 1065353216) : (T = r[p + 16 >> 2], l = r[r[h + 152 >> 2] + (T << 2) >> 2], ht[r[24 + (S + (E << 5) | 0) >> 2]](
              h,
              E,
              l,
              l,
              r[16 + (r[h + 60 >> 2] + j(T, 24) | 0) >> 2]
            ), f = $[r[h + 148 >> 2] + (r[p + 16 >> 2] << 2) >> 2], p = r[p + 8 >> 2] << 2, $[(E = d << 2) + y >> 2] = f * $[p + y >> 2], r[E + v >> 2] = r[p + v >> 2]), 4 <= ut[r[h >> 2] + 4 | 0] && (v = d << 2, y = r[h + 308 >> 2] + (d << 5) | 0, E = r[y + 16 >> 2] << 2, p = r[h + 328 >> 2], d = r[h + 324 >> 2], (0 | (S = r[y + 8 >> 2])) == -1 ? (S = r[h + 156 >> 2], r[(y = v << 2) + d >> 2] = r[S + (E <<= 2) >> 2], r[(T = 4 | y) + d >> 2] = r[(l = 4 | E) + S >> 2], r[(c = 8 | y) + d >> 2] = r[S + (_ = 8 | E) >> 2], r[d + ((v |= 3) << 2) >> 2] = 1065353216, h = r[h + 160 >> 2], r[y + p >> 2] = r[h + E >> 2], r[p + T >> 2] = r[h + l >> 2], r[p + c >> 2] = r[h + _ >> 2]) : (E = (l = E << 2) + r[h + 156 >> 2] | 0, $[(y = (T = v << 2) + d | 0) >> 2] = $[E >> 2] * $[(S = (c = S << 4) + d | 0) >> 2], $[y + 4 >> 2] = $[E + 4 >> 2] * $[S + 4 >> 2], $[y + 8 >> 2] = $[E + 8 >> 2] * $[S + 8 >> 2], r[d + ((v |= 3) << 2) >> 2] = 1065353216, h = l + r[h + 160 >> 2] | 0, _ = $[h >> 2], f = $[(y = p + c | 0) >> 2], $[(d = p + T | 0) >> 2] = b(_ + f) - b(_ * f), _ = $[h + 4 >> 2], f = $[y + 4 >> 2], $[d + 4 >> 2] = b(_ + f) - b(_ * f), _ = $[h + 8 >> 2], f = $[y + 8 >> 2], $[d + 8 >> 2] = b(_ + f) - b(_ * f)), r[p + (v << 2) >> 2] = 1065353216);
          }, ht[3] = function(h, d, E, p, f) {
            h |= 0, d |= 0, E |= 0, p |= 0, f |= 0;
            var T, l, c, _, v, y = 0, y = (b(0), b(0), b(0), b(0), b(0), b(0), b(0), b(0), (d = r[16 + (r[h + 308 >> 2] + (d << 5) | 0) >> 2]) << 2), S = function(R) {
              var N, F, B, U, V = b(0);
              X = B = X - 16 | 0, jt(R);
              r:
                if ((N = 2147483647 & (U = St[0])) >>> 0 <= 1061752794)
                  V = b(1), N >>> 0 < 964689920 || (V = Pr(+R));
                else if (N >>> 0 <= 1081824209)
                  F = +R, V = 1075235812 <= N >>> 0 ? b(
                    -Pr(
                      ((0 | U) < 0 ? 3.141592653589793 : -3.141592653589793) + F
                    )
                  ) : si(
                    (0 | U) <= -1 ? 1.5707963267948966 + F : 1.5707963267948966 - F
                  );
                else if (N >>> 0 <= 1088565717)
                  V = 1085271520 <= N >>> 0 ? Pr(
                    +R + ((0 | U) < 0 ? 6.283185307179586 : -6.283185307179586)
                  ) : si(
                    (0 | U) <= -1 ? -4.71238898038469 - +R : +R - 4.71238898038469
                  );
                else if (V = b(R - R), !(2139095040 <= N >>> 0))
                  if ((N = 3 & Bl(R, 8 + B | 0)) >>> 0 <= 2) {
                    switch (N - 1 | 0) {
                      default:
                        V = Pr(Vt[8 + B >> 3]);
                        break r;
                      case 0:
                        V = si(-Vt[8 + B >> 3]);
                        break r;
                      case 1:
                    }
                    V = b(-Pr(Vt[8 + B >> 3]));
                  } else
                    V = si(Vt[8 + B >> 3]);
              return X = 16 + B | 0, V;
            }(
              M = b(
                b(
                  b(
                    $[4 + (r[h + 168 >> 2] + j(d, 12) | 0) >> 2] + $[y + r[h + 284 >> 2] >> 2]
                  ) * b(3.1415927410125732)
                ) / b(180)
              )
            ), I = $[y + r[h + 272 >> 2] >> 2], P = r[y + r[h + 292 >> 2] >> 2], M = function(R) {
              var N, F, B, U = 0;
              X = F = X - 16 | 0, jt(R);
              r:
                if ((N = 2147483647 & (B = St[0])) >>> 0 <= 1061752794)
                  N >>> 0 < 964689920 || (R = si(+R));
                else if (N >>> 0 <= 1081824209)
                  U = +R, R = N >>> 0 <= 1075235811 ? (0 | B) <= -1 ? b(-Pr(U + 1.5707963267948966)) : Pr(U + -1.5707963267948966) : si(
                    -(((0 | B) < 0 ? 3.141592653589793 : -3.141592653589793) + U)
                  );
                else if (N >>> 0 <= 1088565717)
                  U = +R, R = N >>> 0 <= 1085271519 ? (0 | B) <= -1 ? Pr(U + 4.71238898038469) : b(-Pr(U + -4.71238898038469)) : si(
                    ((0 | B) < 0 ? 6.283185307179586 : -6.283185307179586) + U
                  );
                else if (2139095040 <= N >>> 0)
                  R = b(R - R);
                else if ((N = 3 & Bl(R, 8 + F | 0)) >>> 0 <= 2) {
                  switch (N - 1 | 0) {
                    default:
                      R = si(Vt[8 + F >> 3]);
                      break r;
                    case 0:
                      R = Pr(Vt[8 + F >> 3]);
                      break r;
                    case 1:
                  }
                  R = si(-Vt[8 + F >> 3]);
                } else
                  R = b(-Pr(Vt[8 + F >> 3]));
              return X = 16 + F | 0, R;
            }(M);
            if ((d = 0) < (0 | f))
              for (S = b(I * S), l = b(P ? -1 : 1), _ = b(S * l), T = r[y + r[h + 288 >> 2] >> 2] ? b(-1) : b(1), v = b(b(I * M) * T), S = b(S * T), I = b(b(I * b(-M)) * l), M = $[y + r[h + 280 >> 2] >> 2], l = $[y + r[h + 276 >> 2] >> 2]; y = (h = d << 3) + p | 0, T = $[(h = h + E | 0) >> 2], c = $[h + 4 >> 2], $[y + 4 >> 2] = M + b(b(v * T) + b(_ * c)), $[y >> 2] = l + b(b(S * T) + b(I * c)), (0 | f) != (0 | (d = d + 1 | 0)); )
                ;
          }, ht[4] = function(h, d) {
            h |= 0, d |= 0;
            var E, p, f, T, l, c, _ = 0, v = 0, y = 0, S = b(0), I = 0, P = 0, M = b(0), R = 0, N = 0, F = 0;
            if (b(0), b(0), b(0), b(0), X = c = X + -64 | 0, R = r[h + 320 >> 2], N = r[h + 316 >> 2], v = r[h + 308 >> 2], (0 | (I = r[8 + (y = v + (d << 5) | 0) >> 2])) == -1)
              _ = r[y + 16 >> 2] << 2, r[(v = d << 2) + N >> 2] = r[_ + r[h + 268 >> 2] >> 2], r[v + R >> 2] = r[_ + r[h + 272 >> 2] >> 2];
            else {
              _ = r[y + 16 >> 2] << 2, F = r[_ + r[h + 276 >> 2] >> 2], r[24 + c >> 2] = F, _ = r[_ + r[h + 280 >> 2] >> 2], r[28 + c >> 2] = _, r[16 + c >> 2] = 0, p = r[12 + (P = v + (I << 5) | 0) >> 2] == 1 ? b(-10) : b(-0.10000000149011612), $[20 + c >> 2] = p, r[60 + c >> 2] = _, r[56 + c >> 2] = F, ht[r[P + 24 >> 2]](
                h,
                I,
                56 + c | 0,
                48 + c | 0,
                1
              ), S = b(1), v = 9;
              r: {
                for (; ; ) {
                  if (_ = v, M = b(S * b(0)), $[32 + c >> 2] = M + $[56 + c >> 2], E = b(p * S), $[36 + c >> 2] = E + $[60 + c >> 2], ht[r[P + 24 >> 2]](
                    h,
                    I,
                    32 + c | 0,
                    40 + c | 0,
                    1
                  ), f = b($[44 + c >> 2] - $[52 + c >> 2]), $[44 + c >> 2] = f, T = b($[40 + c >> 2] - $[48 + c >> 2]), $[40 + c >> 2] = T, f != b(0) || T != b(0)) {
                    v = r[44 + c >> 2], r[8 + c >> 2] = r[40 + c >> 2], r[12 + c >> 2] = v;
                    break r;
                  }
                  if ($[32 + c >> 2] = $[56 + c >> 2] - M, $[36 + c >> 2] = $[60 + c >> 2] - E, ht[r[P + 24 >> 2]](
                    h,
                    I,
                    32 + c | 0,
                    40 + c | 0,
                    1
                  ), M = b($[40 + c >> 2] - $[48 + c >> 2]), $[40 + c >> 2] = M, E = b($[44 + c >> 2] - $[52 + c >> 2]), ($[44 + c >> 2] = E) != b(0) || M != b(0)) {
                    $[12 + c >> 2] = -E, $[8 + c >> 2] = -M;
                    break r;
                  }
                  if (v = _ + -1 | 0, S = b(S * b(0.10000000149011612)), !_)
                    break;
                }
                vt(3, 1311, 0);
              }
              S = function(B, U) {
                var V = b(0);
                if ((V = b(
                  Fl($[4 + B >> 2], $[B >> 2]) - Fl($[4 + U >> 2], $[U >> 2])
                )) < b(-3.1415927410125732))
                  for (; (V = b(V + b(6.2831854820251465))) < b(-3.1415927410125732); )
                    ;
                if (V > b(3.1415927410125732))
                  for (; (V = b(V + b(-6.2831854820251465))) > b(3.1415927410125732); )
                    ;
                return V;
              }(16 + c | 0, 8 + c | 0), ht[r[P + 24 >> 2]](
                h,
                r[y + 8 >> 2],
                24 + c | 0,
                24 + c | 0,
                1
              ), v = r[y + 16 >> 2] << 2, r[v + r[h + 276 >> 2] >> 2] = r[24 + c >> 2], r[v + r[h + 280 >> 2] >> 2] = r[28 + c >> 2], _ = v + r[h + 284 >> 2] | 0, $[_ >> 2] = $[_ >> 2] + b(b(S * b(-180)) / b(3.1415927410125732)), y = r[y + 8 >> 2] << 2, $[(_ = d << 2) + N >> 2] = $[v + r[h + 268 >> 2] >> 2] * $[y + N >> 2], v = v + r[h + 272 >> 2] | 0, S = b($[v >> 2] * $[y + R >> 2]), $[_ + R >> 2] = S, $[v >> 2] = S;
            }
            4 <= ut[r[h >> 2] + 4 | 0] && (_ = d << 2, y = r[h + 308 >> 2] + (d << 5) | 0, I = r[y + 16 >> 2] << 2, v = r[h + 328 >> 2], d = r[h + 324 >> 2], (0 | (P = r[y + 8 >> 2])) == -1 ? (P = r[h + 296 >> 2], r[(y = _ << 2) + d >> 2] = r[P + (I <<= 2) >> 2], r[(R = 4 | y) + d >> 2] = r[(N = 4 | I) + P >> 2], r[(F = 8 | y) + d >> 2] = r[P + (l = 8 | I) >> 2], r[d + ((_ |= 3) << 2) >> 2] = 1065353216, h = r[h + 300 >> 2], r[v + y >> 2] = r[h + I >> 2], r[v + R >> 2] = r[h + N >> 2], r[v + F >> 2] = r[h + l >> 2]) : (I = (N = I << 2) + r[h + 296 >> 2] | 0, $[(y = (R = _ << 2) + d | 0) >> 2] = $[I >> 2] * $[(P = (F = P << 4) + d | 0) >> 2], $[y + 4 >> 2] = $[I + 4 >> 2] * $[P + 4 >> 2], $[y + 8 >> 2] = $[I + 8 >> 2] * $[P + 8 >> 2], r[d + ((_ |= 3) << 2) >> 2] = 1065353216, h = N + r[h + 300 >> 2] | 0, S = $[h >> 2], M = $[(y = v + F | 0) >> 2], $[(d = v + R | 0) >> 2] = b(S + M) - b(S * M), S = $[h + 4 >> 2], M = $[y + 4 >> 2], $[d + 4 >> 2] = b(S + M) - b(S * M), S = $[h + 8 >> 2], M = $[y + 8 >> 2], $[d + 8 >> 2] = b(S + M) - b(S * M)), r[v + (_ << 2) >> 2] = 1065353216), X = 64 + c | 0;
          }, ht[5] = function(h, d) {
            return h |= 0, d |= 0, b(0), b(0), 0 | ((h = $[h >> 2]) < (d = $[d >> 2]) ? -1 : d < h);
          }, ht[6] = function(h, d, E, p) {
            h |= 0, d |= 0, E |= 0, p |= 0;
            var f = 0, T = 0, l = b(0), c = 0, _ = 0, v = 0, y = 0, S = 0;
            if (1 <= (0 | (c = r[h + 8 >> 2])))
              for (v = r[h + 12 >> 2], _ = r[h + 20 >> 2]; $[(T = f << 2) + v >> 2] = $[d + T >> 2] * $[T + _ >> 2], (0 | (f = f + 1 | 0)) < (0 | c); )
                ;
            if (!((0 | (c = r[h >> 2])) < 1))
              if (v = r[h + 4 >> 2], p)
                for (T = d = 0; ; ) {
                  if (r[p >> 2]) {
                    if ((0 | (f = r[(_ = d << 2) + r[h + 16 >> 2] >> 2])) < 1)
                      l = b(0);
                    else
                      for (y = f + T | 0, S = r[h + 12 >> 2], l = b(0), f = T; l = b(l + $[S + (f << 2) >> 2]), (0 | (f = f + 1 | 0)) < (0 | y); )
                        ;
                    $[E + _ >> 2] = l;
                  }
                  if (p = p + 4 | 0, T = r[v + (d << 2) >> 2] + T | 0, !((0 | (d = d + 1 | 0)) < (0 | c)))
                    break;
                }
              else
                for (_ = r[h + 16 >> 2], d = p = 0; ; ) {
                  if ((0 | (f = r[(T = p << 2) + _ >> 2])) <= 0)
                    l = b(0);
                  else
                    for (y = d + f | 0, S = r[h + 12 >> 2], l = b(0), f = d; l = b(l + $[S + (f << 2) >> 2]), (0 | (f = f + 1 | 0)) < (0 | y); )
                      ;
                  if ($[E + T >> 2] = l, d = r[T + v >> 2] + d | 0, !((0 | (p = p + 1 | 0)) < (0 | c)))
                    break;
                }
          }, ht[7] = function(h, d, E, p) {
            h |= 0, d |= 0, E |= 0, p |= 0;
            var f = 0, T = b(0), l = 0, c = 0, _ = 0, v = 0, y = 0;
            if (1 <= (0 | (v = r[h + 8 >> 2])))
              for (c = r[h + 12 >> 2], _ = r[h + 20 >> 2]; $[(l = f << 2) + c >> 2] = $[d + l >> 2] * $[l + _ >> 2], (0 | (f = f + 1 | 0)) < (0 | v); )
                ;
            if (!((0 | (f = r[h >> 2])) < 1))
              if (v = r[h + 4 >> 2], p)
                for (l = d = 0; ; ) {
                  if (r[p >> 2]) {
                    if ((0 | (f = r[(c = d << 2) + r[h + 16 >> 2] >> 2])) < 1)
                      T = b(0);
                    else
                      for (_ = f + l | 0, y = r[h + 12 >> 2], T = b(0), f = l; T = b(T + $[y + (f << 2) >> 2]), (0 | (f = f + 1 | 0)) < (0 | _); )
                        ;
                    f = E + c | 0, T = b(T + b(0.0010000000474974513)), c = b(we(T)) < b(2147483648) ? ~~T : -2147483648, r[f >> 2] = c, f = r[h >> 2];
                  }
                  if (p = p + 4 | 0, l = r[v + (d << 2) >> 2] + l | 0, !((0 | (d = d + 1 | 0)) < (0 | f)))
                    break;
                }
              else
                for (c = r[h + 16 >> 2], d = p = 0; ; ) {
                  if ((0 | (f = r[(l = p << 2) + c >> 2])) <= 0)
                    T = b(0);
                  else
                    for (_ = d + f | 0, y = r[h + 12 >> 2], T = b(0), f = d; T = b(T + $[y + (f << 2) >> 2]), (0 | (f = f + 1 | 0)) < (0 | _); )
                      ;
                  if (f = E + l | 0, T = b(T + b(0.0010000000474974513)), _ = b(we(T)) < b(2147483648) ? ~~T : -2147483648, r[f >> 2] = _, d = r[l + v >> 2] + d | 0, !((0 | (p = p + 1 | 0)) < r[h >> 2]))
                    break;
                }
          }, ht[8] = function(h, d, E, p, f, T) {
            h |= 0, d |= 0, E |= 0, p |= 0, f |= 0, T |= 0;
            var l, c, _ = 0, v = 0, y = 0, S = 0, I = 0, P = 0, M = 0, R = 0, N = 0, F = 0, B = b(0), U = 0, V = r[h >> 2];
            if (!((0 | V) < 1))
              if (l = f << 2, c = r[h + 4 >> 2], T)
                for (; ; ) {
                  if (r[T >> 2] && (y = r[(_ = S << 2) + r[h + 16 >> 2] >> 2], M = r[E + _ >> 2], v = r[p + _ >> 2], (_ = (0 | (R = j(v, f))) < 1) || Gr(M, 0, j(v, l)), !(_ | (0 | y) < 1)))
                    for (N = y + P | 0, F = r[h + 20 >> 2], _ = P; ; ) {
                      for (B = $[(v = _ << 2) + F >> 2], U = r[d + v >> 2], I = 0; $[(v = (y = I << 2) + M | 0) >> 2] = $[v >> 2] + b(B * $[y + U >> 2]), (0 | R) != (0 | (I = I + 1 | 0)); )
                        ;
                      if (!((0 | (_ = _ + 1 | 0)) < (0 | N)))
                        break;
                    }
                  if (T = T + 4 | 0, P = r[(S << 2) + c >> 2] + P | 0, !((0 | (S = S + 1 | 0)) < (0 | V)))
                    break;
                }
              else
                for (T = 0; ; ) {
                  if (y = r[(S = T << 2) + r[h + 16 >> 2] >> 2], M = r[E + S >> 2], v = r[p + S >> 2], (_ = (0 | (R = j(v, f))) < 1) || Gr(M, 0, j(v, l)), !(_ | (0 | y) <= 0))
                    for (N = y + P | 0, F = r[h + 20 >> 2], _ = P; ; ) {
                      for (B = $[(v = _ << 2) + F >> 2], U = r[d + v >> 2], I = 0; $[(v = (y = I << 2) + M | 0) >> 2] = $[v >> 2] + b(B * $[y + U >> 2]), (0 | R) != (0 | (I = I + 1 | 0)); )
                        ;
                      if (!((0 | (_ = _ + 1 | 0)) < (0 | N)))
                        break;
                    }
                  if (P = r[S + c >> 2] + P | 0, !((0 | (T = T + 1 | 0)) < (0 | V)))
                    break;
                }
          }, ht[9] = function(h) {
            var d, E, p, f = 0, T = 0, l = 0, c = 0;
            if (!(r[(h |= 0) + 648 >> 2] || (0 | (f = r[h + 332 >> 2])) < 1))
              for (E = (T = r[h + 336 >> 2]) + j(f, 20) | 0, f = r[h + 424 >> 2], c = r[h + 444 >> 2]; ; ) {
                if (r[f >> 2] && !((0 | (l = r[T + 16 >> 2])) < (h = 1)))
                  for (l <<= 1, p = r[c >> 2]; $[(d = (h << 2) + p | 0) >> 2] = -$[d >> 2], (0 | (h = h + 2 | 0)) < (0 | l); )
                    ;
                if (c = c + 4 | 0, f = f + 4 | 0, !((T = T + 20 | 0) >>> 0 < E >>> 0))
                  break;
              }
          }, ht[10] = function(h, d, E) {
            var p;
            return Ir(
              p = r[20 + (h |= 0) >> 2],
              d |= 0,
              d = (E |= 0) >>> 0 < (d = r[h + 16 >> 2] - p | 0) >>> 0 ? E : d
            ), r[h + 20 >> 2] = d + r[h + 20 >> 2], 0 | E;
          }, ht[11] = function(h, d, E, p, f, T) {
            h |= 0, d = +d, E |= 0, p |= 0, f |= 0, T |= 0;
            var l, c, _, v, y = 0, S = 0, I = 0, P = 0, M = 0, R = 0, N = 0, F = 0, B = 0, U = 0, V = 0, Z = 0, it = 0, gt = 0, Tt = 0;
            if (r[44 + (X = _ = X - 560 | 0) >> 2] = 0, ge(+d), y = 0 | St[1], c = 4294967295 < St[0] >>> 0 ? 0 : 1, v = (0 | y) < -1 || (0 | y) <= -1 && c ? (ge(d = -d), y = 0 | St[1], St[0], gt = 1, 3840) : 2048 & f ? (gt = 1, 3843) : (gt = 1 & f) ? 3846 : 3841, (2146435072 & y) == 2146435072)
              tr(h, 32, E, R = gt + 3 | 0, -65537 & f), Ge(h, v, gt), p = T >>> 5 & 1, Ge(h, d != d ? p ? 3867 : 3871 : p ? 3859 : 3863, 3);
            else if (d = function Rt(Ut, xt) {
              var Zt, et, yt = 0;
              if (ge(+Ut), yt = 0 | St[1], Zt = 0 | St[0], (0 | (yt = (et = yt) >>> 20 & 2047)) != 2047) {
                if (!yt)
                  return yt = xt, xt = Ut == 0 ? 0 : (Ut = Rt(18446744073709552e3 * Ut, xt), r[xt >> 2] + -64 | 0), r[yt >> 2] = xt, Ut;
                r[xt >> 2] = yt + -1022, Pt(0, 0 | Zt), Pt(1, -2146435073 & et | 1071644672), Ut = +kr();
              }
              return Ut;
            }(d, 44 + _ | 0), (d += d) != 0 && (r[44 + _ >> 2] = r[44 + _ >> 2] + -1), l = 16 + _ | 0, (0 | (c = 32 | T)) == 97) {
              if (V = (U = 32 & T) ? 9 + v | 0 : v, !(11 < p >>> 0) && (y = 12 - p | 0)) {
                for (Z = 8; Z *= 16, y = y + -1 | 0; )
                  ;
                d = ut[0 | V] == 45 ? -(Z + (-d - Z)) : d + Z - Z;
              }
              for ((0 | l) == (0 | (y = pa(
                (I = (y = r[44 + _ >> 2]) >> 31) ^ y + I,
                0,
                l
              ))) && (st[15 + _ | 0] = 48, y = 15 + _ | 0), M = 2 | gt, I = r[44 + _ >> 2], st[0 | (B = y + -2 | 0)] = T + 15, st[y + -1 | 0] = (0 | I) < 0 ? 45 : 43, y = 8 & f, S = 16 + _ | 0; T = S, F = U, I = we(d) < 2147483648 ? ~~d : -2147483648, st[0 | S] = F | ut[I + 3824 | 0], ((S = T + 1 | 0) - (16 + _ | 0) | 0) != 1 | ((d = 16 * (d - (0 | I))) == 0 ? !(y | 0 < (0 | p)) : 0) || (st[T + 1 | 0] = 46, S = T + 2 | 0), d != 0; )
                ;
              tr(
                h,
                32,
                E,
                R = (T = !p | (0 | p) <= ((S - _ | 0) - 18 | 0) ? ((l - (16 + _ | 0) | 0) - B | 0) + S | 0 : 2 + ((p + l | 0) - B | 0) | 0) + M | 0,
                f
              ), Ge(h, V, M), tr(h, 48, E, R, 65536 ^ f), Ge(h, 16 + _ | 0, p = S - (16 + _ | 0) | 0), tr(
                h,
                48,
                T - ((y = p) + (p = l - B | 0) | 0) | 0,
                0,
                0
              ), Ge(h, B, p);
            } else {
              for (y = (0 | p) < 0, d == 0 ? P = r[44 + _ >> 2] : (P = r[44 + _ >> 2] + -28 | 0, r[44 + _ >> 2] = P, d *= 268435456), N = y ? 6 : p, I = U = (0 | P) < 0 ? 48 + _ | 0 : 336 + _ | 0; I = (p = I) + 4 | 0, (d = 1e9 * (d - ((r[p >> 2] = y = d < 4294967296 & 0 <= d ? ~~d >>> 0 : 0) >>> 0))) != 0; )
                ;
              if ((0 | P) < 1)
                y = I, S = U;
              else
                for (S = U; ; ) {
                  if (B = (0 | P) < 29 ? P : 29, !((y = I + -4 | 0) >>> 0 < S >>> 0)) {
                    for (p = B, F = 0; Tt = F, F = r[(V = y) >> 2], M = 31 & p, M = 32 <= (63 & p) >>> (R = 0) ? (P = F << M, 0) : (P = (1 << M) - 1 & F >>> 32 - M, F << M), R = P + R | 0, R = (F = Tt + M | 0) >>> 0 < M >>> 0 ? R + 1 | 0 : R, Tt = V, V = Ql(F = Jl(M = F, R, 1e9), Ur, 1e9), r[Tt >> 2] = M - V, S >>> 0 <= (y = y + -4 | 0) >>> 0; )
                      ;
                    (p = F) && (r[(S = S + -4 | 0) >> 2] = p);
                  }
                  for (; S >>> 0 < (y = I) >>> 0 && !r[(I = y + -4 | 0) >> 2]; )
                    ;
                  if (P = r[44 + _ >> 2] - B | 0, I = y, !(0 < (0 | (r[44 + _ >> 2] = P))))
                    break;
                }
              if ((0 | P) <= -1)
                for (it = 1 + ((N + 25 | 0) / 9 | 0) | 0, B = (0 | c) == 102; ; ) {
                  if (F = (0 | P) < -9 ? 9 : 0 - P | 0, y >>> 0 <= S >>> 0)
                    S = r[S >> 2] ? S : S + 4 | 0;
                  else {
                    for (V = 1e9 >>> F, M = -1 << F ^ -1, P = 0, I = S; p = r[I >> 2], r[I >> 2] = (p >>> F) + P, P = j(V, p & M), (I = I + 4 | 0) >>> 0 < y >>> 0; )
                      ;
                    S = r[S >> 2] ? S : S + 4 | 0, P && (r[y >> 2] = P, y = y + 4 | 0);
                  }
                  if (P = F + r[44 + _ >> 2] | 0, y = (0 | it) < y - (p = B ? U : S) >> 2 ? p + (it << 2) | 0 : y, !((0 | (r[44 + _ >> 2] = P)) < 0))
                    break;
                }
              if (!(y >>> (I = 0) <= S >>> 0 || (I = j(U - S >> 2, 9), (p = r[S >> 2]) >>> 0 < (P = 10))))
                for (; I = I + 1 | 0, (P = j(P, 10)) >>> 0 <= p >>> 0; )
                  ;
              if ((0 | (p = (N - ((0 | c) == 102 ? 0 : I) | 0) - ((0 | c) == 103 & (0 | N) != 0) | 0)) < (j(y - U >> 2, 9) + -9 | 0)) {
                if (R = (U + ((p = (0 | (M = p + 9216 | 0)) / 9 | 0) << 2) | 0) - 4092 | 0, P = 10, (0 | (p = 1 + (M - j(p, 9) | 0) | 0)) <= 8)
                  for (; P = j(P, 10), (0 | (p = p + 1 | 0)) != 9; )
                    ;
                if (it = R + 4 | 0, ((B = (V = r[R >> 2]) - j(P, M = (V >>> 0) / (P >>> 0) | 0) | 0) || (0 | it) != (0 | y)) && (Z = B >>> 0 < (p = P >>> 1) >>> 0 ? 0.5 : (0 | y) == (0 | it) && (0 | p) == (0 | B) ? 1 : 1.5, d = 1 & M ? 9007199254740994 : 9007199254740992, !gt | ut[0 | v] != 45 || (Z = -Z, d = -d), r[R >> 2] = p = V - B | 0, d + Z != d)) {
                  if (1e9 <= (r[R >> 2] = p = p + P | 0) >>> 0)
                    for (; (R = R + -4 | (r[R >> 2] = 0)) >>> 0 < S >>> 0 && (r[(S = S + -4 | 0) >> 2] = 0), p = r[R >> 2] + 1 | 0, 999999999 < (r[R >> 2] = p) >>> 0; )
                      ;
                  if (I = j(U - S >> 2, 9), !((p = r[S >> 2]) >>> 0 < (P = 10)))
                    for (; I = I + 1 | 0, (P = j(P, 10)) >>> 0 <= p >>> 0; )
                      ;
                }
                y = (p = R + 4 | 0) >>> 0 < y >>> 0 ? p : y;
              }
              r: {
                for (; ; ) {
                  if ((B = y) >>> (V = 0) <= S >>> 0)
                    break r;
                  if (r[(y = B + -4 | 0) >> 2])
                    break;
                }
                V = 1;
              }
              if ((0 | c) != 103)
                M = 8 & f;
              else if (N = ((p = (0 | I) < (0 | (y = N || 1)) & -5 < (0 | I)) ? -1 ^ I : -1) + y | 0, T = (p ? -1 : -2) + T | 0, !(M = 8 & f)) {
                if (y = 9, V && (M = r[B + -4 >> 2]) && !((M >>> (y = 0)) % (p = 10)))
                  for (; y = y + 1 | 0, !((M >>> 0) % ((p = j(p, 10)) >>> 0)); )
                    ;
                p = j(B - U >> 2, 9) + -9 | 0, N = (32 | T) == 102 ? ((M = 0) | N) < (0 | (p = 0 < (0 | (p = p - y | 0)) ? p : 0)) ? N : p : ((M = 0) | N) < (0 | (p = 0 < (0 | (p = (p + I | 0) - y | 0)) ? p : 0)) ? N : p;
              }
              if (R = (0 | (P = N | M)) != 0, p = h, Tt = E, y = 0 < (0 | I) ? I : 0, (0 | (F = 32 | T)) != 102) {
                if ((l - (y = pa((y = I >> 31) + I ^ y, 0, l)) | 0) <= 1)
                  for (; st[0 | (y = y + -1 | 0)] = 48, (l - y | 0) < 2; )
                    ;
                st[0 | (it = y + -2 | 0)] = T, st[y + -1 | 0] = (0 | I) < 0 ? 45 : 43, y = l - it | 0;
              }
              if (tr(
                p,
                32,
                Tt,
                R = 1 + (y + (R + (N + gt | 0) | 0) | 0) | 0,
                f
              ), Ge(h, v, gt), tr(h, 48, E, R, 65536 ^ f), (0 | F) == 102) {
                for (p = 16 + _ | 8, I = 16 + _ | 9, S = T = U >>> 0 < S >>> 0 ? U : S; ; ) {
                  if (y = pa(r[S >> 2], 0, I), (0 | T) != (0 | S)) {
                    if (!(y >>> 0 <= 16 + _ >>> 0))
                      for (; st[0 | (y = y + -1 | 0)] = 48, 16 + _ >>> 0 < y >>> 0; )
                        ;
                  } else
                    (0 | y) == (0 | I) && (st[24 + _ | 0] = 48, y = p);
                  if (Ge(h, y, I - y | 0), !((S = S + 4 | 0) >>> 0 <= U >>> 0))
                    break;
                }
                P && Ge(h, 3875, 1);
                r:
                  if (!((0 | N) < 1 | B >>> 0 <= S >>> 0))
                    for (; ; ) {
                      if (16 + _ >>> 0 < (y = pa(r[S >> 2], 0, I)) >>> 0)
                        for (; st[0 | (y = y + -1 | 0)] = 48, 16 + _ >>> 0 < y >>> 0; )
                          ;
                      if (Ge(h, y, (0 | N) < 9 ? N : 9), N = N + -9 | 0, B >>> 0 <= (S = S + 4 | 0) >>> 0)
                        break r;
                      if (!(0 < (0 | N)))
                        break;
                    }
                tr(h, 48, N + 9 | 0, 9, 0);
              } else {
                r:
                  if (!((0 | N) < 0))
                    for (T = V ? B : S + 4 | 0, p = 16 + _ | 8, U = 16 + _ | 9, I = S; ; ) {
                      if ((0 | U) == (0 | (y = pa(r[I >> 2], 0, U))) && (st[24 + _ | 0] = 48, y = p), (0 | S) != (0 | I)) {
                        if (!(y >>> 0 <= 16 + _ >>> 0))
                          for (; st[0 | (y = y + -1 | 0)] = 48, 16 + _ >>> 0 < y >>> 0; )
                            ;
                      } else
                        Ge(h, y, 1), y = y + 1 | 0, (0 | N) < 1 && !M || Ge(h, 3875, 1);
                      if (Ge(
                        h,
                        F = y,
                        (0 | (y = U - y | 0)) < (0 | N) ? y : N
                      ), N = N - y | 0, T >>> 0 <= (I = I + 4 | 0) >>> 0)
                        break r;
                      if (!(-1 < (0 | N)))
                        break;
                    }
                tr(h, 48, N + 18 | 0, 18, 0), Ge(h, it, l - it | 0);
              }
            }
            return tr(h, 32, E, R, 8192 ^ f), X = 560 + _ | 0, 0 | ((0 | R) < (0 | E) ? E : R);
          }, ht[12] = function(h, d) {
            h |= 0;
            var E = d |= 0;
            d = r[d >> 2] + 15 & -16, r[E >> 2] = d + 16, E = h, h = function(p, f, T, l) {
              var c, _, v = 0, y = 0, S = 0, I = 0;
              return X = _ = X - 32 | 0, v = (I = v = 2147483647 & l) - 1006698496 | 0, y = v = (c = y = S = T) >>> 0 < 0 ? v + 1 | 0 : v, v = I - 1140785152 | 0, (0 | (v = S >>> 0 < 0 ? v + 1 | 0 : v)) == (0 | y) & c >>> 0 < S >>> 0 | y >>> 0 < v >>> 0 ? (v = l << 4 | T >>> 28, T = T << 4 | f >>> 28, (0 | (S = f &= 268435455)) == 134217728 & 1 <= p >>> 0 | 134217728 < f >>> 0 ? (v = v + 1073741824 | 0, (p = T + 1 | 0) >>> 0 < 1 && (v = v + 1 | 0), y = p) : (v = v - (((y = T) >>> 0 < 0) + -1073741824 | 0) | 0, p | 134217728 ^ S || ((p = y + (1 & y) | 0) >>> 0 < y >>> 0 && (v = v + 1 | 0), y = p))) : (!S & (0 | I) == 2147418112 ? !(p | f) : (0 | I) == 2147418112 & S >>> 0 < 0 | I >>> 0 < 2147418112) ? (v = 2146435072, ((y = 0) | I) == 1140785151 & 4294967295 < S >>> 0 | 1140785151 < I >>> 0 || (S = I >>> 16) >>> (v = 0) < 15249 || (function(P, M, R, N, F, B) {
                var U, V, Z = 0, it = 0;
                64 & B ? (M = 31 & (R = B - 64 | 0), M = 32 <= (63 & R) >>> 0 ? (R = 0, F >>> M) : (R = F >>> M, ((1 << M) - 1 & F) << 32 - M | N >>> M), F = N = 0) : B && (it = F, Z = 31 & (V = 64 - B | 0), V = 32 <= (63 & V) >>> 0 ? (it = N << Z, 0) : (it = (1 << Z) - 1 & N >>> 32 - Z | it << Z, N << Z), U = M, M = 31 & (Z = B), M = 32 <= (63 & Z) >>> 0 ? (Z = 0, R >>> M) : (Z = R >>> M, ((1 << M) - 1 & R) << 32 - M | U >>> M), M |= V, R = Z | it, Z = N, N = 31 & B, N = 32 <= (63 & B) >>> 0 ? (it = 0, F >>> N) : (it = F >>> N, ((1 << N) - 1 & F) << 32 - N | Z >>> N), F = it), r[P >> 2] = M, r[4 + P >> 2] = R, r[8 + P >> 2] = N, r[12 + P >> 2] = F;
              }(
                _,
                p,
                f,
                T,
                v = 65535 & l | 65536,
                15361 - S | 0
              ), function(P, M, R, N, F, B) {
                var U, V, Z = 0;
                64 & B ? (N = M, M = 31 & (F = B + -64 | 0), 32 <= (63 & F) >>> 0 ? (F = N << M, N = 0) : (F = (1 << M) - 1 & N >>> 32 - M | R << M, N <<= M), R = M = 0) : B && (V = N, N = 31 & (U = B), V = 32 <= (63 & B) >>> 0 ? (Z = V << N, 0) : (Z = (1 << N) - 1 & V >>> 32 - N | F << N, V << N), N = R, F = 31 & (B = 64 - B | 0), 32 <= (63 & B) >>> 0 ? (B = 0, N >>>= F) : (B = N >>> F, N = ((1 << F) - 1 & N) << 32 - F | M >>> F), N |= V, F = B | Z, B = M, M = 31 & U, M = 32 <= (63 & U) >>> 0 ? (Z = B << M, 0) : (Z = (1 << M) - 1 & B >>> 32 - M | R << M, B << M), R = Z), r[P >> 2] = M, r[4 + P >> 2] = R, r[8 + P >> 2] = N, r[12 + P >> 2] = F;
              }(
                16 + _ | 0,
                p,
                f,
                T,
                v,
                S + -15233 | 0
              ), T = r[4 + _ >> 2], p = r[8 + _ >> 2], v = r[12 + _ >> 2] << 4 | p >>> 28, y = p << 4 | T >>> 28, (0 | (T = p = 268435455 & T)) == 134217728 & 1 <= (f = r[_ >> 2] | ((r[16 + _ >> 2] | r[24 + _ >> 2]) != 0 | (r[20 + _ >> 2] | r[28 + _ >> 2]) != 0)) >>> 0 | 134217728 < p >>> 0 ? ((p = y + 1 | 0) >>> 0 < 1 && (v = v + 1 | 0), y = p) : f | 134217728 ^ T || ((p = y + (1 & y) | 0) >>> 0 < y >>> 0 && (v = v + 1 | 0), y = p))) : (y = T << 4 | f >>> 28, v = 524287 & (v = l << 4 | T >>> 28) | 2146959360), X = 32 + _ | 0, Pt(0, 0 | y), Pt(1, -2147483648 & l | v), +kr();
            }(
              r[d >> 2],
              r[d + 4 >> 2],
              r[d + 8 >> 2],
              r[d + 12 >> 2]
            ), Vt[E >> 3] = h;
          }, ht[13] = function(h) {
            return 0;
          }, ht[14] = function(h, d, E) {
            d |= 0, E |= 0;
            var p, f, T = 0, l = 0, c = 0, _ = 0;
            for (X = f = X - 32 | 0, T = r[28 + (h |= 0) >> 2], r[16 + f >> 2] = T, c = r[h + 20 >> 2], r[28 + f >> 2] = E, r[24 + f >> 2] = d, c = (r[20 + f >> 2] = d = c - T | 0) + E | 0, _ = 2, d = 16 + f | 0; ; ) {
              r: {
                if ((l = (T = 0) | Ml(r[h + 60 >> 2], 0 | d, 0 | _, 12 + f | 0)) && (r[2086] = l, T = -1), (0 | (T = T ? r[12 + f >> 2] = -1 : r[12 + f >> 2])) == (0 | c))
                  d = r[h + 44 >> 2], r[h + 28 >> 2] = d, r[h + 20 >> 2] = d, r[h + 16 >> 2] = d + r[h + 48 >> 2], h = E;
                else {
                  if (-1 < (0 | T))
                    break r;
                  r[h + 28 >> 2] = 0, r[h + 16 >> 2] = 0, r[h + 20 >> 2] = 0, r[h >> 2] = 32 | r[h >> 2], ((h = 0) | _) != 2 && (h = E - r[d + 4 >> 2] | 0);
                }
                return X = 32 + f | 0, 0 | h;
              }
              l = r[d + 4 >> 2], r[(d = (p = l >>> 0 < T >>> 0) ? d + 8 | 0 : d) >> 2] = (l = T - (p ? l : 0) | 0) + r[d >> 2], r[d + 4 >> 2] = r[d + 4 >> 2] - l, c = c - T | 0, _ = _ - p | 0;
            }
          }, ht[15] = function(h, d, E, p) {
            return Ur = 0;
          }, {
            d: function() {
            },
            e: function() {
              return 83886080;
            },
            f: function() {
              return 5;
            },
            g: function(h, d) {
              return d |= 0, X = d = X - 16 | 0, h = (h |= 0) ? mo(h) ? (vt(4, 2150, 0), 0) : ut[h + 4 | 0] : (r[d + 4 >> 2] = 1444, r[d >> 2] = 2267, vt(4, 1294, d), 0), X = d + 16 | 0, 0 | h;
            },
            h: function(h, d) {
              var E;
              return d |= 0, X = E = X - 48 | 0, h = (h |= 0) ? (h + 63 & -64) != (0 | h) ? (r[36 + E >> 2] = 1522, r[32 + E >> 2] = 2284, vt(4, 1294, 32 + E | 0), 0) : (d + 63 & -64) == (0 | d) && d ? function(p, f) {
                var T, l = 0, c = 0, _ = 0, v = 0, y = 0, S = 0, I = 0, P = 0, M = 0, R = 0, N = 0, F = 0, B = 0, U = 0, V = 0, Z = 0, it = 0, gt = 0, Tt = 0, Rt = 0, Ut = 0;
                X = y = (T = c = X) - 704 & -64;
                r:
                  if (f >>> 0 <= 1343)
                    vt(4, 1235, 0);
                  else if (mo(p))
                    vt(4, 1469, 0);
                  else if (c = ut[0 | (Rt = p + 4 | 0)]) {
                    if (!(6 <= c >>> 0)) {
                      (Z = (0 | !ut[p + 5 | 0]) == 1) || (oi(Rt, 1), W(p - -64 | 0, 4, 160)), Gr(y - -64 | 0, 0, 640), fo(p, y - -64 | 0), c = p + f | 0, f = r[y + 64 >> 2];
                      t: {
                        e: {
                          i: {
                            if (5 <= (V = ut[p + 4 | 0]) >>> 0) {
                              if (f >>> 0 < p >>> 0 | c >>> 0 < f >>> 0 || (v = f + 256 | 0) >>> 0 < p >>> 0)
                                break e;
                              if (v >>> 0 <= c >>> 0)
                                break i;
                              break e;
                            }
                            if (f >>> 0 < p >>> 0 | c >>> 0 < f >>> 0 || (v = f + 128 | 0) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0)
                              break e;
                          }
                          if (!((_ = r[y + 68 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < v >>> 0 || (_ = _ - -64 | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (R = r[f >> 2])) < 0 || (v = r[y + 72 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = (l = v) + (v = R << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (I = r[y + 76 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < I >>> 0 | I >>> 0 < _ >>> 0 || (l = (R << 6) + I | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 80 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 84 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 88 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 92 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 96 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 100 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 4 >> 2])) < 0 || (v = r[y + 104 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (S = (_ = v) + (v = l << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (_ = r[y + 108 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < S >>> 0 || (l = _ + (l << 6) | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 112 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 116 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 120 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 124 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 128 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 132 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 136 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 8 >> 2])) < 0 || (v = r[y + 140 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = (N = l << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 144 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + N | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 148 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + N | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 156 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + N | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 160 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + N | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 164 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + N | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 12 >> 2])) < 0 || (v = r[y + 172 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = (F = l << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 176 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + F | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 180 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + F | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 188 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = v + F | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (0 | (_ = r[f + 16 >> 2])) < 0 || (v = r[y + 192 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (S = (l = v) + (v = _ << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 196 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 200 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 204 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 208 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + (_ << 6) | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 212 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 216 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 220 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 228 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 232 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 236 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 240 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 244 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 248 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (l = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 252 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 256 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 260 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 264 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 268 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 272 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (0 | (S = r[f + 20 >> 2])) < 0 || (_ = r[y + 276 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (B = (l = _) + (_ = S << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < B >>> 0 || (l = r[y + 280 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < B >>> 0 || (S = l + (S << 6) | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 284 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 288 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 292 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 296 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 300 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 308 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 312 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (0 | (B = r[f + 24 >> 2])) < 0 || (l = r[y + 336 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + (B << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (0 | (B = r[f + 28 >> 2])) < 0 || (l = r[y + 340 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = (gt = B << 2) + l | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (l = r[y + 344 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (S = l + gt | 0) >>> 0 < p >>> 0 | c >>> 0 < S >>> 0 || (0 | (B = r[f + 32 >> 2])) < 0 || (l = r[y + 356 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < S >>> 0 || (B = (S = B << 2) + l | 0) >>> 0 < p >>> 0 | c >>> 0 < B >>> 0 || (l = r[y + 360 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < B >>> 0 || (B = l + S | 0) >>> 0 < p >>> 0 | c >>> 0 < B >>> 0 || (l = r[y + 364 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < B >>> 0 || (B = l + S | 0) >>> 0 < p >>> 0 | c >>> 0 < B >>> 0 || (l = r[y + 368 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < B >>> 0 || (B = l + S | 0) >>> 0 < p >>> 0 | c >>> 0 < B >>> 0 || (l = r[y + 372 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < B >>> 0 || (B = l + S | 0) >>> 0 < p >>> 0 | c >>> 0 < B >>> 0 || (l = r[y + 376 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < B >>> 0 || (B = l + S | 0) >>> 0 < p >>> 0 | c >>> 0 < B >>> 0 || (l = r[y + 380 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < B >>> 0 || (B = l + S | 0) >>> 0 < p >>> 0 | c >>> 0 < B >>> 0 || (0 | (P = r[f + 36 >> 2])) < 0 || (l = r[y + 392 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < B >>> 0 || (P = (B = P << 2) + l | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (l = r[y + 396 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + B | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (l = r[y + 400 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + B | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 40 >> 2])) < 0 || (l = r[y + 412 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + (M << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 44 >> 2])) < 0 || (l = r[y + 424 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + (M << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 48 >> 2])) < 0 || (l = r[y + 428 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = (M <<= 2) + l | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (l = r[y + 432 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + M | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 52 >> 2])) < 0 || (l = r[y + 416 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = (M <<= 2) + l | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (l = r[y + 420 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + M | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 56 >> 2])) < 0 || (l = r[y + 552 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + (M << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 60 >> 2])) < 0 || (l = r[y + 556 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + (M << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 64 >> 2])) < 0 || (l = r[y + 560 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + (M << 1) | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 68 >> 2])) < 0 || (l = r[y + 564 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + (M << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 72 >> 2])) < 0 || (l = r[y + 568 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (M = (P = l) + (l = M << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 572 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 576 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 580 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 584 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (P = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 76 >> 2])) < 0 || (l = r[y + 588 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (M = (P = M << 2) + l | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (l = r[y + 592 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (l = r[y + 596 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < M >>> 0 || (P = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 80 >> 2])) < 0 || (l = r[y + 600 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (U = (P = l) + (l = M << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < U >>> 0 || (P = r[y + 604 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < U >>> 0 || (M = P + (M << 6) | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 608 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 612 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 616 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 620 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 624 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 628 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (M = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < M >>> 0 || (P = r[y + 632 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < M >>> 0 || (P = l + P | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 84 >> 2])) < 0 || (l = r[y + 636 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + (M << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (l = r[y + 640 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + (M << 1) | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (0 | (M = r[f + 88 >> 2])) < 0 || (l = r[y + 644 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (l = l + (M << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0)) {
                            if (!(V >>> 0 < 2) && ((P = r[y + 168 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < l >>> 0 || (l = P + N | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || !(V >>> 0 < 4) && ((P = r[y + 324 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 | P >>> 0 < l >>> 0 || (P = _ + P | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (l = r[y + 328 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (l = r[y + 332 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (P = l + _ | 0) >>> 0 < p >>> 0 | c >>> 0 < P >>> 0 || (l = r[y + 152 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < P >>> 0 || (N = l + N | 0) >>> 0 < p >>> 0 | c >>> 0 < N >>> 0 || (l = r[y + 184 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < N >>> 0 || (N = l + F | 0) >>> 0 < p >>> 0 | c >>> 0 < N >>> 0 || (l = r[y + 224 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 | l >>> 0 < N >>> 0 || (l = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (0 | (N = r[f + 92 >> 2])) < 0 || (v = r[y + 648 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (N = (l = N << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < N >>> 0 || (v = r[y + 652 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < N >>> 0 || (N = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < N >>> 0 || (v = r[y + 656 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < N >>> 0 || (l = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (0 | (N = r[f + 96 >> 2])) < 0 || (v = r[y + 660 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (N = (l = N << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < N >>> 0 || (v = r[y + 664 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < N >>> 0 || (N = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < N >>> 0 || (v = r[y + 668 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < N >>> 0 || (l = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 304 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 316 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 320 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 100 >> 2])) < 0 || (v = r[y + 436 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = (_ = l << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 440 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 444 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 104 >> 2])) < 0 || (v = r[y + 448 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = (_ = v) + (v = l << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 452 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 456 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 460 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (_ = r[y + 464 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 | _ >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 108 >> 2])) < 0 || (v = r[y + 480 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = (_ = l << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 484 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 488 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 112 >> 2])) < 0 || (v = r[y + 504 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = (_ = l << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 508 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 512 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 116 >> 2])) < 0 || (v = r[y + 528 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + (l << 2) | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 120 >> 2])) < 0 || (v = r[y + 532 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = (_ = l << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 536 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 540 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 124 >> 2])) < 0 || (v = r[y + 544 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = (l <<= 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 548 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = l + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0)))
                              break e;
                            if (V >>> 0 < 5 || !((v = r[y + 348 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (_ = v + gt | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 352 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + gt | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 384 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + S | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 388 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + S | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 404 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + B | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (v = r[y + 408 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (_ = v + B | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 128 >> 2])) < 0 || (v = r[y + 468 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = (_ = l << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 472 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 476 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 132 >> 2])) < 0 || (v = r[y + 492 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = (_ = l << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 496 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 500 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (_ = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < _ >>> 0 || (0 | (l = r[f + 136 >> 2])) < 0 || (v = r[y + 516 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < _ >>> 0 || (l = (_ = l << 2) + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 520 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (l = _ + v | 0) >>> 0 < p >>> 0 | c >>> 0 < l >>> 0 || (v = r[y + 524 >> 2]) >>> 0 < p >>> 0 | c >>> 0 < v >>> 0 | v >>> 0 < l >>> 0 || (v = _ + v | 0) >>> 0 < p >>> 0) && v >>> 0 <= c >>> 0)
                              break t;
                          }
                        }
                        vt(4, 1760, 0), oi(Rt, 1), W(p - -64 | 0, 4, 160);
                        break r;
                      }
                      Z || (Ll(p), st[p + 5 | 0] = 0, f = r[y + 64 >> 2], R = r[f >> 2], I = r[y + 76 >> 2], V = ut[p + 4 | 0]);
                      t: {
                        if ((p = 0) < (0 | R)) {
                          for (; ; ) {
                            if (63 < Wa((p << 6) + I | 0) >>> 0)
                              break t;
                            if ((0 | R) == (0 | (p = p + 1 | 0)))
                              break;
                          }
                          if (l = f + 48 | 0, (c = 0) < (0 | (p = r[f >> 2]))) {
                            for (v = r[f + 48 >> 2], _ = r[y + 80 >> 2]; ; ) {
                              if ((0 | (I = r[_ + (c << 2) >> 2])) < 0 | (0 | v) <= (0 | I))
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (B = f + 24 | 0, v = r[f + 24 >> 2], S = r[y + 88 >> 2], R = r[y + 84 >> 2], c = 0; ; ) {
                              if ((_ = r[(I = c << 2) + S >> 2]) && ((0 | _) < 0 | (0 | v) < (0 | _) || (0 | (I = r[I + R >> 2])) < 0 | (0 | v) <= (0 | I) || (_ = _ + I | 0) >>> 31 | (0 | v) < (0 | _)))
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (c = 0, v = r[y + 92 >> 2]; ; ) {
                              if (1 < ke[v + (c << 2) >> 2])
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (c = 0, v = r[y + 96 >> 2]; ; ) {
                              if (1 < ke[v + (c << 2) >> 2])
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (c = 0, v = r[y + 100 >> 2]; ; ) {
                              if ((0 | (_ = r[v + (c << 2) >> 2])) < -1 | (0 | p) <= (0 | _))
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                          } else
                            B = f + 24 | 0;
                        } else
                          B = f + 24 | 0, l = f + 48 | 0;
                        if ((p = 0) < (0 | (c = r[f + 4 >> 2]))) {
                          for (v = r[y + 108 >> 2]; ; ) {
                            if (63 < Wa(v + (p << 6) | 0) >>> 0)
                              break t;
                            if ((0 | c) == (0 | (p = p + 1 | 0)))
                              break;
                          }
                          if (S = (v = r[f + 48 >> 2]) + -1 | 0, !(((c = 0) | (p = r[f + 4 >> 2])) <= 0)) {
                            for (_ = r[y + 112 >> 2]; ; ) {
                              if ((0 | (I = r[_ + (c << 2) >> 2])) < 0 | (0 | v) <= (0 | I))
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (c = 0, v = r[y + 116 >> 2]; ; ) {
                              if (1 < ke[v + (c << 2) >> 2])
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (c = 0, v = r[y + 120 >> 2]; ; ) {
                              if (1 < ke[v + (c << 2) >> 2])
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (v = r[f >> 2], c = 0, _ = r[y + 124 >> 2]; ; ) {
                              if ((0 | (I = r[_ + (c << 2) >> 2])) < -1 | (0 | v) <= (0 | I))
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (c = 0, v = r[y + 128 >> 2]; ; ) {
                              if ((0 | (_ = r[v + (c << 2) >> 2])) < -1 | (0 | p) <= (0 | _))
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (c = 0, v = r[y + 132 >> 2]; ; ) {
                              if (1 < ke[v + (c << 2) >> 2])
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                            for (_ = f + 8 | 0, I = f + 12 | 0, R = r[y + 136 >> 2], c = 0; ; ) {
                              if (1 < (F = r[(N = c << 2) + v >> 2]) >>> 0 || (0 | (N = r[R + N >> 2])) < 0 | (0 | N) >= r[(F - 1 | 0 ? _ : I) >> 2])
                                break t;
                              if ((0 | p) == (0 | (c = c + 1 | 0)))
                                break;
                            }
                          }
                        } else
                          S = r[l >> 2] + -1 | 0;
                        if ((p = 0) < (0 | (c = r[f + 8 >> 2]))) {
                          for (v = r[y + 140 >> 2]; ; ) {
                            if ((0 | (_ = r[v + (p << 2) >> 2])) < 0 | (0 | S) < (0 | _))
                              break t;
                            if ((0 | c) == (0 | (p = p + 1 | 0)))
                              break;
                          }
                          for (gt = f + 28 | 0, v = r[f + 28 >> 2], R = r[y + 148 >> 2], N = r[y + 144 >> 2], p = 0; ; ) {
                            if ((_ = r[(I = p << 2) + R >> 2]) && ((0 | _) < 0 | (0 | v) < (0 | _) || (0 | (I = r[I + N >> 2])) < 0 | (0 | v) <= (0 | I) || (_ = _ + I | 0) >>> 31 | (0 | v) < (0 | _)))
                              break t;
                            if ((0 | c) == (0 | (p = p + 1 | 0)))
                              break;
                          }
                          for (p = 0, _ = r[y + 156 >> 2], I = r[y + 164 >> 2], R = r[y + 160 >> 2]; ; ) {
                            if ((0 | (N = r[(v = p << 2) + R >> 2])) < 1 || (0 | (F = r[v + I >> 2])) < 1 || (0 | (v = r[_ + v >> 2])) < 1 | (0 | v) != (0 | j(F + 1 | 0, N + 1 | 0)))
                              break t;
                            if ((0 | c) == (0 | (p = p + 1 | 0)))
                              break;
                          }
                        } else
                          gt = f + 28 | 0;
                        if ((p = 0) < (0 | (_ = r[f + 12 >> 2]))) {
                          for (c = r[y + 172 >> 2]; ; ) {
                            if ((0 | (v = r[c + (p << 2) >> 2])) < 0 | (0 | S) < (0 | v))
                              break t;
                            if ((0 | _) == (0 | (p = p + 1 | 0)))
                              break;
                          }
                          for (P = f + 32 | 0, c = r[f + 32 >> 2], S = r[y + 180 >> 2], R = r[y + 176 >> 2], p = 0; ; ) {
                            if ((v = r[(I = p << 2) + S >> 2]) && ((0 | v) < 0 | (0 | c) < (0 | v) || (0 | (I = r[I + R >> 2])) < 0 | (0 | c) <= (0 | I) || (v = v + I | 0) >>> 31 | (0 | c) < (0 | v)))
                              break t;
                            if ((0 | _) == (0 | (p = p + 1 | 0)))
                              break;
                          }
                        } else
                          P = f + 32 | 0;
                        v = f + 16 | 0;
                        e: {
                          i: {
                            if (!(((p = 0) | (c = r[f + 16 >> 2])) <= 0)) {
                              for (_ = r[y + 208 >> 2]; ; ) {
                                if (63 < Wa(_ + (p << 6) | 0) >>> 0)
                                  break t;
                                if ((0 | c) == (0 | (p = p + 1 | 0)))
                                  break;
                              }
                              if (!(((c = 0) | (p = r[v >> 2])) <= 0)) {
                                for (_ = r[l >> 2], I = r[y + 212 >> 2]; ; ) {
                                  if ((0 | (S = r[I + (c << 2) >> 2])) < 0 | (0 | _) <= (0 | S))
                                    break t;
                                  if ((0 | p) == (0 | (c = c + 1 | 0)))
                                    break;
                                }
                                for (Rt = f + 36 | 0, _ = r[f + 36 >> 2], R = r[y + 220 >> 2], N = r[y + 216 >> 2], c = 0; ; ) {
                                  if ((I = r[(S = c << 2) + R >> 2]) && ((0 | I) < 0 | (0 | _) < (0 | I) || (0 | (S = r[S + N >> 2])) < 0 | (0 | _) <= (0 | S) || (I = I + S | 0) >>> 31 | (0 | _) < (0 | I)))
                                    break t;
                                  if ((0 | p) == (0 | (c = c + 1 | 0)))
                                    break;
                                }
                                for (c = 0, _ = r[y + 228 >> 2]; ; ) {
                                  if (1 < ke[_ + (c << 2) >> 2])
                                    break t;
                                  if ((0 | p) == (0 | (c = c + 1 | 0)))
                                    break;
                                }
                                for (c = 0, _ = r[y + 232 >> 2]; ; ) {
                                  if (1 < ke[_ + (c << 2) >> 2])
                                    break t;
                                  if ((0 | p) == (0 | (c = c + 1 | 0)))
                                    break;
                                }
                                for (_ = r[f >> 2], c = 0, I = r[y + 236 >> 2]; ; ) {
                                  if ((0 | (S = r[I + (c << 2) >> 2])) < -1 | (0 | _) <= (0 | S))
                                    break t;
                                  if ((0 | p) == (0 | (c = c + 1 | 0)))
                                    break;
                                }
                                for (_ = r[f + 4 >> 2], c = 0, I = r[y + 240 >> 2]; ; ) {
                                  if ((0 | (S = r[I + (c << 2) >> 2])) < -1 | (0 | _) <= (0 | S))
                                    break t;
                                  if ((0 | p) == (0 | (c = c + 1 | 0)))
                                    break;
                                }
                                for (_ = r[y + 244 >> 2], c = 0; ; ) {
                                  if (r[_ + (c << 2) >> 2] < 0)
                                    break t;
                                  if ((0 | p) == (0 | (c = c + 1 | 0)))
                                    break;
                                }
                                break i;
                              }
                            }
                            I = f + 68 | 0, Rt = f + 36 | 0;
                            break e;
                          }
                          for (_ = r[y + 252 >> 2], c = 0; ; ) {
                            if (r[_ + (c << 2) >> 2] < 0)
                              break t;
                            if ((0 | p) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                          for (I = r[f + 60 >> 2], c = 0, S = r[y + 256 >> 2]; ; ) {
                            if ((R = r[(R = c << 2) + S >> 2] + (r[_ + R >> 2] << 1) | 0) >>> 31 | (0 | I) < (0 | R))
                              break t;
                            if ((0 | p) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                          for (_ = r[f + 64 >> 2], R = r[y + 264 >> 2], N = r[y + 260 >> 2], c = 0; ; ) {
                            if ((I = r[(S = c << 2) + R >> 2]) && ((0 | I) < 0 | (0 | _) < (0 | I) || (0 | (S = r[S + N >> 2])) < 0 | (0 | _) <= (0 | S) || (I = I + S | 0) >>> 31 | (0 | _) < (0 | I)))
                              break t;
                            if ((0 | p) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                          for (I = f + 68 | 0, _ = r[f + 68 >> 2], N = r[y + 272 >> 2], F = r[y + 268 >> 2], c = 0; ; ) {
                            if ((S = r[(R = c << 2) + N >> 2]) && ((0 | S) < 0 | (0 | _) < (0 | S) || (0 | (R = r[R + F >> 2])) < 0 | (0 | _) <= (0 | R) || (S = S + R | 0) >>> 31 | (0 | _) < (0 | S)))
                              break t;
                            if ((0 | p) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                        }
                        e: {
                          i: {
                            if (!(((p = 0) | (c = r[f + 20 >> 2])) <= 0)) {
                              for (_ = r[y + 280 >> 2]; ; ) {
                                if (63 < Wa(_ + (p << 6) | 0) >>> 0)
                                  break t;
                                if ((0 | c) == (0 | (p = p + 1 | 0)))
                                  break;
                              }
                              if (!(((p = 0) | (c = r[f + 20 >> 2])) <= 0)) {
                                for (_ = r[y + 296 >> 2]; ; ) {
                                  if (1 < ke[_ + (p << 2) >> 2])
                                    break t;
                                  if ((0 | c) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                                for (_ = r[y + 300 >> 2], p = 0; ; ) {
                                  if (r[_ + (p << 2) >> 2] < 0)
                                    break t;
                                  if ((0 | c) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                                break i;
                              }
                            }
                            p = r[f + 52 >> 2];
                            break e;
                          }
                          for (p = r[f + 52 >> 2], N = r[y + 312 >> 2], F = r[y + 308 >> 2], S = 0; ; ) {
                            if ((_ = r[(R = S << 2) + N >> 2]) && ((0 | _) < 0 | (0 | p) < (0 | _) || (0 | (R = r[R + F >> 2])) < 0 | (0 | p) <= (0 | R) || (_ = _ + R | 0) >>> 31 | (0 | p) < (0 | _)))
                              break t;
                            if ((0 | c) == (0 | (S = S + 1 | 0)))
                              break;
                          }
                        }
                        if (_ = r[f + 40 >> 2], (c = 0) < (0 | (S = r[f + 8 >> 2])))
                          for (R = r[y + 344 >> 2], N = r[y + 156 >> 2]; ; ) {
                            if ((F = r[(F = c << 2) + R >> 2] + (r[N + F >> 2] << 1) | 0) >>> 31 | (0 | _) < (0 | F))
                              break t;
                            if ((0 | S) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                        if ((c = 0) < (0 | (S = r[P >> 2]))) {
                          for (R = r[y + 376 >> 2]; ; ) {
                            if (1 < ke[R + (c << 2) >> 2])
                              break t;
                            if ((0 | S) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                          for (c = 0, R = r[y + 380 >> 2]; ; ) {
                            if (1 < ke[R + (c << 2) >> 2])
                              break t;
                            if ((0 | S) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                        }
                        if ((c = 0) < (0 | (S = r[v >> 2])))
                          for (R = r[y + 400 >> 2], N = r[y + 252 >> 2]; ; ) {
                            if ((F = r[(F = c << 2) + R >> 2] + (r[N + F >> 2] << 1) | 0) >>> 31 | (0 | _) < (0 | F))
                              break t;
                            if ((0 | S) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                        if ((c = 0) < (0 | (_ = r[f + 44 >> 2])))
                          for (R = r[y + 424 >> 2]; ; ) {
                            if ((0 | (N = r[R + (c << 2) >> 2])) < 0 | (0 | p) <= (0 | N))
                              break t;
                            if ((0 | _) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                        if (1 <= (0 | (N = r[l >> 2])))
                          for (c = 0, F = r[y + 432 >> 2], M = r[y + 428 >> 2]; ; ) {
                            if ((l = r[(R = c << 2) + F >> 2]) && ((0 | l) < 0 | (0 | _) < (0 | l) || (0 | (R = r[M + R >> 2])) < 0 | (0 | _) <= (0 | R) || (l = l + R | 0) >>> 31 | (0 | _) < (0 | l)))
                              break t;
                            if ((0 | N) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                        if (1 <= (0 | p))
                          for (_ = r[f + 56 >> 2], c = 0, N = r[y + 420 >> 2], F = r[y + 416 >> 2]; ; ) {
                            if ((l = r[(R = c << 2) + N >> 2]) && ((0 | l) < 0 | (0 | _) < (0 | l) || (0 | (R = r[R + F >> 2])) < 0 | (0 | _) <= (0 | R) || (l = l + R | 0) >>> 31 | (0 | _) < (0 | l)))
                              break t;
                            if ((0 | (c = c + 1 | 0)) == (0 | p))
                              break;
                          }
                        if ((p = 0) < (0 | (c = r[I >> 2])))
                          for (_ = r[y + 564 >> 2]; ; ) {
                            if ((0 | (I = r[_ + (p << 2) >> 2])) < -1 | (0 | S) <= (0 | I))
                              break t;
                            if ((0 | c) == (0 | (p = p + 1 | 0)))
                              break;
                          }
                        if (p = r[f + 76 >> 2], 1 <= (0 | (I = r[f + 72 >> 2])))
                          for (c = 0, S = r[y + 572 >> 2], R = r[y + 568 >> 2]; ; ) {
                            if ((_ = r[(l = c << 2) + S >> 2]) && ((0 | _) < 0 | (0 | p) < (0 | _) || (0 | (l = r[l + R >> 2])) < 0 | (0 | p) <= (0 | l) || (_ = l + _ | 0) >>> 31 | (0 | p) < (0 | _)))
                              break t;
                            if ((0 | I) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                        if ((c = 0) < (0 | p)) {
                          for (_ = r[y + 588 >> 2]; ; ) {
                            if (1 < ke[_ + (c << 2) >> 2])
                              break t;
                            if ((0 | p) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                          for (l = r[y + 592 >> 2], c = 0; ; ) {
                            if (1 < (R = r[(S = c << 2) + _ >> 2]) >>> 0 || (0 | (S = r[l + S >> 2])) < 0 | (0 | S) >= r[(R - 1 | 0 ? v : f) >> 2])
                              break t;
                            if ((0 | p) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                          for (c = 0, _ = r[y + 596 >> 2]; ; ) {
                            if ((0 | (l = r[_ + (c << 2) >> 2])) < -1 | (0 | I) <= (0 | l))
                              break t;
                            if ((0 | p) == (0 | (c = c + 1 | 0)))
                              break;
                          }
                        }
                        e: {
                          if (!(((p = 0) | (S = r[f + 80 >> 2])) <= 0)) {
                            for (c = r[y + 604 >> 2]; ; ) {
                              if (63 < Wa(c + (p << 6) | 0) >>> 0)
                                break t;
                              if ((0 | S) == (0 | (p = p + 1 | 0)))
                                break;
                            }
                            if (!(((p = 0) | (S = r[f + 80 >> 2])) <= 0)) {
                              for (c = r[f + 48 >> 2], _ = r[y + 608 >> 2]; ; ) {
                                if ((0 | (I = r[_ + (p << 2) >> 2])) < 0 | (0 | c) <= (0 | I))
                                  break t;
                                if ((0 | S) == (0 | (p = p + 1 | 0)))
                                  break;
                              }
                              for (N = r[f + 88 >> 2], I = r[y + 616 >> 2], l = r[y + 612 >> 2], p = 0; ; ) {
                                if ((c = r[(_ = p << 2) + I >> 2]) && ((0 | c) < 0 | (0 | N) < (0 | c) || (0 | (_ = r[l + _ >> 2])) < 0 | (0 | N) <= (0 | _) || (c = c + _ | 0) >>> 31 | (0 | N) < (0 | c)))
                                  break t;
                                if ((0 | S) == (0 | (p = p + 1 | 0)))
                                  break;
                              }
                              for (v = r[v >> 2], I = r[y + 620 >> 2], p = 0; ; ) {
                                if ((0 | (c = r[I + (p << 2) >> 2])) < 0 | (0 | v) <= (0 | c))
                                  break t;
                                if ((0 | S) == (0 | (p = p + 1 | 0)))
                                  break;
                              }
                              for (l = r[y + 624 >> 2], p = 0; ; ) {
                                if ((0 | (c = r[l + (p << 2) >> 2])) < 0 | (0 | v) <= (0 | c))
                                  break t;
                                if ((0 | S) == (0 | (p = p + 1 | 0)))
                                  break;
                              }
                              for (c = r[f + 84 >> 2], R = r[y + 632 >> 2], F = r[y + 628 >> 2], p = 0; ; ) {
                                if ((_ = r[(M = p << 2) + R >> 2]) && ((0 | _) < 0 | (0 | c) < (0 | _) || (0 | (M = r[M + F >> 2])) < 0 | (0 | c) <= (0 | M) || (_ = _ + M | 0) >>> 31 | (0 | c) < (0 | _)))
                                  break t;
                                if ((0 | S) == (0 | (p = p + 1 | 0)))
                                  break;
                              }
                              for (U = r[y + 640 >> 2], c = r[y + 252 >> 2], _ = 0; ; ) {
                                if (0 < (0 | (Z = r[(p = _ << 2) + R >> 2])))
                                  for (M = U + (r[p + F >> 2] << 1) | 0, Ut = r[c + (r[p + l >> 2] << 2) >> 2], it = r[c + (r[p + I >> 2] << 2) >> 2], p = 0; ; ) {
                                    if ((0 | Ut) <= ni[M + (2 | (Tt = p << 1)) >> 1] | (0 | it) <= ni[M + Tt >> 1])
                                      break t;
                                    if (!((0 | (p = p + 2 | 0)) < (0 | Z)))
                                      break;
                                  }
                                if ((0 | S) == (0 | (_ = _ + 1 | 0)))
                                  break;
                              }
                              break e;
                            }
                          }
                          v = r[f + 16 >> 2], N = r[f + 88 >> 2];
                        }
                        if (!((255 & V) >>> 0 < 2)) {
                          if ((p = 0) < (0 | (R = r[f + 8 >> 2])))
                            for (c = r[y + 168 >> 2]; ; ) {
                              if (1 < ke[c + (p << 2) >> 2])
                                break t;
                              if ((0 | R) == (0 | (p = p + 1 | 0)))
                                break;
                            }
                          if (!((255 & V) >>> 0 < 4)) {
                            if (I = r[f + 56 >> 2], 1 <= (0 | (F = r[f + 20 >> 2])))
                              for (l = r[y + 332 >> 2], M = r[y + 328 >> 2], p = 0; ; ) {
                                if ((c = r[(_ = p << 2) + l >> 2]) && ((0 | c) < 0 | (0 | I) < (0 | c) || (0 | (_ = r[_ + M >> 2])) < 0 | (0 | I) <= (0 | _) || (c = c + _ | 0) >>> 31 | (0 | I) < (0 | c)))
                                  break t;
                                if ((0 | F) == (0 | (p = p + 1 | 0)))
                                  break;
                              }
                            if ((0 | (p = r[f + 92 >> 2])) != r[f + 96 >> 2])
                              break t;
                            if (1 <= (0 | R))
                              for (M = r[y + 152 >> 2], c = 0, U = r[y + 148 >> 2]; ; ) {
                                if ((_ = r[(l = c << 2) + U >> 2]) && ((0 | _) < 0 | (0 | p) < (0 | _) || (0 | (l = r[l + M >> 2])) < 0 | (0 | p) <= (0 | l) || (_ = l + _ | 0) >>> 31 | (0 | p) < (0 | _)))
                                  break t;
                                if ((0 | R) == (0 | (c = c + 1 | 0)))
                                  break;
                              }
                            if (1 <= (0 | (Ut = r[f + 12 >> 2])))
                              for (M = r[y + 184 >> 2], c = 0, U = r[y + 180 >> 2]; ; ) {
                                if ((_ = r[(l = c << 2) + U >> 2]) && ((0 | _) < 0 | (0 | p) < (0 | _) || (0 | (l = r[l + M >> 2])) < 0 | (0 | p) <= (0 | l) || (_ = l + _ | 0) >>> 31 | (0 | p) < (0 | _)))
                                  break t;
                                if ((0 | Ut) == (0 | (c = c + 1 | 0)))
                                  break;
                              }
                            if (1 <= (0 | v))
                              for (M = r[y + 224 >> 2], c = 0, U = r[y + 220 >> 2]; ; ) {
                                if ((_ = r[(l = c << 2) + U >> 2]) && ((0 | _) < 0 | (0 | p) < (0 | _) || (0 | (l = r[l + M >> 2])) < 0 | (0 | p) <= (0 | l) || (_ = l + _ | 0) >>> 31 | (0 | p) < (0 | _)))
                                  break t;
                                if ((0 | v) == (0 | (c = c + 1 | 0)))
                                  break;
                              }
                            if ((c = 0) < (0 | F)) {
                              for (_ = r[y + 304 >> 2]; ; ) {
                                if (1 < ke[_ + (c << 2) >> 2])
                                  break t;
                                if ((0 | F) == (0 | (c = c + 1 | 0)))
                                  break;
                              }
                              for (_ = r[f + 100 >> 2], U = r[y + 320 >> 2], Z = r[y + 316 >> 2], c = 0; ; ) {
                                if ((l = r[(M = c << 2) + U >> 2]) && ((0 | l) < 0 | (0 | _) < (0 | l) || (0 | (M = r[M + Z >> 2])) < 0 | (0 | _) <= (0 | M) || (l = l + M | 0) >>> 31 | (0 | _) < (0 | l)))
                                  break t;
                                if ((0 | F) == (0 | (c = c + 1 | 0)))
                                  break;
                              }
                            } else
                              _ = r[f + 100 >> 2];
                            if (1 <= (0 | _)) {
                              for (M = r[y + 440 >> 2], c = 0, Z = r[y + 436 >> 2]; ; ) {
                                if ((l = r[(U = c << 2) + M >> 2]) && ((0 | l) < 0 | (0 | I) < (0 | l) || (0 | (U = r[U + Z >> 2])) < 0 | (0 | I) <= (0 | U) || (l = l + U | 0) >>> 31 | (0 | I) < (0 | l)))
                                  break t;
                                if ((0 | _) == (0 | (c = c + 1 | 0)))
                                  break;
                              }
                              for (I = r[y + 444 >> 2], c = 0; ; ) {
                                if ((0 | (U = r[(l = c << 2) + I >> 2])) < 0 | (0 | U) >= r[l + M >> 2])
                                  break t;
                                if ((0 | _) == (0 | (c = c + 1 | 0)))
                                  break;
                              }
                            }
                            if ((I = 0) < (0 | (c = r[f + 104 >> 2]))) {
                              for (l = r[y + 448 >> 2]; ; ) {
                                if ((0 | (M = r[l + (I << 2) >> 2])) < 0 | (0 | _) <= (0 | M))
                                  break t;
                                if ((0 | c) == (0 | (I = I + 1 | 0)))
                                  break;
                              }
                              for (l = r[f + 116 >> 2], U = r[y + 464 >> 2], Z = r[y + 460 >> 2], _ = 0; ; ) {
                                if ((I = r[(M = _ << 2) + U >> 2]) && ((0 | I) < 0 | (0 | l) < (0 | I) || (0 | (M = r[M + Z >> 2])) < 0 | (0 | l) <= (0 | M) || (I = I + M | 0) >>> 31 | (0 | l) < (0 | I)))
                                  break t;
                                if ((0 | c) == (0 | (_ = _ + 1 | 0)))
                                  break;
                              }
                            } else
                              l = r[f + 116 >> 2];
                            if ((_ = 0) < (0 | (M = r[f + 108 >> 2]))) {
                              for (I = r[y + 480 >> 2]; ; ) {
                                if ((0 | (U = r[I + (_ << 2) >> 2])) < 0 | (0 | R) <= (0 | U))
                                  break t;
                                if ((0 | M) == (0 | (_ = _ + 1 | 0)))
                                  break;
                              }
                              for (U = r[y + 488 >> 2], it = r[y + 484 >> 2], _ = 0; ; ) {
                                if ((I = r[(R = _ << 2) + U >> 2]) && ((0 | I) < 0 | (0 | c) < (0 | I) || (0 | (R = r[R + it >> 2])) < 0 | (0 | c) <= (0 | R) || (I = I + R | 0) >>> 31 | (0 | c) < (0 | I)))
                                  break t;
                                if ((0 | M) == (0 | (_ = _ + 1 | 0)))
                                  break;
                              }
                              for (U = r[gt >> 2], _ = r[y + 456 >> 2], R = r[y + 452 >> 2], I = 0; ; ) {
                                if (Tt = r[it + (I << 2) >> 2] << 2, (Z = r[Tt + _ >> 2]) && ((0 | Z) < 0 | (0 | U) < (0 | Z) || (0 | (Tt = r[R + Tt >> 2])) < 0 | (0 | U) <= (0 | Tt) || (0 | (Z = Z + Tt | 0)) < 0 | (0 | U) < (0 | Z)))
                                  break t;
                                if ((0 | M) == (0 | (I = I + 1 | 0)))
                                  break;
                              }
                            } else
                              _ = r[y + 456 >> 2], R = r[y + 452 >> 2];
                            if ((I = 0) < (0 | (M = r[f + 112 >> 2]))) {
                              for (U = r[y + 504 >> 2]; ; ) {
                                if ((0 | (Z = r[U + (I << 2) >> 2])) < 0 | (0 | v) <= (0 | Z))
                                  break t;
                                if ((0 | M) == (0 | (I = I + 1 | 0)))
                                  break;
                              }
                              for (it = r[y + 512 >> 2], Z = r[y + 508 >> 2], v = 0; ; ) {
                                if ((I = r[(U = v << 2) + it >> 2]) && ((0 | I) < 0 | (0 | c) < (0 | I) || (0 | (U = r[U + Z >> 2])) < 0 | (0 | c) <= (0 | U) || (I = I + U | 0) >>> 31 | (0 | c) < (0 | I)))
                                  break t;
                                if ((0 | M) == (0 | (v = v + 1 | 0)))
                                  break;
                              }
                              for (I = r[Rt >> 2], v = 0; ; ) {
                                if (it = r[Z + (v << 2) >> 2] << 2, (U = r[it + _ >> 2]) && ((0 | U) < 0 | (0 | I) < (0 | U) || (0 | (it = r[R + it >> 2])) < 0 | (0 | I) <= (0 | it) || (0 | (U = U + it | 0)) < 0 | (0 | I) < (0 | U)))
                                  break t;
                                if ((0 | M) == (0 | (v = v + 1 | 0)))
                                  break;
                              }
                            }
                            if (I = r[f + 120 >> 2], (v = 0) < (0 | l))
                              for (M = r[y + 528 >> 2]; ; ) {
                                if ((0 | (U = r[M + (v << 2) >> 2])) < 0 | (0 | I) <= (0 | U))
                                  break t;
                                if ((0 | (v = v + 1 | 0)) == (0 | l))
                                  break;
                              }
                            if ((v = 0) < (0 | I)) {
                              for (l = r[y + 532 >> 2]; ; ) {
                                if ((0 | (M = r[l + (v << 2) >> 2])) < -1 | (0 | F) <= (0 | M))
                                  break t;
                                if ((0 | I) == (0 | (v = v + 1 | 0)))
                                  break;
                              }
                              for (l = r[f + 124 >> 2], U = r[y + 540 >> 2], Z = r[y + 536 >> 2], v = 0; ; ) {
                                if ((F = r[(M = v << 2) + U >> 2]) && ((0 | F) < 0 | (0 | l) < (0 | F) || (0 | (M = r[M + Z >> 2])) < 0 | (0 | l) <= (0 | M) || (F = M + F | 0) >>> 31 | (0 | l) < (0 | F)))
                                  break t;
                                if ((0 | I) == (0 | (v = v + 1 | 0)))
                                  break;
                              }
                            }
                            if (!((255 & V) >>> 0 < 5)) {
                              if ((v = 0) < (0 | (V = r[gt >> 2]))) {
                                for (I = r[y + 348 >> 2]; ; ) {
                                  if ((0 | (l = r[I + (v << 2) >> 2])) < 0 | (0 | p) < (0 | l))
                                    break t;
                                  if ((0 | V) == (0 | (v = v + 1 | 0)))
                                    break;
                                }
                                for (I = r[y + 352 >> 2], v = 0; ; ) {
                                  if ((0 | (l = r[I + (v << 2) >> 2])) < 0 | (0 | p) < (0 | l))
                                    break t;
                                  if ((0 | V) == (0 | (v = v + 1 | 0)))
                                    break;
                                }
                              }
                              if ((V = 0) < (0 | (v = r[P >> 2]))) {
                                for (I = r[y + 384 >> 2]; ; ) {
                                  if ((0 | (l = r[I + (V << 2) >> 2])) < 0 | (0 | p) < (0 | l))
                                    break t;
                                  if ((0 | v) == (0 | (V = V + 1 | 0)))
                                    break;
                                }
                                for (I = r[y + 388 >> 2], V = 0; ; ) {
                                  if ((0 | (l = r[I + (V << 2) >> 2])) < 0 | (0 | p) < (0 | l))
                                    break t;
                                  if ((0 | v) == (0 | (V = V + 1 | 0)))
                                    break;
                                }
                              }
                              if ((V = 0) < (0 | (I = r[Rt >> 2]))) {
                                for (l = r[y + 404 >> 2]; ; ) {
                                  if ((0 | (F = r[l + (V << 2) >> 2])) < 0 | (0 | p) < (0 | F))
                                    break t;
                                  if ((0 | I) == (0 | (V = V + 1 | 0)))
                                    break;
                                }
                                for (l = r[y + 408 >> 2], V = 0; ; ) {
                                  if ((0 | (F = r[l + (V << 2) >> 2])) < 0 | (0 | p) < (0 | F))
                                    break t;
                                  if ((0 | I) == (0 | (V = V + 1 | 0)))
                                    break;
                                }
                              }
                              if ((p = 0) < (0 | (V = r[f + 128 >> 2]))) {
                                for (I = r[f >> 2], l = r[y + 468 >> 2]; ; ) {
                                  if ((0 | (F = r[l + (p << 2) >> 2])) < 0 | (0 | I) <= (0 | F))
                                    break t;
                                  if ((0 | V) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                                for (gt = r[y + 476 >> 2], F = r[y + 472 >> 2], p = 0; ; ) {
                                  if ((I = r[(l = p << 2) + gt >> 2]) && ((0 | I) < 0 | (0 | c) < (0 | I) || (0 | (l = r[l + F >> 2])) < 0 | (0 | c) <= (0 | l) || (I = l + I | 0) >>> 31 | (0 | c) < (0 | I)))
                                    break t;
                                  if ((0 | V) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                                for (I = r[B >> 2], p = 0; ; ) {
                                  if (B = r[F + (p << 2) >> 2] << 2, (l = r[B + _ >> 2]) && ((0 | l) < 0 | (0 | I) < (0 | l) || (0 | (B = r[R + B >> 2])) < 0 | (0 | I) <= (0 | B) || (0 | (l = l + B | 0)) < 0 | (0 | I) < (0 | l)))
                                    break t;
                                  if ((0 | V) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                              }
                              if ((p = 0) < (0 | (V = r[f + 132 >> 2]))) {
                                for (I = r[y + 492 >> 2]; ; ) {
                                  if ((0 | (l = r[I + (p << 2) >> 2])) < 0 | (0 | Ut) <= (0 | l))
                                    break t;
                                  if ((0 | V) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                                for (B = r[y + 500 >> 2], l = r[y + 496 >> 2], p = 0; ; ) {
                                  if ((I = r[(F = p << 2) + B >> 2]) && ((0 | I) < 0 | (0 | c) < (0 | I) || (0 | (F = r[l + F >> 2])) < 0 | (0 | c) <= (0 | F) || (I = I + F | 0) >>> 31 | (0 | c) < (0 | I)))
                                    break t;
                                  if ((0 | V) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                                for (p = 0; ; ) {
                                  if (F = r[l + (p << 2) >> 2] << 2, (I = r[F + _ >> 2]) && ((0 | I) < 0 | (0 | v) < (0 | I) || (0 | (F = r[R + F >> 2])) < 0 | (0 | v) <= (0 | F) || (0 | (I = I + F | 0)) < 0 | (0 | v) < (0 | I)))
                                    break t;
                                  if ((0 | V) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                              }
                              if (!(((p = 0) | (f = r[f + 136 >> 2])) <= 0)) {
                                for (v = r[y + 516 >> 2]; ; ) {
                                  if ((0 | (V = r[v + (p << 2) >> 2])) < 0 | (0 | S) <= (0 | V))
                                    break t;
                                  if ((0 | f) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                                for (I = r[y + 524 >> 2], v = r[y + 520 >> 2], p = 0; ; ) {
                                  if ((y = r[(V = p << 2) + I >> 2]) && ((0 | y) < 0 | (0 | c) < (0 | y) || (0 | (V = r[v + V >> 2])) < 0 | (0 | c) <= (0 | V) || (y = y + V | 0) >>> 31 | (0 | c) < (0 | y)))
                                    break t;
                                  if ((0 | f) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                                for (p = 0; ; ) {
                                  if (y = r[v + (p << 2) >> 2] << 2, (c = r[y + _ >> 2]) && ((0 | c) < 0 | (0 | N) < (0 | c) || (0 | (y = r[y + R >> 2])) < 0 | (0 | N) <= (0 | y) || (0 | (c = c + y | 0)) < 0 | (0 | N) < (0 | c)))
                                    break t;
                                  if ((0 | f) == (0 | (p = p + 1 | 0)))
                                    break;
                                }
                              }
                            }
                          }
                        }
                        return X = T, 1;
                      }
                      return vt(4, 1846, 0), X = T, 0;
                    }
                    r[y + 52 >> 2] = c, r[y + 48 >> 2] = 5, vt(4, 1640, y + 48 | 0);
                  } else
                    r[y + 32 >> 2] = c, vt(4, 1554, y + 32 | 0);
                return X = T, 0;
              }(h, d) : (r[20 + E >> 2] = 1621, r[16 + E >> 2] = 2284, vt(4, 1294, 16 + E | 0), 0) : (r[4 + E >> 2] = 1444, r[E >> 2] = 2284, vt(4, 1294, E), 0), X = 48 + E | 0, 0 | h;
            },
            i: function(h) {
              r[1805] = h |= 0;
            },
            j: function(h, d) {
              var E;
              return d |= 0, X = E = X - 48 | 0, h = (h |= 0) ? (h + 63 & -64) != (0 | h) ? (r[36 + E >> 2] = 1522, r[32 + E >> 2] = 2305, vt(4, 1294, 32 + E | 0), 0) : (d + 63 & -64) == (0 | d) && d ? function(p) {
                var f, T, l, c, _ = 0, v = 0, y = 0, S = 0, I = 0, P = 0, M = 0, R = 0;
                r[24 + (X = f = X - 32 | 0) >> 2] = 0, r[16 + f >> 2] = 5, r[20 + f >> 2] = 0, Yl(
                  16 + (X = c = X - 272 | 0) | 0,
                  2227,
                  r[12 + c >> 2] = 16 + f | 0
                ), function(N) {
                  var F;
                  r[(X = F = X - 16 | 0) >> 2] = N, function(B, U) {
                    var V;
                    r[12 + (X = V = X - 16 | 0) >> 2] = U, Vl(B, 1432, U, 0, 0), X = 16 + V | 0;
                  }(r[970], F), X = 16 + F | 0;
                }(16 + c | 0), X = 272 + c | 0;
                r: {
                  if (mo(p))
                    vt(4, 1932, 0);
                  else {
                    if (!(6 <= (y = ut[p + 4 | 0]) >>> 0)) {
                      if ((0 | !ut[p + 5 | 0]) != 1 ? (oi(p + 4 | 0, 1), W(p - -64 | 0, 4, 160), fo(
                        p,
                        p + 704 | (st[p + 5 | 0] = 0)
                      ), Ll(p)) : fo(p, p + 704 | 0), ut[7224] || (r[1807] = 6, st[7224] = 1, r[1808] = 7, r[1809] = 8, r[1810] = 9), v = r[p + 704 >> 2], 1 <= (0 | (y = r[v + 16 >> 2]))) {
                        for (R = (S = r[p + 912 >> 2]) + (y << 2) | 0, I = r[p + 908 >> 2]; ; ) {
                          M = r[p + 1204 >> 2] + (r[I >> 2] << 2) | 0;
                          t:
                            if (!(((v = 0) | (_ = (y = r[S >> 2]) + -1 | 0)) < 1))
                              e:
                                for (; ; ) {
                                  for (; ; ) {
                                    if (r[(P = M + (v << 2) | 0) >> 2] <= -1) {
                                      if (function(N, F, B) {
                                        var U = 0, V = 0;
                                        i:
                                          if ((0 | N) != (0 | F)) {
                                            if (!(N >>> 0 < F + B >>> 0 && F >>> 0 < (V = N + B | 0) >>> 0))
                                              return Ir(N, F, B);
                                            if (U = 3 & (N ^ F), N >>> 0 < F >>> 0) {
                                              if (!U) {
                                                if (3 & N)
                                                  for (; ; ) {
                                                    if (!B)
                                                      break i;
                                                    if (st[0 | N] = ut[0 | F], F = F + 1 | 0, B = B + -1 | 0, !(3 & (N = N + 1 | 0)))
                                                      break;
                                                  }
                                                if (!(B >>> 0 <= 3)) {
                                                  for (U = B; r[N >> 2] = r[F >> 2], F = F + 4 | 0, N = N + 4 | 0, 3 < (U = U + -4 | 0) >>> 0; )
                                                    ;
                                                  B &= 3;
                                                }
                                              }
                                              if (B)
                                                for (; st[0 | N] = ut[0 | F], N = N + 1 | 0, F = F + 1 | 0, B = B + -1 | 0; )
                                                  ;
                                            } else {
                                              if (!U) {
                                                if (3 & V)
                                                  for (; ; ) {
                                                    if (!B)
                                                      break i;
                                                    if (st[0 | (U = (B = B + -1 | 0) + N | 0)] = ut[F + B | 0], !(3 & U))
                                                      break;
                                                  }
                                                if (!(B >>> 0 <= 3))
                                                  for (; r[(B = B + -4 | 0) + N >> 2] = r[F + B >> 2], 3 < B >>> 0; )
                                                    ;
                                              }
                                              if (B)
                                                for (; st[(B = B + -1 | 0) + N | 0] = ut[F + B | 0], B; )
                                                  ;
                                            }
                                          }
                                      }(
                                        P,
                                        P + 4 | 0,
                                        (-1 ^ v) + y << 2
                                      ), (0 | v) < (0 | (_ = (y = _) + -1 | 0)))
                                        continue e;
                                      break t;
                                    }
                                    if (!((0 | (v = v + 1 | 0)) < (0 | _)))
                                      break;
                                  }
                                  break;
                                }
                          if (v = S, 0 < (0 | y) && (y = r[M + (_ << 2) >> 2] < 0 ? _ : y), r[v >> 2] = y, I = I + 4 | 0, !((S = S + 4 | 0) >>> 0 < R >>> 0))
                            break;
                        }
                        v = r[p + 704 >> 2];
                      }
                      if (1 <= r[v >> 2])
                        for (_ = 0; r[r[p + 712 >> 2] + (_ << 2) >> 2] = r[p + 716 >> 2] + (_ << 6), v = r[p + 704 >> 2], (0 | (_ = _ + 1 | 0)) < r[v >> 2]; )
                          ;
                      if (1 <= r[v + 4 >> 2])
                        for (_ = 0; r[r[p + 744 >> 2] + (_ << 2) >> 2] = r[p + 748 >> 2] + (_ << 6), v = r[p + 704 >> 2], (0 | (_ = _ + 1 | 0)) < r[v + 4 >> 2]; )
                          ;
                      if (1 <= r[v + 16 >> 2])
                        for (_ = 0; r[(y = _ << 2) + r[p + 832 >> 2] >> 2] = r[p + 848 >> 2] + (_ << 6), r[y + r[p + 836 >> 2] >> 2] = r[p + 1196 >> 2] + (r[y + r[p + 896 >> 2] >> 2] << 2), r[y + r[p + 840 >> 2] >> 2] = r[p + 1200 >> 2] + (r[y + r[p + 900 >> 2] >> 2] << 1), r[y + r[p + 844 >> 2] >> 2] = r[p + 1204 >> 2] + (r[y + r[p + 908 >> 2] >> 2] << 2), v = r[p + 704 >> 2], (0 | (_ = _ + 1 | 0)) < r[v + 16 >> 2]; )
                          ;
                      if (1 <= r[v + 20 >> 2])
                        for (_ = 0; r[r[p + 916 >> 2] + (_ << 2) >> 2] = r[p + 920 >> 2] + (_ << 6), v = r[p + 704 >> 2], (0 | (_ = _ + 1 | 0)) < r[v + 20 >> 2]; )
                          ;
                      if (1 <= r[v + 80 >> 2])
                        for (_ = 0; r[r[p + 1240 >> 2] + (_ << 2) >> 2] = r[p + 1244 >> 2] + (_ << 6), v = r[p + 704 >> 2], (0 | (_ = _ + 1 | 0)) < r[v + 80 >> 2]; )
                          ;
                      if (1 & st[r[p + 708 >> 2] + 20 | 0] || (0 | (S = r[v + 16 >> 2])) < 1)
                        break r;
                      for (_ = r[p + 904 >> 2], M = r[p + 900 >> 2], P = r[p + 1200 >> 2], I = 0; ; ) {
                        if (0 < (0 | (R = r[(y = I << 2) + _ >> 2] + -1 | 0)))
                          for (T = P + (r[y + M >> 2] << 1) | 0, v = 0; l = ni[(y = T + (v << 1) | 0) >> 1], ca[y >> 1] = ni[y + 4 >> 1], ca[y + 4 >> 1] = l, (0 | (v = v + 3 | 0)) < (0 | R); )
                            ;
                        if ((0 | S) == (0 | (I = I + 1 | 0)))
                          break;
                      }
                      for (y = r[p + 892 >> 2], I = r[p + 896 >> 2], M = r[p + 1196 >> 2], _ = 0; ; ) {
                        if (1 <= (0 | (P = r[(v = _ << 2) + y >> 2])))
                          for (P = (v = M + (r[v + I >> 2] << 2) | 0) + (P << 3) | 0, v = v + 4 | 0; $[v >> 2] = b(1) - $[v >> 2], (v = v + 8 | 0) >>> 0 < P >>> 0; )
                            ;
                        if ((0 | S) == (0 | (_ = _ + 1 | 0)))
                          break;
                      }
                      break r;
                    }
                    r[4 + f >> 2] = y, r[f >> 2] = 5, vt(4, 2023, f);
                  }
                  p = 0;
                }
                return X = 32 + f | 0, p;
              }(h) : (r[20 + E >> 2] = 1621, r[16 + E >> 2] = 2305, vt(4, 1294, 16 + E | 0), 0) : (r[4 + E >> 2] = 1444, r[E >> 2] = 2305, vt(4, 1294, E), 0), X = 48 + E | 0, 0 | h;
            },
            k: function(h, d, E, p) {
              var f;
              d |= 0, E |= 0, p |= 0, X = f = X + -64 | 0, (h |= 0) ? d ? E ? p ? (h = r[r[h >> 2] + 708 >> 2], r[d >> 2] = r[h + 12 >> 2], r[d + 4 >> 2] = r[h + 16 >> 2], r[E >> 2] = r[h + 4 >> 2], r[E + 4 >> 2] = r[h + 8 >> 2], r[p >> 2] = r[h >> 2]) : (r[52 + f >> 2] = 1995, r[48 + f >> 2] = 2325, vt(4, 1294, 48 + f | 0)) : (r[36 + f >> 2] = 1903, r[32 + f >> 2] = 2325, vt(4, 1294, 32 + f | 0)) : (r[20 + f >> 2] = 1819, r[16 + f >> 2] = 2325, vt(4, 1294, 16 + f | 0)) : (r[4 + f >> 2] = 1740, r[f >> 2] = 2325, vt(4, 1294, f)), X = 64 + f | 0;
            },
            l: Rl,
            m: $l,
            n: function(h) {
              var d;
              X = d = X - 16 | 0, (h |= 0) ? Cl(h) : (r[4 + d >> 2] = 1740, r[d >> 2] = 2387, vt(4, 1294, d)), X = 16 + d | 0;
            },
            o: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 540 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2402, vt(4, 1294, d), -1), X = 16 + d | 0, 0 | h;
            },
            p: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 916 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2423, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            q: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 548 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2442, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            r: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 928 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2463, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            s: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 924 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2492, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            t: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 932 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2521, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            u: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 552 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2550, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            v: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 4 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2572, vt(4, 1294, d), -1), X = 16 + d | 0, 0 | h;
            },
            w: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 712 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2588, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            x: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 52 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2602, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            y: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 740 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2622, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            z: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 332 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2650, vt(4, 1294, d), -1), X = 16 + d | 0, 0 | h;
            },
            A: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 832 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2670, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            B: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 888 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2688, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            C: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 432 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2716, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            D: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 884 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2743, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            E: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 440 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2772, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            F: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 436 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2797, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            G: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 448 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2824, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            H: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 912 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2848, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            I: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 844 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2873, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            J: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 892 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2893, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            K: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 444 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2920, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            L: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 836 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2950, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            M: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 904 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 2974, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            N: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 840 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 3e3, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            O: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 452 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 3022, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            P: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 456 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 3051, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            Q: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[r[h >> 2] + 876 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 3078, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            R: function(h) {
              var d;
              X = d = X - 16 | 0, (h |= 0) ? r[h + 428 >> 2] = 1 : (r[4 + d >> 2] = 1740, r[d >> 2] = 3110, vt(4, 1294, d)), X = 16 + d | 0;
            },
            S: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 640 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 3139, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            T: function(h) {
              var d;
              return X = d = X - 16 | 0, h = (h |= 0) ? r[h + 636 >> 2] : (r[4 + d >> 2] = 1740, r[d >> 2] = 3164, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
            },
            U: function(h) {
              var d;
              return co(12 + (X = d = X - 16 | 0) | 0, 64, h |= 0), X = 16 + d | 0, r[12 + d >> 2];
            },
            V: function(h) {
              var d, E, p = 0;
              return X = E = X - 16 | 0, !(h |= 0) || co(12 + E | 0, 16, d = Rl(h)) || (p = $l(h, r[12 + E >> 2], d)) || (po(r[12 + E >> 2]), p = 0), X = 16 + E | 0, 0 | p;
            },
            W: function(h) {
              return 0 | _o(h |= 0);
            },
            X: function(h) {
              po(h |= 0);
            },
            Y: function(h) {
              var d;
              co(12 + (X = d = X - 16 | 0) | 0, 64, h |= 0), po(r[12 + d >> 2]), X = 16 + d | 0;
            },
            Z: function() {
              return 0 | X;
            },
            _: function(h) {
              return 0 | (X = X - (0 | h) & -16);
            },
            $: function(h) {
              X = 0 | h;
            },
            aa: function(h) {
              return 0 | (h = 0 | (h |= 0), (E = 0 | ql()) < (h = E + (h |= 0) | 0) && h < 65536 && (h = new ArrayBuffer(j(h, 65536)), (d = new Ft.Int8Array(h)).set(st), st = d, st = new Ft.Int8Array(h), ca = new Ft.Int16Array(h), r = new Ft.Int32Array(h), ut = new Ft.Uint8Array(h), ni = new Ft.Uint16Array(h), ke = new Ft.Uint32Array(h), $ = new Ft.Float32Array(h), Vt = new Ft.Float64Array(h), Ce = h, Ni.buffer = h), E);
              var d, E;
            },
            ba: function(h, d) {
              ht[h |= 0](d |= 0);
            }
          };
          function vt(h, d, E) {
            var p;
            X = p = X - 272 | 0, ke[1804] > h >>> 0 || (h = r[1805]) && (Yl(16 + p | 0, d, r[12 + p >> 2] = E), ht[h](16 + p | 0)), X = 272 + p | 0;
          }
          function Ge(h, d, E) {
            32 & ut[0 | h] || function(p, f, T) {
              var l = 0, c = 0, _ = 0;
              r: {
                if (!(l = r[T + 16 >> 2])) {
                  if (function(v) {
                    var y;
                    return y = ut[v + 74 | 0], st[v + 74 | 0] = y + -1 | y, 8 & (y = r[v >> 2]) ? (r[v >> 2] = 32 | y, 1) : (r[v + 4 >> 2] = 0, r[v + 8 >> 2] = 0, y = r[v + 44 >> 2], r[v + 28 >> 2] = y, r[v + 20 >> 2] = y, r[v + 16 >> 2] = y + r[v + 48 >> 2], 0);
                  }(T))
                    break r;
                  l = r[T + 16 >> 2];
                }
                if (l - (_ = r[T + 20 >> 2]) >>> 0 < f >>> 0)
                  return ht[r[T + 36 >> 2]](T, p, f);
                t:
                  if (!(st[T + 75 | 0] < 0)) {
                    for (l = f; ; ) {
                      if (!(c = l))
                        break t;
                      if (ut[(l = c + -1 | 0) + p | 0] == 10)
                        break;
                    }
                    if (ht[r[T + 36 >> 2]](T, p, c) >>> 0 < c >>> 0)
                      break r;
                    f = f - c | 0, p = p + c | 0, _ = r[T + 20 >> 2];
                  }
                Ir(_, p, f), r[T + 20 >> 2] = r[T + 20 >> 2] + f;
              }
            }(d, E, h);
          }
          function tr(h, d, E, p, f) {
            var T, l, c;
            if (X = c = X - 256 | 0, !(73728 & f | (0 | E) <= (0 | p))) {
              if (Gr(c, d, (T = (f = E - p | 0) >>> 0 < 256) ? f : 256), d = h, l = c, !T) {
                for (E = E - p | 0; Ge(h, c, 256), 255 < (f = f + -256 | 0) >>> 0; )
                  ;
                f = 255 & E;
              }
              Ge(d, l, f);
            }
            X = 256 + c | 0;
          }
          function Ir(h, d, E) {
            var p, f = 0;
            if (8192 <= E >>> 0)
              Il(0 | h, 0 | d, 0 | E);
            else {
              if (p = h + E | 0, 3 & (h ^ d))
                if (p >>> 0 < 4)
                  E = h;
                else if ((f = p - 4 | 0) >>> 0 < h >>> 0)
                  E = h;
                else
                  for (E = h; st[0 | E] = ut[0 | d], st[E + 1 | 0] = ut[d + 1 | 0], st[E + 2 | 0] = ut[d + 2 | 0], st[E + 3 | 0] = ut[d + 3 | 0], d = d + 4 | 0, (E = E + 4 | 0) >>> 0 <= f >>> 0; )
                    ;
              else {
                r:
                  if ((0 | E) < 1)
                    E = h;
                  else if (3 & h)
                    for (E = h; ; ) {
                      if (st[0 | E] = ut[0 | d], d = d + 1 | 0, p >>> 0 <= (E = E + 1 | 0) >>> 0)
                        break r;
                      if (!(3 & E))
                        break;
                    }
                  else
                    E = h;
                if (!((h = -4 & p) >>> 0 < 64 || (f = h + -64 | 0) >>> 0 < E >>> 0))
                  for (; r[E >> 2] = r[d >> 2], r[E + 4 >> 2] = r[d + 4 >> 2], r[E + 8 >> 2] = r[d + 8 >> 2], r[E + 12 >> 2] = r[d + 12 >> 2], r[E + 16 >> 2] = r[d + 16 >> 2], r[E + 20 >> 2] = r[d + 20 >> 2], r[E + 24 >> 2] = r[d + 24 >> 2], r[E + 28 >> 2] = r[d + 28 >> 2], r[E + 32 >> 2] = r[d + 32 >> 2], r[E + 36 >> 2] = r[d + 36 >> 2], r[E + 40 >> 2] = r[d + 40 >> 2], r[E + 44 >> 2] = r[d + 44 >> 2], r[E + 48 >> 2] = r[d + 48 >> 2], r[E + 52 >> 2] = r[d + 52 >> 2], r[E + 56 >> 2] = r[d + 56 >> 2], r[E + 60 >> 2] = r[d + 60 >> 2], d = d - -64 | 0, (E = E - -64 | 0) >>> 0 <= f >>> 0; )
                    ;
                if (!(h >>> 0 <= E >>> 0))
                  for (; r[E >> 2] = r[d >> 2], d = d + 4 | 0, (E = E + 4 | 0) >>> 0 < h >>> 0; )
                    ;
              }
              if (E >>> 0 < p >>> 0)
                for (; st[0 | E] = ut[0 | d], d = d + 1 | 0, (0 | p) != (0 | (E = E + 1 | 0)); )
                  ;
            }
          }
          function si(h) {
            var d, E;
            return b(
              (d = h * h) * d * (E = d * h) * (2718311493989822e-21 * d - 19839334836096632e-20) + (E * (0.008333329385889463 * d - 0.16666666641626524) + h)
            );
          }
          function Pr(h) {
            var d;
            return b(
              -0.499999997251031 * (h *= h) + 1 + 0.04166662332373906 * (d = h * h) + h * d * (2439044879627741e-20 * h - 0.001388676377460993)
            );
          }
          function Gr(h, d, E) {
            var p, f, T, l;
            if (E && (st[(p = h + E | 0) - 1 | 0] = d, st[0 | h] = d, !(E >>> 0 < 3 || (st[p - 2 | 0] = d, st[h + 1 | 0] = d, st[p - 3 | 0] = d, st[h + 2 | 0] = d, E >>> 0 < 7) || (st[p - 4 | 0] = d, st[h + 3 | 0] = d, E >>> 0 < 9) || (f = (p = 0 - h & 3) + h | 0, d = j(255 & d, 16843009), r[f >> 2] = d, r[(p = (E = E - p & -4) + f | 0) - 4 >> 2] = d, E >>> 0 < 9) || (r[8 + f >> 2] = d, r[4 + f >> 2] = d, r[p - 8 >> 2] = d, r[p - 12 >> 2] = d, E >>> 0 < 25) || (r[24 + f >> 2] = d, r[20 + f >> 2] = d, r[16 + f >> 2] = d, r[12 + f >> 2] = d, r[p - 16 >> 2] = d, r[p - 20 >> 2] = d, r[p - 24 >> 2] = d, r[p - 28 >> 2] = d, (E = E - (l = 4 & f | 24) | 0) >>> 0 < 32))))
              for (T = p = d, d = f + l | 0; r[d + 24 >> 2] = T, r[d + 28 >> 2] = p, r[d + 16 >> 2] = T, r[d + 20 >> 2] = p, r[d + 8 >> 2] = T, r[d + 12 >> 2] = p, r[d >> 2] = T, r[d + 4 >> 2] = p, d = d + 32 | 0, 31 < (E = E + -32 | 0) >>> 0; )
                ;
            return h;
          }
          function oi(h, d) {
            var E;
            if (h >>> 0 < (d = (h + d | 0) - 1 | 0) >>> 0)
              for (; E = ut[0 | h], st[0 | h] = ut[0 | d], st[0 | d] = E, (h = h + 1 | 0) >>> 0 < (d = d + -1 | 0) >>> 0; )
                ;
          }
          function Fi(h) {
            var d, E = ql();
            return (h = (d = r[2216]) + h | 0) >>> 0 <= E << 16 >>> 0 || Pl(0 | h) ? (r[2216] = h, d) : (r[2086] = 48, -1);
          }
          function da(h, d, E, p, f, T, l) {
            var c, _, v, y, S, I, P, M, R, N, F = 0, B = b(0), U = b(0), V = b(0);
            if (b(0), b(0), b(0), b(0), X = N = X - 16 | 0, 1 <= (0 | h))
              for (I = j(h, 12) + d | 0; ; ) {
                if (1 <= (0 | (_ = r[d + 4 >> 2])))
                  for (P = (h = r[d + 8 >> 2]) + j(_, 48) | 0, _ = (c = r[d >> 2] << 4) + l | 0, v = (8 | c) + l | 0, c = (4 | c) + l | 0; (F = r[h + 8 >> 2]) && ((M = F + -1 | 0) >>> 0 <= 1 ? (R = (r[h + 4 >> 2] << 2) + E | 0, F = r[R + (r[h + 12 >> 2] << 2) >> 2] << 2, B = $[F + T >> 2], S = $[f + F >> 2], U = $[p + F >> 2], M - 1 ? (V = U, U = $[h + 20 >> 2], $[_ >> 2] = $[_ >> 2] + b($[h + 44 >> 2] * b(V * U)), $[c >> 2] = $[c >> 2] + b(b(S * U) * $[h + 44 >> 2]), $[v >> 2] = $[v >> 2] + b(b(B * U) * $[h + 44 >> 2])) : (F = r[(r[h + 16 >> 2] << 2) + R >> 2] << 2, M = $[F + T >> 2], R = $[f + F >> 2], V = U, U = $[h + 20 >> 2], y = $[h + 24 >> 2], $[_ >> 2] = $[_ >> 2] + b(
                    $[h + 44 >> 2] * b(b(V * U) + b($[p + F >> 2] * y))
                  ), $[c >> 2] = $[c >> 2] + b(
                    b(b(S * U) + b(R * y)) * $[h + 44 >> 2]
                  ), $[v >> 2] = $[v >> 2] + b(
                    b(b(B * U) + b(M * y)) * $[h + 44 >> 2]
                  ))) : (r[N >> 2] = F, vt(4, 1024, N))), (h = h + 48 | 0) >>> 0 < P >>> 0; )
                    ;
                if (h = (r[d >> 2] << 4) + l | 0, B = $[h >> 2], $[h >> 2] = B < b(0) ? b(0) : b(Ue(B, b(1))), B = $[h + 4 >> 2], $[h + 4 >> 2] = B < b(0) ? b(0) : b(Ue(B, b(1))), B = $[h + 8 >> 2], $[h + 8 >> 2] = B < b(0) ? b(0) : b(Ue(B, b(1))), !((d = d + 12 | 0) >>> 0 < I >>> 0))
                  break;
              }
            X = 16 + N | 0;
          }
          function pa(h, d, E) {
            var p, f, T = 0;
            if ((0 | d) == 1 & h >>> 0 < 0 | d >>> 0 < 1)
              T = h;
            else
              for (; p = Ql(T = Jl(h, d, 10), f = Ur, 10), st[0 | (E = E + -1 | 0)] = h - p | 48, p = (0 | d) == 9 & 4294967295 < h >>> 0 | 9 < d >>> 0, h = T, d = f, p; )
                ;
            if (T)
              for (; st[0 | (E = E + -1 | 0)] = T - j(h = (T >>> 0) / 10 | 0, 10) | 48, d = 9 < T >>> 0, T = h, d; )
                ;
            return E;
          }
          function Ka(h) {
            return h + -48 >>> 0 < 10;
          }
          function Wa(h) {
            var d;
            return (d = zl(h, 64)) ? d - h | 0 : 64;
          }
          function Vn(h, d) {
            var E = 0;
            return 1024 <= (0 | d) ? (h *= 898846567431158e293, d = (0 | (E = d + -1023 | 0)) < 1024 ? E : (h *= 898846567431158e293, ((0 | d) < 3069 ? d : 3069) + -2046 | 0)) : -1023 < (0 | d) || (h *= 22250738585072014e-324, d = -1023 < (0 | (E = d + 1022 | 0)) ? E : (h *= 22250738585072014e-324, (-3066 < (0 | d) ? d : -3066) + 2044 | 0)), Pt(0, 0), Pt(1, d + 1023 << 20), h * +kr();
          }
          function Yn(h, d) {
            var E = 0, p = h, f = d >>> 0 <= 31 ? (E = r[h + 4 >> 2], r[h >> 2]) : (E = r[h >> 2], r[h + 4 >> 2] = E, d = d + -32 | (r[h >> 2] = 0), 0);
            r[p >> 2] = f << d, r[h + 4 >> 2] = E << d | f >>> 32 - d;
          }
          function zn(h, d, E, p, f) {
            var T, l = 0, c = 0, _ = 0;
            X = T = X - 240 | 0, l = r[d >> 2], r[232 + T >> 2] = l, d = r[d + 4 >> 2], r[T >> 2] = h, c = 1;
            r: {
              t: {
                e: {
                  if (((r[236 + T >> 2] = d) || (0 | l) != 1) && (l = h - r[(E << 2) + f >> 2] | 0, !((0 | ht[5](l, h)) < 1))) {
                    for (_ = !p; ; ) {
                      i: {
                        if (d = l, !(!_ | (0 | E) < 2) && (p = r[((E << 2) + f | 0) - 8 >> 2], -1 < (0 | ht[5](l = h + -4 | 0, d)) || -1 < (0 | ht[5](l - p | 0, d))))
                          break i;
                        if (r[(c << 2) + T >> 2] = d, c = c + 1 | 0, Kn(232 + T | 0, h = jl(232 + T | 0)), E = h + E | 0, !r[236 + T >> 2] && r[232 + T >> 2] == 1)
                          break t;
                        if (_ = 1, l = (h = d) - r[(E << 2) + f >> 2] | (p = 0), 0 < (0 | ht[5](l, r[T >> 2])))
                          continue;
                        break e;
                      }
                      break;
                    }
                    d = h;
                    break t;
                  }
                  d = h;
                }
                if (p)
                  break r;
              }
              Wl(T, c), go(d, E, f);
            }
            X = 240 + T | 0;
          }
          function Kn(h, d) {
            var E = 0, p = h, f = d >>> 0 <= 31 ? (E = r[h >> 2], r[h + 4 >> 2]) : (E = r[h + 4 >> 2], r[h + 4 >> 2] = 0, r[h >> 2] = E, d = d + -32 | 0, 0);
            r[p + 4 >> 2] = f >>> d, r[h >> 2] = f << 32 - d | E >>> d;
          }
          function fo(h, d) {
            var E = ut[h + 4 | 0];
            r[d >> 2] = r[h + 64 >> 2] + h, r[d + 4 >> 2] = r[h + 68 >> 2] + h, r[d + 8 >> 2] = r[h + 72 >> 2] + h, r[d + 12 >> 2] = r[h + 76 >> 2] + h, r[d + 16 >> 2] = r[h + 80 >> 2] + h, r[d + 20 >> 2] = r[h + 84 >> 2] + h, r[d + 24 >> 2] = r[h + 88 >> 2] + h, r[d + 28 >> 2] = r[h + 92 >> 2] + h, r[d + 32 >> 2] = r[h + 96 >> 2] + h, r[d + 36 >> 2] = r[h + 100 >> 2] + h, r[d + 40 >> 2] = r[h + 104 >> 2] + h, r[d + 44 >> 2] = r[h + 108 >> 2] + h, r[d + 48 >> 2] = r[h + 112 >> 2] + h, r[d + 52 >> 2] = r[h + 116 >> 2] + h, r[d + 56 >> 2] = r[h + 120 >> 2] + h, r[d + 60 >> 2] = r[h + 124 >> 2] + h, r[d - -64 >> 2] = r[h + 128 >> 2] + h, r[d + 68 >> 2] = r[h + 132 >> 2] + h, r[d + 72 >> 2] = r[h + 136 >> 2] + h, r[d + 76 >> 2] = r[h + 140 >> 2] + h, r[d + 80 >> 2] = r[h + 144 >> 2] + h, r[d + 84 >> 2] = r[h + 148 >> 2] + h, r[d + 92 >> 2] = r[h + 152 >> 2] + h, r[d + 96 >> 2] = r[h + 156 >> 2] + h, r[d + 100 >> 2] = r[h + 160 >> 2] + h, r[d + 108 >> 2] = r[h + 164 >> 2] + h, r[d + 112 >> 2] = r[h + 168 >> 2] + h, r[d + 116 >> 2] = r[h + 172 >> 2] + h, r[d + 124 >> 2] = r[h + 176 >> 2] + h, r[d + 128 >> 2] = r[h + 180 >> 2] + h, r[d + 132 >> 2] = r[h + 184 >> 2] + h, r[d + 136 >> 2] = r[h + 188 >> 2] + h, r[d + 140 >> 2] = r[h + 192 >> 2] + h, r[d + 144 >> 2] = r[h + 196 >> 2] + h, r[d + 148 >> 2] = r[h + 200 >> 2] + h, r[d + 152 >> 2] = r[h + 204 >> 2] + h, r[d + 156 >> 2] = r[h + 208 >> 2] + h, r[d + 164 >> 2] = r[h + 212 >> 2] + h, r[d + 168 >> 2] = r[h + 216 >> 2] + h, r[d + 172 >> 2] = r[h + 220 >> 2] + h, r[d + 176 >> 2] = r[h + 224 >> 2] + h, r[d + 180 >> 2] = r[h + 228 >> 2] + h, r[d + 184 >> 2] = r[h + 232 >> 2] + h, r[d + 188 >> 2] = r[h + 236 >> 2] + h, r[d + 192 >> 2] = r[h + 240 >> 2] + h, r[d + 196 >> 2] = r[h + 244 >> 2] + h, r[d + 200 >> 2] = r[h + 248 >> 2] + h, r[d + 204 >> 2] = r[h + 252 >> 2] + h, r[d + 208 >> 2] = r[h + 256 >> 2] + h, r[d + 212 >> 2] = r[h + 260 >> 2] + h, r[d + 216 >> 2] = r[h + 264 >> 2] + h, r[d + 220 >> 2] = r[h + 268 >> 2] + h, r[d + 224 >> 2] = r[h + 272 >> 2] + h, r[d + 228 >> 2] = r[h + 276 >> 2] + h, r[d + 232 >> 2] = r[h + 280 >> 2] + h, r[d + 236 >> 2] = r[h + 284 >> 2] + h, r[d + 244 >> 2] = r[h + 288 >> 2] + h, r[d + 248 >> 2] = r[h + 292 >> 2] + h, r[d + 272 >> 2] = r[h + 296 >> 2] + h, r[d + 276 >> 2] = r[h + 300 >> 2] + h, r[d + 280 >> 2] = r[h + 304 >> 2] + h, r[d + 292 >> 2] = r[h + 308 >> 2] + h, r[d + 296 >> 2] = r[h + 312 >> 2] + h, r[d + 300 >> 2] = r[h + 316 >> 2] + h, r[d + 304 >> 2] = r[h + 320 >> 2] + h, r[d + 308 >> 2] = r[h + 324 >> 2] + h, r[d + 312 >> 2] = r[h + 328 >> 2] + h, r[d + 316 >> 2] = r[h + 332 >> 2] + h, r[d + 328 >> 2] = r[h + 336 >> 2] + h, r[d + 332 >> 2] = r[h + 340 >> 2] + h, r[d + 336 >> 2] = r[h + 344 >> 2] + h, r[d + 348 >> 2] = r[h + 348 >> 2] + h, r[d + 360 >> 2] = r[h + 352 >> 2] + h, r[d + 364 >> 2] = r[h + 356 >> 2] + h, r[d + 368 >> 2] = r[h + 360 >> 2] + h, r[d + 352 >> 2] = r[h + 364 >> 2] + h, r[d + 356 >> 2] = r[h + 368 >> 2] + h, r[d + 488 >> 2] = r[h + 372 >> 2] + h, r[d + 492 >> 2] = r[h + 376 >> 2] + h, r[d + 496 >> 2] = r[h + 380 >> 2] + h, r[d + 500 >> 2] = r[h + 384 >> 2] + h, r[d + 504 >> 2] = r[h + 388 >> 2] + h, r[d + 508 >> 2] = r[h + 392 >> 2] + h, r[d + 512 >> 2] = r[h + 396 >> 2] + h, r[d + 516 >> 2] = r[h + 400 >> 2] + h, r[d + 520 >> 2] = r[h + 404 >> 2] + h, r[d + 524 >> 2] = r[h + 408 >> 2] + h, r[d + 528 >> 2] = r[h + 412 >> 2] + h, r[d + 532 >> 2] = r[h + 416 >> 2] + h, r[d + 536 >> 2] = r[h + 420 >> 2] + h, r[d + 540 >> 2] = r[h + 424 >> 2] + h, r[d + 544 >> 2] = r[h + 428 >> 2] + h, r[d + 548 >> 2] = r[h + 432 >> 2] + h, r[d + 552 >> 2] = r[h + 436 >> 2] + h, r[d + 556 >> 2] = r[h + 440 >> 2] + h, r[d + 560 >> 2] = r[h + 444 >> 2] + h, r[d + 564 >> 2] = r[h + 448 >> 2] + h, r[d + 568 >> 2] = r[h + 452 >> 2] + h, r[d + 572 >> 2] = r[h + 456 >> 2] + h, r[d + 576 >> 2] = r[h + 460 >> 2] + h, r[d + 580 >> 2] = r[h + 464 >> 2] + h, E >>> 0 < 2 || (r[d + 104 >> 2] = r[h + 468 >> 2] + h, E >>> 0 < 4) || (r[d + 260 >> 2] = r[h + 472 >> 2] + h, r[d + 264 >> 2] = r[h + 476 >> 2] + h, r[d + 268 >> 2] = r[h + 480 >> 2] + h, r[d + 88 >> 2] = r[h + 484 >> 2] + h, r[d + 120 >> 2] = r[h + 488 >> 2] + h, r[d + 160 >> 2] = r[h + 492 >> 2] + h, r[d + 584 >> 2] = r[h + 496 >> 2] + h, r[d + 588 >> 2] = r[h + 500 >> 2] + h, r[d + 592 >> 2] = r[h + 504 >> 2] + h, r[d + 596 >> 2] = r[h + 508 >> 2] + h, r[d + 600 >> 2] = r[h + 512 >> 2] + h, r[d + 604 >> 2] = r[h + 516 >> 2] + h, r[d + 240 >> 2] = r[h + 520 >> 2] + h, r[d + 252 >> 2] = r[h + 524 >> 2] + h, r[d + 256 >> 2] = r[h + 528 >> 2] + h, r[d + 372 >> 2] = r[h + 532 >> 2] + h, r[d + 376 >> 2] = r[h + 536 >> 2] + h, r[d + 380 >> 2] = r[h + 540 >> 2] + h, r[d + 384 >> 2] = r[h + 544 >> 2] + h, r[d + 388 >> 2] = r[h + 548 >> 2] + h, r[d + 392 >> 2] = r[h + 552 >> 2] + h, r[d + 396 >> 2] = r[h + 556 >> 2] + h, r[d + 400 >> 2] = r[h + 560 >> 2] + h, r[d + 416 >> 2] = r[h + 564 >> 2] + h, r[d + 420 >> 2] = r[h + 568 >> 2] + h, r[d + 424 >> 2] = r[h + 572 >> 2] + h, r[d + 440 >> 2] = r[h + 576 >> 2] + h, r[d + 444 >> 2] = r[h + 580 >> 2] + h, r[d + 448 >> 2] = r[h + 584 >> 2] + h, r[d + 464 >> 2] = r[h + 588 >> 2] + h, r[d + 468 >> 2] = r[h + 592 >> 2] + h, r[d + 472 >> 2] = r[h + 596 >> 2] + h, r[d + 476 >> 2] = r[h + 600 >> 2] + h, r[d + 480 >> 2] = r[h + 604 >> 2] + h, r[d + 484 >> 2] = r[h + 608 >> 2] + h, (0 | E) != 4 && (r[d + 284 >> 2] = r[h + 612 >> 2] + h, r[d + 288 >> 2] = r[h + 616 >> 2] + h, r[d + 320 >> 2] = r[h + 620 >> 2] + h, r[d + 324 >> 2] = r[h + 624 >> 2] + h, r[d + 340 >> 2] = r[h + 628 >> 2] + h, r[d + 344 >> 2] = r[h + 632 >> 2] + h, r[d + 404 >> 2] = r[h + 636 >> 2] + h, r[d + 408 >> 2] = r[h + 640 >> 2] + h, r[d + 412 >> 2] = r[h + 644 >> 2] + h, r[d + 428 >> 2] = r[h + 648 >> 2] + h, r[d + 432 >> 2] = r[h + 652 >> 2] + h, r[d + 436 >> 2] = r[h + 656 >> 2] + h, r[d + 452 >> 2] = r[h + 660 >> 2] + h, r[d + 456 >> 2] = r[h + 664 >> 2] + h, r[d + 460 >> 2] = r[h + 668 >> 2] + h));
          }
          function co(h, d, E) {
            var p = 0;
            r: {
              if ((0 | d) == 8)
                d = _o(E);
              else {
                if (p = 28, 3 & d | (0 | function(f) {
                  for (var T = 0, l = 0; l = T, f; )
                    f &= f - 1, T = T + 1 | 0;
                  return l;
                }(d >>> 2)) != 1 || (p = 48, -64 - d >>> 0 < E >>> 0))
                  break r;
                d = function(f, T) {
                  var l, c, _ = 0, v = 0, y = 0;
                  if ((v = f >>> 0 > (_ = 16) ? f : 16) + -1 & v)
                    for (; _ = (f = _) << 1, f >>> 0 < v >>> 0; )
                      ;
                  else
                    f = v;
                  return -64 - f >>> 0 <= T >>> 0 ? (r[2086] = 48, 0) : (_ = _o(
                    12 + ((v = T >>> 0 < 11 ? 16 : T + 11 & -8) + f | 0) | 0
                  )) ? (T = _ + -8 | 0, _ & f + -1 ? (y = (-8 & (c = r[(l = _ + -4 | 0) >> 2])) - (_ = (f = 15 < (_ = ((f + _ | 0) - 1 & 0 - f) - 8 | 0) - T >>> 0 ? _ : f + _ | 0) - T | 0) | 0, 3 & c ? (r[f + 4 >> 2] = y | 1 & r[f + 4 >> 2] | 2, r[4 + (y = f + y | 0) >> 2] = 1 | r[4 + y >> 2], r[l >> 2] = _ | 1 & r[l >> 2] | 2, r[f + 4 >> 2] = 1 | r[f + 4 >> 2], Dl(T, _)) : (T = r[T >> 2], r[f + 4 >> 2] = y, r[f >> 2] = T + _)) : f = T, 3 & (T = r[f + 4 >> 2]) && ((_ = -8 & T) >>> 0 <= v + 16 >>> 0 || (r[f + 4 >> 2] = v | 1 & T | 2, r[(T = f + v | 0) + 4 >> 2] = 3 | (v = _ - v | 0), r[4 + (_ = f + _ | 0) >> 2] = 1 | r[_ + 4 >> 2], Dl(T, v))), f + 8 | 0) : 0;
                }(16 < d >>> 0 ? d : 16, E);
              }
              if (!d)
                return 1;
              r[h >> 2] = d, p = 0;
            }
            return p;
          }
          function po(h) {
            var d, E = 0, p = 0, f = 0, T = 0, l = 0, c = 0, _ = 0;
            r:
              if (h) {
                d = (f = h + -8 | 0) + (h = -8 & (p = r[h + -4 >> 2])) | 0;
                t:
                  if (!(1 & p)) {
                    if (!(3 & p) || (f = f - (p = r[f >> 2]) | 0) >>> 0 < ke[2091])
                      break r;
                    if (h = h + p | 0, r[2092] != (0 | f))
                      if (p >>> 0 <= 255)
                        T = r[f + 8 >> 2], p >>>= 3, (0 | (E = r[f + 12 >> 2])) == (0 | T) ? (_ = r[2087] & or(p), r[2087] = _) : (r[T + 12 >> 2] = E, r[E + 8 >> 2] = T);
                      else {
                        if (c = r[f + 24 >> 2], (0 | f) != (0 | (p = r[f + 12 >> 2])))
                          E = r[f + 8 >> 2], r[E + 12 >> 2] = p, r[p + 8 >> 2] = E;
                        else if (E = (E = r[(T = f + 20 | 0) >> 2]) || r[(T = f + 16 | 0) >> 2]) {
                          for (; l = T, (E = r[(T = (p = E) + 20 | 0) >> 2]) || (T = p + 16 | 0, E = r[p + 16 >> 2]); )
                            ;
                          r[l >> 2] = 0;
                        } else
                          p = 0;
                        if (c) {
                          T = r[f + 28 >> 2];
                          e: {
                            if (r[(E = 8652 + (T << 2) | 0) >> 2] == (0 | f)) {
                              if (r[E >> 2] = p)
                                break e;
                              _ = r[2088] & or(T), r[2088] = _;
                              break t;
                            }
                            if (!(r[c + (r[c + 16 >> 2] == (0 | f) ? 16 : 20) >> 2] = p))
                              break t;
                          }
                          r[p + 24 >> 2] = c, (E = r[f + 16 >> 2]) && (r[p + 16 >> 2] = E, r[E + 24 >> 2] = p), (E = r[f + 20 >> 2]) && (r[p + 20 >> 2] = E, r[E + 24 >> 2] = p);
                        }
                      }
                    else if ((3 & (p = r[4 + d >> 2])) == 3)
                      return r[2089] = h, r[4 + d >> 2] = -2 & p, r[f + 4 >> 2] = 1 | h, r[h + f >> 2] = h;
                  }
                if (!(d >>> 0 <= f >>> 0) && 1 & (p = r[4 + d >> 2])) {
                  t: {
                    if (!(2 & p)) {
                      if (r[2093] == (0 | d)) {
                        if (r[2093] = f, h = r[2090] + h | 0, r[2090] = h, r[f + 4 >> 2] = 1 | h, r[2092] != (0 | f))
                          break r;
                        return r[2089] = 0, r[2092] = 0;
                      }
                      if (r[2092] == (0 | d))
                        return r[2092] = f, h = r[2089] + h | 0, r[2089] = h, r[f + 4 >> 2] = 1 | h, r[h + f >> 2] = h;
                      h = (-8 & p) + h | 0;
                      e:
                        if (p >>> 0 <= 255)
                          p >>>= 3, (0 | (E = r[8 + d >> 2])) == (0 | (T = r[12 + d >> 2])) ? (_ = r[2087] & or(p), r[2087] = _) : (r[E + 12 >> 2] = T, r[T + 8 >> 2] = E);
                        else {
                          if (c = r[24 + d >> 2], (0 | d) != (0 | (p = r[12 + d >> 2])))
                            E = r[8 + d >> 2], r[E + 12 >> 2] = p, r[p + 8 >> 2] = E;
                          else if (E = (E = r[(T = 20 + d | 0) >> 2]) || r[(T = 16 + d | 0) >> 2]) {
                            for (; l = T, (E = r[(T = (p = E) + 20 | 0) >> 2]) || (T = p + 16 | 0, E = r[p + 16 >> 2]); )
                              ;
                            r[l >> 2] = 0;
                          } else
                            p = 0;
                          if (c) {
                            T = r[28 + d >> 2];
                            i: {
                              if (r[(E = 8652 + (T << 2) | 0) >> 2] == (0 | d)) {
                                if (r[E >> 2] = p)
                                  break i;
                                _ = r[2088] & or(T), r[2088] = _;
                                break e;
                              }
                              if (!(r[c + (r[c + 16 >> 2] == (0 | d) ? 16 : 20) >> 2] = p))
                                break e;
                            }
                            r[p + 24 >> 2] = c, (E = r[16 + d >> 2]) && (r[p + 16 >> 2] = E, r[E + 24 >> 2] = p), (E = r[20 + d >> 2]) && (r[p + 20 >> 2] = E, r[E + 24 >> 2] = p);
                          }
                        }
                      if (r[f + 4 >> 2] = 1 | h, r[h + f >> 2] = h, r[2092] != (0 | f))
                        break t;
                      return r[2089] = h;
                    }
                    r[4 + d >> 2] = -2 & p, r[f + 4 >> 2] = 1 | h, r[h + f >> 2] = h;
                  }
                  if (h >>> 0 <= 255)
                    return p = 8388 + ((h >>>= 3) << 3) | 0, h = (E = r[2087]) & (h = 1 << h) ? r[p + 8 >> 2] : (r[2087] = h | E, p), r[p + 8 >> 2] = f, r[h + 12 >> 2] = f, r[f + 12 >> 2] = p, r[f + 8 >> 2] = h;
                  r[f + 16 >> 2] = 0, E = r[f + 20 >> 2] = 0, (T = h >>> 8) && (E = 31, 16777215 < h >>> 0 || (E = T, E = 28 + ((E = ((E = (E <<= T = T + 1048320 >>> 16 & 8) << (c = E + 520192 >>> 16 & 4)) << (l = E + 245760 >>> 16 & 2) >>> 15) - (l | T | c) | 0) << 1 | h >>> E + 21 & 1) | 0)), l = 8652 + ((r[(p = f) + 28 >> 2] = E) << 2) | 0;
                  t:
                    if ((T = r[2088]) & (p = 1 << E)) {
                      T = h << ((0 | E) == 31 ? 0 : 25 - (E >>> 1) | 0), p = r[l >> 2];
                      e: {
                        for (; ; ) {
                          if ((-8 & r[(E = p) + 4 >> 2]) == (0 | h))
                            break e;
                          if (p = T >>> 29, T <<= 1, !(p = r[16 + (l = E + (4 & p) | 0) >> 2]))
                            break;
                        }
                        r[l + 16 >> 2] = f, r[f + 12 >> 2] = f, r[f + 24 >> 2] = E, r[f + 8 >> 2] = f;
                        break t;
                      }
                      h = r[E + 8 >> 2], r[h + 12 >> 2] = f, r[E + 8 >> 2] = f, r[f + 24 >> 2] = 0, r[f + 12 >> 2] = E, r[f + 8 >> 2] = h;
                    } else
                      r[2088] = p | T, r[l >> 2] = f, r[f + 12 >> 2] = f, r[f + 24 >> 2] = l, r[f + 8 >> 2] = f;
                  if (h = r[2095] + -1 | 0, !(r[2095] = h)) {
                    for (f = 8804; f = (h = r[f >> 2]) + 8 | 0, h; )
                      ;
                    r[2095] = -1;
                  }
                }
              }
          }
          function _o(h) {
            var d, E = 0, p = 0, f = 0, T = 0, l = 0, c = 0, _ = 0, v = 0, y = 0, S = 0, I = 0;
            X = d = X - 16 | 0;
            r: {
              t: {
                e: {
                  i: {
                    a: {
                      s: {
                        n: {
                          f: {
                            c: {
                              u: {
                                o: {
                                  if (h >>> 0 <= 244) {
                                    if (3 & (E = (l = r[2087]) >>> (h = (c = h >>> 0 < 11 ? 16 : h + 11 & -8) >>> 3))) {
                                      h = (E = r[8396 + (T = (p = h + (1 & (-1 ^ E)) | 0) << 3) >> 2]) + 8 | 0, (0 | (f = r[E + 8 >> 2])) == (0 | (T = T + 8388 | 0)) ? (I = or(p) & l, r[2087] = I) : (r[f + 12 >> 2] = T, r[T + 8 >> 2] = f), r[E + 4 >> 2] = 3 | (p <<= 3), r[4 + (E = E + p | 0) >> 2] = 1 | r[E + 4 >> 2];
                                      break r;
                                    }
                                    if (c >>> 0 <= (v = r[2089]) >>> 0)
                                      break o;
                                    if (E) {
                                      p = E = (h = (0 - (h = (0 - (p = 2 << h) | p) & E << h) & h) - 1 | 0) >>> 12 & 16, E = r[8396 + (f = (p = ((p = (p |= E = (h >>>= E) >>> 5 & 8) | (E = (h >>>= E) >>> 2 & 4) | (E = (h >>>= E) >>> 1 & 2)) | (E = (h >>>= E) >>> 1 & 1)) + (h >>> E) | 0) << 3) >> 2], (0 | (h = r[E + 8 >> 2])) == (0 | (f = f + 8388 | 0)) ? (l = or(p) & l, r[2087] = l) : (r[h + 12 >> 2] = f, r[f + 8 >> 2] = h), h = E + 8 | 0, r[E + 4 >> 2] = 3 | c, r[4 + (_ = E + c | 0) >> 2] = 1 | (T = (p <<= 3) - c | 0), r[E + p >> 2] = T, v && (E = 8388 + ((p = v >>> 3) << 3) | 0, f = r[2092], p = (p = 1 << p) & l ? r[E + 8 >> 2] : (r[2087] = p | l, E), r[E + 8 >> 2] = f, r[p + 12 >> 2] = f, r[f + 12 >> 2] = E, r[f + 8 >> 2] = p), r[2092] = _, r[2089] = T;
                                      break r;
                                    }
                                    if (!(S = r[2088]))
                                      break o;
                                    for (p = E = (h = (S & 0 - S) - 1 | 0) >>> 12 & 16, E = r[8652 + (((p = (p |= E = (h >>>= E) >>> 5 & 8) | (E = (h >>>= E) >>> 2 & 4) | (E = (h >>>= E) >>> 1 & 2)) | (E = (h >>>= E) >>> 1 & 1)) + (h >>> E) << 2) >> 2], f = (-8 & r[E + 4 >> 2]) - c | 0, p = E; h = (h = r[p + 16 >> 2]) || r[p + 20 >> 2]; )
                                      f = (p = (T = (-8 & r[h + 4 >> 2]) - c | 0) >>> 0 < f >>> 0) ? T : f, E = p ? h : E, p = h;
                                    if (y = r[E + 24 >> 2], (0 | (T = r[E + 12 >> 2])) != (0 | E)) {
                                      h = r[E + 8 >> 2], r[h + 12 >> 2] = T, r[T + 8 >> 2] = h;
                                      break t;
                                    }
                                    if (!(h = r[(p = E + 20 | 0) >> 2])) {
                                      if (!(h = r[E + 16 >> 2]))
                                        break u;
                                      p = E + 16 | 0;
                                    }
                                    for (; _ = p, (h = r[(p = (T = h) + 20 | 0) >> 2]) || (p = T + 16 | 0, h = r[T + 16 >> 2]); )
                                      ;
                                    r[_ >> 2] = 0;
                                    break t;
                                  }
                                  if (c = -1, !(4294967231 < h >>> 0) && (c = -8 & (E = h + 11 | 0), v = r[2088])) {
                                    p = 0 - c | 0, l = 0, (E >>>= 8) && (l = 31, 16777215 < c >>> 0 || (l = 28 + ((h = ((l = (E <<= f = E + 1048320 >>> 16 & 8) << (h = E + 520192 >>> 16 & 4)) << (E = l + 245760 >>> 16 & 2) >>> 15) - (E | h | f) | 0) << 1 | c >>> h + 21 & 1) | 0));
                                    d: {
                                      p: {
                                        if (f = r[8652 + (l << 2) >> 2])
                                          for (E = c << ((0 | l) == 31 ? 0 : 25 - (l >>> 1) | 0), h = 0; ; ) {
                                            if (!(p >>> 0 <= (_ = (-8 & r[f + 4 >> 2]) - c | 0) >>> 0 || (T = f, p = _))) {
                                              p = 0, h = f;
                                              break p;
                                            }
                                            if (_ = r[f + 20 >> 2], f = r[16 + ((E >>> 29 & 4) + f | 0) >> 2], h = _ && (0 | _) != (0 | f) ? _ : h, E <<= (0 | f) != 0, !f)
                                              break;
                                          }
                                        else
                                          h = 0;
                                        if (!(h | T)) {
                                          if (!(h = (0 - (h = 2 << l) | h) & v))
                                            break o;
                                          f = E = (h = (h & 0 - h) - 1 | 0) >>> 12 & 16, h = r[8652 + (((f = (f |= E = (h >>>= E) >>> 5 & 8) | (E = (h >>>= E) >>> 2 & 4) | (E = (h >>>= E) >>> 1 & 2)) | (E = (h >>>= E) >>> 1 & 1)) + (h >>> E) << 2) >> 2];
                                        }
                                        if (!h)
                                          break d;
                                      }
                                      for (; p = (E = (f = (-8 & r[h + 4 >> 2]) - c | 0) >>> 0 < p >>> 0) ? f : p, T = E ? h : T, h = (E = r[h + 16 >> 2]) || r[h + 20 >> 2]; )
                                        ;
                                    }
                                    if (!(!T | p >>> 0 >= r[2089] - c >>> 0)) {
                                      if (_ = r[T + 24 >> 2], (0 | T) != (0 | (E = r[T + 12 >> 2]))) {
                                        h = r[T + 8 >> 2], r[h + 12 >> 2] = E, r[E + 8 >> 2] = h;
                                        break e;
                                      }
                                      if (!(h = r[(f = T + 20 | 0) >> 2])) {
                                        if (!(h = r[T + 16 >> 2]))
                                          break c;
                                        f = T + 16 | 0;
                                      }
                                      for (; l = f, (h = r[(f = (E = h) + 20 | 0) >> 2]) || (f = E + 16 | 0, h = r[E + 16 >> 2]); )
                                        ;
                                      r[l >> 2] = 0;
                                      break e;
                                    }
                                  }
                                }
                                if (c >>> 0 <= (E = r[2089]) >>> 0) {
                                  h = r[2092], 16 <= (p = E - c | 0) >>> 0 ? (r[2089] = p, r[2092] = f = h + c | 0, r[f + 4 >> 2] = 1 | p, r[h + E >> 2] = p, r[h + 4 >> 2] = 3 | c) : (r[2092] = 0, r[2089] = 0, r[h + 4 >> 2] = 3 | E, r[4 + (E = h + E | 0) >> 2] = 1 | r[E + 4 >> 2]), h = h + 8 | 0;
                                  break r;
                                }
                                if (c >>> 0 < (f = r[2090]) >>> 0) {
                                  r[2090] = E = f - c | 0, h = r[2093], r[2093] = p = h + c | 0, r[p + 4 >> 2] = 1 | E, r[h + 4 >> 2] = 3 | c, h = h + 8 | 0;
                                  break r;
                                }
                                if ((p = (l = (p = T = c + 47 | (h = 0)) + (E = r[2205] ? r[2207] : (r[2208] = -1, r[2209] = -1, r[2206] = 4096, r[2207] = 4096, r[2205] = 12 + d & -16 ^ 1431655768, r[2210] = 0, r[2198] = 0, 4096)) | 0) & (_ = 0 - E | 0)) >>> 0 <= c >>> 0 || (E = r[2197]) && (y = (v = r[2195]) + p | 0) >>> 0 <= v >>> 0 | E >>> 0 < y >>> 0)
                                  break r;
                                if (4 & ut[8792])
                                  break s;
                                o: {
                                  d: {
                                    if (E = r[2093])
                                      for (h = 8796; ; ) {
                                        if ((v = r[h >> 2]) + r[h + 4 >> 2] >>> 0 > E >>> 0 && v >>> 0 <= E >>> 0)
                                          break d;
                                        if (!(h = r[h + 8 >> 2]))
                                          break;
                                      }
                                    if ((0 | (E = Fi(0))) == -1 || (l = p, (l = (f = (h = r[2206]) + -1 | 0) & E ? (p - E | 0) + (E + f & 0 - h) | 0 : l) >>> 0 <= c >>> 0 | 2147483646 < l >>> 0) || (h = r[2197]) && (_ = (f = r[2195]) + l | 0) >>> 0 <= f >>> 0 | h >>> 0 < _ >>> 0)
                                      break n;
                                    if ((0 | E) != (0 | (h = Fi(l))))
                                      break o;
                                    break a;
                                  }
                                  if (2147483646 < (l = _ & l - f) >>> 0)
                                    break n;
                                  if ((0 | (E = Fi(l))) == (r[h >> 2] + r[h + 4 >> 2] | 0))
                                    break f;
                                  h = E;
                                }
                                if (!(c + 48 >>> 0 <= l >>> 0 | 2147483646 < l >>> 0 | (0 | (E = h)) == -1)) {
                                  if (2147483646 < (h = (h = r[2207]) + (T - l | 0) & 0 - h) >>> 0)
                                    break a;
                                  if ((0 | Fi(h)) != -1) {
                                    l = h + l | 0;
                                    break a;
                                  }
                                  Fi(0 - l | 0);
                                  break n;
                                }
                                if ((0 | E) != -1)
                                  break a;
                                break n;
                              }
                              T = 0;
                              break t;
                            }
                            E = 0;
                            break e;
                          }
                          if ((0 | E) != -1)
                            break a;
                        }
                        r[2198] = 4 | r[2198];
                      }
                      if (2147483646 < p >>> 0 || (E = Fi(p), (h = Fi(0)) >>> 0 <= E >>> 0 | (0 | E) == -1 | (0 | h) == -1) || (l = h - E | 0) >>> 0 <= c + 40 >>> 0)
                        break i;
                    }
                    h = r[2195] + l | 0, (r[2195] = h) >>> 0 > ke[2196] && (r[2196] = h);
                    a: {
                      s: {
                        n: {
                          if (p = r[2093]) {
                            for (h = 8796; ; ) {
                              if (((f = r[h >> 2]) + (T = r[h + 4 >> 2]) | 0) == (0 | E))
                                break n;
                              if (!(h = r[h + 8 >> 2]))
                                break;
                            }
                            break s;
                          }
                          for ((h = r[2091]) >>> 0 <= E >>> 0 && h || (r[2091] = E), h = 0, r[2200] = l, r[2199] = E, r[2095] = -1, r[2096] = r[2205], r[2202] = 0; r[8396 + (p = h << 3) >> 2] = f = p + 8388 | 0, r[p + 8400 >> 2] = f, (0 | (h = h + 1 | 0)) != 32; )
                            ;
                          r[2090] = f = (h = l + -40 | 0) - (p = E + 8 & 7 ? -8 - E & 7 : 0) | 0, r[2093] = p = E + p | 0, r[p + 4 >> 2] = 1 | f, r[4 + (h + E | 0) >> 2] = 40, r[2094] = r[2209];
                          break a;
                        }
                        if (!(8 & ut[h + 12 | 0] | E >>> 0 <= p >>> 0 | p >>> 0 < f >>> 0)) {
                          r[h + 4 >> 2] = T + l, r[2093] = E = (h = p + 8 & 7 ? -8 - p & 7 : 0) + p | 0, f = r[2090] + l | 0, r[2090] = h = f - h | 0, r[E + 4 >> 2] = 1 | h, r[4 + (p + f | 0) >> 2] = 40, r[2094] = r[2209];
                          break a;
                        }
                      }
                      E >>> 0 < (T = r[2091]) >>> 0 && (r[2091] = E, T = 0), f = E + l | 0, h = 8796;
                      s: {
                        n: {
                          f: {
                            c: {
                              u: {
                                o: {
                                  for (; (0 | f) != r[h >> 2]; )
                                    if (!(h = r[h + 8 >> 2]))
                                      break o;
                                  if (!(8 & ut[h + 12 | 0]))
                                    break u;
                                }
                                for (h = 8796; ; ) {
                                  if ((f = r[h >> 2]) >>> 0 <= p >>> 0 && p >>> 0 < (T = f + r[h + 4 >> 2] | 0) >>> 0)
                                    break c;
                                  h = r[h + 8 >> 2];
                                }
                              }
                              if (r[h >> 2] = E, r[h + 4 >> 2] = r[h + 4 >> 2] + l, r[4 + (y = (E + 8 & 7 ? -8 - E & 7 : 0) + E | 0) >> 2] = 3 | c, h = ((E = f + (f + 8 & 7 ? -8 - f & 7 : 0) | 0) - y | 0) - c | 0, _ = c + y | 0, (0 | E) == (0 | p)) {
                                r[2093] = _, h = r[2090] + h | 0, r[2090] = h, r[_ + 4 >> 2] = 1 | h;
                                break n;
                              }
                              if (r[2092] == (0 | E)) {
                                r[2092] = _, h = r[2089] + h | 0, r[2089] = h, r[_ + 4 >> 2] = 1 | h, r[h + _ >> 2] = h;
                                break n;
                              }
                              if ((3 & (p = r[E + 4 >> 2])) == 1) {
                                S = -8 & p;
                                u:
                                  if (p >>> 0 <= 255)
                                    T = p >>> 3, p = r[E + 8 >> 2], (0 | (f = r[E + 12 >> 2])) == (0 | p) ? (I = r[2087] & or(T), r[2087] = I) : (r[p + 12 >> 2] = f, r[f + 8 >> 2] = p);
                                  else {
                                    if (v = r[E + 24 >> 2], (0 | (l = r[E + 12 >> 2])) != (0 | E))
                                      p = r[E + 8 >> 2], r[p + 12 >> 2] = l, r[l + 8 >> 2] = p;
                                    else if (c = (c = r[(f = E + 20 | 0) >> 2]) || r[(f = E + 16 | 0) >> 2]) {
                                      for (; p = f, (c = r[(f = (l = c) + 20 | 0) >> 2]) || (f = l + 16 | 0, c = r[l + 16 >> 2]); )
                                        ;
                                      r[p >> 2] = 0;
                                    } else
                                      l = 0;
                                    if (v) {
                                      p = r[E + 28 >> 2];
                                      o: {
                                        if (r[(f = 8652 + (p << 2) | 0) >> 2] == (0 | E)) {
                                          if (r[f >> 2] = l)
                                            break o;
                                          I = r[2088] & or(p), r[2088] = I;
                                          break u;
                                        }
                                        if (!(r[v + (r[v + 16 >> 2] == (0 | E) ? 16 : 20) >> 2] = l))
                                          break u;
                                      }
                                      r[l + 24 >> 2] = v, (p = r[E + 16 >> 2]) && (r[l + 16 >> 2] = p, r[p + 24 >> 2] = l), (p = r[E + 20 >> 2]) && (r[l + 20 >> 2] = p, r[p + 24 >> 2] = l);
                                    }
                                  }
                                E = E + S | 0, h = h + S | 0;
                              }
                              if (r[E + 4 >> 2] = -2 & r[E + 4 >> 2], r[_ + 4 >> 2] = 1 | h, (r[h + _ >> 2] = h) >>> 0 <= 255) {
                                h = 8388 + ((E = h >>> 3) << 3) | 0, E = (p = r[2087]) & (E = 1 << E) ? r[h + 8 >> 2] : (r[2087] = E | p, h), r[h + 8 >> 2] = _, r[E + 12 >> 2] = _, r[_ + 12 >> 2] = h, r[_ + 8 >> 2] = E;
                                break n;
                              }
                              if (E = 0, (f = h >>> 8) && (E = 31, 16777215 < h >>> 0 || (E = 28 + ((E = ((c = (f <<= T = f + 1048320 >>> 16 & 8) << (E = f + 520192 >>> 16 & 4)) << (f = c + 245760 >>> 16 & 2) >>> 15) - (f | E | T) | 0) << 1 | h >>> E + 21 & 1) | 0)), r[(p = _) + 28 >> 2] = E, r[_ + 16 >> 2] = 0, p = 8652 + (E << 2) | (r[_ + 20 >> 2] = 0), (f = r[2088]) & (T = 1 << E)) {
                                for (f = h << ((0 | E) == 31 ? 0 : 25 - (E >>> 1) | 0), E = r[p >> 2]; ; ) {
                                  if ((-8 & r[(p = E) + 4 >> 2]) == (0 | h))
                                    break f;
                                  if (E = f >>> 29, f <<= 1, !(E = r[16 + (T = (4 & E) + p | 0) >> 2]))
                                    break;
                                }
                                r[T + 16 >> 2] = _;
                              } else
                                r[2088] = f | T, r[p >> 2] = _;
                              r[_ + 24 >> 2] = p, r[_ + 12 >> 2] = _, r[_ + 8 >> 2] = _;
                              break n;
                            }
                            for (r[2090] = _ = (h = l + -40 | 0) - (f = E + 8 & 7 ? -8 - E & 7 : 0) | 0, r[2093] = f = E + f | 0, r[f + 4 >> 2] = 1 | _, r[4 + (h + E | 0) >> 2] = 40, r[2094] = r[2209], r[(f = (h = (T + (T + -39 & 7 ? 39 - T & 7 : 0) | 0) - 47 | 0) >>> 0 < p + 16 >>> 0 ? p : h) + 4 >> 2] = 27, h = r[2202], r[f + 16 >> 2] = r[2201], r[f + 20 >> 2] = h, h = r[2200], r[f + 8 >> 2] = r[2199], r[f + 12 >> 2] = h, r[2201] = f + 8, r[2200] = l, r[2199] = E, h = f + 24 | (r[2202] = 0); r[h + 4 >> 2] = 7, E = h + 8 | 0, h = h + 4 | 0, E >>> 0 < T >>> 0; )
                              ;
                            if ((0 | p) == (0 | f))
                              break a;
                            if (r[f + 4 >> 2] = -2 & r[f + 4 >> 2], r[p + 4 >> 2] = 1 | (T = f - p | 0), (r[f >> 2] = T) >>> 0 <= 255) {
                              h = 8388 + ((E = T >>> 3) << 3) | 0, E = (f = r[2087]) & (E = 1 << E) ? r[h + 8 >> 2] : (r[2087] = E | f, h), r[h + 8 >> 2] = p, r[E + 12 >> 2] = p, r[p + 12 >> 2] = h, r[p + 8 >> 2] = E;
                              break a;
                            }
                            if (r[p + 16 >> 2] = 0, h = r[p + 20 >> 2] = 0, (f = T >>> 8) && (h = 31, 16777215 < T >>> 0 || (h = 28 + ((h = ((_ = (f <<= l = f + 1048320 >>> 16 & 8) << (h = f + 520192 >>> 16 & 4)) << (f = _ + 245760 >>> 16 & 2) >>> 15) - (f | h | l) | 0) << 1 | T >>> h + 21 & 1) | 0)), E = 8652 + ((r[(E = p) + 28 >> 2] = h) << 2) | 0, (f = r[2088]) & (l = 1 << h)) {
                              for (h = T << ((0 | h) == 31 ? 0 : 25 - (h >>> 1) | 0), E = r[E >> 2]; ; ) {
                                if ((0 | T) == (-8 & r[(f = E) + 4 >> 2]))
                                  break s;
                                if (E = h >>> 29, h <<= 1, !(E = r[16 + (l = f + (4 & E) | 0) >> 2]))
                                  break;
                              }
                              r[l + 16 >> 2] = p, r[p + 24 >> 2] = f;
                            } else
                              r[2088] = f | l, r[E >> 2] = p, r[p + 24 >> 2] = E;
                            r[p + 12 >> 2] = p, r[p + 8 >> 2] = p;
                            break a;
                          }
                          h = r[p + 8 >> 2], r[h + 12 >> 2] = _, r[p + 8 >> 2] = _, r[_ + 24 >> 2] = 0, r[_ + 12 >> 2] = p, r[_ + 8 >> 2] = h;
                        }
                        h = y + 8 | 0;
                        break r;
                      }
                      h = r[f + 8 >> 2], r[h + 12 >> 2] = p, r[f + 8 >> 2] = p, r[p + 24 >> 2] = 0, r[p + 12 >> 2] = f, r[p + 8 >> 2] = h;
                    }
                    if (!((h = r[2090]) >>> 0 <= c >>> 0)) {
                      r[2090] = E = h - c | 0, h = r[2093], r[2093] = p = h + c | 0, r[p + 4 >> 2] = 1 | E, r[h + 4 >> 2] = 3 | c, h = h + 8 | 0;
                      break r;
                    }
                  }
                  r[2086] = 48, h = 0;
                  break r;
                }
                e:
                  if (_) {
                    h = r[T + 28 >> 2];
                    i: {
                      if (r[(f = 8652 + (h << 2) | 0) >> 2] == (0 | T)) {
                        if (r[f >> 2] = E)
                          break i;
                        v = or(h) & v, r[2088] = v;
                        break e;
                      }
                      if (!(r[_ + (r[_ + 16 >> 2] == (0 | T) ? 16 : 20) >> 2] = E))
                        break e;
                    }
                    r[E + 24 >> 2] = _, (h = r[T + 16 >> 2]) && (r[E + 16 >> 2] = h, r[h + 24 >> 2] = E), (h = r[T + 20 >> 2]) && (r[E + 20 >> 2] = h, r[h + 24 >> 2] = E);
                  }
                e:
                  if (p >>> 0 <= 15)
                    r[T + 4 >> 2] = 3 | (h = p + c | 0), r[4 + (h = h + T | 0) >> 2] = 1 | r[h + 4 >> 2];
                  else if (r[T + 4 >> 2] = 3 | c, r[4 + (f = T + c | 0) >> 2] = 1 | p, (r[p + f >> 2] = p) >>> 0 <= 255)
                    h = 8388 + ((E = p >>> 3) << 3) | 0, E = (p = r[2087]) & (E = 1 << E) ? r[h + 8 >> 2] : (r[2087] = E | p, h), r[h + 8 >> 2] = f, r[E + 12 >> 2] = f, r[f + 12 >> 2] = h, r[f + 8 >> 2] = E;
                  else {
                    h = 0, (c = p >>> 8) && (h = 31, 16777215 < p >>> 0 || (h = 28 + ((h = ((_ = (c <<= l = c + 1048320 >>> 16 & 8) << (h = c + 520192 >>> 16 & 4)) << (c = _ + 245760 >>> 16 & 2) >>> 15) - (c | h | l) | 0) << 1 | p >>> h + 21 & 1) | 0)), r[(E = f) + 28 >> 2] = h, r[f + 16 >> 2] = 0, E = 8652 + (h << 2) | (r[f + 20 >> 2] = 0);
                    i: {
                      if ((c = 1 << h) & v) {
                        for (h = p << ((0 | h) == 31 ? 0 : 25 - (h >>> 1) | 0), c = r[E >> 2]; ; ) {
                          if ((-8 & r[(E = c) + 4 >> 2]) == (0 | p))
                            break i;
                          if (c = h >>> 29, h <<= 1, !(c = r[16 + (l = (4 & c) + E | 0) >> 2]))
                            break;
                        }
                        r[l + 16 >> 2] = f;
                      } else
                        r[2088] = c | v, r[E >> 2] = f;
                      r[f + 24 >> 2] = E, r[f + 12 >> 2] = f, r[f + 8 >> 2] = f;
                      break e;
                    }
                    h = r[E + 8 >> 2], r[h + 12 >> 2] = f, r[E + 8 >> 2] = f, r[f + 24 >> 2] = 0, r[f + 12 >> 2] = E, r[f + 8 >> 2] = h;
                  }
                h = T + 8 | 0;
                break r;
              }
              t:
                if (y) {
                  h = r[E + 28 >> 2];
                  e: {
                    if (r[(p = 8652 + (h << 2) | 0) >> 2] == (0 | E)) {
                      if (r[p >> 2] = T)
                        break e;
                      I = or(h) & S, r[2088] = I;
                      break t;
                    }
                    if (!(r[y + (r[y + 16 >> 2] == (0 | E) ? 16 : 20) >> 2] = T))
                      break t;
                  }
                  r[T + 24 >> 2] = y, (h = r[E + 16 >> 2]) && (r[T + 16 >> 2] = h, r[h + 24 >> 2] = T), (h = r[E + 20 >> 2]) && (r[T + 20 >> 2] = h, r[h + 24 >> 2] = T);
                }
              f >>> 0 <= 15 ? (r[E + 4 >> 2] = 3 | (h = f + c | 0), r[4 + (h = h + E | 0) >> 2] = 1 | r[h + 4 >> 2]) : (r[E + 4 >> 2] = 3 | c, r[4 + (c = E + c | 0) >> 2] = 1 | f, r[f + c >> 2] = f, v && (h = 8388 + ((p = v >>> 3) << 3) | 0, T = r[2092], p = (p = 1 << p) & l ? r[h + 8 >> 2] : (r[2087] = p | l, h), r[h + 8 >> 2] = T, r[p + 12 >> 2] = T, r[T + 12 >> 2] = h, r[T + 8 >> 2] = p), r[2092] = c, r[2089] = f), h = E + 8 | 0;
            }
            return X = 16 + d | 0, h;
          }
          function vo(h, d, E, p, f, T, l) {
            var c, _, v, y = 0, S = 0, I = 0, P = 0, M = 0, R = 0, N = 0, F = 0, B = 0, U = 0, V = 0, Z = 0;
            r[76 + (X = v = X - 80 | 0) >> 2] = d, _ = 55 + v | 0, c = 56 + v | 0, d = 0;
            r: {
              t: {
                e:
                  for (; ; ) {
                    (0 | B) < 0 || (B = (2147483647 - B | 0) < (0 | d) ? (r[2086] = 61, -1) : d + B | 0);
                    i: {
                      a: {
                        s: {
                          n: {
                            f: {
                              c: {
                                u: {
                                  o: {
                                    d: {
                                      p: {
                                        m: {
                                          g: {
                                            _: {
                                              if (P = r[76 + v >> 2], I = ut[0 | (d = P)]) {
                                                for (; ; ) {
                                                  y: {
                                                    b: {
                                                      h:
                                                        if (y = 255 & I) {
                                                          if ((0 | y) != 37)
                                                            break b;
                                                          for (I = d; ; ) {
                                                            if (ut[d + 1 | 0] != 37)
                                                              break h;
                                                            if (r[76 + v >> 2] = y = d + 2 | 0, I = I + 1 | 0, S = ut[d + 2 | 0], d = y, (0 | S) != 37)
                                                              break;
                                                          }
                                                        } else
                                                          I = d;
                                                      if (d = I - P | 0, h && Ge(h, P, d), d)
                                                        continue e;
                                                      U = -1, M = !Ka(
                                                        st[r[76 + (y = v) >> 2] + (I = 1) | 0]
                                                      ), d = r[76 + v >> 2], M | ut[d + 2 | 0] != 36 || (U = st[d + 1 | 0] + -48 | 0, V = 1, I = 3), r[y + 76 >> 2] = d = I + d | 0;
                                                      h:
                                                        if (31 < (S = (N = st[(I = 0) | d]) + -32 | 0) >>> 0)
                                                          y = d;
                                                        else if (y = d, 75913 & (S = 1 << S))
                                                          for (; ; ) {
                                                            if (r[76 + v >> 2] = y = d + 1 | 0, I |= S, 31 < (S = (N = st[d + 1 | 0]) + -32 | 0) >>> 0)
                                                              break h;
                                                            if (d = y, !(75913 & (S = 1 << S)))
                                                              break;
                                                          }
                                                      if ((0 | N) == 42) {
                                                        if (M = v, Ka(
                                                          st[y + 1 | 0]
                                                        ) && (d = r[76 + v >> 2], ut[d + 2 | 0] == 36))
                                                          r[((st[d + 1 | 0] << 2) + f | 0) - 192 >> 2] = 10, F = r[((st[d + 1 | 0] << 3) + p | 0) - 384 >> 2], V = 1, d = d + 3 | 0;
                                                        else {
                                                          if (V)
                                                            break t;
                                                          F = V = 0, h && (d = r[E >> 2], r[E >> 2] = d + 4, F = r[d >> 2]), d = r[76 + v >> 2] + 1 | 0;
                                                        }
                                                        r[M + 76 >> 2] = d, -1 < (0 | F) || (F = 0 - F | 0, I |= 8192);
                                                      } else {
                                                        if ((0 | (F = Xl(
                                                          76 + v | 0
                                                        ))) < 0)
                                                          break t;
                                                        d = r[76 + v >> 2];
                                                      }
                                                      if (S = -1, ut[0 | d] == 46)
                                                        if (ut[d + 1 | 0] == 42)
                                                          if (Ka(
                                                            st[d + 2 | 0]
                                                          ) && (d = r[76 + v >> 2], ut[d + 3 | 0] == 36))
                                                            r[((st[d + 2 | 0] << 2) + f | 0) - 192 >> 2] = 10, S = r[((st[d + 2 | 0] << 3) + p | 0) - 384 >> 2], r[76 + v >> 2] = d = d + 4 | 0;
                                                          else {
                                                            if (V)
                                                              break t;
                                                            S = h ? (d = r[E >> 2], r[E >> 2] = d + 4, r[d >> 2]) : 0, d = r[76 + v >> 2] + 2 | 0, r[76 + v >> 2] = d;
                                                          }
                                                        else
                                                          r[76 + v >> 2] = d + 1, S = Xl(
                                                            76 + v | 0
                                                          ), d = r[76 + v >> 2];
                                                      for (y = 0; ; ) {
                                                        if (Z = y, R = -1, 57 < st[0 | d] + -65 >>> 0)
                                                          break r;
                                                        if (r[76 + v >> 2] = N = d + 1 | 0, y = st[0 | d], d = N, !((y = ut[3295 + (y + j(
                                                          Z,
                                                          58
                                                        ) | 0) | 0]) + -1 >>> 0 < 8))
                                                          break;
                                                      }
                                                      if (!y)
                                                        break r;
                                                      h: {
                                                        l: {
                                                          v: {
                                                            if ((0 | y) == 19) {
                                                              if ((0 | U) <= -1)
                                                                break v;
                                                              break r;
                                                            }
                                                            if ((0 | U) < 0)
                                                              break l;
                                                            r[(U << 2) + f >> 2] = y, y = r[4 + (d = (U << 3) + p | 0) >> 2], r[64 + v >> 2] = r[d >> 2], r[68 + v >> 2] = y;
                                                          }
                                                          if (d = 0, h)
                                                            break h;
                                                          continue e;
                                                        }
                                                        if (!h)
                                                          break i;
                                                        Gl(
                                                          64 + v | 0,
                                                          y,
                                                          E,
                                                          l
                                                        ), N = r[76 + v >> 2];
                                                      }
                                                      if (M = -65537 & I, I = 8192 & I ? M : I, U = 3336, y = c, d = st[N + -1 | (R = 0)], (N = (d = Z && (15 & d) == 3 ? -33 & d : d) + -88 | 0) >>> 0 <= 32)
                                                        break y;
                                                      h: {
                                                        l: {
                                                          v: {
                                                            x: {
                                                              if (6 < (M = d + -65 | 0) >>> 0) {
                                                                if ((0 | d) != 83)
                                                                  break a;
                                                                if (!S)
                                                                  break x;
                                                                y = r[64 + v >> 2];
                                                                break l;
                                                              }
                                                              switch (M - 1 | 0) {
                                                                case 1:
                                                                  break v;
                                                                case 0:
                                                                case 2:
                                                                  break a;
                                                                default:
                                                                  break _;
                                                              }
                                                            }
                                                            tr(
                                                              h,
                                                              32,
                                                              F,
                                                              d = 0,
                                                              I
                                                            );
                                                            break h;
                                                          }
                                                          r[12 + v >> 2] = 0, r[8 + v >> 2] = r[64 + v >> 2], r[64 + v >> 2] = 8 + v, S = -1, y = 8 + v | 0;
                                                        }
                                                        d = 0;
                                                        l: {
                                                          for (; ; ) {
                                                            if (!(P = r[y >> 2]))
                                                              break l;
                                                            if ((M = (0 | (P = kl(
                                                              4 + v | 0,
                                                              P
                                                            ))) < 0) | S - d >>> 0 < P >>> 0)
                                                              break;
                                                            if (y = y + 4 | 0, !((d = d + P | 0) >>> 0 < S >>> 0))
                                                              break l;
                                                          }
                                                          if (R = -1, M)
                                                            break r;
                                                        }
                                                        if (tr(
                                                          h,
                                                          32,
                                                          F,
                                                          d,
                                                          I
                                                        ), d)
                                                          for (S = 0, y = r[64 + v >> 2]; ; ) {
                                                            if (!(P = r[y >> 2]) || (0 | d) < (0 | (S = (P = kl(
                                                              4 + v | 0,
                                                              P
                                                            )) + S | 0)))
                                                              break h;
                                                            if (Ge(
                                                              h,
                                                              4 + v | 0,
                                                              P
                                                            ), y = y + 4 | 0, !(S >>> 0 < d >>> 0))
                                                              break;
                                                          }
                                                        else
                                                          d = 0;
                                                      }
                                                      tr(
                                                        h,
                                                        32,
                                                        F,
                                                        d,
                                                        8192 ^ I
                                                      ), d = (0 | d) < (0 | F) ? F : d;
                                                      continue e;
                                                    }
                                                    r[76 + v >> 2] = y = d + 1 | 0, I = ut[d + 1 | 0], d = y;
                                                    continue;
                                                  }
                                                  break;
                                                }
                                                switch (N - 1 | 0) {
                                                  case 28:
                                                    break f;
                                                  case 21:
                                                    break c;
                                                  case 23:
                                                    break o;
                                                  case 22:
                                                    break d;
                                                  case 11:
                                                  case 16:
                                                    break p;
                                                  case 10:
                                                    break m;
                                                  case 26:
                                                    break g;
                                                  case 8:
                                                  case 12:
                                                  case 13:
                                                  case 14:
                                                    break _;
                                                  case 0:
                                                  case 1:
                                                  case 2:
                                                  case 3:
                                                  case 4:
                                                  case 5:
                                                  case 6:
                                                  case 7:
                                                  case 9:
                                                  case 15:
                                                  case 17:
                                                  case 18:
                                                  case 19:
                                                  case 20:
                                                  case 24:
                                                  case 25:
                                                  case 27:
                                                  case 29:
                                                  case 30:
                                                    break a;
                                                  default:
                                                    break u;
                                                }
                                              }
                                              if (R = B, h)
                                                break r;
                                              if (!V)
                                                break i;
                                              for (d = 1; ; ) {
                                                if (h = r[(d << 2) + f >> 2]) {
                                                  if (Gl(
                                                    (d << 3) + p | 0,
                                                    h,
                                                    E,
                                                    l
                                                  ), (0 | (d = d + (R = 1) | 0)) != 10)
                                                    continue;
                                                  break r;
                                                }
                                                break;
                                              }
                                              if (R = 1, 9 < d >>> 0 || (R = -1, r[(d << 2) + f >> 2]))
                                                break r;
                                              for (; !r[((d = d + 1 | 0) << 2) + f >> 2] && (0 | d) != 10; )
                                                ;
                                              R = d >>> 0 < 10 ? -1 : 1;
                                              break r;
                                            }
                                            d = 0 | ht[T](
                                              h,
                                              Vt[64 + v >> 3],
                                              F,
                                              S,
                                              I,
                                              d
                                            );
                                            continue;
                                          }
                                          y = (d = zl(
                                            P = (d = r[64 + v >> 2]) || 3346,
                                            S
                                          )) || S + P | 0, I = M, S = d ? d - P | 0 : S;
                                          break a;
                                        }
                                        st[55 + v | 0] = r[64 + v >> 2], S = 1, P = _, I = M;
                                        break a;
                                      }
                                      if (d = M = r[68 + v >> 2], P = r[64 + v >> 2], (0 | d) < -1 || (0 | d) <= -1 && !(4294967295 < P >>> 0)) {
                                        d = 0 - (d + (0 < P >>> 0) | 0) | 0, r[64 + v >> 2] = P = 0 - P | 0, r[68 + v >> 2] = d, R = 1, U = 3336;
                                        break n;
                                      }
                                      if (2048 & I) {
                                        R = 1, U = 3337;
                                        break n;
                                      }
                                      U = (R = 1 & I) ? 3338 : 3336;
                                      break n;
                                    }
                                    if (P = function(it, gt, Tt) {
                                      if (it | gt)
                                        for (; st[0 | (Tt = Tt + -1 | 0)] = 7 & it | 48, (it = (7 & gt) << 29 | it >>> 3) | (gt >>>= 3); )
                                          ;
                                      return Tt;
                                    }(
                                      r[64 + v >> 2],
                                      r[68 + v >> 2],
                                      c
                                    ), !(8 & I))
                                      break s;
                                    S = (0 | (d = c - P | 0)) < (0 | S) ? S : d + 1 | 0;
                                    break s;
                                  }
                                  S = 8 < S >>> 0 ? S : 8, I |= 8, d = 120;
                                }
                                if (P = function(it, gt, Tt, Rt) {
                                  if (it | gt)
                                    for (; st[0 | (Tt = Tt + -1 | 0)] = ut[3824 + (15 & it) | 0] | Rt, (it = (15 & gt) << 28 | it >>> 4) | (gt >>>= 4); )
                                      ;
                                  return Tt;
                                }(
                                  r[64 + v >> 2],
                                  r[68 + v >> 2],
                                  c,
                                  32 & d
                                ), !(8 & I) | !(r[64 + v >> 2] | r[68 + v >> 2]))
                                  break s;
                                U = 3336 + (d >>> 4) | 0, R = 2;
                                break s;
                              }
                              if (7 < (y = 255 & Z) >>> (d = 0))
                                continue;
                              switch (y - 1 | 0) {
                                default:
                                case 0:
                                  r[r[64 + v >> 2] >> 2] = B;
                                  continue;
                                case 1:
                                  y = r[64 + v >> 2], r[y >> 2] = B, r[y + 4 >> 2] = B >> 31;
                                  continue;
                                case 2:
                                  ca[r[64 + v >> 2] >> 1] = B;
                                  continue;
                                case 3:
                                  st[r[64 + v >> 2]] = B;
                                  continue;
                                case 5:
                                  r[r[64 + v >> 2] >> 2] = B;
                                  continue;
                                case 4:
                                  continue;
                                case 6:
                              }
                              y = r[64 + v >> 2], r[y >> 2] = B, r[y + 4 >> 2] = B >> 31;
                              continue;
                            }
                            P = r[64 + v >> 2], d = r[68 + v >> 2], U = 3336;
                          }
                          P = pa(P, d, c);
                        }
                        I = -1 < (0 | S) ? -65537 & I : I, S = !!((M = d = r[68 + v >> 2]) | (N = r[64 + v >> 2])) | S ? (0 | (d = !(M | N) + (c - P | 0) | 0)) < (0 | S) ? S : d : (P = c, 0);
                      }
                      tr(
                        h,
                        32,
                        d = (0 | F) < (0 | (y = (S = (0 | S) < (0 | (M = y - P | 0)) ? M : S) + R | 0)) ? y : F,
                        y,
                        I
                      ), Ge(h, U, R), tr(h, 48, d, y, 65536 ^ I), tr(h, 48, S, M, 0), Ge(h, P, M), tr(h, 32, d, y, 8192 ^ I);
                      continue;
                    }
                    break;
                  }
                R = 0;
                break r;
              }
              R = -1;
            }
            return X = 80 + v | 0, R;
          }
          function mo(h) {
            var d, E = 0, T = 0, f = 0, p = 0, f = 4, T = 1439;
            r:
              if (E = ut[0 | h]) {
                for (; !((0 | (d = ut[0 | T])) != (0 | E) || !(f = f + -1 | 0) | !d); )
                  if (T = T + 1 | 0, E = ut[h + 1 | 0], h = h + 1 | 0, !E)
                    break r;
                p = E;
              }
            return (255 & p) - ut[0 | T] | 0;
          }
          function go(h, d, E) {
            var p, f, T = 0, l = 0, c = 0;
            r[(X = f = X - 240 | 0) >> 2] = h, l = 1;
            r:
              if (!((0 | d) < 2))
                for (T = h; ; ) {
                  if (T = (p = T + -4 | 0) - r[((c = d + -2 | 0) << 2) + E >> 2] | 0, 0 <= (0 | ht[5](h, T)) && -1 < (0 | ht[5](h, p)) || (h = (l << 2) + f | 0, 0 <= (0 | ht[5](T, p)) ? (r[h >> 2] = T, c = d + -1 | 0) : T = r[h >> 2] = p, l = l + 1 | 0, (0 | c) < 2))
                    break r;
                  h = r[f >> 2], d = c;
                }
            Wl(f, l), X = 240 + f | 0;
          }
          function Cl(h) {
            var d, E, p = 0;
            if (b(0), function(f) {
              var T, l;
              r[f + 428 >> 2] && (l = r[f + 332 >> 2], Ir(r[f + 460 >> 2], r[f + 436 >> 2], T = l << 2), Ir(r[f + 464 >> 2], r[f + 440 >> 2], T), Ir(r[f + 468 >> 2], r[f + 448 >> 2], T), ut[r[f >> 2] + 4 | 0] < 4 || (Ir(
                r[f + 472 >> 2],
                r[f + 452 >> 2],
                T = l << 4
              ), Ir(r[f + 476 >> 2], r[f + 456 >> 2], T)));
            }(h), function(f) {
              var T, l, c, _ = 0, v = b(0), y = b(0), S = 0, I = b(0);
              if (b(0), b(0), 1 <= (0 | (S = r[f >> 2])))
                for (c = (_ = r[f + 4 >> 2]) + j(S, 52) | 0, f = r[f + 12 >> 2]; v = $[f >> 2], $[_ + 44 >> 2] != (v = (T = r[_ + 16 >> 2]) ? (y = v, v = $[_ + 4 >> 2], I = $[_ + 12 >> 2], y = b(b(y - v) / I), l = b(ho(y)), S = b(we(l)) < b(2147483648) ? ~~l : -2147483648, b(v + b(I * b(y - b(0 | S))))) : (I = $[_ + 4 >> 2], y = $[_ + 8 >> 2], v < I ? I : y < v ? y : v)) ? ($[_ + 44 >> 2] = v, r[_ + 48 >> 2] = 1) : r[_ + 48 >> 2] = 0, T || ($[f >> 2] = v), f = f + 4 | 0, (_ = _ + 52 | 0) >>> 0 < c >>> 0; )
                  ;
            }(h + 540 | 0), function(f) {
              var T, l, c, _, v, y, S = 0, I = 0, P = b(0), M = 0, R = b(0), N = (b(0), b(0), 0), F = b(0), B = 0, U = 0, V = 0;
              if (b(0), 1 <= (0 | (M = r[f + 540 >> 2])))
                for (v = (N = r[f + 544 >> 2]) + j(M, 52) | 0, y = r[f + 644 >> 2]; ; ) {
                  r:
                    if (!(r[N >> 2] || (0 | (M = r[N + 32 >> 2])) < 1))
                      if (c = (f = r[N + 28 >> 2]) + j(M, 28) | 0, _ = $[N + 24 >> 2], l = $[N + 20 >> 2], T = $[N + 44 >> 2], y)
                        for (; ; ) {
                          F = b(U = 0);
                          t: {
                            e: {
                              i: {
                                if ((0 | (I = r[f >> 2])) < 1)
                                  S = M = 0;
                                else if (B = r[f + 4 >> 2], R = $[B >> 2], P = b(R - l), (0 | I) == 1)
                                  M = T < b(l + R) ^ 1 | P < T ^ 1, S = 0;
                                else {
                                  if (T < P) {
                                    M = 1, S = 0;
                                    break e;
                                  }
                                  if (M = 0, T < b(l + R))
                                    S = 0;
                                  else {
                                    if (S = 1, P = $[B + 4 >> 2], !(T < b(l + P)))
                                      for (; ; ) {
                                        if ((0 | I) == (0 | (S = S + 1 | 0)))
                                          break i;
                                        if (R = P, P = $[B + (S << 2) >> 2], T < b(l + P))
                                          break;
                                      }
                                    b(P - l) < T || (S = S + -1 | 0, (P = b(P - R)) < _) || (F = b(b(T - R) / P));
                                  }
                                }
                                if (M)
                                  break e;
                                if (B = I = 1, r[f + 16 >> 2])
                                  break t;
                                break e;
                              }
                              S = I + -1 | 0, M = 1;
                            }
                            B = (I = (R = $[f + 12 >> 2]) != F) & (F == b(0) | R == b(0)) | r[f + 8 >> 2] != (0 | S), U = M;
                          }
                          if (r[f + 20 >> 2] = B, r[f + 24 >> 2] = I, $[f + 12 >> 2] = F, r[f + 16 >> 2] = U, r[f + 8 >> 2] = S, !((f = f + 28 | 0) >>> 0 < c >>> 0))
                            break;
                        }
                      else {
                        if (!r[N + 48 >> 2]) {
                          for (; ; )
                            if (r[f + 20 >> 2] = 0, !((f = f + 28 | (r[f + 24 >> 2] = 0)) >>> 0 < c >>> 0))
                              break r;
                        }
                        for (; ; ) {
                          F = b(U = 0);
                          t: {
                            e: {
                              i: {
                                a:
                                  if (!(((I = 0) | (S = r[(B = f) >> 2])) < 1)) {
                                    if (M = r[f + 4 >> 2], R = $[M >> 2], P = b(R - l), (0 | S) != 1) {
                                      if (!(T < P)) {
                                        if (I = 0, T < b(l + R))
                                          break a;
                                        I = 1;
                                        s:
                                          if (P = $[M + 4 >> 2], !(T < b(l + P))) {
                                            for (S = S + -1 | 0; R = P, (0 | S) != (0 | I); )
                                              if (P = $[M + ((I = I + 1 | 0) << 2) >> 2], T < b(l + P))
                                                break s;
                                            M = 1;
                                            break e;
                                          }
                                        if (M = 0, b(P - l) < T) {
                                          S = I;
                                          break i;
                                        }
                                        if (S = I + -1 | 0, (P = b(P - R)) < _)
                                          break i;
                                        F = b(b(T - R) / P);
                                        break i;
                                      }
                                      M = 1, S = 0;
                                      break e;
                                    }
                                    I = T < b(l + R) ^ 1 | P < T ^ 1;
                                  }
                                M = I, S = 0;
                              }
                              if (!M && (V = I = 1, r[f + 16 >> 2]))
                                break t;
                            }
                            U = M, V = (I = (R = $[f + 12 >> 2]) != F) & (F == b(0) | R == b(0)) | r[f + 8 >> 2] != (0 | S);
                          }
                          if (r[B + 20 >> 2] = V, r[f + 24 >> 2] = I, $[f + 12 >> 2] = F, r[f + 16 >> 2] = U, r[f + 8 >> 2] = S, !((f = f + 28 | 0) >>> 0 < c >>> 0))
                            break;
                        }
                      }
                  if (!((N = N + 52 | 0) >>> 0 < v >>> 0))
                    break;
                }
            }(h), function(f) {
              var T, l, c, _, v, y = 0, S = b(0), I = 0, P = 0, M = b(0), R = 0, N = b(0);
              if (b(0), !(ut[r[f >> 2] + 4 | 0] < 4 || (0 | (y = r[f + 540 >> 2])) < 1))
                for (_ = (R = r[f + 544 >> 2]) + j(y, 52) | 0, v = r[f + 644 >> 2]; ; ) {
                  r:
                    if (r[R >> 2] == 1 && !((0 | (y = r[R + 40 >> 2])) < 1))
                      if (l = (f = r[R + 36 >> 2]) + j(y, 28) | 0, T = $[R + 44 >> 2], v)
                        for (; ; ) {
                          N = b(y = 0);
                          t:
                            if (!((0 | (P = r[f >> 2])) < 2 || (I = r[f + 4 >> 2], T <= (S = $[I >> 2])))) {
                              y = 1;
                              e:
                                if (!(T < (M = $[I + 4 >> 2]))) {
                                  for (; S = M, (0 | P) != (0 | (y = y + 1 | 0)); )
                                    if (T < (M = $[I + (y << 2) >> 2]))
                                      break e;
                                  y = P + -1 | 0;
                                  break t;
                                }
                              N = b(b(T - S) / b(M - S)), y = y + -1 | 0;
                            }
                          if (S = $[f + 16 >> 2], $[f + 16 >> 2] = N, P = r[f + 12 >> 2], r[f + 12 >> 2] = y, r[f + 24 >> 2] = I = S != N, r[f + 20 >> 2] = I & (N == b(0) | S == b(0)) | (0 | y) != (0 | P), !((f = f + 28 | 0) >>> 0 < l >>> 0))
                            break;
                        }
                      else {
                        if (!r[R + 48 >> 2]) {
                          for (; ; )
                            if (r[f + 20 >> 2] = 0, !((f = f + 28 | (r[f + 24 >> 2] = 0)) >>> 0 < l >>> 0))
                              break r;
                        }
                        for (; ; ) {
                          N = b(P = 0);
                          t:
                            if (!((0 | (c = r[f >> 2])) < 2 || (I = r[f + 4 >> 2], T <= (S = $[I >> 2])))) {
                              if (y = 1, !(T < (M = $[I + 4 >> 2])))
                                for (P = c + -1 | 0; ; ) {
                                  if (S = M, (0 | y) == (0 | P))
                                    break t;
                                  if (T < (M = $[I + ((y = y + 1 | 0) << 2) >> 2]))
                                    break;
                                }
                              N = b(b(T - S) / b(M - S)), P = y + -1 | 0;
                            }
                          if (S = $[f + 16 >> 2], $[f + 16 >> 2] = N, y = r[f + 12 >> 2], r[f + 12 >> 2] = P, r[f + 24 >> 2] = I = S != N, r[f + 20 >> 2] = I & (N == b(0) | S == b(0)) | (0 | y) != (0 | P), !((f = f + 28 | 0) >>> 0 < l >>> 0))
                            break;
                        }
                      }
                  if (!((R = R + 52 | 0) >>> 0 < _ >>> 0))
                    break;
                }
            }(h), function(f) {
              var T, l, c, _, v, y, S, I = 0, P = 0, M = 0, R = 0, N = 0, F = 0, B = 0, U = b(0), V = 0, Z = 0, it = 0, gt = 0, Tt = 0;
              if (1 <= (0 | (P = r[f + 564 >> 2])))
                for (y = (N = r[f + 568 >> 2]) + j(P, 36) | 0, _ = r[f + 644 >> 2]; ; ) {
                  r: {
                    if (!(F = ((M = R = P = 0) | (l = r[N + 4 >> 2])) < 1))
                      for (V = r[N >> 2], f = gt = 0; ; ) {
                        if (I = r[V + (f << 2) >> 2], r[I + 16 >> 2]) {
                          I = 1, Tt = 0;
                          break r;
                        }
                        if (M = M || r[I + 24 >> 2], P = P || r[I + 20 >> 2], R = ($[I + 12 >> 2] != b(0)) + R | 0, (0 | l) == (0 | (f = f + 1 | 0)))
                          break;
                      }
                    if (I = 0, (gt = _ ? 1 : M) | (Tt = _ ? 1 : P) && (r[N + 12 >> 2] = V = 1 << R, (0 | R) != 31)) {
                      for (P = r[N + 20 >> 2], v = r[N >> 2], M = (f = r[N + 16 >> 2]) + (B = V << 2) | 0, M = Gr(
                        f,
                        0,
                        4 + ((-1 ^ f) + ((f = f + 4 | 0) >>> 0 < M >>> 0 ? M : f) | 0) & -4
                      ), B = P + B | 0, f = P; r[f >> 2] = 1065353216, (f = f + 4 | 0) >>> 0 < B >>> 0; )
                        ;
                      if (!F) {
                        if (F = 0, B = I = 1, R)
                          for (; ; ) {
                            if (R = r[(F << 2) + v >> 2], Z = r[R + 8 >> 2], it = j(Z, I), (U = $[R + 12 >> 2]) != b(f = 0)) {
                              for (r[M >> 2] = it + r[M >> 2], $[P >> 2] = b(b(1) - U) * $[P >> 2], Z = j(Z + (f = 1) | 0, I); U = $[R + 12 >> 2], S = r[(c = (T = f << 2) + M | 0) >> 2], r[c >> 2] = S + ((c = f & B) ? Z : it), $[(T = P + T | 0) >> 2] = (c ? U : b(b(1) - U)) * $[T >> 2], (0 | V) != (0 | (f = f + 1 | 0)); )
                                ;
                              B <<= 1;
                            } else
                              for (; r[(Z = M + (f << 2) | 0) >> 2] = it + r[Z >> 2], (0 | V) != (0 | (f = f + 1 | 0)); )
                                ;
                            if (I = j(r[R >> 2], I), (0 | l) == (0 | (F = F + 1 | 0)))
                              break;
                          }
                        else
                          for (; ; ) {
                            if (R = r[(F << 2) + v >> 2], B = j(r[R + 8 >> 2], I), (U = $[R + 12 >> 2]) != b(f = 0))
                              r[M >> 2] = B + r[M >> 2], $[P >> 2] = b(b(1) - U) * $[P >> 2];
                            else
                              for (; r[(it = M + (f << 2) | 0) >> 2] = B + r[it >> 2], (0 | V) != (0 | (f = f + 1 | 0)); )
                                ;
                            if (I = j(r[R >> 2], I), (0 | l) == (0 | (F = F + 1 | 0)))
                              break;
                          }
                        I = 0;
                      }
                    }
                  }
                  if (r[N + 32 >> 2] = I, r[N + 24 >> 2] = Tt, r[N + 28 >> 2] = gt, !((N = N + 36 | 0) >>> 0 < y >>> 0))
                    break;
                }
            }(h), function(f) {
              var T, l, c, _, v = b(0), y = 0, S = 0, I = 0, P = 0, M = 0, R = b(0), N = b(0), F = b(0), B = 0, U = 0, V = 0;
              if (!(ut[r[f >> 2] + 4 | 0] < 4 || (0 | (y = r[f + 588 >> 2])) < 1))
                for (_ = (I = r[f + 592 >> 2]) + j(y, 48) | 0, T = r[f + 644 >> 2]; ; ) {
                  if (f = r[I >> 2], (U = T ? 1 : r[f + 20 >> 2]) | (V = T ? 1 : r[f + 24 >> 2])) {
                    r: {
                      t: {
                        M = I, P = r[f + 8 >> 2], y = r[f + 12 >> 2], v = $[f + 16 >> 2], f = (0 | P) != (0 | y);
                        e: {
                          if (v != b(0)) {
                            if (f = y + 1 | 0, (0 | y) == (0 | P)) {
                              r[I + 8 >> 2] = U = 1, v = b(b(1) - v), V = 1;
                              break e;
                            }
                            f = (0 | f) == (0 | P) ? 1 : 2;
                          }
                          if (r[M + 8 >> 2] = f, !V)
                            break t;
                          f = y;
                        }
                        $[I + 24 >> 2] = v, $[I + 20 >> 2] = b(1) - v;
                        break r;
                      }
                      V = 0, f = y;
                    }
                    U ? (r[I + 12 >> 2] = f, r[I + 16 >> 2] = f + 1) : U = 0;
                  } else
                    U = V = 0;
                  r:
                    if ((0 | (l = r[I + 36 >> 2])) < 1)
                      F = b(1);
                    else {
                      if (c = r[I + 40 >> 2], f = 0, F = b(1), !T)
                        for (; ; ) {
                          t: {
                            e: {
                              if (y = r[(f << 2) + c >> 2], S = r[y >> 2]) {
                                if (!r[S + 48 >> 2]) {
                                  v = $[y + 16 >> 2];
                                  break t;
                                }
                                if ((0 | (P = r[y + 12 >> 2])) < 1) {
                                  v = b(1), $[y + 16 >> 2] = 1;
                                  break t;
                                }
                                if (B = r[y + 8 >> 2], (0 | P) != 1 && (R = $[S + 44 >> 2], M = r[y + 4 >> 2], !(R <= (N = $[M >> 2]))))
                                  break e;
                                v = $[B >> 2], $[y + 16 >> 2] = v;
                                break t;
                              }
                              r[y + 16 >> 2] = 1065353216, v = b(1);
                              break t;
                            }
                            S = 1;
                            e:
                              if (!(R < (v = $[M + 4 >> 2]))) {
                                for (; N = v, (0 | P) != (0 | (S = S + 1 | 0)); )
                                  if (R < (v = $[M + (S << 2) >> 2]))
                                    break e;
                                v = $[(B + (P << 2) | 0) - 4 >> 2], $[y + 16 >> 2] = v;
                                break t;
                              }
                            M = y, v = b(b(R - N) / b(v - N)), v = b(
                              b(
                                v * $[(y = B + (S << 2) | 0) >> 2]
                              ) + b($[y + -4 >> 2] * b(b(1) - v))
                            ), $[M + 16 >> 2] = v;
                          }
                          if (F = F < v ? F : v, (0 | l) == (0 | (f = f + 1 | 0)))
                            break r;
                        }
                      for (; ; ) {
                        y = r[(f << 2) + c >> 2], S = r[y >> 2], v = b(1);
                        t:
                          if (S && (B = r[y + 12 >> 2], v = b(1), !((0 | B) < 1)) && (P = r[y + 8 >> 2], v = $[P >> 2], (0 | B) != 1)) {
                            e: {
                              if (R = $[S + 44 >> 2], M = r[y + 4 >> 2], R <= (N = $[M >> 2])) {
                                v = $[P >> 2];
                                break t;
                              }
                              if (S = 1, !(R < (v = $[M + 4 >> 2]))) {
                                for (; N = v, (0 | B) != (0 | (S = S + 1 | 0)); )
                                  if (R < (v = $[M + (S << 2) >> 2]))
                                    break e;
                                v = $[(P + (B << 2) | 0) - 4 >> 2];
                                break t;
                              }
                            }
                            v = b(b(R - N) / b(v - N)), v = b(
                              b(v * $[(S = P + (S << 2) | 0) >> 2]) + b($[S + -4 >> 2] * b(b(1) - v))
                            );
                          }
                        if (F = F < ($[y + 16 >> 2] = v) ? F : v, (0 | l) == (0 | (f = f + 1 | 0)))
                          break;
                      }
                    }
                  if (r[I + 32 >> 2] = V, r[I + 28 >> 2] = U, $[I + 44 >> 2] = F, !((I = I + 48 | 0) >>> 0 < _ >>> 0))
                    break;
                }
            }(h), 1 <= (0 | (d = r[h + 4 >> 2])))
              for (d = (p = r[h + 52 >> 2]) + (d << 2) | 0; E = $[p >> 2], $[p >> 2] = E < b(0) ? b(0) : b(Ue(E, b(1))), (p = p + 4 | 0) >>> 0 < d >>> 0; )
                ;
            (function(f) {
              var T, l, c, _ = 0, v = 0;
              if (1 <= (0 | (v = r[f + 4 >> 2])))
                for (c = (_ = r[f + 8 >> 2]) + j(v, 12) | 0, f = T = r[f + 40 >> 2]; v = 0, r[_ + 8 >> 2] && (l = r[_ + 4 >> 2], !r[(l << 2) + T >> 2] && (0 | l) != -1 || (v = !r[r[_ >> 2] + 32 >> 2])), r[f >> 2] = v, f = f + 4 | 0, (_ = _ + 12 | 0) >>> 0 < c >>> 0; )
                  ;
            })(h), function(f) {
              var T, l, c, _, v, y, S, I = 0, P = 0, M = 0, R = 0, N = 0;
              if (1 <= (0 | (l = r[f + 4 >> 2])))
                for (_ = r[f + 8 >> 2], c = r[f >> 2], v = r[c + 724 >> 2]; ; ) {
                  if (T = r[j(R, 12) + _ >> 2], (r[T + 28 >> 2] || r[T + 24 >> 2]) && (r[(I = R << 2) + r[f + 28 >> 2] >> 2] = r[T + 12 >> 2], r[T + 24 >> 2]) && !((0 | (M = r[T + 12 >> 2])) < 1))
                    for (M = (P = r[T + 16 >> 2]) + (M << 2) | 0, y = r[I + v >> 2], I = r[f + 36 >> 2] + (N << 2) | 0, S = r[c + 976 >> 2]; r[I >> 2] = r[(r[P >> 2] + y << 2) + S >> 2], I = I + 4 | 0, (P = P + 4 | 0) >>> 0 < M >>> 0; )
                      ;
                  if (r[T + 28 >> 2] && !((0 | (I = r[T + 12 >> 2])) < 1))
                    for (M = (P = r[T + 20 >> 2]) + (I << 2) | 0, I = r[f + 32 >> 2] + (N << 2) | 0; r[I >> 2] = r[P >> 2], I = I + 4 | 0, (P = P + 4 | 0) >>> 0 < M >>> 0; )
                      ;
                  if (N = r[T + 8 >> 2] + N | 0, (0 | l) == (0 | (R = R + 1 | 0)))
                    break;
                }
            }(h), ht[r[1808]](
              h + 12 | 0,
              r[h + 36 >> 2],
              r[h + 44 >> 2],
              r[h + 40 >> 2]
            ), function(f) {
              var T, l, c, _, v, y, S = 0, I = 0, P = 0;
              if (1 <= (0 | (P = r[f + 304 >> 2])))
                for (c = (S = r[f + 308 >> 2]) + (P << 5) | 0, _ = r[f + 264 >> 2], v = r[f + 144 >> 2], y = r[f + 40 >> 2], P = l = r[f + 312 >> 2]; T = P, I = 0, f = I = !r[S + 28 >> 2] || (0 | (f = r[S + 4 >> 2])) != -1 && (I = 0, !r[(f << 2) + y >> 2]) || (0 | (f = r[S + 8 >> 2])) != -1 && (I = 0, !r[(f << 2) + l >> 2]) ? I : !r[r[S >> 2] + 32 >> 2], r[T >> 2] = f, (T = r[S + 12 >> 2]) >>> 0 <= 1 ? T - 1 ? r[(r[S + 16 >> 2] << 2) + v >> 2] = f : r[(r[S + 16 >> 2] << 2) + _ >> 2] = f : vt(4, 1372, 0), P = P + 4 | 0, (S = S + 32 | 0) >>> 0 < c >>> 0; )
                  ;
            }(h), function(f) {
              var T, l, c, _, v, y, S, I, P, M = 0, R = 0, N = 0, F = 0, xt = 0, B = 0, U = 0, V = 0, Z = 0, it = 0, gt = 0, Tt = 0, Rt = 0, Ut = 0, xt = r[f >> 2];
              if (1 <= (0 | (V = r[f + 56 >> 2]))) {
                for (Z = r[f + 60 >> 2], it = r[xt + 1052 >> 2], gt = r[xt + 784 >> 2]; ; ) {
                  if (M = r[Z + j(B, 24) >> 2], (r[M + 28 >> 2] || r[M + 24 >> 2]) && (r[(R = B << 2) + r[f + 80 >> 2] >> 2] = r[M + 12 >> 2], r[M + 24 >> 2]) && !((0 | (F = r[M + 12 >> 2])) < 1))
                    for (Tt = (N = r[M + 16 >> 2]) + (F << 2) | 0, Rt = r[R + gt >> 2], R = (F = U << 2) + r[f + 92 >> 2] | 0, F = F + r[f + 88 >> 2] | 0; Ut = Rt + r[N >> 2] << 2, r[R >> 2] = it + (r[Ut + r[xt + 984 >> 2] >> 2] << 2), r[F >> 2] = r[Ut + r[xt + 980 >> 2] >> 2], F = F + 4 | 0, R = R + 4 | 0, (N = N + 4 | 0) >>> 0 < Tt >>> 0; )
                      ;
                  if (r[M + 28 >> 2] && !((0 | (R = r[M + 12 >> 2])) < 1))
                    for (F = (N = r[M + 20 >> 2]) + (R << 2) | 0, R = r[f + 84 >> 2] + (U << 2) | 0; r[R >> 2] = r[N >> 2], R = R + 4 | 0, (N = N + 4 | 0) >>> 0 < F >>> 0; )
                      ;
                  if (U = r[M + 8 >> 2] + U | 0, (0 | V) == (0 | (B = B + 1 | 0)))
                    break;
                }
                xt = r[f >> 2];
              }
              if (!(ut[xt + 4 | 0] < 4 || (0 | (Rt = r[f + 56 >> 2])) < 1))
                for (Ut = r[xt + 792 >> 2], T = r[f + 60 >> 2], N = U = 0; ; ) {
                  if (B = r[j(N, 24) + T >> 2], r[B + 24 >> 2] && !((0 | (M = r[B + 12 >> 2])) < 1))
                    for (l = (R = r[B + 16 >> 2]) + (M << 2) | 0, c = r[Ut + (N << 2) >> 2], F = (M = U << 2) + r[f + 96 >> 2] | 0, V = M + r[f + 100 >> 2] | 0, Z = M + r[f + 104 >> 2] | 0, it = M + r[f + 108 >> 2] | 0, gt = M + r[f + 112 >> 2] | 0, Tt = M + r[f + 116 >> 2] | 0, _ = r[xt + 1308 >> 2], v = r[xt + 1304 >> 2], y = r[xt + 1300 >> 2], S = r[xt + 1296 >> 2], I = r[xt + 1292 >> 2], P = r[xt + 1288 >> 2]; M = r[R >> 2] + c << 2, r[F >> 2] = r[M + P >> 2], r[V >> 2] = r[M + I >> 2], r[Z >> 2] = r[M + S >> 2], r[it >> 2] = r[M + y >> 2], r[gt >> 2] = r[M + v >> 2], r[Tt >> 2] = r[M + _ >> 2], Tt = Tt + 4 | 0, gt = gt + 4 | 0, it = it + 4 | 0, Z = Z + 4 | 0, V = V + 4 | 0, F = F + 4 | 0, (R = R + 4 | 0) >>> 0 < l >>> 0; )
                      ;
                  if (U = r[B + 8 >> 2] + U | 0, (0 | Rt) == (0 | (N = N + 1 | 0)))
                    break;
                }
            }(h), function(f) {
              var T = 0, l = 0, c = 0, _ = 0, v = 0, y = 0, S = 0, I = 0, P = 0, M = 0, R = 0, N = 0, F = 0, B = 0, U = 0, V = 0, Z = 0, it = 0, gt = 0, Tt = 0, Rt = 0, Ut = r[f + 168 >> 2], xt = r[f >> 2];
              if (1 <= (0 | (F = r[f + 164 >> 2])))
                for (U = r[xt + 816 >> 2]; ; ) {
                  if (c = r[j(S, 12) + Ut >> 2], (r[c + 28 >> 2] || r[c + 24 >> 2]) && (r[(I = S << 2) + r[f + 188 >> 2] >> 2] = r[c + 12 >> 2], r[c + 24 >> 2])) {
                    if (l = r[c + 16 >> 2], B = r[I + U >> 2], 1 <= (0 | (T = r[c + 12 >> 2])))
                      for (V = l + (T << 2) | 0, _ = (T = y << 2) + r[f + 200 >> 2] | 0, P = T + r[f + 204 >> 2] | 0, M = T + r[f + 208 >> 2] | 0, R = T + r[f + 212 >> 2] | 0, N = T + r[f + 196 >> 2] | 0, Z = r[xt + 996 >> 2], it = r[xt + 1012 >> 2], gt = r[xt + 1008 >> 2], Tt = r[xt + 1004 >> 2], Rt = r[xt + 1e3 >> 2], T = l; v = B + r[T >> 2] << 2, r[_ >> 2] = r[v + Rt >> 2], r[P >> 2] = r[v + Tt >> 2], r[M >> 2] = r[v + gt >> 2], r[R >> 2] = r[v + it >> 2], r[N >> 2] = r[v + Z >> 2], N = N + 4 | 0, R = R + 4 | 0, M = M + 4 | 0, P = P + 4 | 0, _ = _ + 4 | 0, (T = T + 4 | 0) >>> 0 < V >>> 0; )
                        ;
                    T = B + r[l >> 2] << 2, r[I + r[f + 288 >> 2] >> 2] = r[T + r[xt + 1016 >> 2] >> 2], r[I + r[f + 292 >> 2] >> 2] = r[T + r[xt + 1020 >> 2] >> 2];
                  }
                  if (r[c + 28 >> 2] && !((0 | (l = r[c + 12 >> 2])) < 1))
                    for (l = (T = r[c + 20 >> 2]) + (l << 2) | 0, _ = r[f + 192 >> 2] + (y << 2) | 0; r[_ >> 2] = r[T >> 2], _ = _ + 4 | 0, (T = T + 4 | 0) >>> 0 < l >>> 0; )
                      ;
                  if (y = r[c + 8 >> 2] + y | 0, (0 | F) == (0 | (S = S + 1 | 0)))
                    break;
                }
              if (!(ut[xt + 4 | 0] < 4 || (0 | (I = r[f + 164 >> 2])) < 1))
                for (B = r[xt + 824 >> 2], y = c = 0; ; ) {
                  if (v = r[j(y, 12) + Ut >> 2], r[v + 24 >> 2] && !((0 | (T = r[v + 12 >> 2])) < 1))
                    for (F = (_ = r[v + 16 >> 2]) + (T << 2) | 0, U = r[B + (y << 2) >> 2], P = (l = c << 2) + r[f + 216 >> 2] | 0, M = l + r[f + 220 >> 2] | 0, R = l + r[f + 224 >> 2] | 0, N = l + r[f + 228 >> 2] | 0, T = l + r[f + 232 >> 2] | 0, S = l + r[f + 236 >> 2] | 0, V = r[xt + 1308 >> 2], Z = r[xt + 1304 >> 2], it = r[xt + 1300 >> 2], gt = r[xt + 1296 >> 2], Tt = r[xt + 1292 >> 2], Rt = r[xt + 1288 >> 2]; l = U + r[_ >> 2] << 2, r[P >> 2] = r[l + Rt >> 2], r[M >> 2] = r[l + Tt >> 2], r[R >> 2] = r[l + gt >> 2], r[N >> 2] = r[l + it >> 2], r[T >> 2] = r[l + Z >> 2], r[S >> 2] = r[l + V >> 2], S = S + 4 | 0, T = T + 4 | 0, N = N + 4 | 0, R = R + 4 | 0, M = M + 4 | 0, P = P + 4 | 0, (_ = _ + 4 | 0) >>> 0 < F >>> 0; )
                      ;
                  if (c = r[v + 8 >> 2] + c | 0, (0 | I) == (0 | (y = y + 1 | 0)))
                    break;
                }
            }(h), function(f) {
              var T, P = 0, l = 0, c = 0, _ = 0, v = 0, y = 0, S = 0, I = 0, P = f - -64 | 0;
              if (ht[r[1807]](
                P,
                r[f + 88 >> 2],
                r[f + 148 >> 2],
                r[f + 144 >> 2]
              ), ht[r[1809]](
                P,
                r[f + 92 >> 2],
                r[f + 152 >> 2],
                r[r[f >> 2] + 796 >> 2],
                2,
                r[f + 144 >> 2]
              ), !(ut[r[f >> 2] + 4 | 0] < 4 || (ht[r[1807]](
                P,
                r[f + 96 >> 2],
                r[f + 120 >> 2],
                r[f + 144 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 100 >> 2],
                r[f + 124 >> 2],
                r[f + 144 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 104 >> 2],
                r[f + 128 >> 2],
                r[f + 144 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 108 >> 2],
                r[f + 132 >> 2],
                r[f + 144 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 112 >> 2],
                r[f + 136 >> 2],
                r[f + 144 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 116 >> 2],
                r[f + 140 >> 2],
                r[f + 144 >> 2]
              ), (0 | (y = r[f + 56 >> 2])) < 1))) {
                for (S = r[f + 128 >> 2], I = r[f + 124 >> 2], T = r[f + 120 >> 2], l = r[f + 156 >> 2], P = 0; r[(c = _ << 2) + l >> 2] = r[(v = P << 2) + T >> 2], r[l + (4 | c) >> 2] = r[v + I >> 2], r[l + (8 | c) >> 2] = r[v + S >> 2], _ = _ + 4 | 0, (0 | y) != (0 | (P = P + 1 | 0)); )
                  ;
                for (l = r[f + 160 >> 2], v = r[f + 140 >> 2], S = r[f + 136 >> 2], I = r[f + 132 >> 2], P = f = 0; r[(_ = f << 2) + l >> 2] = r[(c = P << 2) + I >> 2], r[l + (4 | _) >> 2] = r[c + S >> 2], r[l + (8 | _) >> 2] = r[c + v >> 2], f = f + 4 | 0, (0 | y) != (0 | (P = P + 1 | 0)); )
                  ;
              }
            }(h), function(f) {
              var T, P = 0, l = 0, c = 0, _ = 0, v = 0, y = 0, S = 0, I = 0, P = f + 172 | 0;
              if (ht[r[1807]](
                P,
                r[f + 196 >> 2],
                r[f + 268 >> 2],
                r[f + 264 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 200 >> 2],
                r[f + 284 >> 2],
                r[f + 264 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 204 >> 2],
                r[f + 276 >> 2],
                r[f + 264 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 208 >> 2],
                r[f + 280 >> 2],
                r[f + 264 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 212 >> 2],
                r[f + 272 >> 2],
                r[f + 264 >> 2]
              ), !(ut[r[f >> 2] + 4 | 0] < 4 || (ht[r[1807]](
                P,
                r[f + 216 >> 2],
                r[f + 240 >> 2],
                r[f + 264 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 220 >> 2],
                r[f + 244 >> 2],
                r[f + 264 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 224 >> 2],
                r[f + 248 >> 2],
                r[f + 264 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 228 >> 2],
                r[f + 252 >> 2],
                r[f + 264 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 232 >> 2],
                r[f + 256 >> 2],
                r[f + 264 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 236 >> 2],
                r[f + 260 >> 2],
                r[f + 264 >> 2]
              ), (0 | (y = r[f + 164 >> 2])) < 1))) {
                for (S = r[f + 248 >> 2], I = r[f + 244 >> 2], T = r[f + 240 >> 2], l = r[f + 296 >> 2], P = 0; r[(c = _ << 2) + l >> 2] = r[(v = P << 2) + T >> 2], r[l + (4 | c) >> 2] = r[v + I >> 2], r[l + (8 | c) >> 2] = r[v + S >> 2], _ = _ + 4 | 0, (0 | y) != (0 | (P = P + 1 | 0)); )
                  ;
                for (l = r[f + 300 >> 2], v = r[f + 260 >> 2], S = r[f + 256 >> 2], I = r[f + 252 >> 2], P = f = 0; r[(_ = f << 2) + l >> 2] = r[(c = P << 2) + I >> 2], r[l + (4 | _) >> 2] = r[c + S >> 2], r[l + (8 | _) >> 2] = r[c + v >> 2], f = f + 4 | 0, (0 | y) != (0 | (P = P + 1 | 0)); )
                  ;
              }
            }(h), function(f) {
              var T, l, c, _ = 0, v = 0, y = 0;
              if (1 <= (0 | (v = r[f + 332 >> 2])))
                for (T = (_ = r[f + 336 >> 2]) + j(v, 20) | 0, l = r[f + 312 >> 2], c = r[f + 40 >> 2], f = r[f + 424 >> 2]; v = 0, r[_ + 12 >> 2] && (y = r[_ + 4 >> 2], r[(y << 2) + c >> 2] || (0 | y) == -1) && (y = r[_ + 8 >> 2], r[(y << 2) + l >> 2] || (0 | y) == -1) && (v = !r[r[_ >> 2] + 32 >> 2]), r[f >> 2] = v, f = f + 4 | 0, (_ = _ + 20 | 0) >>> 0 < T >>> 0; )
                  ;
            }(h), function(f) {
              var T, l, c, _, v, y, S, I, P = 0, M = 0, R = 0, xt = 0, N = 0, F = 0, B = 0, U = 0, V = 0, Z = 0, it = 0, gt = 0, Tt = 0, Rt = 0, Ut = 0, xt = r[f >> 2];
              if (1 <= (0 | (Z = r[f + 332 >> 2]))) {
                for (it = r[f + 336 >> 2], gt = r[xt + 1052 >> 2], Tt = r[xt + 856 >> 2]; ; ) {
                  if (P = r[it + j(B, 20) >> 2], (r[P + 28 >> 2] || r[P + 24 >> 2]) && (r[(M = B << 2) + r[f + 356 >> 2] >> 2] = r[P + 12 >> 2], r[P + 24 >> 2]) && !((0 | (N = r[P + 12 >> 2])) < 1))
                    for (Rt = (R = r[P + 16 >> 2]) + (N << 2) | 0, Ut = r[M + Tt >> 2], M = (F = U << 2) + r[f + 372 >> 2] | 0, N = F + r[f + 364 >> 2] | 0, F = F + r[f + 368 >> 2] | 0; V = Ut + r[R >> 2] << 2, r[M >> 2] = gt + (r[V + r[xt + 1040 >> 2] >> 2] << 2), r[N >> 2] = r[V + r[xt + 1032 >> 2] >> 2], r[F >> 2] = r[V + r[xt + 1036 >> 2] >> 2], F = F + 4 | 0, N = N + 4 | 0, M = M + 4 | 0, (R = R + 4 | 0) >>> 0 < Rt >>> 0; )
                      ;
                  if (r[P + 28 >> 2] && !((0 | (M = r[P + 12 >> 2])) < 1))
                    for (N = (R = r[P + 20 >> 2]) + (M << 2) | 0, M = r[f + 360 >> 2] + (U << 2) | 0; r[M >> 2] = r[R >> 2], M = M + 4 | 0, (R = R + 4 | 0) >>> 0 < N >>> 0; )
                      ;
                  if (U = r[P + 8 >> 2] + U | 0, (0 | Z) == (0 | (B = B + 1 | 0)))
                    break;
                }
                xt = r[f >> 2];
              }
              if (!(ut[xt + 4 | 0] < 4 || (0 | (Tt = r[f + 332 >> 2])) < 1))
                for (Rt = r[xt + 864 >> 2], Ut = r[f + 336 >> 2], R = U = 0; ; ) {
                  if (B = r[Ut + j(R, 20) >> 2], r[B + 24 >> 2] && !((0 | (P = r[B + 12 >> 2])) < 1))
                    for (T = (M = r[B + 16 >> 2]) + (P << 2) | 0, l = r[Rt + (R << 2) >> 2], N = (P = U << 2) + r[f + 376 >> 2] | 0, F = P + r[f + 380 >> 2] | 0, V = P + r[f + 384 >> 2] | 0, Z = P + r[f + 388 >> 2] | 0, it = P + r[f + 392 >> 2] | 0, gt = P + r[f + 396 >> 2] | 0, c = r[xt + 1308 >> 2], _ = r[xt + 1304 >> 2], v = r[xt + 1300 >> 2], y = r[xt + 1296 >> 2], S = r[xt + 1292 >> 2], I = r[xt + 1288 >> 2]; P = r[M >> 2] + l << 2, r[N >> 2] = r[P + I >> 2], r[F >> 2] = r[P + S >> 2], r[V >> 2] = r[P + y >> 2], r[Z >> 2] = r[P + v >> 2], r[it >> 2] = r[P + _ >> 2], r[gt >> 2] = r[P + c >> 2], gt = gt + 4 | 0, it = it + 4 | 0, Z = Z + 4 | 0, V = V + 4 | 0, F = F + 4 | 0, N = N + 4 | 0, (M = M + 4 | 0) >>> 0 < T >>> 0; )
                      ;
                  if (U = r[B + 8 >> 2] + U | 0, (0 | Tt) == (0 | (R = R + 1 | 0)))
                    break;
                }
            }(h), function(f) {
              var T, P = 0, l = 0, c = 0, _ = 0, v = 0, y = 0, S = 0, I = 0, P = f + 340 | 0;
              if (ht[r[1807]](
                P,
                r[f + 364 >> 2],
                r[f + 448 >> 2],
                r[f + 424 >> 2]
              ), ht[r[1808]](
                P,
                r[f + 368 >> 2],
                r[f + 440 >> 2],
                r[f + 424 >> 2]
              ), ht[r[1809]](
                P,
                r[f + 372 >> 2],
                r[f + 444 >> 2],
                r[r[f >> 2] + 892 >> 2],
                2,
                r[f + 424 >> 2]
              ), !(ut[r[f >> 2] + 4 | 0] < 4 || (ht[r[1807]](
                P,
                r[f + 376 >> 2],
                r[f + 400 >> 2],
                r[f + 424 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 380 >> 2],
                r[f + 404 >> 2],
                r[f + 424 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 384 >> 2],
                r[f + 408 >> 2],
                r[f + 424 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 388 >> 2],
                r[f + 412 >> 2],
                r[f + 424 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 392 >> 2],
                r[f + 416 >> 2],
                r[f + 424 >> 2]
              ), ht[r[1807]](
                P,
                r[f + 396 >> 2],
                r[f + 420 >> 2],
                r[f + 424 >> 2]
              ), (0 | (y = r[f + 332 >> 2])) < 1))) {
                for (S = r[f + 408 >> 2], I = r[f + 404 >> 2], T = r[f + 400 >> 2], l = r[f + 452 >> 2], P = 0; r[(c = _ << 2) + l >> 2] = r[(v = P << 2) + T >> 2], r[l + (4 | c) >> 2] = r[v + I >> 2], r[l + (8 | c) >> 2] = r[v + S >> 2], _ = _ + 4 | 0, (0 | y) != (0 | (P = P + 1 | 0)); )
                  ;
                for (l = r[f + 456 >> 2], v = r[f + 420 >> 2], S = r[f + 416 >> 2], I = r[f + 412 >> 2], P = f = 0; r[(_ = f << 2) + l >> 2] = r[(c = P << 2) + I >> 2], r[l + (4 | _) >> 2] = r[c + S >> 2], r[l + (8 | _) >> 2] = r[c + v >> 2], f = f + 4 | 0, (0 | y) != (0 | (P = P + 1 | 0)); )
                  ;
              }
            }(h), function(f) {
              var T, l, c, _, v, y, S, I = 0, P = 0, M = 0, R = 0, N = 0;
              if (1 <= (0 | (l = r[f + 500 >> 2])))
                for (_ = r[f + 504 >> 2], c = r[f >> 2], v = r[c + 1252 >> 2]; ; ) {
                  if (T = r[j(R, 24) + _ >> 2], (r[T + 28 >> 2] || r[T + 24 >> 2]) && (r[(I = R << 2) + r[f + 524 >> 2] >> 2] = r[T + 12 >> 2], r[T + 24 >> 2]) && !((0 | (M = r[T + 12 >> 2])) < 1))
                    for (M = (P = r[T + 16 >> 2]) + (M << 2) | 0, y = r[I + v >> 2], I = r[f + 532 >> 2] + (N << 2) | 0, S = r[c + 1284 >> 2]; r[I >> 2] = r[(r[P >> 2] + y << 2) + S >> 2], I = I + 4 | 0, (P = P + 4 | 0) >>> 0 < M >>> 0; )
                      ;
                  if (r[T + 28 >> 2] && !((0 | (I = r[T + 12 >> 2])) < 1))
                    for (M = (P = r[T + 20 >> 2]) + (I << 2) | 0, I = r[f + 528 >> 2] + (N << 2) | 0; r[I >> 2] = r[P >> 2], I = I + 4 | 0, (P = P + 4 | 0) >>> 0 < M >>> 0; )
                      ;
                  if (N = r[T + 8 >> 2] + N | 0, (0 | l) == (0 | (R = R + 1 | 0)))
                    break;
                }
            }(h), ht[r[1807]](
              h + 508 | 0,
              r[h + 532 >> 2],
              r[h + 536 >> 2],
              0
            ), function(f) {
              var T, l, c, _, v, y, S = b(0), I = 0, P = 0, M = 0, R = 0;
              if (b(0), X = T = X - 16 | 0, M = r[f >> 2], !(ut[M + 4 | 0] < 5 || (0 | (R = r[f + 596 >> 2])) < 1))
                for (_ = (P = r[f + 600 >> 2]) + j(R, 12) | 0, v = r[f + 44 >> 2], R = r[M + 976 >> 2]; ; ) {
                  if (M = (r[P >> 2] << 2) + v | 0, S = b(r[M >> 2]), 1 <= (0 | (I = r[P + 4 >> 2])))
                    for (y = (f = r[P + 8 >> 2]) + j(I, 48) | 0; (I = r[f + 8 >> 2]) && ((l = I + -1 | 0) >>> 0 <= 1 ? (I = r[f + 4 >> 2], c = $[R + (I + r[f + 12 >> 2] << 2) >> 2], S = b(
                      l - 1 ? S + b(
                        $[f + 44 >> 2] * b(c * $[f + 20 >> 2])
                      ) : S + b(
                        $[f + 44 >> 2] * b(
                          b(c * $[f + 20 >> 2]) + b(
                            $[R + (I + r[f + 16 >> 2] << 2) >> 2] * $[f + 24 >> 2]
                          )
                        )
                      )
                    )) : (r[T >> 2] = I, vt(4, 1024, T))), (f = f + 48 | 0) >>> 0 < y >>> 0; )
                      ;
                  if (S = (S = b(S + b(0.0010000000474974513))) < b(0) ? b(0) : b(Ue(S, b(1e3))), f = b(we(S)) < b(2147483648) ? ~~S : -2147483648, r[M >> 2] = f, !((P = P + 12 | 0) >>> 0 < _ >>> 0))
                    break;
                }
              X = 16 + T | 0;
            }(h), function(f) {
              var T, l, c, _, v, y, S, I, P, M = 0, R = 0, N = 0, F = 0, B = 0, U = b(0);
              if (X = T = X - 16 | 0, M = r[f >> 2], !(ut[M + 4 | 0] < 4 || (Ol(
                f,
                r[f + 604 >> 2],
                r[f + 608 >> 2],
                r[M + 984 >> 2],
                r[f + 152 >> 2],
                r[M + 796 >> 2]
              ), R = r[f >> 2], ut[R + 4 | 0] < 5))) {
                if (N = r[f + 608 >> 2], v = r[R + 992 >> 2], y = r[R + 988 >> 2], 1 <= (0 | (M = r[f + 604 >> 2]))) {
                  for (S = j(M, 12) + N | 0, I = r[f + 148 >> 2], l = r[R + 980 >> 2]; ; ) {
                    if (c = (r[N >> 2] << 2) + I | 0, B = r[c >> 2], 1 <= (0 | (F = r[N + 4 >> 2])))
                      for (P = (M = r[N + 8 >> 2]) + j(F, 48) | 0; (F = r[M + 8 >> 2]) && ((_ = F + -1 | 0) >>> 0 <= 1 ? (F = r[M + 4 >> 2], U = $[(F + r[M + 12 >> 2] << 2) + l >> 2], jt(
                        b(
                          _ - 1 ? b(
                            $[M + 44 >> 2] * b(U * $[M + 20 >> 2])
                          ) + (Pt(0, B), Lt()) : b(
                            $[M + 44 >> 2] * b(
                              b(U * $[M + 20 >> 2]) + b(
                                $[(F + r[M + 16 >> 2] << 2) + l >> 2] * $[M + 24 >> 2]
                              )
                            )
                          ) + (Pt(0, B), Lt())
                        )
                      ), B = St[0]) : (r[T >> 2] = F, vt(4, 1024, T))), (M = M + 48 | 0) >>> 0 < P >>> 0; )
                        ;
                    if (Pt(0, B), U = Lt(), $[c >> 2] = U < b(0) ? b(0) : b(Ue(U, b(1))), !((N = N + 12 | 0) >>> 0 < S >>> 0))
                      break;
                  }
                  N = r[f + 608 >> 2], M = r[f + 604 >> 2];
                }
                da(
                  M,
                  N,
                  y,
                  r[R + 1288 >> 2],
                  r[R + 1292 >> 2],
                  r[R + 1296 >> 2],
                  r[f + 156 >> 2]
                ), da(
                  r[f + 604 >> 2],
                  r[f + 608 >> 2],
                  v,
                  r[R + 1300 >> 2],
                  r[R + 1304 >> 2],
                  r[R + 1308 >> 2],
                  r[f + 160 >> 2]
                );
              }
              X = 16 + T | 0;
            }(h), function(f) {
              var T, l = 0, c = 0, _ = 0, v = 0, y = 0, S = b(0), I = 0, P = 0, M = 0, R = 0, N = 0, F = 0, B = 0, U = 0;
              if (X = T = X - 80 | 0, y = r[f >> 2], !(ut[y + 4 | 0] < 5)) {
                if (F = r[y + 1028 >> 2], B = r[y + 1024 >> 2], _ = c = r[f + 616 >> 2], !((0 | (l = r[f + 612 >> 2])) < 1)) {
                  for (P = j(l, 12) + c | 0, M = r[f + 276 >> 2], I = r[y + 1004 >> 2]; ; ) {
                    if (R = M + (r[c >> 2] << 2) | 0, _ = r[R >> 2], 1 <= (0 | (v = r[c + 4 >> 2])))
                      for (U = (l = r[c + 8 >> 2]) + j(v, 48) | 0; (v = r[l + 8 >> 2]) && ((N = v + -1 | 0) >>> 0 <= 1 ? (v = r[l + 4 >> 2], S = $[I + (v + r[l + 12 >> 2] << 2) >> 2], jt(
                        b(
                          N - 1 ? b(
                            $[l + 44 >> 2] * b(S * $[l + 20 >> 2])
                          ) + (Pt(0, _), Lt()) : b(
                            $[l + 44 >> 2] * b(
                              b(S * $[l + 20 >> 2]) + b(
                                $[I + (v + r[l + 16 >> 2] << 2) >> 2] * $[l + 24 >> 2]
                              )
                            )
                          ) + (Pt(0, _), Lt())
                        )
                      ), _ = St[0]) : (r[64 + T >> 2] = v, vt(4, 1024, 64 + T | 0))), (l = l + 48 | 0) >>> 0 < U >>> 0; )
                        ;
                    if (r[R >> 2] = _, !((c = c + 12 | 0) >>> 0 < P >>> 0))
                      break;
                  }
                  if (_ = c = r[f + 616 >> 2], !((0 | (l = r[f + 612 >> 2])) < 1)) {
                    for (P = j(l, 12) + c | 0, M = r[f + 280 >> 2], I = r[r[f >> 2] + 1008 >> 2]; ; ) {
                      if (R = M + (r[c >> 2] << 2) | 0, _ = r[R >> 2], 1 <= (0 | (v = r[c + 4 >> 2])))
                        for (U = (l = r[c + 8 >> 2]) + j(v, 48) | 0; (v = r[l + 8 >> 2]) && ((N = v + -1 | 0) >>> 0 <= 1 ? (v = r[l + 4 >> 2], S = $[I + (v + r[l + 12 >> 2] << 2) >> 2], jt(
                          b(
                            N - 1 ? b(
                              $[l + 44 >> 2] * b(S * $[l + 20 >> 2])
                            ) + (Pt(0, _), Lt()) : b(
                              $[l + 44 >> 2] * b(
                                b(S * $[l + 20 >> 2]) + b(
                                  $[I + (v + r[l + 16 >> 2] << 2) >> 2] * $[l + 24 >> 2]
                                )
                              )
                            ) + (Pt(0, _), Lt())
                          )
                        ), _ = St[0]) : (r[48 + T >> 2] = v, vt(4, 1024, 48 + T | 0))), (l = l + 48 | 0) >>> 0 < U >>> 0; )
                          ;
                      if (r[R >> 2] = _, !((c = c + 12 | 0) >>> 0 < P >>> 0))
                        break;
                    }
                    if (_ = c = r[f + 616 >> 2], !((0 | (l = r[f + 612 >> 2])) < 1)) {
                      for (P = j(l, 12) + c | 0, M = r[f + 268 >> 2], I = r[r[f >> 2] + 996 >> 2]; ; ) {
                        if (R = M + (r[c >> 2] << 2) | 0, _ = r[R >> 2], 1 <= (0 | (v = r[c + 4 >> 2])))
                          for (U = (l = r[c + 8 >> 2]) + j(v, 48) | 0; (v = r[l + 8 >> 2]) && ((N = v + -1 | 0) >>> 0 <= 1 ? (v = r[l + 4 >> 2], S = $[I + (v + r[l + 12 >> 2] << 2) >> 2], jt(
                            b(
                              N - 1 ? b(
                                $[l + 44 >> 2] * b(S * $[l + 20 >> 2])
                              ) + (Pt(0, _), Lt()) : b(
                                $[l + 44 >> 2] * b(
                                  b(
                                    S * $[l + 20 >> 2]
                                  ) + b(
                                    $[I + (v + r[l + 16 >> 2] << 2) >> 2] * $[l + 24 >> 2]
                                  )
                                )
                              ) + (Pt(0, _), Lt())
                            )
                          ), _ = St[0]) : (r[32 + T >> 2] = v, vt(4, 1024, 32 + T | 0))), (l = l + 48 | 0) >>> 0 < U >>> 0; )
                            ;
                        if (Pt(0, _), S = Lt(), $[R >> 2] = S < b(0) ? b(0) : b(Ue(S, b(1))), !((c = c + 12 | 0) >>> 0 < P >>> 0))
                          break;
                      }
                      l = r[f + 612 >> 2], _ = r[f + 616 >> 2];
                    }
                  }
                }
                if (da(
                  l,
                  _,
                  B,
                  r[y + 1288 >> 2],
                  r[y + 1292 >> 2],
                  r[y + 1296 >> 2],
                  r[f + 296 >> 2]
                ), da(
                  r[f + 612 >> 2],
                  r[f + 616 >> 2],
                  F,
                  r[y + 1300 >> 2],
                  r[y + 1304 >> 2],
                  r[y + 1308 >> 2],
                  r[f + 300 >> 2]
                ), !((0 | (l = r[f + 612 >> 2])) < 1)) {
                  for (v = (c = r[f + 616 >> 2]) + j(l, 12) | 0, F = r[f + 284 >> 2], y = r[r[f >> 2] + 1e3 >> 2]; ; ) {
                    if (B = F + (r[c >> 2] << 2) | 0, _ = r[B >> 2], 1 <= (0 | (I = r[c + 4 >> 2])))
                      for (P = (l = r[c + 8 >> 2]) + j(I, 48) | 0; (I = r[l + 8 >> 2]) && ((M = I + -1 | 0) >>> 0 <= 1 ? (I = r[l + 4 >> 2], S = $[y + (I + r[l + 12 >> 2] << 2) >> 2], jt(
                        b(
                          M - 1 ? b(
                            $[l + 44 >> 2] * b(S * $[l + 20 >> 2])
                          ) + (Pt(0, _), Lt()) : b(
                            $[l + 44 >> 2] * b(
                              b(S * $[l + 20 >> 2]) + b(
                                $[y + (I + r[l + 16 >> 2] << 2) >> 2] * $[l + 24 >> 2]
                              )
                            )
                          ) + (Pt(0, _), Lt())
                        )
                      ), _ = St[0]) : (r[16 + T >> 2] = I, vt(4, 1024, 16 + T | 0))), (l = l + 48 | 0) >>> 0 < P >>> 0; )
                        ;
                    if (Pt(0, _), S = Lt(), $[B >> 2] = S < b(-3600) ? b(-3600) : b(Ue(S, b(3600))), !((c = c + 12 | 0) >>> 0 < v >>> 0))
                      break;
                  }
                  if (!((0 | (l = r[f + 612 >> 2])) < 1))
                    for (I = (c = r[f + 616 >> 2]) + j(l, 12) | 0, v = r[f + 272 >> 2], f = r[r[f >> 2] + 1012 >> 2]; ; ) {
                      if (F = v + (r[c >> 2] << 2) | 0, _ = r[F >> 2], 1 <= (0 | (y = r[c + 4 >> 2])))
                        for (B = (l = r[c + 8 >> 2]) + j(y, 48) | 0; (y = r[l + 8 >> 2]) && ((P = y + -1 | 0) >>> 0 <= 1 ? (y = r[l + 4 >> 2], S = $[f + (y + r[l + 12 >> 2] << 2) >> 2], jt(
                          b(
                            P - 1 ? b(
                              $[l + 44 >> 2] * b(S * $[l + 20 >> 2])
                            ) + (Pt(0, _), Lt()) : b(
                              $[l + 44 >> 2] * b(
                                b(S * $[l + 20 >> 2]) + b(
                                  $[f + (y + r[l + 16 >> 2] << 2) >> 2] * $[l + 24 >> 2]
                                )
                              )
                            ) + (Pt(0, _), Lt())
                          )
                        ), _ = St[0]) : (r[T >> 2] = y, vt(4, 1024, T))), (l = l + 48 | 0) >>> 0 < B >>> 0; )
                          ;
                      if (Pt(0, _), S = Lt(), $[F >> 2] = S < b(9999999747378752e-20) ? b(9999999747378752e-20) : b(Ue(S, b(100))), !((c = c + 12 | 0) >>> 0 < I >>> 0))
                        break;
                    }
                }
              }
              X = 80 + T | 0;
            }(h), function(f) {
              var T, l, c, _, v, y = 0, S = 0, I = 0, P = 0, M = b(0), R = 0, N = 0, F = 0, B = 0, U = 0, V = 0;
              if (b(0), X = T = X - 32 | 0, I = r[f >> 2], !(ut[I + 4 | 0] < 4 || (Ol(
                f,
                r[f + 620 >> 2],
                r[f + 624 >> 2],
                r[I + 1040 >> 2],
                r[f + 444 >> 2],
                r[I + 892 >> 2]
              ), R = r[f >> 2], ut[R + 4 | 0] < 5))) {
                if (_ = r[R + 1048 >> 2], v = r[R + 1044 >> 2], I = P = r[f + 624 >> 2], !((0 | (y = r[f + 620 >> 2])) < 1)) {
                  for (U = j(y, 12) + P | 0, V = r[f + 440 >> 2], N = r[R + 1036 >> 2]; ; ) {
                    if (I = V + (r[P >> 2] << 2) | 0, M = b(r[I >> 2]), 1 <= (0 | (S = r[P + 4 >> 2])))
                      for (F = (y = r[P + 8 >> 2]) + j(S, 48) | 0; (S = r[y + 8 >> 2]) && ((B = S + -1 | 0) >>> 0 <= 1 ? (S = r[y + 4 >> 2], l = $[N + (S + r[y + 12 >> 2] << 2) >> 2], M = b(
                        B - 1 ? M + b(
                          $[y + 44 >> 2] * b(l * $[y + 20 >> 2])
                        ) : M + b(
                          $[y + 44 >> 2] * b(
                            b(l * $[y + 20 >> 2]) + b(
                              $[N + (S + r[y + 16 >> 2] << 2) >> 2] * $[y + 24 >> 2]
                            )
                          )
                        )
                      )) : (r[16 + T >> 2] = S, vt(4, 1024, 16 + T | 0))), (y = y + 48 | 0) >>> 0 < F >>> 0; )
                        ;
                    if (M = (M = b(M + b(0.0010000000474974513))) < b(0) ? b(0) : b(Ue(M, b(1e3))), y = b(we(M)) < b(2147483648) ? ~~M : -2147483648, r[I >> 2] = y, !((P = P + 12 | 0) >>> 0 < U >>> 0))
                      break;
                  }
                  if (I = P = r[f + 624 >> 2], !((0 | (y = r[f + 620 >> 2])) < 1)) {
                    for (U = j(y, 12) + P | 0, V = r[f + 448 >> 2], N = r[r[f >> 2] + 1032 >> 2]; ; ) {
                      if (F = V + (r[P >> 2] << 2) | 0, I = r[F >> 2], 1 <= (0 | (S = r[P + 4 >> 2])))
                        for (B = (y = r[P + 8 >> 2]) + j(S, 48) | 0; (S = r[y + 8 >> 2]) && ((c = S + -1 | 0) >>> 0 <= 1 ? (S = r[y + 4 >> 2], M = $[N + (S + r[y + 12 >> 2] << 2) >> 2], jt(
                          b(
                            c - 1 ? b(
                              $[y + 44 >> 2] * b(M * $[y + 20 >> 2])
                            ) + (Pt(0, I), Lt()) : b(
                              $[y + 44 >> 2] * b(
                                b(M * $[y + 20 >> 2]) + b(
                                  $[N + (S + r[y + 16 >> 2] << 2) >> 2] * $[y + 24 >> 2]
                                )
                              )
                            ) + (Pt(0, I), Lt())
                          )
                        ), I = St[0]) : (r[T >> 2] = S, vt(4, 1024, T))), (y = y + 48 | 0) >>> 0 < B >>> 0; )
                          ;
                      if (Pt(0, I), M = Lt(), $[F >> 2] = M < b(0) ? b(0) : b(Ue(M, b(1))), !((P = P + 12 | 0) >>> 0 < U >>> 0))
                        break;
                    }
                    y = r[f + 620 >> 2], I = r[f + 624 >> 2];
                  }
                }
                da(
                  y,
                  I,
                  v,
                  r[R + 1288 >> 2],
                  r[R + 1292 >> 2],
                  r[R + 1296 >> 2],
                  r[f + 452 >> 2]
                ), da(
                  r[f + 620 >> 2],
                  r[f + 624 >> 2],
                  _,
                  r[R + 1300 >> 2],
                  r[R + 1304 >> 2],
                  r[R + 1308 >> 2],
                  r[f + 456 >> 2]
                );
              }
              X = 32 + T | 0;
            }(h), function(f) {
              var T, l, c, _, v, y, S = 0, I = 0, P = 0, M = 0, R = b(0);
              if (X = T = X - 16 | 0, I = r[f >> 2], !(ut[I + 4 | 0] < 5 || (0 | (M = r[f + 628 >> 2])) < 1))
                for (_ = (P = r[f + 632 >> 2]) + j(M, 12) | 0, v = r[f + 536 >> 2], M = r[I + 1284 >> 2]; ; ) {
                  if (l = (r[P >> 2] << 2) + v | 0, I = r[l >> 2], 1 <= (0 | (S = r[P + 4 >> 2])))
                    for (y = (f = r[P + 8 >> 2]) + j(S, 48) | 0; (S = r[f + 8 >> 2]) && ((c = S + -1 | 0) >>> 0 <= 1 ? (S = r[f + 4 >> 2], R = $[M + (S + r[f + 12 >> 2] << 2) >> 2], jt(
                      b(
                        c - 1 ? b(
                          $[f + 44 >> 2] * b(R * $[f + 20 >> 2])
                        ) + (Pt(0, I), Lt()) : b(
                          $[f + 44 >> 2] * b(
                            b(R * $[f + 20 >> 2]) + b(
                              $[M + (S + r[f + 16 >> 2] << 2) >> 2] * $[f + 24 >> 2]
                            )
                          )
                        ) + (Pt(0, I), Lt())
                      )
                    ), I = St[0]) : (r[T >> 2] = S, vt(4, 1024, T))), (f = f + 48 | 0) >>> 0 < y >>> 0; )
                      ;
                  if (Pt(0, I), R = Lt(), $[l >> 2] = R < b(0) ? b(0) : b(Ue(R, b(1))), !((P = P + 12 | 0) >>> 0 < _ >>> 0))
                    break;
                }
              X = 16 + T | 0;
            }(h), function(f) {
              var T, l, c = 0, _ = 0, v = 0, y = b(0), S = 0;
              if (1 <= (0 | (c = r[f + 4 >> 2])))
                for (l = (_ = r[f + 8 >> 2]) + j(c, 12) | 0, c = r[f + 40 >> 2], v = r[f + 52 >> 2], f = T = r[f + 48 >> 2]; r[c >> 2] && (y = $[v >> 2], $[f >> 2] = y, (0 | (S = r[_ + 4 >> 2])) != -1) && ($[f >> 2] = y * $[(S << 2) + T >> 2]), f = f + 4 | 0, v = v + 4 | 0, c = c + 4 | 0, (_ = _ + 12 | 0) >>> 0 < l >>> 0; )
                  ;
            }(h), function(f) {
              var T, l = 0, c = 0, _ = 0;
              if (1 <= (0 | (T = r[f + 304 >> 2])))
                for (l = r[f + 308 >> 2], c = r[f + 312 >> 2]; r[c >> 2] && ht[r[l + 20 >> 2]](f, _), c = c + 4 | 0, l = l + 32 | 0, (0 | T) != (0 | (_ = _ + 1 | 0)); )
                  ;
            }(h), function(f) {
              var T, l, c, _, v, y = 0, S = 0, I = (b(0), b(0), 0), P = 0, M = 0, R = (b(0), 0), N = 0, F = 0;
              if (1 <= (0 | (y = r[f + 332 >> 2])))
                for (N = (S = r[f + 336 >> 2]) + j(y, 20) | 0, F = r[f + 308 >> 2], R = r[f + 316 >> 2], v = r[f + 48 >> 2], y = r[f + 448 >> 2], I = r[f + 444 >> 2], M = r[f + 424 >> 2]; r[M >> 2] && ((0 | (P = r[S + 4 >> 2])) != -1 && ($[y >> 2] = $[(P << 2) + v >> 2] * $[y >> 2]), (0 | (P = r[S + 8 >> 2])) != -1) && ($[y >> 2] = $[R + (P << 2) >> 2] * $[y >> 2], _ = r[I >> 2], ht[r[24 + (F + (P << 5) | 0) >> 2]](
                  f,
                  P,
                  _,
                  _,
                  r[S + 16 >> 2]
                )), I = I + 4 | 0, y = y + 4 | 0, M = M + 4 | 0, (S = S + 20 | 0) >>> 0 < N >>> 0; )
                  ;
              if (!(ut[r[f >> 2] + 4 | 0] < 4 || (0 | (y = r[f + 332 >> 2])) < 1))
                for (P = (I = r[f + 336 >> 2]) + j(y, 20) | 0, N = r[f + 328 >> 2], F = r[f + 324 >> 2], S = r[f + 452 >> 2], y = r[f + 456 >> 2], M = r[f + 424 >> 2]; r[M >> 2] && (0 | (f = r[I + 8 >> 2])) != -1 && (f = (R = f << 4) + F | 0, T = b($[S >> 2] * $[f >> 2]), $[S >> 2] = T, l = b($[S + 4 >> 2] * $[f + 4 >> 2]), $[S + 4 >> 2] = l, c = $[f + 8 >> 2], r[S + 12 >> 2] = 1065353216, $[S + 4 >> 2] = l < b(0) ? b(0) : b(Ue(l, b(1))), $[S >> 2] = T < b(0) ? b(0) : b(Ue(T, b(1))), T = b(c * $[S + 8 >> 2]), $[S + 8 >> 2] = T < b(0) ? b(0) : b(Ue(T, b(1))), T = $[y >> 2], l = $[(f = N + R | 0) >> 2], T = b(b(T + l) - b(T * l)), $[y >> 2] = T, l = $[y + 4 >> 2], c = $[f + 4 >> 2], l = b(b(l + c) - b(l * c)), $[y + 4 >> 2] = l, c = $[f + 8 >> 2], r[y + 12 >> 2] = 1065353216, $[y + 4 >> 2] = l < b(0) ? b(0) : b(Ue(l, b(1))), $[y >> 2] = T < b(0) ? b(0) : b(Ue(T, b(1))), T = $[y + 8 >> 2], T = b(b(c + T) - b(T * c)), $[y + 8 >> 2] = T < b(0) ? b(0) : b(Ue(T, b(1)))), y = y + 16 | 0, S = S + 16 | 0, M = M + 4 | 0, (I = I + 20 | 0) >>> 0 < P >>> 0; )
                  ;
            }(h), function(f) {
              var T, l, c, _, v, y, S, I, P, M, R, N, F, B, U, V, Z, it, gt, Tt, Rt = 0;
              if (b(0), b(0), b(0), b(0), b(0), b(0), b(0), 1 <= (0 | (I = r[f + 500 >> 2])))
                for (gt = r[f + 536 >> 2], P = r[f + 444 >> 2], Tt = r[f + 504 >> 2]; ; ) {
                  if (f = j(Rt, 24) + Tt | 0, 0 < (0 | (M = r[f + 12 >> 2])))
                    for (c = $[(Rt << 2) + gt >> 2], R = r[f + 20 >> 2], N = r[f + 16 >> 2], F = r[(r[f + 4 >> 2] << 2) + P >> 2], B = r[(r[f + 8 >> 2] << 2) + P >> 2], f = 0; U = $[((T = 1 | f) << 2) + N >> 2], l = ni[(f << 1) + R >> 1] << 3 & 262136, _ = $[(V = (4 | l) + F | 0) >> 2], T = ni[(T << 1) + R >> 1] << 3 & 262136, v = $[(Z = (4 | T) + B | 0) >> 2], y = $[(l = l + F | 0) >> 2], it = $[(f << 2) + N >> 2], S = $[(T = T + B | 0) >> 2], $[l >> 2] = y + b(c * b(it * b(S - y))), $[V >> 2] = _ + b(c * b(it * b(v - _))), $[T >> 2] = S + b(c * b(U * b(y - S))), $[Z >> 2] = v + b(c * b(U * b(_ - v))), (0 | (f = f + 2 | 0)) < (0 | M); )
                      ;
                  if (!((0 | (Rt = Rt + 1 | 0)) < (0 | I)))
                    break;
                }
            }(h), ht[r[1810]](h), function(f) {
              var T, l, c, _, v = 0, y = 0, S = 0, I = 0, P = 0, M = 0, R = 0, N = 0, F = 0, B = 0, U = 0;
              if (!((0 | (T = r[f + 480 >> 2])) < 1)) {
                for (I = (l = r[f + 484 >> 2]) + j(T, 28) | 0, R = r[f + 424 >> 2], N = r[f + 40 >> 2], P = r[f + 44 >> 2], U = r[f + 440 >> 2], v = l; ; ) {
                  if (1 <= (0 | (M = r[v + 4 >> 2])))
                    for (B = v + 20 | 0, F = r[v + 12 >> 2], y = 0; c = r[4 + (S = F + (y << 4) | 0) >> 2] << 2, S = r[(_ = S) >> 2] == 1, r[_ + 12 >> 2] = r[(r[(S ? N : R) + c >> 2] ? (S ? P : U) + c | 0 : B) >> 2], (0 | (y = y + 1 | 0)) < (0 | M); )
                      ;
                  if (!((v = v + 28 | 0) >>> 0 < I >>> 0))
                    break;
                }
                if (!((0 | T) < 1))
                  for (U = r[f + 436 >> 2], N = 0; ; ) {
                    if (I = j(N, 28) + l | 0, !(r[(R = I) + 24 >> 2] < 1)) {
                      for (S = r[f + 488 >> 2], y = 0; r[S + (y << 2) >> 2] = -1, (0 | (y = y + 1 | 0)) < (0 | (v = r[R + 24 >> 2])); )
                        ;
                      if (!((0 | v) < 1))
                        for (v = r[f + 496 >> 2], y = 0; r[v + (y << 2) >> 2] = -1, (0 | (y = y + 1 | 0)) < r[R + 24 >> 2]; )
                          ;
                    }
                    if (!(r[I + 4 >> 2] < 1)) {
                      for (P = r[f + 492 >> 2], y = 0; r[P + (y << 2) >> 2] = -1, (0 | (y = y + 1 | 0)) < (0 | (v = r[I + 4 >> 2])); )
                        ;
                      if (!((0 | v) < 1))
                        for (M = r[I + 12 >> 2], B = r[f + 496 >> 2], y = 0; F = r[12 + (M + (y << 4) | 0) >> 2] - r[I + 20 >> 2] << 2, v = (0 | (v = r[(S = F + B | 0) >> 2])) == -1 ? F + r[f + 488 >> 2] | 0 : P + (v << 2) | 0, r[v >> 2] = y, (0 | (y = (r[S >> 2] = y) + 1 | 0)) < r[I + 4 >> 2]; )
                          ;
                    }
                    if (1 <= (0 | (v = r[R + 24 >> 2])))
                      for (P = r[I + 8 >> 2], B = r[f + 488 >> 2], M = 0; ; ) {
                        if ((0 | (y = r[B + (M << 2) >> 2])) != -1) {
                          for (F = r[f + 492 >> 2], S = r[I + 12 >> 2]; P = (v = r[(v = S + (y << 4) | 0) >> 2] == 1 ? (v = j(r[v + 8 >> 2], 28) + l | 0, r[v + 8 >> 2] = P, r[v >> 2]) : (r[U + (r[v + 4 >> 2] << 2) >> 2] = P, 1)) + P | 0, (0 | y) < (0 | (v = r[F + (y << 2) >> 2])) && (0 | (y = v)) != -1; )
                            ;
                          v = r[R + 24 >> 2];
                        }
                        if (!((0 | (M = M + 1 | 0)) < (0 | v)))
                          break;
                      }
                    if ((0 | T) == (0 | (N = N + 1 | 0)))
                      break;
                  }
              }
            }(h), function(f) {
              var T = 0, l = 0, c = 0, _ = 0, v = 0, y = b(0), S = 0, I = 0, P = r[f + 332 >> 2];
              if (r[f + 644 >> 2]) {
                if (!(((r[f + 428 >> 2] = 0) | P) < 1))
                  for (; T = 126, S = r[f + 432 >> 2] + c | 0, !r[(l = c << 2) + r[f + 424 >> 2] >> 2] | $[l + r[f + 448 >> 2] >> 2] == b(0) || (T = 127), st[0 | S] = T, (0 | P) != (0 | (c = c + 1 | 0)); )
                    ;
              } else if (r[f + 428 >> 2]) {
                if (T = ut[r[f >> 2] + 4 | 0], !(((r[f + 428 >> 2] = 0) | P) < 1))
                  if (4 <= T >>> 0)
                    for (; y = $[(T = c << 2) + r[f + 448 >> 2] >> 2], _ = r[T + r[f + 424 >> 2] >> 2], l = y != b(0) & (0 | _) != 0, S = r[f + 432 >> 2] + c | 0, l = (0 | l) == (1 & st[0 | S]) ? l : 2 | l, l = y != $[T + r[f + 468 >> 2] >> 2] ? 4 | l : l, l = r[T + r[f + 440 >> 2] >> 2] == r[T + r[f + 464 >> 2] >> 2] ? l : 8 | l, T = r[T + r[f + 436 >> 2] >> 2] == r[T + r[f + 460 >> 2] >> 2] ? l : 16 | l, T = _ ? 32 | T : T, _ = (l = I << 2) + r[f + 452 >> 2] | 0, v = l + r[f + 472 >> 2] | 0, ($[_ >> 2] != $[v >> 2] | $[_ + 4 >> 2] != $[v + 4 >> 2] | ($[_ + 8 >> 2] != $[v + 8 >> 2] | $[_ + 12 >> 2] != $[v + 12 >> 2]) || (_ = l + r[f + 456 >> 2] | 0, l = l + r[f + 476 >> 2] | 0, $[_ >> 2] != $[l >> 2] | $[_ + 4 >> 2] != $[l + 4 >> 2] | $[_ + 8 >> 2] != $[l + 8 >> 2]) || $[_ + 12 >> 2] != $[l + 12 >> 2]) && (T |= 64), st[0 | S] = T, I = I + 4 | 0, (0 | P) != (0 | (c = c + 1 | 0)); )
                      ;
                  else
                    for (; y = $[(T = c << 2) + r[f + 448 >> 2] >> 2], _ = r[T + r[f + 424 >> 2] >> 2], l = y != b(0) & (0 | _) != 0, v = r[f + 432 >> 2] + c | 0, l = (0 | l) == (1 & st[0 | v]) ? l : 2 | l, l = y != $[T + r[f + 468 >> 2] >> 2] ? 4 | l : l, l = r[T + r[f + 440 >> 2] >> 2] == r[T + r[f + 464 >> 2] >> 2] ? l : 8 | l, T = r[T + r[f + 436 >> 2] >> 2] == r[T + r[f + 460 >> 2] >> 2] ? l : 16 | l, st[0 | v] = _ ? 32 | T : T, (0 | P) != (0 | (c = c + 1 | 0)); )
                      ;
              } else if (!((0 | P) < 1))
                for (; !r[(T = c << 2) + r[f + 424 >> 2] >> 2] | $[T + r[f + 448 >> 2] >> 2] == b(0) ? (T = r[f + 432 >> 2] + c | 0, st[0 | T] = 254 & ut[0 | T]) : (T = r[f + 432 >> 2] + c | 0, st[0 | T] = 1 | ut[0 | T]), (0 | P) != (0 | (c = c + 1 | 0)); )
                  ;
            }(h), r[h + 644 >> 2] = 0;
          }
          function Ol(h, d, E, p, f, T) {
            var l, c, _, v, y, S, I, P = 0, M = 0, R = 0, N = 0;
            if (X = S = X - 32 | 0, 1 <= (0 | d))
              for (y = j(d, 12) + E | 0; ; ) {
                if (!((0 | (P = r[E + 4 >> 2])) < 1))
                  if (l = (d = r[E + 8 >> 2]) + j(P, 48) | 0, P = r[E >> 2] << 2, 1 <= (0 | (I = r[P + T >> 2])))
                    for (I <<= 1, c = r[r[h >> 2] + 1052 >> 2], _ = r[f + P >> 2]; ; ) {
                      r:
                        if (P = r[d + 8 >> 2]) {
                          t: {
                            if ((M = P + -1 | 0) >>> 0 <= 1) {
                              if (P = (r[d + 4 >> 2] << 2) + p | 0, N = (r[P + (r[d + 12 >> 2] << 2) >> 2] << 2) + c | 0, M - 1)
                                break t;
                              for (R = (r[P + (r[d + 16 >> 2] << 2) >> 2] << 2) + c | 0, P = 0; $[(v = (M = P << 2) + _ | 0) >> 2] = $[v >> 2] + b(
                                $[d + 44 >> 2] * b(
                                  b(
                                    $[M + N >> 2] * $[d + 20 >> 2]
                                  ) + b(
                                    $[M + R >> 2] * $[d + 24 >> 2]
                                  )
                                )
                              ), (0 | I) != (0 | (P = P + 1 | 0)); )
                                ;
                              break r;
                            }
                            r[S >> 2] = P, vt(4, 1024, S);
                            break r;
                          }
                          for (P = 0; $[(R = (M = P << 2) + _ | 0) >> 2] = $[R >> 2] + b(
                            $[d + 44 >> 2] * b($[M + N >> 2] * $[d + 20 >> 2])
                          ), (0 | I) != (0 | (P = P + 1 | 0)); )
                            ;
                        }
                      if (!((d = d + 48 | 0) >>> 0 < l >>> 0))
                        break;
                    }
                  else
                    for (; 3 <= (P = r[d + 8 >> 2]) >>> 0 && (r[16 + S >> 2] = P, vt(4, 1024, 16 + S | 0)), (d = d + 48 | 0) >>> 0 < l >>> 0; )
                      ;
                if (!((E = E + 12 | 0) >>> 0 < y >>> 0))
                  break;
              }
            X = 32 + S | 0;
          }
          function $l(h, d, E) {
            var p;
            d |= 0, E |= 0, X = p = X + -64 | 0;
            r: {
              if (h |= 0)
                if (d)
                  if ((d + 15 & -16) != (0 | d))
                    r[52 + p >> 2] = 1522, r[48 + p >> 2] = 2361, vt(4, 1294, 48 + p | 0);
                  else {
                    if (d = function(f, T, l) {
                      var c, _ = 0, v = 0, y = 0, S = 0, I = 0, P = 0, M = 0, R = 0, N = 0, F = 0, B = 0, U = 0, V = 0, Z = b(0), it = 0, gt = 0, Tt = 0, Rt = 0, Ut = 0;
                      if (Gr(16 + (X = c = X - 576 | 0) | 0, 0, 560), Ul(f, 16 + c | 0, 12 + c | 0), (S = r[12 + c >> 2]) >>> 0 <= l >>> 0) {
                        if (_ = (v = Gr(T, 0, S)) + r[16 + c >> 2] | 0, r[_ + 8 >> 2] = v + r[20 + c >> 2], r[_ + 40 >> 2] = v + r[24 + c >> 2], r[_ + 44 >> 2] = v + r[28 + c >> 2], r[_ + 48 >> 2] = v + r[32 + c >> 2], r[_ + 52 >> 2] = v + r[36 + c >> 2], r[_ + 16 >> 2] = v + r[40 + c >> 2], r[_ + 24 >> 2] = v + r[44 + c >> 2], r[_ + 28 >> 2] = v + r[48 + c >> 2], r[_ + 32 >> 2] = v + r[52 + c >> 2], r[_ + 36 >> 2] = v + r[56 + c >> 2], T = r[f + 704 >> 2], r[_ + 308 >> 2] = v + r[60 + c >> 2], r[_ + 312 >> 2] = v + r[64 + c >> 2], r[_ + 316 >> 2] = v + r[68 + c >> 2], r[_ + 320 >> 2] = v + r[72 + c >> 2], r[_ + 324 >> 2] = v + r[76 + c >> 2], r[_ + 328 >> 2] = v + r[80 + c >> 2], r[_ + 60 >> 2] = v + r[84 + c >> 2], r[_ + 144 >> 2] = v + r[88 + c >> 2], r[_ + 148 >> 2] = v + r[92 + c >> 2], l = v + r[96 + c >> 2] | 0, r[_ + 152 >> 2] = l, !((0 | (S = r[T + 8 >> 2])) < 1) && (T = v + r[100 + c >> 2] | 0, r[l >> 2] = T, (0 | S) != 1))
                          for (l = 1; T = (15 + (r[r[f + 796 >> 2] + (y << 2) >> 2] << 3) & -16) + T | 0, r[r[_ + 152 >> 2] + (l << 2) >> 2] = T, (0 | S) != (0 | (l = (y = l) + 1 | 0)); )
                            ;
                        if (r[_ + 156 >> 2] = v + r[104 + c >> 2], r[_ + 160 >> 2] = v + r[108 + c >> 2], r[_ + 68 >> 2] = v + r[112 + c >> 2], r[_ + 76 >> 2] = v + r[116 + c >> 2], r[_ + 80 >> 2] = v + r[120 + c >> 2], r[_ + 84 >> 2] = v + r[124 + c >> 2], r[_ + 88 >> 2] = v + r[128 + c >> 2], r[_ + 92 >> 2] = v + r[132 + c >> 2], r[_ + 96 >> 2] = v + r[136 + c >> 2], r[_ + 100 >> 2] = v + r[140 + c >> 2], r[_ + 104 >> 2] = v + r[144 + c >> 2], r[_ + 108 >> 2] = v + r[148 + c >> 2], r[_ + 112 >> 2] = v + r[152 + c >> 2], r[_ + 116 >> 2] = v + r[156 + c >> 2], r[_ + 120 >> 2] = v + r[160 + c >> 2], r[_ + 124 >> 2] = v + r[164 + c >> 2], r[_ + 128 >> 2] = v + r[168 + c >> 2], r[_ + 132 >> 2] = v + r[172 + c >> 2], r[_ + 136 >> 2] = v + r[176 + c >> 2], r[_ + 140 >> 2] = v + r[180 + c >> 2], r[_ + 168 >> 2] = v + r[184 + c >> 2], r[_ + 264 >> 2] = v + r[188 + c >> 2], r[_ + 268 >> 2] = v + r[192 + c >> 2], r[_ + 272 >> 2] = v + r[196 + c >> 2], r[_ + 276 >> 2] = v + r[200 + c >> 2], r[_ + 280 >> 2] = v + r[204 + c >> 2], r[_ + 284 >> 2] = v + r[208 + c >> 2], r[_ + 288 >> 2] = v + r[212 + c >> 2], r[_ + 292 >> 2] = v + r[216 + c >> 2], r[_ + 296 >> 2] = v + r[220 + c >> 2], r[_ + 300 >> 2] = v + r[224 + c >> 2], r[_ + 176 >> 2] = v + r[228 + c >> 2], r[_ + 184 >> 2] = v + r[232 + c >> 2], r[_ + 188 >> 2] = v + r[236 + c >> 2], r[_ + 192 >> 2] = v + r[240 + c >> 2], r[_ + 196 >> 2] = v + r[244 + c >> 2], r[_ + 200 >> 2] = v + r[248 + c >> 2], r[_ + 204 >> 2] = v + r[252 + c >> 2], r[_ + 208 >> 2] = v + r[256 + c >> 2], r[_ + 212 >> 2] = v + r[260 + c >> 2], r[_ + 216 >> 2] = v + r[264 + c >> 2], r[_ + 220 >> 2] = v + r[268 + c >> 2], r[_ + 224 >> 2] = v + r[272 + c >> 2], r[_ + 228 >> 2] = v + r[276 + c >> 2], r[_ + 232 >> 2] = v + r[280 + c >> 2], r[_ + 236 >> 2] = v + r[284 + c >> 2], r[_ + 240 >> 2] = v + r[288 + c >> 2], r[_ + 244 >> 2] = v + r[292 + c >> 2], r[_ + 248 >> 2] = v + r[296 + c >> 2], r[_ + 252 >> 2] = v + r[300 + c >> 2], r[_ + 256 >> 2] = v + r[304 + c >> 2], r[_ + 260 >> 2] = v + r[308 + c >> 2], T = r[f + 704 >> 2], r[_ + 336 >> 2] = v + r[312 + c >> 2], r[_ + 424 >> 2] = v + r[316 + c >> 2], r[_ + 432 >> 2] = v + r[320 + c >> 2], r[_ + 436 >> 2] = v + r[324 + c >> 2], r[_ + 440 >> 2] = v + r[328 + c >> 2], l = v + r[332 + c >> 2] | 0, r[_ + 444 >> 2] = l, !((0 | (S = r[T + 16 >> 2])) < 1) && (y = v + r[336 + c >> 2] | 0, r[l >> 2] = y, (l = 1) != (0 | S)))
                          for (T = 0; y = (15 + (r[r[f + 892 >> 2] + (T << 2) >> 2] << 3) & -16) + y | 0, r[r[_ + 444 >> 2] + (l << 2) >> 2] = y, (0 | S) != (0 | (l = (T = l) + 1 | 0)); )
                            ;
                        if (r[_ + 448 >> 2] = v + r[340 + c >> 2], r[_ + 452 >> 2] = v + r[344 + c >> 2], r[_ + 456 >> 2] = v + r[348 + c >> 2], r[_ + 460 >> 2] = v + r[352 + c >> 2], r[_ + 464 >> 2] = v + r[356 + c >> 2], r[_ + 468 >> 2] = v + r[360 + c >> 2], r[_ + 472 >> 2] = v + r[364 + c >> 2], r[_ + 476 >> 2] = v + r[368 + c >> 2], r[_ + 344 >> 2] = v + r[372 + c >> 2], r[_ + 352 >> 2] = v + r[376 + c >> 2], r[_ + 356 >> 2] = v + r[380 + c >> 2], r[_ + 360 >> 2] = v + r[384 + c >> 2], r[_ + 364 >> 2] = v + r[388 + c >> 2], r[_ + 368 >> 2] = v + r[392 + c >> 2], r[_ + 372 >> 2] = v + r[396 + c >> 2], r[_ + 376 >> 2] = v + r[400 + c >> 2], r[_ + 380 >> 2] = v + r[404 + c >> 2], r[_ + 384 >> 2] = v + r[408 + c >> 2], r[_ + 388 >> 2] = v + r[412 + c >> 2], r[_ + 392 >> 2] = v + r[416 + c >> 2], r[_ + 396 >> 2] = v + r[420 + c >> 2], r[_ + 400 >> 2] = v + r[424 + c >> 2], r[_ + 404 >> 2] = v + r[428 + c >> 2], r[_ + 408 >> 2] = v + r[432 + c >> 2], r[_ + 412 >> 2] = v + r[436 + c >> 2], r[_ + 416 >> 2] = v + r[440 + c >> 2], r[_ + 420 >> 2] = v + r[444 + c >> 2], T = r[448 + c >> 2], l = r[452 + c >> 2], r[_ + 552 >> 2] = v + r[456 + c >> 2], r[_ + 548 >> 2] = l + v, r[_ + 544 >> 2] = T + v, r[_ + 560 >> 2] = v + r[460 + c >> 2], T = r[f + 704 >> 2], M = v + r[464 + c >> 2] | 0, r[_ + 568 >> 2] = M, 1 <= (0 | (P = r[T + 48 >> 2])))
                          for (y = v + r[468 + c >> 2] | 0, T = v + r[472 + c >> 2] | 0, I = v + r[476 + c >> 2] | 0, R = r[f + 1072 >> 2], l = 0; S = M + j(l, 36) | 0, r[S + 20 >> 2] = I, r[S + 16 >> 2] = T, r[S >> 2] = y, y = ((S = r[R + (l << 2) >> 2]) << 2) + y | 0, I = (S = 1 << S << 2) + I | 0, T = T + S | 0, (0 | P) != (0 | (l = l + 1 | 0)); )
                            ;
                        if (T = r[f + 704 >> 2], S = v + r[516 + c >> 2] | 0, r[_ + 484 >> 2] = S, 1 <= (0 | (T = r[T + 72 >> 2])))
                          for (y = v + r[520 + c >> 2] | 0, I = r[f + 1212 >> 2], l = 0; r[12 + (S + j(l, 28) | 0) >> 2] = y, y = (r[I + (l << 2) >> 2] << 4) + y | 0, (0 | T) != (0 | (l = l + 1 | 0)); )
                            ;
                        r[_ + 488 >> 2] = v + r[524 + c >> 2], r[_ + 492 >> 2] = v + r[528 + c >> 2], r[_ + 496 >> 2] = v + r[532 + c >> 2], r[_ + 504 >> 2] = v + r[536 + c >> 2], r[_ + 536 >> 2] = v + r[540 + c >> 2], r[_ + 512 >> 2] = v + r[544 + c >> 2], r[_ + 520 >> 2] = v + r[548 + c >> 2], r[_ + 524 >> 2] = v + r[552 + c >> 2], r[_ + 528 >> 2] = v + r[556 + c >> 2], r[_ + 532 >> 2] = v + r[560 + c >> 2];
                        t: {
                          if (4 <= (P = ut[f + 4 | 0]) >>> 0) {
                            if (r[_ + 576 >> 2] = v + r[480 + c >> 2], r[_ + 584 >> 2] = v + r[484 + c >> 2], T = r[f + 704 >> 2], l = r[492 + c >> 2], S = v + r[488 + c >> 2] | 0, r[_ + 592 >> 2] = S, 1 <= (0 | (T = r[T + 104 >> 2])))
                              for (y = l + v | 0, I = r[f + 1104 >> 2], l = 0; r[40 + (S + j(l, 48) | 0) >> 2] = y, y = (r[I + (l << 2) >> 2] << 2) + y | 0, (0 | T) != (0 | (l = l + 1 | 0)); )
                                ;
                            r[_ + 608 >> 2] = v + r[500 + c >> 2], r[_ + 624 >> 2] = v + r[508 + c >> 2];
                          } else {
                            if (T = r[572 + c >> 2], l = r[568 + c >> 2], r[_ + 636 >> 2] = v + r[564 + c >> 2], r[_ + 640 >> 2] = l + v, r[r[f + 704 >> 2] + 20 >> 2] < 1)
                              break t;
                            for (S = T + v | 0, M = 0; ; ) {
                              e: {
                                if ((0 | (y = r[(T = M << 2) + r[f + 952 >> 2] >> 2])) <= 0)
                                  T = T + r[_ + 636 >> 2] | 0;
                                else {
                                  for (I = y + (l = r[T + r[f + 948 >> 2] >> 2]) | 0, R = r[f + 1060 >> 2], y = 0; y = r[R + (l << 2) >> 2] + y | 0, (0 | (l = l + 1 | 0)) < (0 | I); )
                                    ;
                                  if (T = T + r[_ + 636 >> 2] | 0, l = S, y)
                                    break e;
                                }
                                l = y = 0;
                              }
                              if (r[T >> 2] = l, S = (y << 2) + S | 0, !((0 | (M = M + 1 | 0)) < r[r[f + 704 >> 2] + 20 >> 2]))
                                break;
                            }
                          }
                          P >>> 0 < 5 || (r[_ + 600 >> 2] = v + r[496 + c >> 2], r[_ + 616 >> 2] = v + r[504 + c >> 2], r[_ + 632 >> 2] = v + r[512 + c >> 2]);
                        }
                        r[_ + 644 >> 2] = 1, r[_ >> 2] = f, r[_ + 648 >> 2] = 1 & st[r[f + 708 >> 2] + 20 | 0], v = r[f + 704 >> 2], M = r[v + 20 >> 2];
                        t:
                          if (!((0 | (r[_ + 540 >> 2] = M)) < 1)) {
                            if (T = M + -1 | 0, R = r[f + 952 >> 2], N = r[f + 940 >> 2], F = r[f + 932 >> 2], B = r[f + 936 >> 2], U = r[f + 924 >> 2], V = r[f + 928 >> 2], it = r[_ + 552 >> 2], Tt = r[_ + 544 >> 2], P >>> 0 < 4) {
                              for (; ; )
                                if (l = Tt + j(T, 52) | 0, y = (S = T << 2) + V | (r[l >> 2] = 0), r[l + 4 >> 2] = r[y >> 2], r[l + 8 >> 2] = r[(I = S + U | 0) >> 2], $[l + 12 >> 2] = $[I >> 2] - $[y >> 2], r[l + 16 >> 2] = r[S + B >> 2], r[l + 44 >> 2] = r[(y = S + F | 0) >> 2], Z = Nl(b(r[S + N >> 2])), $[l + 20 >> 2] = Z, $[l + 24 >> 2] = Z * b(1.5), gt = r[S + R >> 2], I = 0, I = (r[l + 32 >> 2] = gt) ? r[_ + 560 >> 2] + j(
                                  r[S + r[f + 948 >> 2] >> 2],
                                  28
                                ) | 0 : I, r[l + 48 >> 2] = 1, r[l + 28 >> 2] = I, r[S + it >> 2] = r[y >> 2], l = 0 < (0 | T), T = T + -1 | 0, !l)
                                  break t;
                            }
                            for (gt = r[f + 960 >> 2], Ut = r[f + 944 >> 2]; l = Tt + j(T, 52) | 0, r[l >> 2] = r[(y = T << 2) + Ut >> 2], r[l + 4 >> 2] = r[(S = y + V | 0) >> 2], r[l + 8 >> 2] = r[(I = y + U | 0) >> 2], $[l + 12 >> 2] = $[I >> 2] - $[S >> 2], r[l + 16 >> 2] = r[y + B >> 2], r[l + 44 >> 2] = r[(Rt = y + F | 0) >> 2], Z = Nl(b(r[y + N >> 2])), $[l + 20 >> 2] = Z, $[l + 24 >> 2] = Z * b(1.5), I = r[y + R >> 2], r[l + 32 >> 2] = I, r[l + 28 >> 2] = I ? r[_ + 560 >> 2] + j(
                              r[y + r[f + 948 >> 2] >> 2],
                              28
                            ) | 0 : 0, S = r[y + gt >> 2], S = (r[l + 40 >> 2] = S) ? r[_ + 584 >> 2] + j(
                              r[y + r[f + 956 >> 2] >> 2],
                              28
                            ) | 0 : 0, r[l + 48 >> 2] = 1, r[l + 36 >> 2] = S, r[y + it >> 2] = r[Rt >> 2], l = 0 < (0 | T), T = T + -1 | 0, l; )
                              ;
                          }
                        if (4 <= P >>> 0 ? (r[_ + 548 >> 2] = r[f + 944 >> 2], S = f) : (Gr(r[_ + 548 >> 2], 0, M << 2), S = r[_ >> 2], v = r[S + 704 >> 2]), y = r[v + 52 >> 2], 1 <= (0 | (r[_ + 556 >> 2] = y)))
                          for (l = r[S + 1056 >> 2], I = r[S + 1192 >> 2], M = r[S + 1060 >> 2], P = r[_ + 560 >> 2]; T = P + j(y = y + -1 | 0, 28) | 0, r[T >> 2] = r[(R = y << 2) + M >> 2], R = r[l + R >> 2], r[T + 24 >> 2] = 1, r[T + 16 >> 2] = 0, r[T + 20 >> 2] = 1, r[T + 8 >> 2] = 0, r[T + 12 >> 2] = 0, r[T + 4 >> 2] = I + (R << 2), 0 < (0 | y); )
                            ;
                        if (y = r[v + 48 >> 2], 1 <= (0 | (r[_ + 564 >> 2] = y))) {
                          for (; ; ) {
                            if (T = r[_ + 568 >> 2] + j(y = y + -1 | 0, 36) | 0, I = r[(v = y << 2) + r[S + 1072 >> 2] >> 2], 1 <= (0 | (r[T + 4 >> 2] = I)))
                              for (l = 0; r[r[T >> 2] + (l << 2) >> 2] = r[_ + 560 >> 2] + j(
                                r[r[S + 1064 >> 2] + (r[v + r[S + 1068 >> 2] >> 2] + l << 2) >> 2],
                                28
                              ), (0 | I) != (0 | (l = l + 1 | 0)); )
                                ;
                            if (r[T + 24 >> 2] = 1, r[T + 28 >> 2] = 1, r[T + 8 >> 2] = 1 << I, !(0 < (0 | y)))
                              break;
                          }
                          S = r[_ >> 2], v = r[S + 704 >> 2];
                        }
                        if (T = r[v >> 2], (0 | (r[_ + 4 >> 2] = T)) < 1)
                          l = 0;
                        else {
                          for (R = r[S + 732 >> 2], N = r[S + 736 >> 2], F = r[S + 740 >> 2], I = r[S + 720 >> 2], B = r[_ + 52 >> 2], M = r[_ + 568 >> 2], U = r[_ + 8 >> 2], y = T; P = U + j(y = y + -1 | 0, 12) | 0, r[P >> 2] = M + j(r[(l = y << 2) + I >> 2], 36), r[P + 4 >> 2] = r[l + F >> 2], r[P + 8 >> 2] = r[l + N >> 2], $[l + B >> 2] = r[l + R >> 2] ? b(1) : b(0), 0 < (0 | y); )
                            ;
                          for (P = r[_ + 16 >> 2], l = 0; y = r[8 + (M + j(
                            r[(R = (T = T + -1 | 0) << 2) + I >> 2],
                            36
                          ) | 0) >> 2], l = l + (r[P + R >> 2] = y) | 0, 0 < (0 | T); )
                            ;
                          T = r[_ + 4 >> 2];
                        }
                        if (r[_ + 12 >> 2] = T, r[_ + 20 >> 2] = l, T = r[v + 4 >> 2], 1 <= (0 | (r[_ + 304 >> 2] = T))) {
                          for (; l = r[_ + 308 >> 2] + ((T = T + -1 | 0) << 5) | 0, r[l >> 2] = r[_ + 568 >> 2] + j(
                            r[(y = T << 2) + r[S + 752 >> 2] >> 2],
                            36
                          ), r[l + 4 >> 2] = r[y + r[S + 764 >> 2] >> 2], r[l + 8 >> 2] = r[y + r[S + 768 >> 2] >> 2], I = r[y + r[S + 772 >> 2] >> 2], r[l + 12 >> 2] = I, v = r[y + r[S + 776 >> 2] >> 2], r[l + 16 >> 2] = v, r[l + 28 >> 2] = r[y + r[S + 760 >> 2] >> 2], I >>> 0 <= 1 ? I - 1 ? (r[20 + (r[_ + 60 >> 2] + j(v, 24) | 0) >> 2] = T, r[l + 24 >> 2] = 1, r[l + 20 >> 2] = 2) : (r[8 + (r[_ + 168 >> 2] + j(v, 12) | 0) >> 2] = T, r[l + 24 >> 2] = 3, r[l + 20 >> 2] = 4) : vt(4, 1179, 0), 0 < (0 | T); )
                            ;
                          S = r[_ >> 2], v = r[S + 704 >> 2];
                        }
                        y = r[v + 8 >> 2];
                        t:
                          if (!((0 | (r[_ + 56 >> 2] = y)) < 1)) {
                            if (l = y + -1 | 0, M = r[S + 796 >> 2], P = r[S + 804 >> 2], R = r[S + 800 >> 2], N = r[S + 780 >> 2], F = r[_ + 568 >> 2], B = r[_ + 60 >> 2], ut[S + 4 | 0] < 2) {
                              for (; ; )
                                if (T = B + j(l, 24) | 0, r[T >> 2] = F + j(r[(I = l << 2) + N >> 2], 36), r[T + 4 >> 2] = r[I + R >> 2], r[T + 8 >> 2] = r[I + P >> 2], I = r[I + M >> 2], r[T + 12 >> 2] = 0, r[T + 16 >> 2] = I, T = 0 < (0 | l), l = l + -1 | 0, !T)
                                  break t;
                            }
                            for (U = r[S + 808 >> 2]; T = B + j(l, 24) | 0, r[T >> 2] = F + j(r[(I = l << 2) + N >> 2], 36), r[T + 4 >> 2] = r[I + R >> 2], r[T + 8 >> 2] = r[I + P >> 2], r[T + 16 >> 2] = r[I + M >> 2], r[T + 12 >> 2] = r[I + U >> 2], T = 0 < (0 | l), l = l + -1 | 0, T; )
                              ;
                          }
                        if (l = r[v + 12 >> 2], 1 <= (0 | (r[_ + 164 >> 2] = l)))
                          for (I = r[S + 828 >> 2], M = r[S + 812 >> 2], P = r[_ + 568 >> 2], R = r[_ + 168 >> 2], T = l; N = R + j(T = T + -1 | 0, 12) | 0, r[N >> 2] = P + j(r[(F = T << 2) + M >> 2], 36), r[N + 4 >> 2] = r[I + F >> 2], 0 < (0 | T); )
                            ;
                        if (((T = 0) | y) < 1)
                          I = 0;
                        else {
                          for (M = r[_ + 68 >> 2], P = r[_ + 60 >> 2], I = 0; l = r[r[P + j(y = y + -1 | 0, 24) >> 2] + 8 >> 2], I = (r[M + (y << 2) >> 2] = l) + I | 0, 0 < (0 | y); )
                            ;
                          l = r[_ + 164 >> 2], y = r[_ + 56 >> 2];
                        }
                        if (r[_ + 64 >> 2] = y, r[_ + 72 >> 2] = I, y = _, 1 <= (0 | l)) {
                          for (M = r[_ + 176 >> 2], P = r[_ + 168 >> 2]; I = r[r[P + j(l = l + -1 | 0, 12) >> 2] + 8 >> 2], T = T + (r[M + (l << 2) >> 2] = I) | 0, 0 < (0 | l); )
                            ;
                          l = r[_ + 164 >> 2];
                        }
                        if (r[y + 172 >> 2] = l, r[_ + 180 >> 2] = T, I = r[v + 16 >> 2], 1 <= (0 | (r[_ + 332 >> 2] = I))) {
                          for (R = r[S + 872 >> 2], N = r[S + 892 >> 2], F = r[S + 880 >> 2], B = r[S + 876 >> 2], M = r[S + 852 >> 2], P = r[_ + 568 >> 2], U = r[_ + 336 >> 2], T = I; l = U + j(T = T + -1 | 0, 20) | 0, r[l >> 2] = P + j(r[(y = T << 2) + M >> 2], 36), r[l + 4 >> 2] = r[y + B >> 2], r[l + 8 >> 2] = r[y + F >> 2], r[l + 16 >> 2] = r[y + N >> 2], r[l + 12 >> 2] = r[y + R >> 2], 0 < (0 | T); )
                            ;
                          for (y = r[_ + 344 >> 2], l = 0; T = r[8 + (P + j(
                            r[(R = (I = I + -1 | 0) << 2) + M >> 2],
                            36
                          ) | 0) >> 2], l = (r[y + R >> 2] = T) + l | 0, 0 < (0 | I); )
                            ;
                          if (r[_ + 348 >> 2] = l, I = r[_ + 332 >> 2], !((0 | (r[_ + 340 >> 2] = I)) < 1))
                            for (l = I << 2, y = r[_ + 456 >> 2], M = r[_ + 452 >> 2]; r[(P = (T = l + -4 | 0) << 2) + M >> 2] = 1065353216, r[(R = (l <<= 2) - 4 | 0) + M >> 2] = 1065353216, r[(N = (l = l + -12 | 0) + M | 0) >> 2] = 1065353216, r[N + 4 >> 2] = 1065353216, r[y + P >> 2] = 0, r[y + R >> 2] = 1065353216, r[(l = l + y | 0) >> 2] = 0, r[l + 4 >> 2] = 0, l = T, 0 < (0 | (I = I + -1 | 0)); )
                              ;
                        } else
                          r[_ + 340 >> 2] = I, r[_ + 348 >> 2] = 0;
                        if (I = r[v + 72 >> 2], 1 <= (0 | (r[_ + 480 >> 2] = I)))
                          for (R = r[S + 1208 >> 2], N = r[S + 1224 >> 2], F = r[S + 1220 >> 2], B = r[S + 1216 >> 2], U = r[S + 1212 >> 2], V = r[_ + 484 >> 2], y = 0; ; ) {
                            if (T = V + j(y, 28) | 0, M = r[(l = y << 2) + U >> 2], r[T + 4 >> 2] = M, r[T >> 2] = r[l + B >> 2], P = r[l + F >> 2], r[T + 16 >> 2] = P, it = r[l + N >> 2], r[T + 20 >> 2] = it, r[T + 8 >> 2] = 0, r[T + 24 >> 2] = 1 + (P - it | 0), 1 <= (0 | M))
                              for (it = r[l + R >> 2], Tt = r[T + 12 >> 2], gt = r[S + 1236 >> 2], Ut = r[S + 1228 >> 2], Rt = r[S + 1232 >> 2], l = 0; r[4 + (T = Tt + (l << 4) | 0) >> 2] = r[(P = l + it << 2) + Rt >> 2], r[T >> 2] = r[P + Ut >> 2], P = r[P + gt >> 2], r[T + 12 >> 2] = 0, r[T + 8 >> 2] = P, (0 | M) != (0 | (l = l + 1 | 0)); )
                                ;
                            if ((0 | I) == (0 | (y = y + 1 | 0)))
                              break;
                          }
                        if (l = r[v + 80 >> 2], (0 | (r[_ + 500 >> 2] = l)) < 1)
                          y = 0;
                        else {
                          for (P = r[S + 1280 >> 2], R = r[S + 1268 >> 2], N = r[S + 1276 >> 2], F = r[S + 1272 >> 2], B = r[S + 1264 >> 2], U = r[S + 1260 >> 2], I = r[S + 1248 >> 2], M = r[_ + 568 >> 2], V = r[_ + 504 >> 2]; T = V + j(l = l + -1 | 0, 24) | 0, r[T >> 2] = M + j(r[(y = l << 2) + I >> 2], 36), r[T + 4 >> 2] = r[y + U >> 2], r[T + 8 >> 2] = r[y + B >> 2], r[T + 12 >> 2] = r[y + F >> 2], y = r[y + R >> 2], r[T + 20 >> 2] = P + (y << 1), r[T + 16 >> 2] = N + (y << 2), 0 < (0 | l); )
                            ;
                          if ((0 | (l = r[_ + 500 >> 2])) < 1)
                            y = 0;
                          else {
                            for (P = r[_ + 512 >> 2], y = 0; T = r[8 + (M + j(
                              r[(R = (l = l + -1 | 0) << 2) + I >> 2],
                              36
                            ) | 0) >> 2], y = (r[P + R >> 2] = T) + y | 0, 0 < (0 | l); )
                              ;
                            l = r[_ + 500 >> 2];
                          }
                        }
                        r[_ + 508 >> 2] = l, r[_ + 516 >> 2] = y;
                        t:
                          if (4 <= ut[f + 4 | 0]) {
                            if (!((I = ut[S + 4 | 0]) >>> 0 < 4)) {
                              if (l = r[v + 120 >> 2], 1 <= (0 | (r[_ + 572 >> 2] = l))) {
                                for (P = r[S + 1172 >> 2], R = r[_ + 576 >> 2]; I = (0 | (v = r[(T = (l = l + -1 | 0) << 2) + P >> 2])) < 0 ? v = M = y = 0 : (y = (I = r[T + r[S + 1176 >> 2] >> 2] << 2) + r[S + 1188 >> 2] | 0, M = r[T + r[S + 1180 >> 2] >> 2], v = r[_ + 544 >> 2] + j(v, 52) | 0, I + r[S + 1184 >> 2] | 0), T = R + j(l, 20) | 0, r[T + 12 >> 2] = M, r[T + 8 >> 2] = y, r[T + 4 >> 2] = I, r[T >> 2] = v, 0 < (0 | l); )
                                  ;
                                if (S = r[_ >> 2], (I = ut[S + 4 | 0]) >>> 0 < 4)
                                  break t;
                              }
                              if (v = r[S + 704 >> 2], y = r[v + 100 >> 2], 1 <= (0 | (r[_ + 580 >> 2] = y)))
                                for (M = r[S + 1084 >> 2], P = r[S + 1076 >> 2], R = r[S + 1192 >> 2], N = r[S + 1080 >> 2], F = r[_ + 584 >> 2]; T = F + j(y = y + -1 | 0, 28) | 0, r[T >> 2] = r[(l = y << 2) + N >> 2], r[T + 4 >> 2] = R + (r[l + P >> 2] << 2), l = r[l + M >> 2], r[T + 20 >> 2] = 1, r[T + 24 >> 2] = 1, r[T + 12 >> 2] = 0, r[T + 16 >> 2] = 0, r[T + 8 >> 2] = l, 0 < (0 | y); )
                                  ;
                              if (y = r[v + 104 >> 2], 1 <= (0 | (r[_ + 588 >> 2] = y))) {
                                for (; ; ) {
                                  if (T = r[_ + 592 >> 2] + j(y = y + -1 | 0, 48) | 0, r[T >> 2] = r[_ + 584 >> 2] + j(
                                    r[(I = y << 2) + r[S + 1088 >> 2] >> 2],
                                    28
                                  ), l = r[I + r[S + 1092 >> 2] >> 2], r[T + 28 >> 2] = 1, r[T + 32 >> 2] = 1, r[T + 8 >> 2] = 0, r[T + 4 >> 2] = l, v = r[I + r[S + 1104 >> 2] >> 2], 1 <= (0 | (r[T + 36 >> 2] = v)))
                                    for (l = 0; r[r[T + 40 >> 2] + (l << 2) >> 2] = r[_ + 576 >> 2] + j(
                                      r[r[S + 1168 >> 2] + (r[I + r[S + 1100 >> 2] >> 2] + l << 2) >> 2],
                                      20
                                    ), (0 | v) != (0 | (l = l + 1 | 0)); )
                                      ;
                                  if (!(1 <= (0 | y)))
                                    break;
                                }
                                S = r[_ >> 2], I = ut[S + 4 | 0];
                              }
                              if (!(I >>> 0 < 4)) {
                                if (I = r[f + 704 >> 2], l = r[I + 108 >> 2], 1 <= (0 | (r[_ + 604 >> 2] = l)))
                                  for (v = r[f + 1124 >> 2], M = r[f + 1128 >> 2], P = r[f + 1120 >> 2], R = r[_ + 592 >> 2], N = r[_ + 608 >> 2]; T = N + j(l = l + -1 | 0, 12) | 0, r[T >> 2] = r[(y = l << 2) + P >> 2], r[T + 4 >> 2] = r[y + M >> 2], r[T + 8 >> 2] = R + j(r[v + y >> 2], 48), 0 < (0 | l); )
                                    ;
                                if (l = r[I + 112 >> 2], 1 <= (0 | (r[_ + 620 >> 2] = l)))
                                  for (I = r[f + 1148 >> 2], v = r[f + 1152 >> 2], M = r[f + 1144 >> 2], P = r[_ + 592 >> 2], R = r[_ + 624 >> 2]; T = R + j(l = l + -1 | 0, 12) | 0, r[T >> 2] = r[(y = l << 2) + M >> 2], r[T + 4 >> 2] = r[v + y >> 2], r[T + 8 >> 2] = P + j(r[y + I >> 2], 48), 0 < (0 | l); )
                                    ;
                                if (y = r[S + 1192 >> 2], T = r[r[S + 704 >> 2] + 20 >> 2], r[_ + 640 >> 2] = r[S + 972 >> 2], I = r[S + 964 >> 2], r[_ + 636 >> 2] = I, !((0 | T) < (l = 1)) && (r[I >> 2] = y + (r[r[S + 968 >> 2] >> 2] << 2), (0 | T) != 1))
                                  for (; r[(I = l << 2) + r[_ + 636 >> 2] >> 2] = y + (r[I + r[S + 968 >> 2] >> 2] << 2), (0 | T) != (0 | (l = l + 1 | 0)); )
                                    ;
                              }
                            }
                          } else if (!(r[v + 20 >> 2] < 1))
                            for (v = 0; ; ) {
                              if (y = r[(M = v << 2) + r[_ + 636 >> 2] >> 2], 1 <= ((T = 0) | (l = r[M + r[S + 952 >> 2] >> 2])))
                                for (N = l + (P = r[M + r[S + 948 >> 2] >> 2]) | 0, F = r[S + 1060 >> 2], B = r[S + 1056 >> 2]; ; ) {
                                  if (1 <= (0 | (R = r[(l = P << 2) + F >> 2])))
                                    for (U = R + (I = r[l + B >> 2]) | 0, V = r[S + 1192 >> 2]; ; ) {
                                      R = y + (T << 2) | 0, Z = $[V + (I << 2) >> 2], l = y;
                                      e: {
                                        if (0 < (0 | T))
                                          for (; ; ) {
                                            if ($[l >> 2] == Z)
                                              break e;
                                            if (!((l = l + 4 | 0) >>> 0 < R >>> 0))
                                              break;
                                          }
                                        $[R >> 2] = Z, T = T + 1 | 0;
                                      }
                                      if (!((0 | (I = I + 1 | 0)) < (0 | U)))
                                        break;
                                    }
                                  if (!((0 | (P = P + 1 | 0)) < (0 | N)))
                                    break;
                                }
                              if (function(xt, Zt) {
                                var et, yt, At = 0, Mt = 0, Ct = 0;
                                r[8 + (X = et = X - 208 | 0) >> 2] = 1, r[12 + et >> 2] = 0;
                                e:
                                  if (yt = Zt << 2) {
                                    for (r[16 + et >> 2] = 4, Ct = Zt = r[20 + et >> 2] = 4, At = 2; Zt = (Ct + 4 | 0) + (Mt = Zt) | 0, r[(16 + et | 0) + (At << 2) >> 2] = Zt, At = At + 1 | 0, Ct = Mt, Zt >>> 0 < yt >>> 0; )
                                      ;
                                    if ((Mt = (xt + yt | 0) - 4 | 0) >>> 0 <= xt >>> 0)
                                      Zt = At = 1;
                                    else
                                      for (Zt = At = 1; Zt = (3 & At) == 3 ? (go(xt, Zt, 16 + et | 0), Kn(8 + et | 0, 2), Zt + 2 | 0) : (ke[(16 + et | 0) + ((Ct = Zt + -1 | 0) << 2) >> 2] >= Mt - xt >>> 0 ? zn(
                                        xt,
                                        8 + et | 0,
                                        Zt,
                                        0,
                                        16 + et | 0
                                      ) : go(xt, Zt, 16 + et | 0), (0 | Zt) == 1 ? (Yn(8 + et | 0, 1), 0) : (Yn(8 + et | 0, Ct), 1)), At = 1 | r[8 + et >> 2], r[8 + et >> 2] = At, (xt = xt + 4 | 0) >>> 0 < Mt >>> 0; )
                                        ;
                                    for (zn(
                                      xt,
                                      8 + et | 0,
                                      Zt,
                                      0,
                                      16 + et | 0
                                    ); ; ) {
                                      i: {
                                        a: {
                                          s: {
                                            if (!((0 | Zt) != 1 | (0 | At) != 1)) {
                                              if (r[12 + et >> 2])
                                                break s;
                                              break e;
                                            }
                                            if (1 < (0 | Zt))
                                              break a;
                                          }
                                          Kn(
                                            8 + et | 0,
                                            Mt = jl(8 + et | 0)
                                          ), At = r[8 + et >> 2], Zt = Zt + Mt | 0;
                                          break i;
                                        }
                                        Yn(8 + et | 0, 2), r[8 + et >> 2] = 7 ^ r[8 + et >> 2], Kn(8 + et | 0, 1), zn(
                                          (Ct = xt + -4 | 0) - r[(16 + et | 0) + ((Mt = Zt + -2 | 0) << 2) >> 2] | 0,
                                          8 + et | 0,
                                          Zt + -1 | 0,
                                          1,
                                          16 + et | 0
                                        ), Yn(8 + et | 0, 1), At = 1 | r[8 + et >> 2], r[8 + et >> 2] = At, zn(
                                          Ct,
                                          8 + et | 0,
                                          Mt,
                                          1,
                                          16 + et | 0
                                        ), Zt = Mt;
                                      }
                                      xt = xt + -4 | 0;
                                    }
                                  }
                                X = 208 + et | 0;
                              }(y, T), r[M + r[_ + 640 >> 2] >> 2] = T, !((0 | (v = v + 1 | 0)) < r[r[S + 704 >> 2] + 20 >> 2]))
                                break;
                            }
                        if (!(ut[f + 4 | 0] < 5 | ut[r[_ >> 2] + 4 | 0] < 4)) {
                          if (T = r[f + 704 >> 2], l = r[T + 128 >> 2], 1 <= (0 | (r[_ + 596 >> 2] = l)))
                            for (I = r[f + 1112 >> 2], v = r[f + 1116 >> 2], M = r[f + 1108 >> 2], P = r[_ + 592 >> 2], R = r[_ + 600 >> 2]; S = R + j(l = l + -1 | 0, 12) | 0, r[S >> 2] = r[(y = l << 2) + M >> 2], r[S + 4 >> 2] = r[v + y >> 2], r[S + 8 >> 2] = P + j(r[y + I >> 2], 48), 0 < (0 | l); )
                              ;
                          if (l = r[T + 132 >> 2], 1 <= (0 | (r[_ + 612 >> 2] = l)))
                            for (I = r[f + 1136 >> 2], v = r[f + 1140 >> 2], M = r[f + 1132 >> 2], P = r[_ + 592 >> 2], R = r[_ + 616 >> 2]; S = R + j(l = l + -1 | 0, 12) | 0, r[S >> 2] = r[(y = l << 2) + M >> 2], r[S + 4 >> 2] = r[v + y >> 2], r[S + 8 >> 2] = P + j(r[y + I >> 2], 48), 0 < (0 | l); )
                              ;
                          if (l = r[T + 136 >> 2], !((0 | (r[_ + 628 >> 2] = l)) < 1))
                            for (S = r[f + 1160 >> 2], y = r[f + 1164 >> 2], I = r[f + 1156 >> 2], v = r[_ + 592 >> 2], M = r[_ + 632 >> 2]; f = M + j(l = l + -1 | 0, 12) | 0, r[f >> 2] = r[(T = l << 2) + I >> 2], r[f + 4 >> 2] = r[T + y >> 2], r[f + 8 >> 2] = v + j(r[T + S >> 2], 48), 0 < (0 | l); )
                              ;
                        }
                        Cl(_);
                      }
                      return X = 576 + c | 0, _;
                    }(h, d, E))
                      break r;
                    r[36 + p >> 2] = 2209, r[32 + p >> 2] = 2361, vt(4, 1294, 32 + p | 0);
                  }
                else
                  r[20 + p >> 2] = 1444, r[16 + p >> 2] = 2361, vt(4, 1294, 16 + p | 0);
              else
                r[4 + p >> 2] = 2132, r[p >> 2] = 2361, vt(4, 1294, p);
              d = 0;
            }
            return X = 64 + p | 0, 0 | d;
          }
          function Rl(h) {
            var d;
            return X = d = X - 16 | 0, h = (h |= 0) ? function(E) {
              var p;
              return Gr(16 + (X = p = X - 576 | 0) | 0, 0, 560), Ul(E, 16 + p | 0, 12 + p | 0), X = 576 + p | 0, r[12 + p >> 2];
            }(h) : (r[4 + d >> 2] = 2132, r[d >> 2] = 2343, vt(4, 1294, d), 0), X = 16 + d | 0, 0 | h;
          }
          function Ll(h) {
            var d = ut[h + 4 | 0];
            W(r[h + 704 >> 2], 4, 64), oi(r[h + 708 >> 2], 4), oi(r[h + 708 >> 2] + 4 | 0, 4), oi(r[h + 708 >> 2] + 8 | 0, 4), oi(r[h + 708 >> 2] + 12 | 0, 4), oi(r[h + 708 >> 2] + 16 | 0, 4), oi(r[h + 708 >> 2] + 20 | 0, 1), W(r[h + 720 >> 2], 4, r[r[h + 704 >> 2] >> 2]), W(r[h + 724 >> 2], 4, r[r[h + 704 >> 2] >> 2]), W(r[h + 728 >> 2], 4, r[r[h + 704 >> 2] >> 2]), W(r[h + 732 >> 2], 4, r[r[h + 704 >> 2] >> 2]), W(r[h + 736 >> 2], 4, r[r[h + 704 >> 2] >> 2]), W(r[h + 740 >> 2], 4, r[r[h + 704 >> 2] >> 2]), W(r[h + 752 >> 2], 4, r[r[h + 704 >> 2] + 4 >> 2]), W(r[h + 756 >> 2], 4, r[r[h + 704 >> 2] + 4 >> 2]), W(r[h + 760 >> 2], 4, r[r[h + 704 >> 2] + 4 >> 2]), W(r[h + 764 >> 2], 4, r[r[h + 704 >> 2] + 4 >> 2]), W(r[h + 768 >> 2], 4, r[r[h + 704 >> 2] + 4 >> 2]), W(r[h + 772 >> 2], 4, r[r[h + 704 >> 2] + 4 >> 2]), W(r[h + 776 >> 2], 4, r[r[h + 704 >> 2] + 4 >> 2]), W(r[h + 780 >> 2], 4, r[r[h + 704 >> 2] + 8 >> 2]), W(r[h + 784 >> 2], 4, r[r[h + 704 >> 2] + 8 >> 2]), W(r[h + 788 >> 2], 4, r[r[h + 704 >> 2] + 8 >> 2]), W(r[h + 796 >> 2], 4, r[r[h + 704 >> 2] + 8 >> 2]), W(r[h + 800 >> 2], 4, r[r[h + 704 >> 2] + 8 >> 2]), W(r[h + 804 >> 2], 4, r[r[h + 704 >> 2] + 8 >> 2]), W(r[h + 812 >> 2], 4, r[r[h + 704 >> 2] + 12 >> 2]), W(r[h + 816 >> 2], 4, r[r[h + 704 >> 2] + 12 >> 2]), W(r[h + 820 >> 2], 4, r[r[h + 704 >> 2] + 12 >> 2]), W(r[h + 828 >> 2], 4, r[r[h + 704 >> 2] + 12 >> 2]), W(r[h + 852 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 856 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 860 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 868 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 872 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 876 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 880 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 884 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 888 >> 2], 1, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 892 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 896 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 900 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 904 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 908 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 912 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 924 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 928 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 932 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 936 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 940 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 948 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 952 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 976 >> 2], 4, r[r[h + 704 >> 2] + 24 >> 2]), W(r[h + 980 >> 2], 4, r[r[h + 704 >> 2] + 28 >> 2]), W(r[h + 984 >> 2], 4, r[r[h + 704 >> 2] + 28 >> 2]), W(r[h + 996 >> 2], 4, r[r[h + 704 >> 2] + 32 >> 2]), W(r[h + 1e3 >> 2], 4, r[r[h + 704 >> 2] + 32 >> 2]), W(r[h + 1004 >> 2], 4, r[r[h + 704 >> 2] + 32 >> 2]), W(r[h + 1008 >> 2], 4, r[r[h + 704 >> 2] + 32 >> 2]), W(r[h + 1012 >> 2], 4, r[r[h + 704 >> 2] + 32 >> 2]), W(r[h + 1016 >> 2], 4, r[r[h + 704 >> 2] + 32 >> 2]), W(r[h + 1020 >> 2], 4, r[r[h + 704 >> 2] + 32 >> 2]), W(r[h + 1032 >> 2], 4, r[r[h + 704 >> 2] + 36 >> 2]), W(r[h + 1036 >> 2], 4, r[r[h + 704 >> 2] + 36 >> 2]), W(r[h + 1040 >> 2], 4, r[r[h + 704 >> 2] + 36 >> 2]), W(r[h + 1052 >> 2], 4, r[r[h + 704 >> 2] + 40 >> 2]), W(r[h + 1064 >> 2], 4, r[r[h + 704 >> 2] + 44 >> 2]), W(r[h + 1068 >> 2], 4, r[r[h + 704 >> 2] + 48 >> 2]), W(r[h + 1072 >> 2], 4, r[r[h + 704 >> 2] + 48 >> 2]), W(r[h + 1056 >> 2], 4, r[r[h + 704 >> 2] + 52 >> 2]), W(r[h + 1060 >> 2], 4, r[r[h + 704 >> 2] + 52 >> 2]), W(r[h + 1192 >> 2], 4, r[r[h + 704 >> 2] + 56 >> 2]), W(r[h + 1196 >> 2], 4, r[r[h + 704 >> 2] + 60 >> 2]), W(r[h + 1200 >> 2], 2, r[r[h + 704 >> 2] + 64 >> 2]), W(r[h + 1204 >> 2], 4, r[r[h + 704 >> 2] + 68 >> 2]), W(r[h + 1208 >> 2], 4, r[r[h + 704 >> 2] + 72 >> 2]), W(r[h + 1212 >> 2], 4, r[r[h + 704 >> 2] + 72 >> 2]), W(r[h + 1216 >> 2], 4, r[r[h + 704 >> 2] + 72 >> 2]), W(r[h + 1220 >> 2], 4, r[r[h + 704 >> 2] + 72 >> 2]), W(r[h + 1224 >> 2], 4, r[r[h + 704 >> 2] + 72 >> 2]), W(r[h + 1228 >> 2], 4, r[r[h + 704 >> 2] + 76 >> 2]), W(r[h + 1232 >> 2], 4, r[r[h + 704 >> 2] + 76 >> 2]), W(r[h + 1236 >> 2], 4, r[r[h + 704 >> 2] + 76 >> 2]), W(r[h + 1248 >> 2], 4, r[r[h + 704 >> 2] + 80 >> 2]), W(r[h + 1252 >> 2], 4, r[r[h + 704 >> 2] + 80 >> 2]), W(r[h + 1256 >> 2], 4, r[r[h + 704 >> 2] + 80 >> 2]), W(r[h + 1260 >> 2], 4, r[r[h + 704 >> 2] + 80 >> 2]), W(r[h + 1264 >> 2], 4, r[r[h + 704 >> 2] + 80 >> 2]), W(r[h + 1268 >> 2], 4, r[r[h + 704 >> 2] + 80 >> 2]), W(r[h + 1272 >> 2], 4, r[r[h + 704 >> 2] + 80 >> 2]), W(r[h + 1276 >> 2], 4, r[r[h + 704 >> 2] + 84 >> 2]), W(r[h + 1280 >> 2], 2, r[r[h + 704 >> 2] + 84 >> 2]), W(r[h + 1284 >> 2], 4, r[r[h + 704 >> 2] + 88 >> 2]), d >>> 0 < 2 || (W(r[h + 808 >> 2], 4, r[r[h + 704 >> 2] + 8 >> 2]), d >>> 0 < 4) || (W(r[h + 968 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 972 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 792 >> 2], 4, r[r[h + 704 >> 2] + 8 >> 2]), W(r[h + 824 >> 2], 4, r[r[h + 704 >> 2] + 12 >> 2]), W(r[h + 864 >> 2], 4, r[r[h + 704 >> 2] + 16 >> 2]), W(r[h + 1288 >> 2], 4, r[r[h + 704 >> 2] + 92 >> 2]), W(r[h + 1292 >> 2], 4, r[r[h + 704 >> 2] + 92 >> 2]), W(r[h + 1296 >> 2], 4, r[r[h + 704 >> 2] + 92 >> 2]), W(r[h + 1300 >> 2], 4, r[r[h + 704 >> 2] + 96 >> 2]), W(r[h + 1304 >> 2], 4, r[r[h + 704 >> 2] + 96 >> 2]), W(r[h + 1308 >> 2], 4, r[r[h + 704 >> 2] + 96 >> 2]), W(r[h + 944 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 956 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 960 >> 2], 4, r[r[h + 704 >> 2] + 20 >> 2]), W(r[h + 1076 >> 2], 4, r[r[h + 704 >> 2] + 100 >> 2]), W(r[h + 1080 >> 2], 4, r[r[h + 704 >> 2] + 100 >> 2]), W(r[h + 1084 >> 2], 4, r[r[h + 704 >> 2] + 100 >> 2]), W(r[h + 1088 >> 2], 4, r[r[h + 704 >> 2] + 104 >> 2]), W(r[h + 1092 >> 2], 4, r[r[h + 704 >> 2] + 104 >> 2]), W(r[h + 1096 >> 2], 4, r[r[h + 704 >> 2] + 104 >> 2]), W(r[h + 1100 >> 2], 4, r[r[h + 704 >> 2] + 104 >> 2]), W(r[h + 1104 >> 2], 4, r[r[h + 704 >> 2] + 104 >> 2]), W(r[h + 1120 >> 2], 4, r[r[h + 704 >> 2] + 108 >> 2]), W(r[h + 1124 >> 2], 4, r[r[h + 704 >> 2] + 108 >> 2]), W(r[h + 1128 >> 2], 4, r[r[h + 704 >> 2] + 108 >> 2]), W(r[h + 1144 >> 2], 4, r[r[h + 704 >> 2] + 112 >> 2]), W(r[h + 1148 >> 2], 4, r[r[h + 704 >> 2] + 112 >> 2]), W(r[h + 1152 >> 2], 4, r[r[h + 704 >> 2] + 112 >> 2]), W(r[h + 1168 >> 2], 4, r[r[h + 704 >> 2] + 116 >> 2]), W(r[h + 1172 >> 2], 4, r[r[h + 704 >> 2] + 120 >> 2]), W(r[h + 1176 >> 2], 4, r[r[h + 704 >> 2] + 120 >> 2]), W(r[h + 1180 >> 2], 4, r[r[h + 704 >> 2] + 120 >> 2]), W(r[h + 1184 >> 2], 4, r[r[h + 704 >> 2] + 124 >> 2]), W(r[h + 1188 >> 2], 4, r[r[h + 704 >> 2] + 124 >> 2]), (0 | d) != 4 && (W(
              r[h + 988 >> 2],
              4,
              r[r[h + 704 >> 2] + 28 >> 2]
            ), W(r[h + 992 >> 2], 4, r[r[h + 704 >> 2] + 28 >> 2]), W(
              r[h + 1024 >> 2],
              4,
              r[r[h + 704 >> 2] + 32 >> 2]
            ), W(
              r[h + 1028 >> 2],
              4,
              r[r[h + 704 >> 2] + 32 >> 2]
            ), W(
              r[h + 1044 >> 2],
              4,
              r[r[h + 704 >> 2] + 36 >> 2]
            ), W(
              r[h + 1048 >> 2],
              4,
              r[r[h + 704 >> 2] + 36 >> 2]
            ), W(
              r[h + 1108 >> 2],
              4,
              r[r[h + 704 >> 2] + 128 >> 2]
            ), W(
              r[h + 1112 >> 2],
              4,
              r[r[h + 704 >> 2] + 128 >> 2]
            ), W(
              r[h + 1116 >> 2],
              4,
              r[r[h + 704 >> 2] + 128 >> 2]
            ), W(
              r[h + 1132 >> 2],
              4,
              r[r[h + 704 >> 2] + 132 >> 2]
            ), W(
              r[h + 1136 >> 2],
              4,
              r[r[h + 704 >> 2] + 132 >> 2]
            ), W(
              r[h + 1140 >> 2],
              4,
              r[r[h + 704 >> 2] + 132 >> 2]
            ), W(
              r[h + 1156 >> 2],
              4,
              r[r[h + 704 >> 2] + 136 >> 2]
            ), W(
              r[h + 1160 >> 2],
              4,
              r[r[h + 704 >> 2] + 136 >> 2]
            ), W(
              r[h + 1164 >> 2],
              4,
              r[r[h + 704 >> 2] + 136 >> 2]
            )));
          }
          function Dl(h, d) {
            var E = 0, p = 0, f = 0, T = 0, l = 0, c = 0, _ = h + d | 0;
            r: {
              t:
                if (!(1 & (E = r[h + 4 >> 2]))) {
                  if (!(3 & E))
                    break r;
                  if (d = (E = r[h >> 2]) + d | 0, (0 | (h = h - E | 0)) != r[2092])
                    if (E >>> 0 <= 255)
                      f = E >>> 3, E = r[h + 8 >> 2], (0 | (p = r[h + 12 >> 2])) == (0 | E) ? (c = r[2087] & or(f), r[2087] = c) : (r[E + 12 >> 2] = p, r[p + 8 >> 2] = E);
                    else {
                      if (l = r[h + 24 >> 2], (0 | (E = r[h + 12 >> 2])) != (0 | h))
                        p = r[h + 8 >> 2], r[p + 12 >> 2] = E, r[E + 8 >> 2] = p;
                      else if (f = (f = r[(p = h + 20 | 0) >> 2]) || r[(p = h + 16 | 0) >> 2]) {
                        for (; T = p, (f = r[(p = (E = f) + 20 | 0) >> 2]) || (p = E + 16 | 0, f = r[E + 16 >> 2]); )
                          ;
                        r[T >> 2] = 0;
                      } else
                        E = 0;
                      if (l) {
                        p = r[h + 28 >> 2];
                        e: {
                          if (r[(f = 8652 + (p << 2) | 0) >> 2] == (0 | h)) {
                            if (r[f >> 2] = E)
                              break e;
                            c = r[2088] & or(p), r[2088] = c;
                            break t;
                          }
                          if (!(r[l + (r[l + 16 >> 2] == (0 | h) ? 16 : 20) >> 2] = E))
                            break t;
                        }
                        r[E + 24 >> 2] = l, (p = r[h + 16 >> 2]) && (r[E + 16 >> 2] = p, r[p + 24 >> 2] = E), (p = r[h + 20 >> 2]) && (r[E + 20 >> 2] = p, r[p + 24 >> 2] = E);
                      }
                    }
                  else if ((3 & (E = r[4 + _ >> 2])) == 3)
                    return r[2089] = d, r[4 + _ >> 2] = -2 & E, r[h + 4 >> 2] = 1 | d, r[_ >> 2] = d;
                }
              t: {
                if (!(2 & (E = r[4 + _ >> 2]))) {
                  if (r[2093] == (0 | _)) {
                    if (r[2093] = h, d = r[2090] + d | 0, r[2090] = d, r[h + 4 >> 2] = 1 | d, r[2092] != (0 | h))
                      break r;
                    return r[2089] = 0, r[2092] = 0;
                  }
                  if (r[2092] == (0 | _))
                    return r[2092] = h, d = r[2089] + d | 0, r[2089] = d, r[h + 4 >> 2] = 1 | d, r[h + d >> 2] = d;
                  d = (-8 & E) + d | 0;
                  e:
                    if (E >>> 0 <= 255)
                      f = E >>> 3, E = r[8 + _ >> 2], (0 | (p = r[12 + _ >> 2])) == (0 | E) ? (c = r[2087] & or(f), r[2087] = c) : (r[E + 12 >> 2] = p, r[p + 8 >> 2] = E);
                    else {
                      if (l = r[24 + _ >> 2], (0 | _) != (0 | (E = r[12 + _ >> 2])))
                        p = r[8 + _ >> 2], r[p + 12 >> 2] = E, r[E + 8 >> 2] = p;
                      else if (f = (f = r[(p = 20 + _ | 0) >> 2]) || r[(p = 16 + _ | 0) >> 2]) {
                        for (; T = p, (f = r[(p = (E = f) + 20 | 0) >> 2]) || (p = E + 16 | 0, f = r[E + 16 >> 2]); )
                          ;
                        r[T >> 2] = 0;
                      } else
                        E = 0;
                      if (l) {
                        p = r[28 + _ >> 2];
                        i: {
                          if (r[(f = 8652 + (p << 2) | 0) >> 2] == (0 | _)) {
                            if (r[f >> 2] = E)
                              break i;
                            c = r[2088] & or(p), r[2088] = c;
                            break e;
                          }
                          if (!(r[l + (r[l + 16 >> 2] == (0 | _) ? 16 : 20) >> 2] = E))
                            break e;
                        }
                        r[E + 24 >> 2] = l, (p = r[16 + _ >> 2]) && (r[E + 16 >> 2] = p, r[p + 24 >> 2] = E), (p = r[20 + _ >> 2]) && (r[E + 20 >> 2] = p, r[p + 24 >> 2] = E);
                      }
                    }
                  if (r[h + 4 >> 2] = 1 | d, r[h + d >> 2] = d, r[2092] != (0 | h))
                    break t;
                  return r[2089] = d;
                }
                r[4 + _ >> 2] = -2 & E, r[h + 4 >> 2] = 1 | d, r[h + d >> 2] = d;
              }
              if (d >>> 0 <= 255)
                return d = 8388 + ((E = d >>> 3) << 3) | 0, E = (p = r[2087]) & (E = 1 << E) ? r[d + 8 >> 2] : (r[2087] = E | p, d), r[d + 8 >> 2] = h, r[E + 12 >> 2] = h, r[h + 12 >> 2] = d, r[h + 8 >> 2] = E;
              r[h + 16 >> 2] = 0, E = r[h + 20 >> 2] = 0, (f = d >>> 8) && (E = 31, 16777215 < d >>> 0 || (E = 28 + ((E = ((_ = (f <<= T = f + 1048320 >>> 16 & 8) << (E = f + 520192 >>> 16 & 4)) << (f = 245760 + _ >>> 16 & 2) >>> 15) - (f | E | T) | 0) << 1 | d >>> E + 21 & 1) | 0)), f = 8652 + ((r[(p = h) + 28 >> 2] = E) << 2) | 0;
              t: {
                if ((p = r[2088]) & (T = 1 << E)) {
                  for (p = d << ((0 | E) == 31 ? 0 : 25 - (E >>> 1) | 0), E = r[f >> 2]; ; ) {
                    if ((-8 & r[(f = E) + 4 >> 2]) == (0 | d))
                      break t;
                    if (E = p >>> 29, p <<= 1, !(E = r[16 + (T = f + (4 & E) | 0) >> 2]))
                      break;
                  }
                  r[T + 16 >> 2] = h;
                } else
                  r[2088] = p | T, r[f >> 2] = h;
                return r[h + 24 >> 2] = f, r[h + 12 >> 2] = h, r[h + 8 >> 2] = h;
              }
              d = r[f + 8 >> 2], r[d + 12 >> 2] = h, r[f + 8 >> 2] = h, r[h + 24 >> 2] = 0, r[h + 12 >> 2] = f, r[h + 8 >> 2] = d;
            }
          }
          function Nl(h) {
            var d, E, p, f, T, l, c, _, v = b(0), y = (b(0), 0), S = 0, I = (b(0), b(0), b(0), b(0), 0);
            b(0), b(0);
            r: {
              t: {
                if (jt(h), S = 2147483647 & (y = St[0])) {
                  if (!(S >>> 0 < 2139095041))
                    return b(b(0.10000000149011612) + h);
                  if ((0 | S) == 1065353216)
                    return b(-1 < (0 | y) ? 0.10000000149011612 : 10);
                  if ((0 | S) == 2139095040)
                    return b(-1 < (0 | y) ? 0 : -h);
                  if ((0 | y) == 1073741824)
                    return b(0.010000000707805157);
                  if ((0 | y) == 1056964608)
                    return b(0.3162277638912201);
                  if (1291845633 <= S >>> 0)
                    return b((0 | y) < 0 ? uo : 0);
                  if (d = $[1701], _ = b(b(1.600000023841858) - d), E = b(b(1) / b(d + b(1.600000023841858))), Pt(0, -4096 & (jt(c = b(_ * E)), St[0])), v = Lt(), p = b(v * v), T = $[1705], d = b(
                    E * b(
                      b(_ - b((f = v) * b(3.099609375))) - b(
                        v * b(
                          b(1.600000023841858) - b(b(3.099609375) - d)
                        )
                      )
                    )
                  ), E = b(b(c + v) * d), v = b(c * c), _ = b(
                    E + b(
                      b(v * v) * b(
                        b(
                          v * b(
                            b(
                              v * b(
                                b(
                                  v * b(
                                    b(
                                      v * b(
                                        b(
                                          v * b(
                                            0.20697501301765442
                                          )
                                        ) + b(
                                          0.23066075146198273
                                        )
                                      )
                                    ) + b(0.2727281153202057)
                                  )
                                ) + b(0.3333333432674408)
                              )
                            ) + b(0.4285714328289032)
                          )
                        ) + b(0.6000000238418579)
                      )
                    )
                  ), Pt(0, -4096 & (jt(b(b(p + b(3)) + _)), St[0])), v = Lt(), E = b(f * v), c = b(
                    b(d * v) + b(c * b(_ - b(b(v + b(-3)) - p)))
                  ), Pt(0, -4096 & (jt(b(E + c)), St[0])), v = Lt(), d = b(v * b(0.9619140625)), p = b(
                    $[1703] + b(
                      b(b(c - b(v - E)) * b(0.9617967009544373)) + b(v * b(-11736857413779944e-20))
                    )
                  ), Pt(0, -4096 & (jt(b(b(T + b(d + p)) + b(-4))), St[0])), c = Lt(), Pt(0, -4096 & y), _ = Lt(), v = b(c * _), h = b(
                    b(b(p - b(b(b(c - b(-4)) - T) - d)) * h) + b(b(h - _) * c)
                  ), jt(c = b(v + h)), 1124073473 <= (0 | (y = St[0])))
                    break t;
                  e: {
                    if ((S = 1124073472) == (0 | y)) {
                      if (b(h + b(4299566569443414e-23)) > b(c - v))
                        break t;
                    } else {
                      if (S = 2147483647 & y, !(h <= b(c - v) ^ 1 | (0 | y) != -1021968384) | 1125515265 <= S >>> 0)
                        break r;
                      if (S >>> 0 < 1056964609)
                        break e;
                    }
                    I = (8388607 & (S = (8388608 >>> (S >>> 23) - 126) + y | 0) | 8388608) >>> 150 - (l = S >>> 23 & 255), I = (0 | y) < 0 ? 0 - I | 0 : I, v = b(
                      v - (Pt(0, S & -8388608 >> l - 127), Lt())
                    ), jt(b(h + v)), y = St[0];
                  }
                  Pt(0, -32768 & y), c = Lt(), d = b(c * b(0.693145751953125)), c = b(
                    b(c * b(14286065379565116e-22)) + b(b(h - b(c - v)) * b(0.6931471824645996))
                  ), h = b(d + c), v = b(h * h), v = b(
                    h - b(
                      v * b(
                        b(
                          v * b(
                            b(
                              v * b(
                                b(
                                  v * b(
                                    b(
                                      v * b(4138136944220605e-23)
                                    ) + b(-16533901998627698e-22)
                                  )
                                ) + b(661375597701408e-19)
                              )
                            ) + b(-0.0027777778450399637)
                          )
                        ) + b(0.1666666716337204)
                      )
                    )
                  ), f = b(b(h * v) / b(v + b(-2))), v = b(c - b(h - d)), h = (0 | (y = 0 | (jt(
                    h = b(b(h - b(f - b(v + b(h * v)))) + b(1))
                  ), St[0] + (I << 23)))) <= 8388607 ? function(P, M) {
                    var R = 0;
                    return 128 <= (0 | M) ? (P = b(P * b(17014118346046923e22)), M = (0 | (R = M + -127 | 0)) < 128 ? R : (P = b(
                      P * b(17014118346046923e22)
                    ), ((0 | M) < 381 ? M : 381) + -254 | 0)) : -127 < (0 | M) || (P = b(P * b(11754943508222875e-54)), M = -127 < (0 | (R = M + 126 | 0)) ? R : (P = b(
                      P * b(11754943508222875e-54)
                    ), (-378 < (0 | M) ? M : -378) + 252 | 0)), b(
                      P * (Pt(0, 1065353216 + (M << 23) | 0), Lt())
                    );
                  }(h, I) : (Pt(0, y), Lt()), h = b(b(1) * h);
                } else
                  h = b(1);
                return h;
              }
              return b(uo);
            }
            return b(0);
          }
          function Fl(h, d) {
            var E, p, f, T = 0, l = 0, c = b(0);
            if (jt(d), !((f = 2147483647 & (p = St[0])) >>> 0 <= 2139095040 && (jt(h), (T = 2147483647 & (l = St[0])) >>> 0 < 2139095041)))
              return b(h + d);
            if ((0 | p) == 1065353216)
              return Hl(h);
            p = (E = p >>> 30 & 2) | l >>> 31;
            r: {
              t: {
                e: {
                  i: {
                    if (!T) {
                      switch (p - 2 | 0) {
                        case 0:
                          break i;
                        case 1:
                          break;
                        default:
                          break e;
                      }
                      return b(-3.1415927410125732);
                    }
                    if ((0 | f) != 2139095040) {
                      if (!f | !(T >>> 0 <= 218103808 + f >>> 0 && (0 | T) != 2139095040))
                        break r;
                      if (h = c = T + 218103808 >>> 0 < f >>> 0 && (c = b(0), E) ? c : Hl(b(we(b(h / d)))), p >>> 0 <= 2) {
                        switch (p - 1 | 0) {
                          case 0:
                            return b(-h);
                          case 1:
                            break;
                          default:
                            break e;
                        }
                        return b(
                          b(3.1415927410125732) - b(h + b(8742277657347586e-23))
                        );
                      }
                      return b(
                        b(h + b(8742277657347586e-23)) + b(-3.1415927410125732)
                      );
                    }
                    if ((0 | T) == 2139095040)
                      break t;
                    return $[6784 + (p << 2) >> 2];
                  }
                  h = b(3.1415927410125732);
                }
                return h;
              }
              return $[6768 + (p << 2) >> 2];
            }
            return b(
              (0 | l) < 0 ? -1.5707963705062866 : 1.5707963705062866
            );
          }
          function Hl(h) {
            b(0);
            var d, E, p, f, T, l = 0;
            b(0), b(0), jt(h);
            r: {
              if (1283457024 <= (f = 2147483647 & (T = St[0])) >>> 0) {
                if (2139095040 < f >>> 0)
                  break r;
                return b(
                  (0 | T) < 0 ? -1.570796251296997 : 1.570796251296997
                );
              }
              t: {
                if (f >>> 0 <= 1054867455) {
                  if (l = -1, 964689920 <= f >>> 0)
                    break t;
                  break r;
                }
                h = b(we(h)), l = f >>> 0 <= 1066926079 ? f >>> 0 <= 1060110335 ? (h = b(b(b(h + h) + b(-1)) / b(h + b(2))), 0) : (h = b(b(h + b(-1)) / b(h + b(1))), 1) : f >>> 0 <= 1075576831 ? (h = b(b(h + b(-1.5)) / b(b(h * b(1.5)) + b(1))), 2) : (h = b(b(-1) / h), 3);
              }
              if (f = l, E = b(h * h), d = b(E * E), p = b(
                d * b(
                  b(d * b(-0.106480173766613)) + b(-0.19999158382415771)
                )
              ), d = b(
                E * b(
                  b(
                    d * b(
                      b(d * b(0.06168760731816292)) + b(0.14253635704517365)
                    )
                  ) + b(0.333333283662796)
                )
              ), (0 | f) <= -1)
                return b(h - b(h * b(p + d)));
              h = b(
                $[6736 + (f <<= 2) >> 2] - b(b(b(h * b(p + d)) - $[6752 + f >> 2]) - h)
              ), h = (0 | T) < 0 ? b(-h) : h;
            }
            return h;
          }
          function Bl(h, d) {
            var E, p, f, T = 0, l = 0;
            return X = p = X - 16 | 0, jt(h), (T = 2147483647 & (f = St[0])) >>> 0 <= 1305022426 ? (Vt[d >> 3] = (E = +h) + -1.5707963109016418 * (l = 0.6366197723675814 * E + 6755399441055744 - 6755399441055744) + -15893254773528196e-24 * l, T = we(l) < 2147483648 ? ~~l : -2147483648) : 2139095040 <= T >>> 0 ? (Vt[d >> 3] = b(h - h), T = 0) : (E = T, Vt[8 + p >> 3] = (Pt(
              0,
              E - ((T = (T >>> 23) - 150 | 0) << 23) | 0
            ), Lt()), T = function(c, _, v) {
              var y, S, I, P, M, R, N = 0, F = 0, B = 0, U = 0, V = 0, Z = 0, it = 0, gt = 0, Tt = 0, Rt = 0, Ut = 0;
              if (X = y = X - 560 | 0, it = (F = v) + j(
                I = 0 < (0 | (v = (v + -3 | 0) / 24 | 0)) ? v : 0,
                -24
              ) | 0, 0 <= (0 | (S = r[972])))
                for (F = S + 1 | 0, v = I; Vt[(320 + y | 0) + (B << 3) >> 3] = (0 | v) < 0 ? 0 : +r[3904 + (v << 2) >> 2], v = v + 1 | 0, (0 | F) != (0 | (B = B + 1 | 0)); )
                  ;
              for (V = it + -24 | 0, F = 0; ; ) {
                for (N = v = 0; N += Vt[(v << 3) + c >> 3] * Vt[(320 + y | 0) + (F - v << 3) >> 3], (0 | (v = v + 1 | 0)) != 1; )
                  ;
                if (Vt[(F << 3) + y >> 3] = N, v = (0 | F) < (0 | S), F = F + 1 | 0, !v)
                  break;
              }
              R = 23 - V | 0, P = 24 - V | 0, F = S;
              r: {
                for (; ; ) {
                  if (N = Vt[(F << 3) + y >> 3], !(Tt = ((v = 0) | (B = F)) < 1))
                    for (; Z = (480 + y | 0) + (v << 2) | 0, gt = N, U = we(N *= 5960464477539063e-23) < 2147483648 ? ~~N : -2147483648, U = we(gt += -16777216 * (N = 0 | U)) < 2147483648 ? ~~gt : -2147483648, r[Z >> 2] = U, N = Vt[((B = B + -1 | 0) << 3) + y >> 3] + N, (0 | F) != (0 | (v = v + 1 | 0)); )
                      ;
                  N = Vn(N, V), N = (N += -8 * ho(0.125 * N)) - (0 | (Z = we(N) < 2147483648 ? ~~N : -2147483648));
                  t: {
                    e: {
                      i: {
                        if (Ut = (0 | V) < 1) {
                          if (V)
                            break i;
                          U = r[476 + ((F << 2) + y | 0) >> 2] >> 23;
                        } else
                          U = r[476 + (B = (F << 2) + y | 0) >> 2], Rt = B, B = U - ((v = U >> P) << P) | 0, Z = v + Z | 0, U = (r[Rt + 476 >> 2] = B) >> R;
                        if ((0 | U) < 1)
                          break t;
                        break e;
                      }
                      if (U = 2, !(0.5 <= N)) {
                        U = 0;
                        break t;
                      }
                    }
                    if (B = v = 0, !Tt)
                      for (; ; ) {
                        Tt = r[(M = (480 + y | 0) + (v << 2) | 0) >> 2], Rt = 16777215;
                        e: {
                          i: {
                            if (!B) {
                              if (!Tt)
                                break i;
                              Rt = 16777216, B = 1;
                            }
                            r[M >> 2] = Rt - Tt;
                            break e;
                          }
                          B = 0;
                        }
                        if ((0 | F) == (0 | (v = v + 1 | 0)))
                          break;
                      }
                    Ut || 1 < (v = V + -1 | 0) >>> 0 || (r[476 + (v = (F << 2) + y | 0) >> 2] = v - 1 ? 8388607 & r[v + 476 >> 2] : 4194303 & r[v + 476 >> 2]), Z = Z + 1 | 0, (0 | U) == 2 && (N = 1 - N, U = 2, B) && (N -= Vn(1, V));
                  }
                  if (N != 0)
                    break;
                  if (!(((B = 0) | (v = F)) <= (0 | S))) {
                    for (; B = r[(480 + y | 0) + ((v = v + -1 | 0) << 2) >> 2] | B, (0 | S) < (0 | v); )
                      ;
                    if (B) {
                      for (it = V; it = it + -24 | 0, !r[(480 + y | 0) + ((F = F + -1 | 0) << 2) >> 2]; )
                        ;
                      break r;
                    }
                  }
                  for (v = 1; v = (B = v) + 1 | 0, !r[(480 + y | 0) + (S - B << 2) >> 2]; )
                    ;
                  for (B = F + B | 0; ; ) {
                    for (F = Z = F + 1 | 0, Vt[(320 + y | 0) + (Z << 3) >> 3] = r[3904 + (I + F << 2) >> 2], N = v = 0; N += Vt[(v << 3) + c >> 3] * Vt[(320 + y | 0) + (Z - v << 3) >> 3], (0 | (v = v + 1 | 0)) != 1; )
                      ;
                    if (Vt[(F << 3) + y >> 3] = N, !((0 | F) < (0 | B)))
                      break;
                  }
                  F = B;
                }
                16777216 <= (N = Vn(N, 0 - V | 0)) ? (c = (480 + y | 0) + (F << 2) | 0, gt = N, v = we(N *= 5960464477539063e-23) < 2147483648 ? ~~N : -2147483648, B = we(N = gt + -16777216 * (0 | v)) < 2147483648 ? ~~N : -2147483648, r[c >> 2] = B, F = F + 1 | 0) : (v = we(N) < 2147483648 ? ~~N : -2147483648, it = V), r[(480 + y | 0) + (F << 2) >> 2] = v;
              }
              if (N = Vn(1, it), !((0 | F) <= -1)) {
                for (v = F; Vt[(v << 3) + y >> 3] = N * +r[(480 + y | 0) + (v << 2) >> 2], N *= 5960464477539063e-23, c = 0 < (0 | v), v = v + -1 | 0, c; )
                  ;
                if (!((0 | F) <= -1))
                  for (v = F; ; ) {
                    for (V = F - (c = v) | 0, v = N = 0; N += Vt[6672 + (v << 3) >> 3] * Vt[(c + v << 3) + y >> 3], !((0 | S) <= (0 | v)) && (it = v >>> 0 < V >>> 0, v = v + 1 | 0, it); )
                      ;
                    if (Vt[(160 + y | 0) + (V << 3) >> 3] = N, v = c + -1 | 0, !(0 < (0 | c)))
                      break;
                  }
              }
              if (0 <= (F | (N = 0)))
                for (; N += Vt[(160 + y | 0) + (F << 3) >> 3], c = 0 < (0 | F), F = F + -1 | 0, c; )
                  ;
              return Vt[_ >> 3] = U ? -N : N, X = 560 + y | 0, 7 & Z;
            }(8 + p | 0, p, T), l = Vt[p >> 3], (0 | f) <= -1 ? (Vt[d >> 3] = -l, T = 0 - T | 0) : Vt[d >> 3] = l), X = 16 + p | 0, T;
          }
          function kl(h, d) {
            return h ? function(E, p) {
              r: {
                if (E) {
                  if (p >>> 0 <= 127)
                    break r;
                  if (r[r[1789] >> 2]) {
                    if (p >>> 0 <= 2047)
                      return st[E + 1 | 0] = 63 & p | 128, st[0 | E] = p >>> 6 | 192, 2;
                    if (!((-8192 & p) != 57344 && 55296 <= p >>> 0))
                      return st[E + 2 | 0] = 63 & p | 128, st[0 | E] = p >>> 12 | 224, st[E + 1 | 0] = p >>> 6 & 63 | 128, 3;
                    if (p + -65536 >>> 0 <= 1048575)
                      return st[E + 3 | 0] = 63 & p | 128, st[0 | E] = p >>> 18 | 240, st[E + 2 | 0] = p >>> 6 & 63 | 128, st[E + 1 | 0] = p >>> 12 & 63 | 128, 4;
                  } else if ((-128 & p) == 57216)
                    break r;
                  r[2086] = 25, E = -1;
                } else
                  E = 1;
                return E;
              }
              return st[0 | E] = p, 1;
            }(h, d) : 0;
          }
          function Ul(h, d, E) {
            var p, f, T = 0, l = 0, c = 0, _ = 0, v = 0, y = 0, S = 0, I = 0, P = 0, M = ut[h + 4 | 0];
            if (r[d >> 2] = 652, l = r[h + 704 >> 2], 1 <= (0 | (_ = r[l >> 2]))) {
              for (v = r[h + 720 >> 2], S = r[h + 1072 >> 2]; c = (1 << r[S + (r[v + (T << 2) >> 2] << 2) >> 2]) + c | 0, (0 | _) != (0 | (T = T + 1 | 0)); )
                ;
              T = c << 2;
            }
            if (r[d + 4 >> 2] = j(_, 12), r[d + 8 >> 2] = r[l >> 2] << 2, r[d + 12 >> 2] = r[l >> 2] << 2, r[d + 16 >> 2] = r[l >> 2] << 2, r[d + 20 >> 2] = r[l >> 2] << 2, c = r[l >> 2], r[d + 28 >> 2] = T, r[d + 24 >> 2] = c << 2, c = r[l >> 2], r[d + 40 >> 2] = T, r[d + 36 >> 2] = T, r[d + 32 >> 2] = c << 2, r[d + 44 >> 2] = r[l + 4 >> 2] << 5, r[d + 48 >> 2] = r[l + 4 >> 2] << 2, r[d + 52 >> 2] = r[l + 4 >> 2] << 2, r[d + 56 >> 2] = r[l + 4 >> 2] << 2, r[d + 60 >> 2] = r[l + 4 >> 2] << 4, r[d + 64 >> 2] = r[l + 4 >> 2] << 4, 1 <= ((T = 0) | (_ = r[l + 8 >> 2]))) {
              for (v = r[h + 780 >> 2], S = r[h + 1072 >> 2], P = r[h + 796 >> 2], c = 0; y = (15 + (r[(I = T << 2) + P >> 2] << 3) & -16) + y | 0, c = (1 << r[S + (r[v + I >> 2] << 2) >> 2]) + c | 0, (0 | _) != (0 | (T = T + 1 | 0)); )
                ;
              T = c << 2;
            }
            if (r[d + 68 >> 2] = j(_, 24), r[d + 72 >> 2] = r[l + 8 >> 2] << 2, r[d + 76 >> 2] = r[l + 8 >> 2] << 2, c = r[l + 8 >> 2], r[d + 84 >> 2] = y, r[d + 80 >> 2] = c << 2, r[d + 88 >> 2] = r[l + 8 >> 2] << 4, r[d + 92 >> 2] = r[l + 8 >> 2] << 4, c = r[l + 8 >> 2], r[d + 100 >> 2] = T, r[d + 96 >> 2] = c << 2, c = r[l + 8 >> 2], r[d + 140 >> 2] = T, r[d + 136 >> 2] = T, r[d + 132 >> 2] = T, r[d + 128 >> 2] = T, r[d + 124 >> 2] = T, r[d + 120 >> 2] = T, r[d + 116 >> 2] = T, r[d + 112 >> 2] = T, r[d + 108 >> 2] = T, r[d + 104 >> 2] = c << 2, r[d + 144 >> 2] = r[l + 8 >> 2] << 2, r[d + 148 >> 2] = r[l + 8 >> 2] << 2, r[d + 152 >> 2] = r[l + 8 >> 2] << 2, r[d + 156 >> 2] = r[l + 8 >> 2] << 2, r[d + 160 >> 2] = r[l + 8 >> 2] << 2, r[d + 164 >> 2] = r[l + 8 >> 2] << 2, 1 <= ((T = y = 0) | (_ = r[l + 12 >> 2]))) {
              for (v = r[h + 812 >> 2], S = r[h + 1072 >> 2], c = 0; c = (1 << r[S + (r[v + (T << 2) >> 2] << 2) >> 2]) + c | 0, (0 | _) != (0 | (T = T + 1 | 0)); )
                ;
              T = c << 2;
            }
            if (r[d + 168 >> 2] = j(_, 12), r[d + 172 >> 2] = r[l + 12 >> 2] << 2, r[d + 176 >> 2] = r[l + 12 >> 2] << 2, r[d + 180 >> 2] = r[l + 12 >> 2] << 2, r[d + 184 >> 2] = r[l + 12 >> 2] << 2, r[d + 188 >> 2] = r[l + 12 >> 2] << 2, r[d + 192 >> 2] = r[l + 12 >> 2] << 2, r[d + 196 >> 2] = r[l + 12 >> 2] << 2, r[d + 200 >> 2] = r[l + 12 >> 2] << 2, r[d + 204 >> 2] = r[l + 12 >> 2] << 4, r[d + 208 >> 2] = r[l + 12 >> 2] << 4, c = r[l + 12 >> 2], r[d + 216 >> 2] = T, r[d + 212 >> 2] = c << 2, c = r[l + 12 >> 2], r[d + 268 >> 2] = T, r[d + 264 >> 2] = T, r[d + 260 >> 2] = T, r[d + 256 >> 2] = T, r[d + 252 >> 2] = T, r[d + 248 >> 2] = T, r[d + 244 >> 2] = T, r[d + 240 >> 2] = T, r[d + 236 >> 2] = T, r[d + 232 >> 2] = T, r[d + 228 >> 2] = T, r[d + 224 >> 2] = T, r[d + 220 >> 2] = c << 2, r[d + 272 >> 2] = r[l + 12 >> 2] << 2, r[d + 276 >> 2] = r[l + 12 >> 2] << 2, r[d + 280 >> 2] = r[l + 12 >> 2] << 2, r[d + 284 >> 2] = r[l + 12 >> 2] << 2, r[d + 288 >> 2] = r[l + 12 >> 2] << 2, r[d + 292 >> 2] = r[l + 12 >> 2] << 2, 1 <= ((T = 0) | (c = r[l + 16 >> 2]))) {
              for (v = r[h + 852 >> 2], S = r[h + 1072 >> 2], P = r[h + 892 >> 2], _ = 0; y = (15 + (r[(I = T << 2) + P >> 2] << 3) & -16) + y | 0, _ = (1 << r[S + (r[v + I >> 2] << 2) >> 2]) + _ | 0, (0 | c) != (0 | (T = T + 1 | 0)); )
                ;
              T = _ << 2;
            }
            if (r[d + 296 >> 2] = j(c, 20), r[d + 300 >> 2] = r[l + 16 >> 2] << 2, r[d + 304 >> 2] = r[l + 16 >> 2], r[d + 308 >> 2] = r[l + 16 >> 2] << 2, r[d + 312 >> 2] = r[l + 16 >> 2] << 2, c = r[l + 16 >> 2], r[d + 320 >> 2] = y, r[d + 316 >> 2] = c << 2, r[d + 324 >> 2] = r[l + 16 >> 2] << 2, r[d + 328 >> 2] = r[l + 16 >> 2] << 4, r[d + 332 >> 2] = r[l + 16 >> 2] << 4, r[d + 336 >> 2] = r[l + 16 >> 2] << 2, r[d + 340 >> 2] = r[l + 16 >> 2] << 2, r[d + 344 >> 2] = r[l + 16 >> 2] << 2, r[d + 348 >> 2] = r[l + 16 >> 2] << 4, r[d + 352 >> 2] = r[l + 16 >> 2] << 4, c = r[l + 16 >> 2], r[d + 360 >> 2] = T, r[d + 356 >> 2] = c << 2, c = r[l + 16 >> 2], r[d + 404 >> 2] = T, r[d + 400 >> 2] = T, r[d + 396 >> 2] = T, r[d + 392 >> 2] = T, r[d + 388 >> 2] = T, r[d + 384 >> 2] = T, r[d + 380 >> 2] = T, r[d + 376 >> 2] = T, r[d + 372 >> 2] = T, r[d + 368 >> 2] = T, r[d + 364 >> 2] = c << 2, r[d + 408 >> 2] = r[l + 16 >> 2] << 2, r[d + 412 >> 2] = r[l + 16 >> 2] << 2, r[d + 416 >> 2] = r[l + 16 >> 2] << 2, r[d + 420 >> 2] = r[l + 16 >> 2] << 2, r[d + 424 >> 2] = r[l + 16 >> 2] << 2, r[d + 428 >> 2] = r[l + 16 >> 2] << 2, v = r[h + 704 >> 2], r[d + 432 >> 2] = j(r[v + 20 >> 2], 52), r[d + 436 >> 2] = M >>> (T = _ = 0) <= 3 ? r[v + 20 >> 2] << 2 : 0, r[d + 440 >> 2] = r[v + 20 >> 2] << 2, r[d + 444 >> 2] = j(r[v + 52 >> 2], 28), 1 <= (0 | (l = r[v + 48 >> 2]))) {
              for (c = r[h + 1072 >> 2], y = 0; y = (S = r[c + (T << 2) >> 2]) + y | 0, _ = (1 << S) + _ | 0, (0 | l) != (0 | (T = T + 1 | 0)); )
                ;
              T = _ << 2, _ = y << 2;
            }
            if (r[d + 460 >> 2] = T, r[d + 456 >> 2] = T, r[d + 452 >> 2] = _, r[d + 448 >> 2] = j(l, 36), r[d + 500 >> 2] = j(r[v + 72 >> 2], 28), 1 <= ((y = T = c = 0) | (S = r[v + 72 >> 2]))) {
              for (P = r[h + 1224 >> 2], I = r[h + 1220 >> 2], f = r[h + 1212 >> 2], _ = 0; _ = (0 | (p = r[(l = y << 2) + I >> 2] - r[l + P >> 2] | 0)) < (0 | _) ? _ : 1 + p | 0, T = (0 | T) < (0 | (l = r[l + f >> 2])) ? l : T, (0 | S) != (0 | (y = y + 1 | 0)); )
                ;
              y = T << 2, T = _ << 2;
            }
            if (l = r[v + 76 >> 2], r[d + 516 >> 2] = T, r[d + 512 >> 2] = y, r[d + 508 >> 2] = T, r[d + 504 >> 2] = l << 4, 1 <= (0 | (l = r[v + 80 >> 2]))) {
              for (c = r[h + 1248 >> 2], y = r[h + 1072 >> 2], _ = T = 0; _ = (1 << r[y + (r[c + (T << 2) >> 2] << 2) >> 2]) + _ | 0, (0 | l) != (0 | (T = T + 1 | 0)); )
                ;
              c = _ << 2;
            }
            if (r[d + 520 >> 2] = j(l, 24), r[d + 524 >> 2] = r[v + 80 >> 2] << 2, l = r[v + 80 >> 2], r[d + 532 >> 2] = c, r[d + 528 >> 2] = l << 2, l = r[v + 80 >> 2], r[d + 544 >> 2] = c, r[d + 540 >> 2] = c, r[d + 536 >> 2] = l << 2, l = d, 4 <= M >>> 0) {
              if (r[d + 464 >> 2] = j(r[v + 120 >> 2], 20), r[d + 468 >> 2] = j(r[v + 100 >> 2], 28), c = d, 1 <= ((T = y = 0) | (S = r[v + 104 >> 2]))) {
                for (h = r[h + 1104 >> 2], _ = 0; _ = r[h + (T << 2) >> 2] + _ | 0, (0 | S) != (0 | (T = T + 1 | 0)); )
                  ;
                h = _ << 2;
              } else
                h = 0;
              r[c + 476 >> 2] = h, r[d + 472 >> 2] = j(S, 48), r[d + 484 >> 2] = j(r[v + 108 >> 2], 12), h = r[v + 112 >> 2], r[d + 552 >> 2] = 0, r[d + 492 >> 2] = j(h, 12), h = 0;
            } else {
              if ((0 | (y = r[v + 20 >> 2])) < 1)
                _ = 0;
              else
                for (S = r[h + 1060 >> 2], P = r[h + 952 >> 2], h = r[h + 948 >> 2], c = _ = 0; ; ) {
                  if (1 <= (0 | (I = r[(T = c << 2) + P >> 2])))
                    for (I = (T = S + (r[h + T >> 2] << 2) | 0) + (I << 2) | 0; _ = r[T >> 2] + _ | 0, (T = T + 4 | 0) >>> 0 < I >>> 0; )
                      ;
                  if ((0 | y) == (0 | (c = c + 1 | 0)))
                    break;
                }
              r[d + 552 >> 2] = y << 2, y = r[v + 20 >> 2] << 2, h = _ << 2;
            }
            for (r[l + 556 >> 2] = h, r[d + 548 >> 2] = y, 4 < M >>> 0 && (r[d + 480 >> 2] = j(r[v + 128 >> 2], 12), r[d + 488 >> 2] = j(r[v + 132 >> 2], 12), r[d + 496 >> 2] = j(r[v + 136 >> 2], 12)), T = _ = 0; T = ((l = r[(h = (_ << 2) + d | 0) >> 2]) + 15 & -16) + (r[h >> 2] = T) | 0, (0 | (_ = _ + 1 | 0)) != 140; )
              ;
            r[E >> 2] = T;
          }
          function Gl(h, d, E, p) {
            r: {
              if (!(20 < d >>> 0 || 9 < (d = d + -9 | 0) >>> 0)) {
                switch (d - 1 | 0) {
                  default:
                    return d = r[E >> 2], r[E >> 2] = d + 4, r[h >> 2] = r[d >> 2];
                  case 0:
                    return d = r[E >> 2], r[E >> 2] = d + 4, d = r[d >> 2], r[h >> 2] = d, r[h + 4 >> 2] = d >> 31;
                  case 1:
                    return d = r[E >> 2], r[E >> 2] = d + 4, r[h >> 2] = r[d >> 2], r[h + 4 >> 2] = 0;
                  case 3:
                    return d = r[E >> 2], r[E >> 2] = d + 4, d = ca[d >> 1], r[h >> 2] = d, r[h + 4 >> 2] = d >> 31;
                  case 4:
                    return d = r[E >> 2], r[E >> 2] = d + 4, r[h >> 2] = ni[d >> 1], r[h + 4 >> 2] = 0;
                  case 5:
                    return d = r[E >> 2], r[E >> 2] = d + 4, d = st[0 | d], r[h >> 2] = d, r[h + 4 >> 2] = d >> 31;
                  case 6:
                    return d = r[E >> 2], r[E >> 2] = d + 4, r[h >> 2] = ut[0 | d], r[h + 4 >> 2] = 0;
                  case 2:
                  case 7:
                    break r;
                  case 8:
                }
                ht[p](h, E);
              }
              return;
            }
            d = r[E >> 2] + 7 & -8, r[E >> 2] = d + 8, E = r[d + 4 >> 2], r[h >> 2] = r[d >> 2], r[h + 4 >> 2] = E;
          }
          function Xl(h) {
            var d, E, p = 0;
            if (Ka(st[r[h >> 2]]))
              for (; d = r[h >> 2], E = st[0 | d], r[h >> 2] = d + 1, p = (j(p, 10) + E | 0) - 48 | 0, Ka(st[d + 1 | 0]); )
                ;
            return p;
          }
          function Vl(h, d, E, p, f) {
            var T, l;
            r[204 + (X = l = X - 208 | 0) >> 2] = E, Gr(160 + l | (E = 0), 0, 40), r[200 + l >> 2] = r[204 + l >> 2], (0 | vo(
              0,
              d,
              200 + l | 0,
              80 + l | 0,
              160 + l | 0,
              p,
              f
            )) < 0 || (E = 0 <= r[h + 76 >> 2] ? 1 : E, E = r[h >> 2], st[h + 74 | 0] <= 0 && (r[h >> 2] = -33 & E), T = 32 & E, r[h + 48 >> 2] ? vo(
              h,
              d,
              200 + l | 0,
              80 + l | 0,
              160 + l | 0,
              p,
              f
            ) : (r[h + 48 >> 2] = 80, r[h + 16 >> 2] = 80 + l, r[h + 28 >> 2] = l, r[h + 20 >> 2] = l, E = r[h + 44 >> 2], vo(
              h,
              d,
              200 + (r[h + 44 >> 2] = l) | 0,
              80 + l | 0,
              160 + l | 0,
              p,
              f
            ), E && (ht[r[h + 36 >> 2]](h, 0, 0), r[h + 48 >> 2] = 0, r[h + 44 >> 2] = E, r[h + 28 >> 2] = 0, r[h + 16 >> 2] = 0, r[h + 20 >> 2] = 0)), r[h >> 2] = r[h >> 2] | T), X = 208 + l | 0;
          }
          function Yl(h, d, E) {
            var p, f;
            Ir(8 + (X = f = X - 160 | 0) | 0, 3192, 144), r[52 + f >> 2] = h, r[28 + f >> 2] = h, r[56 + f >> 2] = p = (p = -2 - h | 0) >>> 0 < 256 ? p : 256, r[36 + f >> 2] = h = h + p | 0, r[24 + f >> 2] = h, Vl(8 + f | 0, d, E, 11, 12), p && (h = r[28 + f >> 2], st[h - ((0 | h) == r[24 + f >> 2]) | 0] = 0), X = 160 + f | 0;
          }
          function zl(h, d) {
            var E, p, f = 0, f = (0 | d) != 0;
            r: {
              t: {
                e: {
                  i:
                    if (!(!d | !(3 & h)))
                      for (; ; ) {
                        if (!ut[0 | h])
                          break e;
                        if (h = h + 1 | 0, f = (0 | (d = d + -1 | 0)) != 0, !d)
                          break i;
                        if (!(3 & h))
                          break;
                      }
                  if (!f)
                    break t;
                }
                if (!ut[0 | h])
                  break r;
                e: {
                  if (4 <= d >>> 0) {
                    for (f = (f = d + -4 | 0) - (E = -4 & f) | 0, E = 4 + (h + E | 0) | 0; ; ) {
                      if ((-1 ^ (p = r[h >> 2])) & p + -16843009 & -2139062144)
                        break e;
                      if (h = h + 4 | 0, !(3 < (d = d + -4 | 0) >>> 0))
                        break;
                    }
                    d = f, h = E;
                  }
                  if (!d)
                    break t;
                }
                for (; ; ) {
                  if (!ut[0 | h])
                    break r;
                  if (h = h + 1 | 0, !(d = d + -1 | 0))
                    break;
                }
              }
              return 0;
            }
            return h;
          }
          function Kl(h) {
            var d, E = 0;
            if (!h)
              return 32;
            if (!(1 & h))
              for (; E = E + 1 | 0, d = 2 & h, h >>>= 1, !d; )
                ;
            return E;
          }
          function Wl(h, d) {
            var E, p, f, T, l = 0, c = 0, c = 4;
            X = T = X - 256 | 0;
            r:
              if (!((0 | d) < 2))
                for (l = r[(f = (d << 2) + h | 0) >> 2] = T; ; ) {
                  for (Ir(l, r[h >> 2], E = c >>> 0 < 256 ? c : 256), l = 0; Ir(
                    r[(p = (l << 2) + h | 0) >> 2],
                    r[((l = l + 1 | 0) << 2) + h >> 2],
                    E
                  ), r[p >> 2] = r[p >> 2] + E, (0 | d) != (0 | l); )
                    ;
                  if (!(c = c - E | 0))
                    break r;
                  l = r[f >> 2];
                }
            X = 256 + T | 0;
          }
          function jl(h) {
            return Kl(r[h >> 2] + -1 | 0) || ((h = Kl(r[h + 4 >> 2])) ? h + 32 | 0 : 0);
          }
          function ja(h, d) {
            d |= 0, St[0] = h |= 0, St[1] = d;
          }
          function Ql(h, d, E) {
            return function(p, f, T) {
              var l, c, _, v, y = j(c = T >>> 16, _ = p >>> 16);
              return p = (65535 & (_ = ((l = j(v = 65535 & T, p &= 65535)) >>> 16) + j(_, v) | 0)) + j(p, c) | 0, Ur = ((y + j(f, T) | 0) + (_ >>> 16) | 0) + (p >>> 16) | 0, 65535 & l | p << 16;
            }(h, d, E);
          }
          function Jl(h, d, E) {
            return function(p, f, T) {
              var l, c, _ = 0, v = 0, y = 0, S = 0, I = 0, P = 0, M = 0;
              r: {
                t: {
                  e: {
                    i: {
                      a: {
                        if (!(v = f))
                          return ja(
                            (f = p) - j(p = (p >>> 0) / (T >>> 0) | 0, T) | 0,
                            0
                          ), Ur = 0, p;
                        if (_ = T) {
                          if (!((S = _ + -1 | 0) & _))
                            break a;
                          I = 0 - (S = (za(_) + 33 | 0) - za(v) | 0) | 0;
                          break e;
                        }
                        if (!p)
                          return ja(
                            0,
                            v - j(p = (v >>> 0) / 0 | 0, 0) | 0
                          ), Ur = 0, p;
                        if ((_ = 32 - za(v) | 0) >>> 0 < 31)
                          break i;
                        break t;
                      }
                      if (ja(p & S, 0), (0 | _) == 1)
                        break r;
                      return T = 31 & (_ = _ ? 31 - za(_ + -1 ^ _) | 0 : 32), p = 32 <= (63 & _) >>> 0 ? (v = 0, f >>> T) : (v = f >>> T, ((1 << T) - 1 & f) << 32 - T | p >>> T), Ur = v, p;
                    }
                    S = _ + 1 | 0, I = 63 - _ | 0;
                  }
                  if (_ = f, y = 31 & (v = 63 & S), y = 32 <= v >>> 0 ? (v = 0, _ >>> y) : (v = _ >>> y, ((1 << y) - 1 & _) << 32 - y | p >>> y), _ = 31 & (I &= 63), 32 <= I >>> 0 ? (f = p << _, p = 0) : (f = (1 << _) - 1 & p >>> 32 - _ | f << _, p <<= _), S)
                    for ((I = T + (_ = -1) | 0) >>> 0 < 4294967295 && (_ = 0); y = (c = P = y << 1 | f >>> 31) - (l = T & (P = _ - ((v = v << 1 | y >>> 31) + (I >>> 0 < P >>> 0) | 0) >> 31)) | 0, v = v - (c >>> 0 < l >>> 0) | 0, f = f << 1 | p >>> 31, p = M | p << 1, M = P &= 1, S = S + -1 | 0; )
                      ;
                  return ja(y, v), Ur = f << 1 | p >>> 31, P | p << 1;
                }
                ja(p, f), f = p = 0;
              }
              return Ur = f, p;
            }(h, d, E);
          }
          function or(h) {
            var d;
            return (-1 >>> (d = 31 & h) & -2) << d | (-1 << (h = 0 - h & 31) & -2) >>> h;
          }
          function ql() {
            return Ce.byteLength / 65536 | 0;
          }
        }(fa, lt, bt)
      };
    }
    C = null, x.wasmBinary && (tt = x.wasmBinary);
    var q = {}, tt = [];
    typeof q != "object" && J("no native wasm support detected");
    var lt, bt = new function(Q) {
      var rt = Array(16);
      return rt.grow = function() {
        17 <= rt.length && re(
          "Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."
        ), rt.push(null);
      }, rt.set = function(_t, ct) {
        rt[_t] = ct;
      }, rt.get = function(_t) {
        return rt[_t];
      }, rt;
    }(), Et = !1;
    function Bt(Q, rt) {
      Q || re("Assertion failed: " + rt);
    }
    var pt, dt, $t, ve, Kt = typeof TextDecoder != "undefined" ? new TextDecoder("utf8") : void 0;
    function ft(Q, rt, _t) {
      var ct = rt + _t;
      for (_t = rt; Q[_t] && !(ct <= _t); )
        ++_t;
      if (16 < _t - rt && Q.subarray && Kt)
        return Kt.decode(Q.subarray(rt, _t));
      for (ct = ""; rt < _t; ) {
        var St, ie, ce = Q[rt++];
        128 & ce ? (St = 63 & Q[rt++], (224 & ce) == 192 ? ct += String.fromCharCode((31 & ce) << 6 | St) : (ie = 63 & Q[rt++], (ce = (240 & ce) == 224 ? (15 & ce) << 12 | St << 6 | ie : (7 & ce) << 18 | St << 12 | ie << 6 | 63 & Q[rt++]) < 65536 ? ct += String.fromCharCode(ce) : (ce -= 65536, ct += String.fromCharCode(
          55296 | ce >> 10,
          56320 | 1023 & ce
        )))) : ct += String.fromCharCode(ce);
      }
      return ct;
    }
    function at(Q, rt) {
      return Q ? ft($t, Q, rt) : "";
    }
    function kt(Q) {
      return 0 < Q % 65536 && (Q += 65536 - Q % 65536), Q;
    }
    function Wt(Q) {
      pt = Q, x.HEAP8 = dt = new Int8Array(Q), x.HEAP16 = new Int16Array(Q), x.HEAP32 = ve = new Int32Array(Q), x.HEAPU8 = $t = new Uint8Array(Q), x.HEAPU16 = new Uint16Array(Q), x.HEAPU32 = new Uint32Array(Q), x.HEAPF32 = new Float32Array(Q), x.HEAPF64 = new Float64Array(Q);
    }
    typeof TextDecoder != "undefined" && new TextDecoder("utf-16le");
    var Jt = x.TOTAL_MEMORY || 16777216;
    function fe(Q) {
      for (; 0 < Q.length; ) {
        var rt, _t = Q.shift();
        typeof _t == "function" ? _t() : typeof (rt = _t.ea) == "number" ? _t.da === void 0 ? x.dynCall_v(rt) : x.dynCall_vi(rt, _t.da) : rt(_t.da === void 0 ? null : _t.da);
      }
    }
    (lt = x.wasmMemory || new function() {
      return {
        buffer: new ArrayBuffer(Jt / 65536 * 65536),
        grow: function(Q) {
          return L2(Q);
        }
      };
    }()) && (pt = lt.buffer), pt.byteLength, Wt(pt), ve[2216] = 5251936;
    var oe, he = [], Pe = [], He = [], me = [], Xt = (Math.imul && Math.imul(4294967295, 5) === -5 || (Math.imul = function(Q, rt) {
      var _t = 65535 & Q, ct = 65535 & rt;
      return _t * ct + ((Q >>> 16) * ct + _t * (rt >>> 16) << 16) | 0;
    }), Math.fround || (oe = new Float32Array(1), Math.fround = function(Q) {
      return oe[0] = Q, oe[0];
    }), Math.clz32 || (Math.clz32 = function(Q) {
      var rt = 32, _t = Q >> 16;
      return _t && (rt -= 16, Q = _t), (_t = Q >> 8) && (rt -= 8, Q = _t), (_t = Q >> 4) && (rt -= 4, Q = _t), (_t = Q >> 2) && (rt -= 2, Q = _t), Q >> 1 ? rt - 2 : rt - Q;
    }), Math.trunc || (Math.trunc = function(Q) {
      return Q < 0 ? Math.ceil(Q) : Math.floor(Q);
    }), 0), ee = null;
    function re(Q) {
      throw x.onAbort && x.onAbort(Q), K(Q), J(Q), Et = !0, "abort(" + Q + "). Build with -s ASSERTIONS=1 for more info.";
    }
    x.preloadedImages = {}, x.preloadedAudios = {};
    var Gt = "data:application/octet-stream;base64,";
    function Be(Q) {
      return String.prototype.startsWith ? Q.startsWith(Gt) : Q.indexOf(Gt) === 0;
    }
    var W = "_em_module.wasm";
    function qt() {
      try {
        if (tt)
          return new Uint8Array(tt);
        var Q = ai(W);
        if (Q)
          return Q;
        if (H)
          return H(W);
        throw "both async and sync fetching of the wasm failed";
      } catch (rt) {
        re(rt);
      }
    }
    Be(W) || (Y = W, W = x.locateFile ? x.locateFile(Y, Ze) : Ze + Y), Pe.push({
      ea: function() {
        O2();
      }
    });
    var dr = [null, [], []];
    function ii(Q) {
      for (var rt = [], _t = 0; _t < Q.length; _t++) {
        var ct = Q[_t];
        255 < ct && (ct &= 255), rt.push(String.fromCharCode(ct));
      }
      return rt.join("");
    }
    var la = typeof atob == "function" ? atob : function(Q) {
      var rt = "", _t = 0;
      Q = Q.replace(/[^A-Za-z0-9\+\/=]/g, "");
      do
        var ie = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(
          Q.charAt(_t++)
        ), ce = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(
          Q.charAt(_t++)
        ), ct = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(
          Q.charAt(_t++)
        ), St = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(
          Q.charAt(_t++)
        ), ie = ie << 2 | ce >> 4, ce = (15 & ce) << 4 | ct >> 2, Pt = (3 & ct) << 6 | St;
      while (rt += String.fromCharCode(ie), ct !== 64 && (rt += String.fromCharCode(ce)), St !== 64 && (rt += String.fromCharCode(Pt)), _t < Q.length);
      return rt;
    };
    function ai(Q) {
      if (Be(Q)) {
        if (Q = Q.slice(Gt.length), typeof z == "boolean" && z) {
          try {
            var rt = Buffer.from(Q, "base64");
          } catch (ie) {
            rt = new Buffer(Q, "base64");
          }
          var _t = new Uint8Array(rt.buffer, rt.byteOffset, rt.byteLength);
        } else
          try {
            for (var ct = la(Q), St = new Uint8Array(ct.length), rt = 0; rt < ct.length; ++rt)
              St[rt] = ct.charCodeAt(rt);
            _t = St;
          } catch (ie) {
            throw Error("Converting base64 string to bytes failed.");
          }
        return _t;
      }
    }
    var yi, fa = {
      a: function(Q, rt, _t) {
        $t.set($t.subarray(rt, rt + _t), Q);
      },
      b: function(Q) {
        if (2147418112 < Q)
          return !1;
        for (var rt = Math.max(dt.length, 16777216); rt < Q; )
          rt = rt <= 536870912 ? kt(2 * rt) : Math.min(kt((3 * rt + 2147483648) / 4), 2147418112);
        r: {
          try {
            lt.grow(rt - pt.byteLength + 65535 >> 16), Wt(lt.buffer);
            var _t = 1;
            break r;
          } catch (ct) {
          }
          _t = void 0;
        }
        return !!_t;
      },
      c: function(Q, rt, _t, ct) {
        try {
          for (var St = 0, ie = 0; ie < _t; ie++) {
            for (var ce = ve[rt + 8 * ie >> 2], Pt = ve[rt + (8 * ie + 4) >> 2], kr = 0; kr < Pt; kr++) {
              var ge = $t[ce + kr], jt = dr[Q];
              ge === 0 || ge === 10 ? ((Q === 1 ? K : J)(ft(jt, 0)), jt.length = 0) : jt.push(ge);
            }
            St += Pt;
          }
          return ve[ct >> 2] = St, 0;
        } catch (Lt) {
          return typeof FS != "undefined" && Lt instanceof FS.fa || re(Lt), Lt.ga;
        }
      },
      memory: lt,
      table: bt
    }, Ze = function() {
      function Q(St) {
        x.asm = St.exports, Xt--, x.monitorRunDependencies && x.monitorRunDependencies(Xt), Xt == 0 && ee && (St = ee, ee = null, St());
      }
      function rt(St) {
        Q(St.instance);
      }
      function _t(St) {
        (tt || !k && !G || typeof fetch != "function" ? new Promise(function(ie) {
          ie(qt());
        }) : fetch(W, { credentials: "same-origin" }).then(function(ie) {
          if (ie.ok)
            return ie.arrayBuffer();
          throw "failed to load wasm binary file at '" + W + "'";
        }).catch(qt)).then(function() {
          return {
            then: function(ie) {
              ie({ instance: new nt() });
            }
          };
        }).then(St, function(ie) {
          J("failed to asynchronously prepare wasm: " + ie), re(ie);
        });
      }
      var ct = { env: fa, wasi_unstable: fa };
      if (Xt++, x.monitorRunDependencies && x.monitorRunDependencies(Xt), x.instantiateWasm)
        try {
          return x.instantiateWasm(ct, Q);
        } catch (St) {
          return J("Module.instantiateWasm callback failed with error: " + St), !1;
        }
      return tt || typeof q.instantiateStreaming != "function" || Be(W) || typeof fetch != "function" ? _t(rt) : fetch(W, { credentials: "same-origin" }).then(function(St) {
        return q.instantiateStreaming(St, ct).then(
          rt,
          function(ie) {
            J("wasm streaming compile failed: " + ie), J("falling back to ArrayBuffer instantiation"), _t(rt);
          }
        );
      }), {};
    }(), O2 = (x.asm = Ze, x.___wasm_call_ctors = function() {
      return x.asm.d.apply(null, arguments);
    }), $2 = (x._csmGetVersion = function() {
      return x.asm.e.apply(null, arguments);
    }, x._csmGetLatestMocVersion = function() {
      return x.asm.f.apply(null, arguments);
    }, x._csmGetMocVersion = function() {
      return x.asm.g.apply(null, arguments);
    }, x._csmHasMocConsistency = function() {
      return x.asm.h.apply(null, arguments);
    }, x._csmSetLogFunction = function() {
      return x.asm.i.apply(null, arguments);
    }, x._csmReviveMocInPlace = function() {
      return x.asm.j.apply(null, arguments);
    }, x._csmReadCanvasInfo = function() {
      return x.asm.k.apply(null, arguments);
    }, x._csmGetSizeofModel = function() {
      return x.asm.l.apply(null, arguments);
    }, x._csmInitializeModelInPlace = function() {
      return x.asm.m.apply(null, arguments);
    }, x._csmUpdateModel = function() {
      return x.asm.n.apply(null, arguments);
    }, x._csmGetParameterCount = function() {
      return x.asm.o.apply(null, arguments);
    }, x._csmGetParameterIds = function() {
      return x.asm.p.apply(null, arguments);
    }, x._csmGetParameterTypes = function() {
      return x.asm.q.apply(null, arguments);
    }, x._csmGetParameterMinimumValues = function() {
      return x.asm.r.apply(null, arguments);
    }, x._csmGetParameterMaximumValues = function() {
      return x.asm.s.apply(null, arguments);
    }, x._csmGetParameterDefaultValues = function() {
      return x.asm.t.apply(null, arguments);
    }, x._csmGetParameterValues = function() {
      return x.asm.u.apply(null, arguments);
    }, x._csmGetPartCount = function() {
      return x.asm.v.apply(null, arguments);
    }, x._csmGetPartIds = function() {
      return x.asm.w.apply(null, arguments);
    }, x._csmGetPartOpacities = function() {
      return x.asm.x.apply(null, arguments);
    }, x._csmGetPartParentPartIndices = function() {
      return x.asm.y.apply(null, arguments);
    }, x._csmGetDrawableCount = function() {
      return x.asm.z.apply(null, arguments);
    }, x._csmGetDrawableIds = function() {
      return x.asm.A.apply(null, arguments);
    }, x._csmGetDrawableConstantFlags = function() {
      return x.asm.B.apply(null, arguments);
    }, x._csmGetDrawableDynamicFlags = function() {
      return x.asm.C.apply(null, arguments);
    }, x._csmGetDrawableTextureIndices = function() {
      return x.asm.D.apply(null, arguments);
    }, x._csmGetDrawableDrawOrders = function() {
      return x.asm.E.apply(null, arguments);
    }, x._csmGetDrawableRenderOrders = function() {
      return x.asm.F.apply(null, arguments);
    }, x._csmGetDrawableOpacities = function() {
      return x.asm.G.apply(null, arguments);
    }, x._csmGetDrawableMaskCounts = function() {
      return x.asm.H.apply(null, arguments);
    }, x._csmGetDrawableMasks = function() {
      return x.asm.I.apply(null, arguments);
    }, x._csmGetDrawableVertexCounts = function() {
      return x.asm.J.apply(null, arguments);
    }, x._csmGetDrawableVertexPositions = function() {
      return x.asm.K.apply(null, arguments);
    }, x._csmGetDrawableVertexUvs = function() {
      return x.asm.L.apply(null, arguments);
    }, x._csmGetDrawableIndexCounts = function() {
      return x.asm.M.apply(null, arguments);
    }, x._csmGetDrawableIndices = function() {
      return x.asm.N.apply(null, arguments);
    }, x._csmGetDrawableMultiplyColors = function() {
      return x.asm.O.apply(null, arguments);
    }, x._csmGetDrawableScreenColors = function() {
      return x.asm.P.apply(null, arguments);
    }, x._csmGetDrawableParentPartIndices = function() {
      return x.asm.Q.apply(null, arguments);
    }, x._csmResetDrawableDynamicFlags = function() {
      return x.asm.R.apply(null, arguments);
    }, x._csmGetParameterKeyCounts = function() {
      return x.asm.S.apply(null, arguments);
    }, x._csmGetParameterKeyValues = function() {
      return x.asm.T.apply(null, arguments);
    }, x._csmMallocMoc = function() {
      return x.asm.U.apply(null, arguments);
    }, x._csmMallocModelAndInitialize = function() {
      return x.asm.V.apply(null, arguments);
    }, x._csmMalloc = function() {
      return x.asm.W.apply(null, arguments);
    }, x._csmFree = function() {
      return x.asm.X.apply(null, arguments);
    }, x._csmInitializeAmountOfMemory = function() {
      return x.asm.Y.apply(null, arguments);
    }, x.stackSave = function() {
      return x.asm.Z.apply(null, arguments);
    }), wl = x.stackAlloc = function() {
      return x.asm._.apply(null, arguments);
    }, R2 = x.stackRestore = function() {
      return x.asm.$.apply(null, arguments);
    }, L2 = x.__growWasmMemory = function() {
      return x.asm.aa.apply(null, arguments);
    };
    function oo() {
      function Q() {
        if (!yi && (yi = !0, !Et)) {
          if (fe(Pe), fe(He), x.onRuntimeInitialized && x.onRuntimeInitialized(), x.postRun)
            for (typeof x.postRun == "function" && (x.postRun = [x.postRun]); x.postRun.length; ) {
              var rt = x.postRun.shift();
              me.unshift(rt);
            }
          fe(me);
        }
      }
      if (!(0 < Xt)) {
        if (x.preRun)
          for (typeof x.preRun == "function" && (x.preRun = [x.preRun]); x.preRun.length; )
            (function() {
              var rt = x.preRun.shift();
              he.unshift(rt);
            })();
        fe(he), 0 < Xt || (x.setStatus ? (x.setStatus("Running..."), setTimeout(function() {
          setTimeout(function() {
            x.setStatus("");
          }, 1), Q();
        }, 1)) : Q());
      }
    }
    if (x.dynCall_vi = function() {
      return x.asm.ba.apply(null, arguments);
    }, x.asm = Ze, x.ccall = function(Q, rt, _t, ct) {
      var St = {
        string: function(ge) {
          var jt = 0;
          if (ge != null && ge !== 0) {
            var Lt = 1 + (ge.length << 2), Ft = jt = wl(Lt), Ce = $t;
            if (0 < Lt) {
              for (var Lt = Ft + Lt - 1, Ni = 0; Ni < ge.length; ++Ni) {
                var ht = ge.charCodeAt(Ni);
                if ((ht = 55296 <= ht && ht <= 57343 ? 65536 + ((1023 & ht) << 10) | 1023 & ge.charCodeAt(++Ni) : ht) <= 127) {
                  if (Lt <= Ft)
                    break;
                  Ce[Ft++] = ht;
                } else {
                  if (ht <= 2047) {
                    if (Lt <= Ft + 1)
                      break;
                    Ce[Ft++] = 192 | ht >> 6;
                  } else {
                    if (ht <= 65535) {
                      if (Lt <= Ft + 2)
                        break;
                      Ce[Ft++] = 224 | ht >> 12;
                    } else {
                      if (Lt <= Ft + 3)
                        break;
                      Ce[Ft++] = 240 | ht >> 18, Ce[Ft++] = 128 | ht >> 12 & 63;
                    }
                    Ce[Ft++] = 128 | ht >> 6 & 63;
                  }
                  Ce[Ft++] = 128 | 63 & ht;
                }
              }
              Ce[Ft] = 0;
            }
          }
          return jt;
        },
        array: function(ge) {
          var jt = wl(ge.length);
          return dt.set(ge, jt), jt;
        }
      }, ie = function(ge) {
        var jt = x["_" + ge];
        return Bt(
          jt,
          "Cannot call unknown function " + ge + ", make sure it is exported"
        ), jt;
      }(Q), ce = [];
      if (Q = 0, ct)
        for (var Pt = 0; Pt < ct.length; Pt++) {
          var kr = St[_t[Pt]];
          kr ? (Q === 0 && (Q = $2()), ce[Pt] = kr(ct[Pt])) : ce[Pt] = ct[Pt];
        }
      return _t = function(ge) {
        return rt === "string" ? at(ge) : rt === "boolean" ? !!ge : ge;
      }(_t = ie.apply(null, ce)), Q !== 0 && R2(Q), _t;
    }, x.UTF8ToString = at, x.addFunction = function(Q, rt) {
      var _t = bt.length;
      try {
        bt.grow(1);
      } catch (ct) {
        throw !ct instanceof RangeError ? ct : "Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH.";
      }
      try {
        bt.set(_t, Q);
      } catch (ct) {
        if (!ct instanceof TypeError)
          throw ct;
        Bt(rt !== void 0, "Missing signature argument to addFunction"), bt.set(_t, Q);
      }
      return _t;
    }, x.then = function(Q) {
      var rt;
      return yi ? Q(x) : (rt = x.onRuntimeInitialized, x.onRuntimeInitialized = function() {
        rt && rt(), Q(x);
      }), x;
    }, ee = function Q() {
      yi || oo(), yi || (ee = Q);
    }, x.run = oo, x.preInit)
      for (typeof x.preInit == "function" && (x.preInit = [x.preInit]); 0 < x.preInit.length; )
        x.preInit.pop()();
    return oo(), A;
  }), g = (typeof exports == "object" && typeof module == "object" ? module.exports = m : typeof define == "function" && define.amd ? define([], function() {
    return m;
  }) : typeof exports == "object" && (exports._em_module = m), m());
})(lh = lh || {});
window.Live2DCubismCore = lh;
const fh = (i) => {
  const t = i.length;
  if (t === 0)
    return;
  const e = Math.floor(Math.random() * t);
  return i[e];
}, B2 = (i, t) => {
  let e;
  return {
    start: function() {
      return ar(this, null, function* () {
        const a = () => ar(this, null, function* () {
          e && (yield i(), clearTimeout(e), e = setTimeout(a, t));
        });
        e || (clearTimeout(e), e = setTimeout(a, t));
      });
    },
    stop: function() {
      clearTimeout(e), e = void 0;
    }
  };
}, bo = (i) => i !== null && typeof i == "object" && !Array.isArray(i), Os = (i) => typeof i == "number" || i instanceof Number, Z0 = (i) => Array.isArray(i), pn = (i) => typeof i == "function", Ne = (i, t) => {
  const e = Object.assign({}, i);
  return bo(i) && bo(t) && Object.keys(t).forEach((a) => {
    bo(t[a]) ? a in i ? e[a] = Ne(i[a], t[a]) : Object.assign(e, { [a]: t[a] }) : Object.assign(e, { [a]: t[a] });
  }), e;
};
class k2 {
  constructor() {
    Dt(this, "eventMap", /* @__PURE__ */ new Map());
  }
  add(t, e) {
    if (!e)
      return;
    const a = this.eventMap.get(t) || [];
    a.push(e), this.eventMap.set(t, a);
  }
  emit(t, ...e) {
    const a = this.eventMap.get(t);
    a == null || a.forEach((n) => void n(...e));
  }
}
const rf = (i) => `
  @keyframes oml2d-shake-tips{
    0% {
      transform: translate(-50%, 5%) scale(0.99);
    }
    50% {
   
      transform: translate(-50%, 0%) scale(1);
    }
    100% {
      transform: translate(-50%, 5%) scale(0.99);
    }
  }
  
  @keyframes oml2d-stage-slide-in {
    from {
      transform: translateY(130%);
    }
    to {
      transform: translateY(0%);
    }
  }
  
  @keyframes oml2d-stage-slide-out {
    from {
      transform: translateY(0%);
    }
    to {
      transform: translateY(130%);
    }
  }
  
  @keyframes oml2d-display-tips {
    0% {
      opacity: 0;
      visibility: hidden;
    }
    100% {
      opacity: 1;
      visibility: visible;
    }
  }
  
  @keyframes oml2d-hidden-tips {
    0% {
      opacity: 1;
      visibility: visible;
    }
    100% {
      opacity: 0;
      visibility: hidden;
    }
  }

  @keyframes oml2d-loading-rotate {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  .oml2d-icon {
    width: 1em; 
    height: 1em;
    vertical-align: -0.15em;
    fill: currentColor;
    overflow: hidden;
  }
  
  .oml2d-loading{
    animation-name: oml2d-loading-rotate;
    animation-duration: 600ms;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
  }

  .oml2d-menus-item {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    box-sizing: border-box;
    align-items: center;
    transition: all 300ms;
    color: ${i};
    cursor: pointer;
    background-color: #fff;
  }
  
  .oml2d-menus-item:hover {
    background-color: ${i};
    color: #fff;
    box-shadow: 0 0 5px #000;
  }
  
  #${_i.menus} .oml2d-menus-item:not(:last-child) {
    margin-bottom: 10px;
  }
  
  @keyframes oml2d-status-bar-left-slide-out {
    0% {
      transform: translateX(-8%);
    }
    100% {
      transform: translateX(-120%);
    }
  }
  
  
  @keyframes oml2d-status-bar-left-slide-in {
    0% {
      transform: translateX(-120%);
    }
    100% {
      transform: translateX(-8%);
    }
  }

  @keyframes oml2d-status-bar-right-slide-out {
    0% {
      transform: translateX(8%);
    }
    100% {
      transform: translateX(120%);
    }
  }
  
  
  @keyframes oml2d-status-bar-right-slide-in {
    0% {
      transform: translateX(120%);
    }
    100% {
      transform: translateX(8%);
    }
  }
  `, U2 = {}, G2 = {
  width: "0px",
  height: "0px",
  position: "fixed",
  right: "auto",
  bottom: 0,
  zIndex: "9997",
  transform: "translateY(130%)"
}, af = {
  position: "absolute",
  fontSize: "18px",
  borderRadius: "10px",
  filter: "drop-shadow(0 0 5px #999)",
  border: "2px solid #fff",
  color: "#fff",
  padding: "5px 5px",
  opacity: 0,
  visibility: "hidden",
  transform: "translateX(-50%)",
  textAlign: "center",
  justifyContent: "center",
  animationDuration: "1000ms,1000ms",
  animationFillMode: "forwards, none",
  animationIterationCount: "1, infinite",
  width: "60%",
  left: "50%",
  top: 0,
  display: "flex",
  alignItems: "center",
  minHeight: "100px"
}, nf = {
  minWidth: "20px",
  minHeight: "40px",
  position: "fixed",
  transform: "translateX(-110%)",
  bottom: "80px",
  padding: "7px 5px",
  zIndex: "9998",
  borderStyle: "solid",
  borderColor: "#fff",
  fontWeight: "bold",
  borderRadius: "5px",
  borderWidth: "2px",
  boxShadow: "0 0 5px #999",
  color: "#fff",
  display: "flex",
  alignItems: "center",
  textAlign: "center",
  flexWrap: "wrap",
  fontSize: "14px",
  writingMode: "vertical-lr",
  cursor: "pointer"
}, sf = {
  transition: "all 500ms",
  visibility: "hidden",
  opacity: 0,
  position: "absolute",
  bottom: "10%",
  zIndex: "9999",
  fontSize: "26px"
}, X2 = "#38B0DE", V2 = "#F08080", Ea = {
  dockedPosition: "left",
  mobileDisplay: !1,
  primaryColor: X2,
  sayHello: !0,
  transitionTime: 1e3,
  parentElement: document.body,
  importType: "complete",
  libraryUrls: {
    complete: "",
    cubism2: "",
    cubism5: ""
  },
  stageStyle: U2,
  models: [],
  statusBar: {
    disable: !1,
    transitionTime: 800,
    switchingMessage: "",
    loadingMessage: "",
    loadSuccessMessage: "",
    loadFailMessage: "",
    reloadMessage: "",
    restMessage: "",
    restMessageDuration: 8e3,
    loadingIcon: "icon-loading",
    errorColor: V2,
    style: nf,
    mobileStyle: nf
  },
  tips: {
    messageLine: 3,
    mobileStyle: af,
    style: af,
    idleTips: {
      wordTheDay: !1,
      message: [],
      duration: 5e3,
      interval: 1e4,
      priority: 2
    },
    welcomeTips: {
      message: {
        daybreak: "",
        morning: "",
        noon: "",
        afternoon: "~",
        dusk: "~",
        night: "",
        lateNight: "~",
        weeHours: ""
      },
      duration: 6e3,
      priority: 3
    },
    copyTips: {
      duration: 3e3,
      priority: 3,
      message: ["?~"]
    }
  },
  menus: {
    disable: !1,
    items: [
      {
        id: "Rest",
        icon: "icon-rest",
        title: "",
        onClick(i) {
          var t;
          i.statusBarOpen((t = i.options.statusBar) == null ? void 0 : t.restMessage), i.clearTips(), i.setStatusBarClickEvent(() => {
            i.statusBarClose(), i.stageSlideIn(), i.statusBarClearEvents();
          }), i.stageSlideOut();
        }
      },
      {
        id: "SwitchModelClothes",
        icon: "icon-skin",
        title: "",
        onClick(i) {
          i.loadNextModelClothes();
        }
      },
      {
        id: "SwitchModel",
        icon: "icon-switch",
        title: "",
        onClick(i) {
          i.loadNextModel();
        }
      },
      {
        id: "About",
        icon: "icon-about",
        title: "",
        onClick() {
          window.open("https://oml2d.com");
        }
      }
    ],
    style: sf,
    itemStyle: {},
    mobileStyle: sf,
    mobileItemStyle: {}
  },
  initialStatus: "active"
}, _i = {
  globalStyle: "oml2d-global-style",
  stage: "oml2d-stage",
  canvas: "oml2d-canvas",
  statusBar: "oml2d-statusBar",
  tips: "oml2d-tips",
  menus: "oml2d-menus",
  iconSvg: "oml2d-icon-svg"
}, Y2 = /^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i, of = (i) => {
  if (typeof i != "string")
    throw new TypeError("Invalid argument expected string");
  const t = i.match(Y2);
  if (!t)
    throw new Error(`Invalid argument not valid semver ('${i}' received)`);
  return t.shift(), t;
}, hf = (i) => i === "*" || i === "x" || i === "X", uf = (i) => {
  const t = parseInt(i, 10);
  return isNaN(t) ? i : t;
}, z2 = (i, t) => typeof i != typeof t ? [String(i), String(t)] : [i, t], K2 = (i, t) => {
  if (hf(i) || hf(t))
    return 0;
  const [e, a] = z2(uf(i), uf(t));
  return e > a ? 1 : e < a ? -1 : 0;
}, lf = (i, t) => {
  for (let e = 0; e < Math.max(i.length, t.length); e++) {
    const a = K2(i[e] || "0", t[e] || "0");
    if (a !== 0)
      return a;
  }
  return 0;
}, W2 = (i, t) => {
  const e = of(i), a = of(t), n = e.pop(), s = a.pop(), o = lf(e, a);
  return o !== 0 ? o : n && s ? lf(n.split("."), s.split(".")) : n || s ? n ? -1 : 1 : 0;
}, j2 = (i, t, e) => {
  Q2(e);
  const a = W2(i, t);
  return tc[e].includes(a);
}, tc = {
  ">": [1],
  ">=": [0, 1],
  "=": [0],
  "<=": [-1, 0],
  "<": [-1],
  "!=": [-1, 1]
}, ff = Object.keys(tc), Q2 = (i) => {
  if (ff.indexOf(i) === -1)
    throw new Error(`Invalid operator, expected one of ${ff.join("|")}`);
};
var rr = /* @__PURE__ */ ((i) => (i.pc = "PC", i.mobile = "MOBILE", i))(rr || {}), ec = /* @__PURE__ */ ((i) => (i.ALL = "ALL", i.IDLE = "IDLE", i.NONE = "NONE", i))(ec || {});
const J2 = function(i) {
  const { message: t } = i;
  let e = "";
  const a = (/* @__PURE__ */ new Date()).getHours().toString(), n = /^[5-7]$/, s = /^(?:[8-9]|1[0-1])$/, o = /^(1[2-3])$/, u = /^1[4-7]$/, m = /^1[8-9]$/, g = /^2[0-1]$/, A = /^2[2-3]$/;
  return n.test(a) ? e = t.daybreak : s.test(a) ? e = t == null ? void 0 : t.morning : o.test(a) ? e = t == null ? void 0 : t.noon : u.test(a) ? e = t == null ? void 0 : t.afternoon : m.test(a) ? e = t == null ? void 0 : t.dusk : g.test(a) ? e = t == null ? void 0 : t.night : A.test(a) ? e = t == null ? void 0 : t.lateNight : e = t == null ? void 0 : t.weeHours, e;
}, q2 = () => console.log(
  `
 %c  %c %c  oh-my-live2d v0.19.3 - https://oml2d.com Happy Hacking !!  %c %c  
`,
  "background: #add7fb; padding:5px 0;",
  "background: #58b0fc; padding:5px 0;",
  "color: #fff; background: #030307; padding:5px 0;",
  "background: #58b0fc; padding:5px 0;",
  "background: #add7fb; padding:5px 0;"
), Jr = (i) => {
  const t = ef({}, i);
  return "width" in i && Os(i.width) && (t.width = `${i.width}px`), "height" in i && Os(i.height) && (t.height = `${i.height}px`), t;
}, aa = (i, t) => {
  Object.assign(t.style, i);
}, Z2 = (i) => new Promise((t) => setTimeout(t, i)), vi = (i) => {
  const t = document.createElement(i.tagName);
  return t.id = i.id, i.className && (t.className = i.className), i.dataName && t.setAttribute("data-name", i.dataName), i.children && i.children.forEach((e) => {
    t.appendChild(vi(e));
  }), i.innerHtml && (t.innerHTML = i.innerHtml), i.innerText && (t.innerText = i.innerText), t;
}, tp = () => ar(void 0, null, function* () {
  const i = yield fetch("https://unpkg.com/oh-my-live2d@latest/package.json"), { version: t } = yield i.json();
  j2(t, "0.19.3", ">") && console.warn("[oml2d]  oh-my-live2d :", `v${t}`, ": https://oml2d.com , .");
}), cf = (i) => ar(void 0, null, function* () {
  const e = yield (yield fetch("https://v1.hitokoto.cn")).json();
  return i ? i(e) : `${e.hitokoto}`;
}), rc = window.matchMedia("screen and (max-width: 768px)"), Ba = () => rc.matches ? rr.mobile : rr.pc, ep = (i) => {
  rc.addEventListener("change", (t) => {
    t.matches ? i(rr.mobile) : i(rr.pc);
  });
}, rp = (i, t) => {
  const e = Ne(i, t);
  return e.parentElement = t.parentElement || document.body, e;
}, xn = (i, t = 0, e = !1) => {
  switch (i) {
    case "left":
      return e ? { left: "auto", right: `${t}px` } : { left: `${t}px`, right: "auto" };
    case "right":
      return e ? { left: `${t}px`, right: "auto" } : { left: "auto", right: `${t}px` };
  }
}, ip = (i, t) => {
  let e = t;
  for (; e === t; )
    e = Math.floor(Math.random() * i);
  return e;
};
class ap {
  constructor(t) {
    Dt(this, "styleSheet");
    this.options = t;
  }
  /**
   * 
   */
  create() {
    document.getElementById(_i.globalStyle) || (this.styleSheet = vi({
      tagName: "style",
      id: _i.globalStyle,
      innerHtml: rf(this.options.primaryColor)
    }));
  }
  /**
   * 
   */
  mount() {
    this.styleSheet && document.head.append(this.styleSheet);
  }
  initialize() {
    this.create(), this.mount(), this.reloadStyleSheet();
  }
  initializeStyle() {
    this.reloadStyleSheet();
  }
  // 
  reloadStyleSheet() {
    this.styleSheet && (this.styleSheet.innerHTML = rf(this.options.primaryColor));
  }
}
class np {
  constructor(t, e) {
    Dt(this, "element");
    Dt(this, "style", {});
    Dt(this, "itemStyle", {});
    Dt(this, "menuItemList", []);
    Dt(this, "_menuOptions", Ea.menus);
    this.options = t, this.oml2d = e;
  }
  reload(t) {
    this.unmount(), this.create(), this.reloadStyle(), this.mount(t);
  }
  get menuOptions() {
    return this._menuOptions;
  }
  set menuOptions(t) {
    let e;
    pn(t) ? e = Ne(
      Ea.menus,
      t(this.options.models[this.oml2d.modelIndex || 0], this.oml2d.modelIndex || 0)
    ) : e = t, this._menuOptions = e;
  }
  createMenuItemElements(t) {
    this.menuItemList = t.map((e) => {
      const a = vi({
        id: e.id,
        tagName: "div",
        dataName: e.id,
        className: "oml2d-menus-item",
        innerHtml: `<svg class="oml2d-icon"><use xlink:href="#${e.icon}"></use></svg>`
      });
      return a.title = e.title, a.onclick = () => {
        var n;
        (n = e.onClick) == null || n.call(e, this.oml2d);
      }, a;
    });
  }
  createMenuItem() {
    if (Z0(this.menuOptions.items))
      this.createMenuItemElements(this.menuOptions.items);
    else if (pn(this.menuOptions.items)) {
      const t = this.menuOptions.items(Ea.menus.items);
      this.createMenuItemElements(t);
    }
  }
  /**
   * 
   */
  create() {
    this.menuOptions = this.options.menus, this.menuOptions.disable === !1 && (this.element = vi({ id: _i.menus, tagName: "div", className: _i.menus }), this.createMenuItem());
  }
  unmountItems() {
    this.menuItemList.forEach((t) => {
      t.remove();
    });
  }
  unmount() {
    var t;
    this.unmountItems(), (t = this.element) == null || t.remove();
  }
  mountItems() {
    this.element && this.element.append(...this.menuItemList);
  }
  /**
   * 
   * @param stageElement
   */
  mount(t) {
    if (this.element) {
      t.append(this.element), this.mountItems(), t.onmouseover = () => {
        this.setStyle({ opacity: 1, visibility: "visible" });
      }, t.onmouseout = () => {
        this.setStyle({ opacity: 0, visibility: "hidden" });
      };
      let e;
      t.ontouchend = () => {
        clearTimeout(e), this.setStyle({ opacity: 1, visibility: "visible" }), e = setTimeout(() => {
          this.setStyle({ opacity: 0, visibility: "hidden" });
        }, 3e3);
      };
    }
  }
  /**
   * 
   */
  reloadStyle() {
    switch (this.style = {}, Ba()) {
      case rr.pc:
        this.setStyle(
          Jr(Ne(xn(this.options.dockedPosition, 10, !0), this.menuOptions.style || {}))
        ), this.setItemStyle(Jr(this.menuOptions.itemStyle || {}));
        break;
      case rr.mobile:
        this.setStyle(
          Jr(Ne(xn(this.options.dockedPosition, 10, !0), this.menuOptions.mobileStyle || {}))
        ), this.setItemStyle(Jr(this.menuOptions.mobileItemStyle || {}));
        break;
    }
  }
  // 
  update(t) {
    this.options = t, this.reloadStyle();
  }
  setStyle(t) {
    this.element && (this.style = Ne(this.style, t), aa(this.style, this.element));
  }
  setItemStyle(t) {
    this.itemStyle = Ne(this.itemStyle, t), this.menuItemList.forEach((e) => {
      aa(this.itemStyle, e);
    });
  }
}
/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Zr;
(function(i) {
  i[i.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", i[i.WEBGL = 1] = "WEBGL", i[i.WEBGL2 = 2] = "WEBGL2";
})(Zr || (Zr = {}));
var Ca;
(function(i) {
  i[i.UNKNOWN = 0] = "UNKNOWN", i[i.WEBGL = 1] = "WEBGL", i[i.CANVAS = 2] = "CANVAS";
})(Ca || (Ca = {}));
var Tn;
(function(i) {
  i[i.COLOR = 16384] = "COLOR", i[i.DEPTH = 256] = "DEPTH", i[i.STENCIL = 1024] = "STENCIL";
})(Tn || (Tn = {}));
var It;
(function(i) {
  i[i.NORMAL = 0] = "NORMAL", i[i.ADD = 1] = "ADD", i[i.MULTIPLY = 2] = "MULTIPLY", i[i.SCREEN = 3] = "SCREEN", i[i.OVERLAY = 4] = "OVERLAY", i[i.DARKEN = 5] = "DARKEN", i[i.LIGHTEN = 6] = "LIGHTEN", i[i.COLOR_DODGE = 7] = "COLOR_DODGE", i[i.COLOR_BURN = 8] = "COLOR_BURN", i[i.HARD_LIGHT = 9] = "HARD_LIGHT", i[i.SOFT_LIGHT = 10] = "SOFT_LIGHT", i[i.DIFFERENCE = 11] = "DIFFERENCE", i[i.EXCLUSION = 12] = "EXCLUSION", i[i.HUE = 13] = "HUE", i[i.SATURATION = 14] = "SATURATION", i[i.COLOR = 15] = "COLOR", i[i.LUMINOSITY = 16] = "LUMINOSITY", i[i.NORMAL_NPM = 17] = "NORMAL_NPM", i[i.ADD_NPM = 18] = "ADD_NPM", i[i.SCREEN_NPM = 19] = "SCREEN_NPM", i[i.NONE = 20] = "NONE", i[i.SRC_OVER = 0] = "SRC_OVER", i[i.SRC_IN = 21] = "SRC_IN", i[i.SRC_OUT = 22] = "SRC_OUT", i[i.SRC_ATOP = 23] = "SRC_ATOP", i[i.DST_OVER = 24] = "DST_OVER", i[i.DST_IN = 25] = "DST_IN", i[i.DST_OUT = 26] = "DST_OUT", i[i.DST_ATOP = 27] = "DST_ATOP", i[i.ERASE = 26] = "ERASE", i[i.SUBTRACT = 28] = "SUBTRACT", i[i.XOR = 29] = "XOR";
})(It || (It = {}));
var xr;
(function(i) {
  i[i.POINTS = 0] = "POINTS", i[i.LINES = 1] = "LINES", i[i.LINE_LOOP = 2] = "LINE_LOOP", i[i.LINE_STRIP = 3] = "LINE_STRIP", i[i.TRIANGLES = 4] = "TRIANGLES", i[i.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", i[i.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(xr || (xr = {}));
var ot;
(function(i) {
  i[i.RGBA = 6408] = "RGBA", i[i.RGB = 6407] = "RGB", i[i.RG = 33319] = "RG", i[i.RED = 6403] = "RED", i[i.RGBA_INTEGER = 36249] = "RGBA_INTEGER", i[i.RGB_INTEGER = 36248] = "RGB_INTEGER", i[i.RG_INTEGER = 33320] = "RG_INTEGER", i[i.RED_INTEGER = 36244] = "RED_INTEGER", i[i.ALPHA = 6406] = "ALPHA", i[i.LUMINANCE = 6409] = "LUMINANCE", i[i.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", i[i.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", i[i.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(ot || (ot = {}));
var Ii;
(function(i) {
  i[i.TEXTURE_2D = 3553] = "TEXTURE_2D", i[i.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", i[i.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", i[i.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", i[i.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", i[i.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", i[i.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(Ii || (Ii = {}));
var wt;
(function(i) {
  i[i.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", i[i.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", i[i.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", i[i.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", i[i.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", i[i.UNSIGNED_INT = 5125] = "UNSIGNED_INT", i[i.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", i[i.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", i[i.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", i[i.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", i[i.BYTE = 5120] = "BYTE", i[i.SHORT = 5122] = "SHORT", i[i.INT = 5124] = "INT", i[i.FLOAT = 5126] = "FLOAT", i[i.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", i[i.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(wt || (wt = {}));
var An;
(function(i) {
  i[i.FLOAT = 0] = "FLOAT", i[i.INT = 1] = "INT", i[i.UINT = 2] = "UINT";
})(An || (An = {}));
var Dr;
(function(i) {
  i[i.NEAREST = 0] = "NEAREST", i[i.LINEAR = 1] = "LINEAR";
})(Dr || (Dr = {}));
var Nr;
(function(i) {
  i[i.CLAMP = 33071] = "CLAMP", i[i.REPEAT = 10497] = "REPEAT", i[i.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(Nr || (Nr = {}));
var Sr;
(function(i) {
  i[i.OFF = 0] = "OFF", i[i.POW2 = 1] = "POW2", i[i.ON = 2] = "ON", i[i.ON_MANUAL = 3] = "ON_MANUAL";
})(Sr || (Sr = {}));
var Er;
(function(i) {
  i[i.NPM = 0] = "NPM", i[i.UNPACK = 1] = "UNPACK", i[i.PMA = 2] = "PMA", i[i.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", i[i.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", i[i.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", i[i.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(Er || (Er = {}));
var yr;
(function(i) {
  i[i.NO = 0] = "NO", i[i.YES = 1] = "YES", i[i.AUTO = 2] = "AUTO", i[i.BLEND = 0] = "BLEND", i[i.CLEAR = 1] = "CLEAR", i[i.BLIT = 2] = "BLIT";
})(yr || (yr = {}));
var Sn;
(function(i) {
  i[i.AUTO = 0] = "AUTO", i[i.MANUAL = 1] = "MANUAL";
})(Sn || (Sn = {}));
var cr;
(function(i) {
  i.LOW = "lowp", i.MEDIUM = "mediump", i.HIGH = "highp";
})(cr || (cr = {}));
var Me;
(function(i) {
  i[i.NONE = 0] = "NONE", i[i.SCISSOR = 1] = "SCISSOR", i[i.STENCIL = 2] = "STENCIL", i[i.SPRITE = 3] = "SPRITE", i[i.COLOR = 4] = "COLOR";
})(Me || (Me = {}));
var ch;
(function(i) {
  i[i.RED = 1] = "RED", i[i.GREEN = 2] = "GREEN", i[i.BLUE = 4] = "BLUE", i[i.ALPHA = 8] = "ALPHA";
})(ch || (ch = {}));
var _e;
(function(i) {
  i[i.NONE = 0] = "NONE", i[i.LOW = 2] = "LOW", i[i.MEDIUM = 4] = "MEDIUM", i[i.HIGH = 8] = "HIGH";
})(_e || (_e = {}));
var Fr;
(function(i) {
  i[i.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", i[i.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", i[i.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(Fr || (Fr = {}));
/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ic = {
  /**
   * Creates a canvas element of the given size.
   * This canvas is created using the browser's native canvas element.
   * @param width - width of the canvas
   * @param height - height of the canvas
   */
  createCanvas: function(i, t) {
    var e = document.createElement("canvas");
    return e.width = i, e.height = t, e;
  },
  getWebGLRenderingContext: function() {
    return WebGLRenderingContext;
  },
  getNavigator: function() {
    return navigator;
  },
  getBaseUrl: function() {
    var i;
    return (i = document.baseURI) !== null && i !== void 0 ? i : window.location.href;
  },
  fetch: function(i, t) {
    return fetch(i, t);
  }
}, xo = /iPhone/i, df = /iPod/i, pf = /iPad/i, _f = /\biOS-universal(?:.+)Mac\b/i, To = /\bAndroid(?:.+)Mobile\b/i, vf = /Android/i, _a = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i, Wn = /Silk/i, hi = /Windows Phone/i, mf = /\bWindows(?:.+)ARM\b/i, gf = /BlackBerry/i, yf = /BB10/i, bf = /Opera Mini/i, xf = /\b(CriOS|Chrome)(?:.+)Mobile/i, Tf = /Mobile(?:.+)Firefox\b/i, Af = function(i) {
  return typeof i != "undefined" && i.platform === "MacIntel" && typeof i.maxTouchPoints == "number" && i.maxTouchPoints > 1 && typeof MSStream == "undefined";
};
function sp(i) {
  return function(t) {
    return t.test(i);
  };
}
function op(i) {
  var t = {
    userAgent: "",
    platform: "",
    maxTouchPoints: 0
  };
  !i && typeof navigator != "undefined" ? t = {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    maxTouchPoints: navigator.maxTouchPoints || 0
  } : typeof i == "string" ? t.userAgent = i : i && i.userAgent && (t = {
    userAgent: i.userAgent,
    platform: i.platform,
    maxTouchPoints: i.maxTouchPoints || 0
  });
  var e = t.userAgent, a = e.split("[FBAN");
  typeof a[1] != "undefined" && (e = a[0]), a = e.split("Twitter"), typeof a[1] != "undefined" && (e = a[0]);
  var n = sp(e), s = {
    apple: {
      phone: n(xo) && !n(hi),
      ipod: n(df),
      tablet: !n(xo) && (n(pf) || Af(t)) && !n(hi),
      universal: n(_f),
      device: (n(xo) || n(df) || n(pf) || n(_f) || Af(t)) && !n(hi)
    },
    amazon: {
      phone: n(_a),
      tablet: !n(_a) && n(Wn),
      device: n(_a) || n(Wn)
    },
    android: {
      phone: !n(hi) && n(_a) || !n(hi) && n(To),
      tablet: !n(hi) && !n(_a) && !n(To) && (n(Wn) || n(vf)),
      device: !n(hi) && (n(_a) || n(Wn) || n(To) || n(vf)) || n(/\bokhttp\b/i)
    },
    windows: {
      phone: n(hi),
      tablet: n(mf),
      device: n(hi) || n(mf)
    },
    other: {
      blackberry: n(gf),
      blackberry10: n(yf),
      opera: n(bf),
      firefox: n(Tf),
      chrome: n(xf),
      device: n(gf) || n(yf) || n(bf) || n(Tf) || n(xf)
    },
    any: !1,
    phone: !1,
    tablet: !1
  };
  return s.any = s.apple.device || s.android.device || s.windows.device || s.other.device, s.phone = s.apple.phone || s.android.phone || s.windows.phone, s.tablet = s.apple.tablet || s.android.tablet || s.windows.tablet, s;
}
var Tr = op(globalThis.navigator);
function hp() {
  return !Tr.apple.device;
}
function up(i) {
  var t = !0;
  if (Tr.tablet || Tr.phone) {
    if (Tr.apple.device) {
      var e = navigator.userAgent.match(/OS (\d+)_(\d+)?/);
      if (e) {
        var a = parseInt(e[1], 10);
        a < 11 && (t = !1);
      }
    }
    if (Tr.android.device) {
      var e = navigator.userAgent.match(/Android\s([0-9.]*)/);
      if (e) {
        var a = parseInt(e[1], 10);
        a < 7 && (t = !1);
      }
    }
  }
  return t ? i : 4;
}
var mt = {
  /**
   * This adapter is used to call methods that are platform dependent.
   * For example `document.createElement` only runs on the web but fails in node environments.
   * This allows us to support more platforms by abstracting away specific implementations per platform.
   *
   * By default the adapter is set to work in the browser. However you can create your own
   * by implementing the `IAdapter` interface. See `IAdapter` for more information.
   * @name ADAPTER
   * @memberof PIXI.settings
   * @type {PIXI.IAdapter}
   * @default PIXI.BrowserAdapter
   */
  ADAPTER: ic,
  /**
   * If set to true WebGL will attempt make textures mimpaped by default.
   * Mipmapping will only succeed if the base texture uploaded has power of two dimensions.
   * @static
   * @name MIPMAP_TEXTURES
   * @memberof PIXI.settings
   * @type {PIXI.MIPMAP_MODES}
   * @default PIXI.MIPMAP_MODES.POW2
   */
  MIPMAP_TEXTURES: Sr.POW2,
  /**
   * Default anisotropic filtering level of textures.
   * Usually from 0 to 16
   * @static
   * @name ANISOTROPIC_LEVEL
   * @memberof PIXI.settings
   * @type {number}
   * @default 0
   */
  ANISOTROPIC_LEVEL: 0,
  /**
   * Default resolution / device pixel ratio of the renderer.
   * @static
   * @name RESOLUTION
   * @memberof PIXI.settings
   * @type {number}
   * @default 1
   */
  RESOLUTION: 1,
  /**
   * Default filter resolution.
   * @static
   * @name FILTER_RESOLUTION
   * @memberof PIXI.settings
   * @type {number}
   * @default 1
   */
  FILTER_RESOLUTION: 1,
  /**
   * Default filter samples.
   * @static
   * @name FILTER_MULTISAMPLE
   * @memberof PIXI.settings
   * @type {PIXI.MSAA_QUALITY}
   * @default PIXI.MSAA_QUALITY.NONE
   */
  FILTER_MULTISAMPLE: _e.NONE,
  /**
   * The maximum textures that this device supports.
   * @static
   * @name SPRITE_MAX_TEXTURES
   * @memberof PIXI.settings
   * @type {number}
   * @default 32
   */
  SPRITE_MAX_TEXTURES: up(32),
  // TODO: maybe change to SPRITE.BATCH_SIZE: 2000
  // TODO: maybe add PARTICLE.BATCH_SIZE: 15000
  /**
   * The default sprite batch size.
   *
   * The default aims to balance desktop and mobile devices.
   * @static
   * @name SPRITE_BATCH_SIZE
   * @memberof PIXI.settings
   * @type {number}
   * @default 4096
   */
  SPRITE_BATCH_SIZE: 4096,
  /**
   * The default render options if none are supplied to {@link PIXI.Renderer}
   * or {@link PIXI.CanvasRenderer}.
   * @static
   * @name RENDER_OPTIONS
   * @memberof PIXI.settings
   * @type {object}
   * @property {boolean} [antialias=false] - {@link PIXI.IRendererOptions.antialias}
   * @property {boolean} [autoDensity=false] - {@link PIXI.IRendererOptions.autoDensity}
   * @property {number} [backgroundAlpha=1] - {@link PIXI.IRendererOptions.backgroundAlpha}
   * @property {number} [backgroundColor=0x000000] - {@link PIXI.IRendererOptions.backgroundColor}
   * @property {boolean} [clearBeforeRender=true] - {@link PIXI.IRendererOptions.clearBeforeRender}
   * @property {number} [height=600] - {@link PIXI.IRendererOptions.height}
   * @property {boolean} [preserveDrawingBuffer=false] - {@link PIXI.IRendererOptions.preserveDrawingBuffer}
   * @property {boolean|'notMultiplied'} [useContextAlpha=true] - {@link PIXI.IRendererOptions.useContextAlpha}
   * @property {HTMLCanvasElement} [view=null] - {@link PIXI.IRendererOptions.view}
   * @property {number} [width=800] - {@link PIXI.IRendererOptions.width}
   */
  RENDER_OPTIONS: {
    view: null,
    width: 800,
    height: 600,
    autoDensity: !1,
    backgroundColor: 0,
    backgroundAlpha: 1,
    useContextAlpha: !0,
    clearBeforeRender: !0,
    antialias: !1,
    preserveDrawingBuffer: !1
  },
  /**
   * Default Garbage Collection mode.
   * @static
   * @name GC_MODE
   * @memberof PIXI.settings
   * @type {PIXI.GC_MODES}
   * @default PIXI.GC_MODES.AUTO
   */
  GC_MODE: Sn.AUTO,
  /**
   * Default Garbage Collection max idle.
   * @static
   * @name GC_MAX_IDLE
   * @memberof PIXI.settings
   * @type {number}
   * @default 3600
   */
  GC_MAX_IDLE: 60 * 60,
  /**
   * Default Garbage Collection maximum check count.
   * @static
   * @name GC_MAX_CHECK_COUNT
   * @memberof PIXI.settings
   * @type {number}
   * @default 600
   */
  GC_MAX_CHECK_COUNT: 60 * 10,
  /**
   * Default wrap modes that are supported by pixi.
   * @static
   * @name WRAP_MODE
   * @memberof PIXI.settings
   * @type {PIXI.WRAP_MODES}
   * @default PIXI.WRAP_MODES.CLAMP
   */
  WRAP_MODE: Nr.CLAMP,
  /**
   * Default scale mode for textures.
   * @static
   * @name SCALE_MODE
   * @memberof PIXI.settings
   * @type {PIXI.SCALE_MODES}
   * @default PIXI.SCALE_MODES.LINEAR
   */
  SCALE_MODE: Dr.LINEAR,
  /**
   * Default specify float precision in vertex shader.
   * @static
   * @name PRECISION_VERTEX
   * @memberof PIXI.settings
   * @type {PIXI.PRECISION}
   * @default PIXI.PRECISION.HIGH
   */
  PRECISION_VERTEX: cr.HIGH,
  /**
   * Default specify float precision in fragment shader.
   * iOS is best set at highp due to https://github.com/pixijs/pixi.js/issues/3742
   * @static
   * @name PRECISION_FRAGMENT
   * @memberof PIXI.settings
   * @type {PIXI.PRECISION}
   * @default PIXI.PRECISION.MEDIUM
   */
  PRECISION_FRAGMENT: Tr.apple.device ? cr.HIGH : cr.MEDIUM,
  /**
   * Can we upload the same buffer in a single frame?
   * @static
   * @name CAN_UPLOAD_SAME_BUFFER
   * @memberof PIXI.settings
   * @type {boolean}
   */
  CAN_UPLOAD_SAME_BUFFER: hp(),
  /**
   * Enables bitmap creation before image load. This feature is experimental.
   * @static
   * @name CREATE_IMAGE_BITMAP
   * @memberof PIXI.settings
   * @type {boolean}
   * @default false
   */
  CREATE_IMAGE_BITMAP: !1,
  /**
   * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
   * Advantages can include sharper image quality (like text) and faster rendering on canvas.
   * The main disadvantage is movement of objects may appear less smooth.
   * @static
   * @constant
   * @memberof PIXI.settings
   * @type {boolean}
   * @default false
   */
  ROUND_PIXELS: !1
}, As = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : {};
function gu(i) {
  return i && i.__esModule && Object.prototype.hasOwnProperty.call(i, "default") ? i.default : i;
}
function lp(i) {
  if (i.__esModule)
    return i;
  var t = i.default;
  if (typeof t == "function") {
    var e = function a() {
      return this instanceof a ? Reflect.construct(t, arguments, this.constructor) : t.apply(this, arguments);
    };
    e.prototype = t.prototype;
  } else
    e = {};
  return Object.defineProperty(e, "__esModule", { value: !0 }), Object.keys(i).forEach(function(a) {
    var n = Object.getOwnPropertyDescriptor(i, a);
    Object.defineProperty(e, a, n.get ? n : {
      enumerable: !0,
      get: function() {
        return i[a];
      }
    });
  }), e;
}
var ac = { exports: {} };
(function(i) {
  var t = Object.prototype.hasOwnProperty, e = "~";
  function a() {
  }
  Object.create && (a.prototype = /* @__PURE__ */ Object.create(null), new a().__proto__ || (e = !1));
  function n(m, g, A) {
    this.fn = m, this.context = g, this.once = A || !1;
  }
  function s(m, g, A, x, w) {
    if (typeof A != "function")
      throw new TypeError("The listener must be a function");
    var C = new n(A, x || m, w), O = e ? e + g : g;
    return m._events[O] ? m._events[O].fn ? m._events[O] = [m._events[O], C] : m._events[O].push(C) : (m._events[O] = C, m._eventsCount++), m;
  }
  function o(m, g) {
    --m._eventsCount === 0 ? m._events = new a() : delete m._events[g];
  }
  function u() {
    this._events = new a(), this._eventsCount = 0;
  }
  u.prototype.eventNames = function() {
    var g = [], A, x;
    if (this._eventsCount === 0)
      return g;
    for (x in A = this._events)
      t.call(A, x) && g.push(e ? x.slice(1) : x);
    return Object.getOwnPropertySymbols ? g.concat(Object.getOwnPropertySymbols(A)) : g;
  }, u.prototype.listeners = function(g) {
    var A = e ? e + g : g, x = this._events[A];
    if (!x)
      return [];
    if (x.fn)
      return [x.fn];
    for (var w = 0, C = x.length, O = new Array(C); w < C; w++)
      O[w] = x[w].fn;
    return O;
  }, u.prototype.listenerCount = function(g) {
    var A = e ? e + g : g, x = this._events[A];
    return x ? x.fn ? 1 : x.length : 0;
  }, u.prototype.emit = function(g, A, x, w, C, O) {
    var L = e ? e + g : g;
    if (!this._events[L])
      return !1;
    var D = this._events[L], H = arguments.length, k, G;
    if (D.fn) {
      switch (D.once && this.removeListener(g, D.fn, void 0, !0), H) {
        case 1:
          return D.fn.call(D.context), !0;
        case 2:
          return D.fn.call(D.context, A), !0;
        case 3:
          return D.fn.call(D.context, A, x), !0;
        case 4:
          return D.fn.call(D.context, A, x, w), !0;
        case 5:
          return D.fn.call(D.context, A, x, w, C), !0;
        case 6:
          return D.fn.call(D.context, A, x, w, C, O), !0;
      }
      for (G = 1, k = new Array(H - 1); G < H; G++)
        k[G - 1] = arguments[G];
      D.fn.apply(D.context, k);
    } else {
      var z = D.length, Y;
      for (G = 0; G < z; G++)
        switch (D[G].once && this.removeListener(g, D[G].fn, void 0, !0), H) {
          case 1:
            D[G].fn.call(D[G].context);
            break;
          case 2:
            D[G].fn.call(D[G].context, A);
            break;
          case 3:
            D[G].fn.call(D[G].context, A, x);
            break;
          case 4:
            D[G].fn.call(D[G].context, A, x, w);
            break;
          default:
            if (!k)
              for (Y = 1, k = new Array(H - 1); Y < H; Y++)
                k[Y - 1] = arguments[Y];
            D[G].fn.apply(D[G].context, k);
        }
    }
    return !0;
  }, u.prototype.on = function(g, A, x) {
    return s(this, g, A, x, !1);
  }, u.prototype.once = function(g, A, x) {
    return s(this, g, A, x, !0);
  }, u.prototype.removeListener = function(g, A, x, w) {
    var C = e ? e + g : g;
    if (!this._events[C])
      return this;
    if (!A)
      return o(this, C), this;
    var O = this._events[C];
    if (O.fn)
      O.fn === A && (!w || O.once) && (!x || O.context === x) && o(this, C);
    else {
      for (var L = 0, D = [], H = O.length; L < H; L++)
        (O[L].fn !== A || w && !O[L].once || x && O[L].context !== x) && D.push(O[L]);
      D.length ? this._events[C] = D.length === 1 ? D[0] : D : o(this, C);
    }
    return this;
  }, u.prototype.removeAllListeners = function(g) {
    var A;
    return g ? (A = e ? e + g : g, this._events[A] && o(this, A)) : (this._events = new a(), this._eventsCount = 0), this;
  }, u.prototype.off = u.prototype.removeListener, u.prototype.addListener = u.prototype.on, u.prefixed = e, u.EventEmitter = u, i.exports = u;
})(ac);
var fp = ac.exports;
const mi = /* @__PURE__ */ gu(fp);
var yu = { exports: {} };
yu.exports = Ys;
yu.exports.default = Ys;
function Ys(i, t, e) {
  e = e || 2;
  var a = t && t.length, n = a ? t[0] * e : i.length, s = nc(i, 0, n, e, !0), o = [];
  if (!s || s.next === s.prev)
    return o;
  var u, m, g, A, x, w, C;
  if (a && (s = vp(i, t, s, e)), i.length > 80 * e) {
    u = g = i[0], m = A = i[1];
    for (var O = e; O < n; O += e)
      x = i[O], w = i[O + 1], x < u && (u = x), w < m && (m = w), x > g && (g = x), w > A && (A = w);
    C = Math.max(g - u, A - m), C = C !== 0 ? 32767 / C : 0;
  }
  return En(s, o, e, u, m, C, 0), o;
}
function nc(i, t, e, a, n) {
  var s, o;
  if (n === _h(i, t, e, a) > 0)
    for (s = t; s < e; s += a)
      o = Sf(s, i[s], i[s + 1], o);
  else
    for (s = e - a; s >= t; s -= a)
      o = Sf(s, i[s], i[s + 1], o);
  return o && zs(o, o.next) && (In(o), o = o.next), o;
}
function na(i, t) {
  if (!i)
    return i;
  t || (t = i);
  var e = i, a;
  do
    if (a = !1, !e.steiner && (zs(e, e.next) || Ae(e.prev, e, e.next) === 0)) {
      if (In(e), e = t = e.prev, e === e.next)
        break;
      a = !0;
    } else
      e = e.next;
  while (a || e !== t);
  return t;
}
function En(i, t, e, a, n, s, o) {
  if (i) {
    !o && s && xp(i, a, n, s);
    for (var u = i, m, g; i.prev !== i.next; ) {
      if (m = i.prev, g = i.next, s ? dp(i, a, n, s) : cp(i)) {
        t.push(m.i / e | 0), t.push(i.i / e | 0), t.push(g.i / e | 0), In(i), i = g.next, u = g.next;
        continue;
      }
      if (i = g, i === u) {
        o ? o === 1 ? (i = pp(na(i), t, e), En(i, t, e, a, n, s, 2)) : o === 2 && _p(i, t, e, a, n, s) : En(na(i), t, e, a, n, s, 1);
        break;
      }
    }
  }
}
function cp(i) {
  var t = i.prev, e = i, a = i.next;
  if (Ae(t, e, a) >= 0)
    return !1;
  for (var n = t.x, s = e.x, o = a.x, u = t.y, m = e.y, g = a.y, A = n < s ? n < o ? n : o : s < o ? s : o, x = u < m ? u < g ? u : g : m < g ? m : g, w = n > s ? n > o ? n : o : s > o ? s : o, C = u > m ? u > g ? u : g : m > g ? m : g, O = a.next; O !== t; ) {
    if (O.x >= A && O.x <= w && O.y >= x && O.y <= C && Sa(n, u, s, m, o, g, O.x, O.y) && Ae(O.prev, O, O.next) >= 0)
      return !1;
    O = O.next;
  }
  return !0;
}
function dp(i, t, e, a) {
  var n = i.prev, s = i, o = i.next;
  if (Ae(n, s, o) >= 0)
    return !1;
  for (var u = n.x, m = s.x, g = o.x, A = n.y, x = s.y, w = o.y, C = u < m ? u < g ? u : g : m < g ? m : g, O = A < x ? A < w ? A : w : x < w ? x : w, L = u > m ? u > g ? u : g : m > g ? m : g, D = A > x ? A > w ? A : w : x > w ? x : w, H = dh(C, O, t, e, a), k = dh(L, D, t, e, a), G = i.prevZ, z = i.nextZ; G && G.z >= H && z && z.z <= k; ) {
    if (G.x >= C && G.x <= L && G.y >= O && G.y <= D && G !== n && G !== o && Sa(u, A, m, x, g, w, G.x, G.y) && Ae(G.prev, G, G.next) >= 0 || (G = G.prevZ, z.x >= C && z.x <= L && z.y >= O && z.y <= D && z !== n && z !== o && Sa(u, A, m, x, g, w, z.x, z.y) && Ae(z.prev, z, z.next) >= 0))
      return !1;
    z = z.nextZ;
  }
  for (; G && G.z >= H; ) {
    if (G.x >= C && G.x <= L && G.y >= O && G.y <= D && G !== n && G !== o && Sa(u, A, m, x, g, w, G.x, G.y) && Ae(G.prev, G, G.next) >= 0)
      return !1;
    G = G.prevZ;
  }
  for (; z && z.z <= k; ) {
    if (z.x >= C && z.x <= L && z.y >= O && z.y <= D && z !== n && z !== o && Sa(u, A, m, x, g, w, z.x, z.y) && Ae(z.prev, z, z.next) >= 0)
      return !1;
    z = z.nextZ;
  }
  return !0;
}
function pp(i, t, e) {
  var a = i;
  do {
    var n = a.prev, s = a.next.next;
    !zs(n, s) && sc(n, a, a.next, s) && wn(n, s) && wn(s, n) && (t.push(n.i / e | 0), t.push(a.i / e | 0), t.push(s.i / e | 0), In(a), In(a.next), a = i = s), a = a.next;
  } while (a !== i);
  return na(a);
}
function _p(i, t, e, a, n, s) {
  var o = i;
  do {
    for (var u = o.next.next; u !== o.prev; ) {
      if (o.i !== u.i && Sp(o, u)) {
        var m = oc(o, u);
        o = na(o, o.next), m = na(m, m.next), En(o, t, e, a, n, s, 0), En(m, t, e, a, n, s, 0);
        return;
      }
      u = u.next;
    }
    o = o.next;
  } while (o !== i);
}
function vp(i, t, e, a) {
  var n = [], s, o, u, m, g;
  for (s = 0, o = t.length; s < o; s++)
    u = t[s] * a, m = s < o - 1 ? t[s + 1] * a : i.length, g = nc(i, u, m, a, !1), g === g.next && (g.steiner = !0), n.push(Ap(g));
  for (n.sort(mp), s = 0; s < n.length; s++)
    e = gp(n[s], e);
  return e;
}
function mp(i, t) {
  return i.x - t.x;
}
function gp(i, t) {
  var e = yp(i, t);
  if (!e)
    return t;
  var a = oc(e, i);
  return na(a, a.next), na(e, e.next);
}
function yp(i, t) {
  var e = t, a = i.x, n = i.y, s = -1 / 0, o;
  do {
    if (n <= e.y && n >= e.next.y && e.next.y !== e.y) {
      var u = e.x + (n - e.y) * (e.next.x - e.x) / (e.next.y - e.y);
      if (u <= a && u > s && (s = u, o = e.x < e.next.x ? e : e.next, u === a))
        return o;
    }
    e = e.next;
  } while (e !== t);
  if (!o)
    return null;
  var m = o, g = o.x, A = o.y, x = 1 / 0, w;
  e = o;
  do
    a >= e.x && e.x >= g && a !== e.x && Sa(n < A ? a : s, n, g, A, n < A ? s : a, n, e.x, e.y) && (w = Math.abs(n - e.y) / (a - e.x), wn(e, i) && (w < x || w === x && (e.x > o.x || e.x === o.x && bp(o, e))) && (o = e, x = w)), e = e.next;
  while (e !== m);
  return o;
}
function bp(i, t) {
  return Ae(i.prev, i, t.prev) < 0 && Ae(t.next, i, i.next) < 0;
}
function xp(i, t, e, a) {
  var n = i;
  do
    n.z === 0 && (n.z = dh(n.x, n.y, t, e, a)), n.prevZ = n.prev, n.nextZ = n.next, n = n.next;
  while (n !== i);
  n.prevZ.nextZ = null, n.prevZ = null, Tp(n);
}
function Tp(i) {
  var t, e, a, n, s, o, u, m, g = 1;
  do {
    for (e = i, i = null, s = null, o = 0; e; ) {
      for (o++, a = e, u = 0, t = 0; t < g && (u++, a = a.nextZ, !!a); t++)
        ;
      for (m = g; u > 0 || m > 0 && a; )
        u !== 0 && (m === 0 || !a || e.z <= a.z) ? (n = e, e = e.nextZ, u--) : (n = a, a = a.nextZ, m--), s ? s.nextZ = n : i = n, n.prevZ = s, s = n;
      e = a;
    }
    s.nextZ = null, g *= 2;
  } while (o > 1);
  return i;
}
function dh(i, t, e, a, n) {
  return i = (i - e) * n | 0, t = (t - a) * n | 0, i = (i | i << 8) & 16711935, i = (i | i << 4) & 252645135, i = (i | i << 2) & 858993459, i = (i | i << 1) & 1431655765, t = (t | t << 8) & 16711935, t = (t | t << 4) & 252645135, t = (t | t << 2) & 858993459, t = (t | t << 1) & 1431655765, i | t << 1;
}
function Ap(i) {
  var t = i, e = i;
  do
    (t.x < e.x || t.x === e.x && t.y < e.y) && (e = t), t = t.next;
  while (t !== i);
  return e;
}
function Sa(i, t, e, a, n, s, o, u) {
  return (n - o) * (t - u) >= (i - o) * (s - u) && (i - o) * (a - u) >= (e - o) * (t - u) && (e - o) * (s - u) >= (n - o) * (a - u);
}
function Sp(i, t) {
  return i.next.i !== t.i && i.prev.i !== t.i && !Ep(i, t) && // dones't intersect other edges
  (wn(i, t) && wn(t, i) && wp(i, t) && // locally visible
  (Ae(i.prev, i, t.prev) || Ae(i, t.prev, t)) || // does not create opposite-facing sectors
  zs(i, t) && Ae(i.prev, i, i.next) > 0 && Ae(t.prev, t, t.next) > 0);
}
function Ae(i, t, e) {
  return (t.y - i.y) * (e.x - t.x) - (t.x - i.x) * (e.y - t.y);
}
function zs(i, t) {
  return i.x === t.x && i.y === t.y;
}
function sc(i, t, e, a) {
  var n = Qn(Ae(i, t, e)), s = Qn(Ae(i, t, a)), o = Qn(Ae(e, a, i)), u = Qn(Ae(e, a, t));
  return !!(n !== s && o !== u || n === 0 && jn(i, e, t) || s === 0 && jn(i, a, t) || o === 0 && jn(e, i, a) || u === 0 && jn(e, t, a));
}
function jn(i, t, e) {
  return t.x <= Math.max(i.x, e.x) && t.x >= Math.min(i.x, e.x) && t.y <= Math.max(i.y, e.y) && t.y >= Math.min(i.y, e.y);
}
function Qn(i) {
  return i > 0 ? 1 : i < 0 ? -1 : 0;
}
function Ep(i, t) {
  var e = i;
  do {
    if (e.i !== i.i && e.next.i !== i.i && e.i !== t.i && e.next.i !== t.i && sc(e, e.next, i, t))
      return !0;
    e = e.next;
  } while (e !== i);
  return !1;
}
function wn(i, t) {
  return Ae(i.prev, i, i.next) < 0 ? Ae(i, t, i.next) >= 0 && Ae(i, i.prev, t) >= 0 : Ae(i, t, i.prev) < 0 || Ae(i, i.next, t) < 0;
}
function wp(i, t) {
  var e = i, a = !1, n = (i.x + t.x) / 2, s = (i.y + t.y) / 2;
  do
    e.y > s != e.next.y > s && e.next.y !== e.y && n < (e.next.x - e.x) * (s - e.y) / (e.next.y - e.y) + e.x && (a = !a), e = e.next;
  while (e !== i);
  return a;
}
function oc(i, t) {
  var e = new ph(i.i, i.x, i.y), a = new ph(t.i, t.x, t.y), n = i.next, s = t.prev;
  return i.next = t, t.prev = i, e.next = n, n.prev = e, a.next = e, e.prev = a, s.next = a, a.prev = s, a;
}
function Sf(i, t, e, a) {
  var n = new ph(i, t, e);
  return a ? (n.next = a.next, n.prev = a, a.next.prev = n, a.next = n) : (n.prev = n, n.next = n), n;
}
function In(i) {
  i.next.prev = i.prev, i.prev.next = i.next, i.prevZ && (i.prevZ.nextZ = i.nextZ), i.nextZ && (i.nextZ.prevZ = i.prevZ);
}
function ph(i, t, e) {
  this.i = i, this.x = t, this.y = e, this.prev = null, this.next = null, this.z = 0, this.prevZ = null, this.nextZ = null, this.steiner = !1;
}
Ys.deviation = function(i, t, e, a) {
  var n = t && t.length, s = n ? t[0] * e : i.length, o = Math.abs(_h(i, 0, s, e));
  if (n)
    for (var u = 0, m = t.length; u < m; u++) {
      var g = t[u] * e, A = u < m - 1 ? t[u + 1] * e : i.length;
      o -= Math.abs(_h(i, g, A, e));
    }
  var x = 0;
  for (u = 0; u < a.length; u += 3) {
    var w = a[u] * e, C = a[u + 1] * e, O = a[u + 2] * e;
    x += Math.abs(
      (i[w] - i[O]) * (i[C + 1] - i[w + 1]) - (i[w] - i[C]) * (i[O + 1] - i[w + 1])
    );
  }
  return o === 0 && x === 0 ? 0 : Math.abs((x - o) / o);
};
function _h(i, t, e, a) {
  for (var n = 0, s = t, o = e - a; s < e; s += a)
    n += (i[o] - i[s]) * (i[s + 1] + i[o + 1]), o = s;
  return n;
}
Ys.flatten = function(i) {
  for (var t = i[0][0].length, e = { vertices: [], holes: [], dimensions: t }, a = 0, n = 0; n < i.length; n++) {
    for (var s = 0; s < i[n].length; s++)
      for (var o = 0; o < t; o++)
        e.vertices.push(i[n][s][o]);
    n > 0 && (a += i[n - 1].length, e.holes.push(a));
  }
  return e;
};
var Ip = yu.exports;
const bu = /* @__PURE__ */ gu(Ip);
var $s = { exports: {} };
/*! https://mths.be/punycode v1.4.1 by @mathias */
$s.exports;
(function(i, t) {
  (function(e) {
    var a = t && !t.nodeType && t, n = i && !i.nodeType && i, s = typeof As == "object" && As;
    (s.global === s || s.window === s || s.self === s) && (e = s);
    var o, u = 2147483647, m = 36, g = 1, A = 26, x = 38, w = 700, C = 72, O = 128, L = "-", D = /^xn--/, H = /[^\x20-\x7E]/, k = /[\x2E\u3002\uFF0E\uFF61]/g, G = {
      overflow: "Overflow: input needs wider integers to process",
      "not-basic": "Illegal input >= 0x80 (not a basic code point)",
      "invalid-input": "Invalid input"
    }, z = m - g, Y = Math.floor, K = String.fromCharCode, J;
    function nt(ft) {
      throw new RangeError(G[ft]);
    }
    function q(ft, at) {
      for (var kt = ft.length, Wt = []; kt--; )
        Wt[kt] = at(ft[kt]);
      return Wt;
    }
    function tt(ft, at) {
      var kt = ft.split("@"), Wt = "";
      kt.length > 1 && (Wt = kt[0] + "@", ft = kt[1]), ft = ft.replace(k, ".");
      var Jt = ft.split("."), fe = q(Jt, at).join(".");
      return Wt + fe;
    }
    function lt(ft) {
      for (var at = [], kt = 0, Wt = ft.length, Jt, fe; kt < Wt; )
        Jt = ft.charCodeAt(kt++), Jt >= 55296 && Jt <= 56319 && kt < Wt ? (fe = ft.charCodeAt(kt++), (fe & 64512) == 56320 ? at.push(((Jt & 1023) << 10) + (fe & 1023) + 65536) : (at.push(Jt), kt--)) : at.push(Jt);
      return at;
    }
    function bt(ft) {
      return q(ft, function(at) {
        var kt = "";
        return at > 65535 && (at -= 65536, kt += K(at >>> 10 & 1023 | 55296), at = 56320 | at & 1023), kt += K(at), kt;
      }).join("");
    }
    function Et(ft) {
      return ft - 48 < 10 ? ft - 22 : ft - 65 < 26 ? ft - 65 : ft - 97 < 26 ? ft - 97 : m;
    }
    function Bt(ft, at) {
      return ft + 22 + 75 * (ft < 26) - ((at != 0) << 5);
    }
    function pt(ft, at, kt) {
      var Wt = 0;
      for (ft = kt ? Y(ft / w) : ft >> 1, ft += Y(ft / at); ft > z * A >> 1; Wt += m)
        ft = Y(ft / z);
      return Y(Wt + (z + 1) * ft / (ft + x));
    }
    function dt(ft) {
      var at = [], kt = ft.length, Wt, Jt = 0, fe = O, oe = C, he, Pe, He, me, Xt, ee, re, Gt, Be;
      for (he = ft.lastIndexOf(L), he < 0 && (he = 0), Pe = 0; Pe < he; ++Pe)
        ft.charCodeAt(Pe) >= 128 && nt("not-basic"), at.push(ft.charCodeAt(Pe));
      for (He = he > 0 ? he + 1 : 0; He < kt; ) {
        for (me = Jt, Xt = 1, ee = m; He >= kt && nt("invalid-input"), re = Et(ft.charCodeAt(He++)), (re >= m || re > Y((u - Jt) / Xt)) && nt("overflow"), Jt += re * Xt, Gt = ee <= oe ? g : ee >= oe + A ? A : ee - oe, !(re < Gt); ee += m)
          Be = m - Gt, Xt > Y(u / Be) && nt("overflow"), Xt *= Be;
        Wt = at.length + 1, oe = pt(Jt - me, Wt, me == 0), Y(Jt / Wt) > u - fe && nt("overflow"), fe += Y(Jt / Wt), Jt %= Wt, at.splice(Jt++, 0, fe);
      }
      return bt(at);
    }
    function $t(ft) {
      var at, kt, Wt, Jt, fe, oe, he, Pe, He, me, Xt, ee = [], re, Gt, Be, W;
      for (ft = lt(ft), re = ft.length, at = O, kt = 0, fe = C, oe = 0; oe < re; ++oe)
        Xt = ft[oe], Xt < 128 && ee.push(K(Xt));
      for (Wt = Jt = ee.length, Jt && ee.push(L); Wt < re; ) {
        for (he = u, oe = 0; oe < re; ++oe)
          Xt = ft[oe], Xt >= at && Xt < he && (he = Xt);
        for (Gt = Wt + 1, he - at > Y((u - kt) / Gt) && nt("overflow"), kt += (he - at) * Gt, at = he, oe = 0; oe < re; ++oe)
          if (Xt = ft[oe], Xt < at && ++kt > u && nt("overflow"), Xt == at) {
            for (Pe = kt, He = m; me = He <= fe ? g : He >= fe + A ? A : He - fe, !(Pe < me); He += m)
              W = Pe - me, Be = m - me, ee.push(
                K(Bt(me + W % Be, 0))
              ), Pe = Y(W / Be);
            ee.push(K(Bt(Pe, 0))), fe = pt(kt, Gt, Wt == Jt), kt = 0, ++Wt;
          }
        ++kt, ++at;
      }
      return ee.join("");
    }
    function ve(ft) {
      return tt(ft, function(at) {
        return D.test(at) ? dt(at.slice(4).toLowerCase()) : at;
      });
    }
    function Kt(ft) {
      return tt(ft, function(at) {
        return H.test(at) ? "xn--" + $t(at) : at;
      });
    }
    if (o = {
      /**
       * A string representing the current Punycode.js version number.
       * @memberOf punycode
       * @type String
       */
      version: "1.4.1",
      /**
       * An object of methods to convert from JavaScript's internal character
       * representation (UCS-2) to Unicode code points, and back.
       * @see <https://mathiasbynens.be/notes/javascript-encoding>
       * @memberOf punycode
       * @type Object
       */
      ucs2: {
        decode: lt,
        encode: bt
      },
      decode: dt,
      encode: $t,
      toASCII: Kt,
      toUnicode: ve
    }, a && n)
      if (i.exports == a)
        n.exports = o;
      else
        for (J in o)
          o.hasOwnProperty(J) && (a[J] = o[J]);
    else
      e.punycode = o;
  })(As);
})($s, $s.exports);
var Pp = $s.exports, Mp = Error, Cp = EvalError, Op = RangeError, $p = ReferenceError, hc = SyntaxError, kn = TypeError, Rp = URIError, Lp = function() {
  if (typeof Symbol != "function" || typeof Object.getOwnPropertySymbols != "function")
    return !1;
  if (typeof Symbol.iterator == "symbol")
    return !0;
  var t = {}, e = Symbol("test"), a = Object(e);
  if (typeof e == "string" || Object.prototype.toString.call(e) !== "[object Symbol]" || Object.prototype.toString.call(a) !== "[object Symbol]")
    return !1;
  var n = 42;
  t[e] = n;
  for (e in t)
    return !1;
  if (typeof Object.keys == "function" && Object.keys(t).length !== 0 || typeof Object.getOwnPropertyNames == "function" && Object.getOwnPropertyNames(t).length !== 0)
    return !1;
  var s = Object.getOwnPropertySymbols(t);
  if (s.length !== 1 || s[0] !== e || !Object.prototype.propertyIsEnumerable.call(t, e))
    return !1;
  if (typeof Object.getOwnPropertyDescriptor == "function") {
    var o = Object.getOwnPropertyDescriptor(t, e);
    if (o.value !== n || o.enumerable !== !0)
      return !1;
  }
  return !0;
}, Ef = typeof Symbol != "undefined" && Symbol, Dp = Lp, Np = function() {
  return typeof Ef != "function" || typeof Symbol != "function" || typeof Ef("foo") != "symbol" || typeof Symbol("bar") != "symbol" ? !1 : Dp();
}, Ao = {
  __proto__: null,
  foo: {}
}, Fp = Object, Hp = function() {
  return { __proto__: Ao }.foo === Ao.foo && !(Ao instanceof Fp);
}, Bp = "Function.prototype.bind called on incompatible ", kp = Object.prototype.toString, Up = Math.max, Gp = "[object Function]", wf = function(t, e) {
  for (var a = [], n = 0; n < t.length; n += 1)
    a[n] = t[n];
  for (var s = 0; s < e.length; s += 1)
    a[s + t.length] = e[s];
  return a;
}, Xp = function(t, e) {
  for (var a = [], n = e, s = 0; n < t.length; n += 1, s += 1)
    a[s] = t[n];
  return a;
}, Vp = function(i, t) {
  for (var e = "", a = 0; a < i.length; a += 1)
    e += i[a], a + 1 < i.length && (e += t);
  return e;
}, Yp = function(t) {
  var e = this;
  if (typeof e != "function" || kp.apply(e) !== Gp)
    throw new TypeError(Bp + e);
  for (var a = Xp(arguments, 1), n, s = function() {
    if (this instanceof n) {
      var A = e.apply(
        this,
        wf(a, arguments)
      );
      return Object(A) === A ? A : this;
    }
    return e.apply(
      t,
      wf(a, arguments)
    );
  }, o = Up(0, e.length - a.length), u = [], m = 0; m < o; m++)
    u[m] = "$" + m;
  if (n = Function("binder", "return function (" + Vp(u, ",") + "){ return binder.apply(this,arguments); }")(s), e.prototype) {
    var g = function() {
    };
    g.prototype = e.prototype, n.prototype = new g(), g.prototype = null;
  }
  return n;
}, zp = Yp, xu = Function.prototype.bind || zp, Kp = Function.prototype.call, Wp = Object.prototype.hasOwnProperty, jp = xu, Qp = jp.call(Kp, Wp), Yt, Jp = Mp, qp = Cp, Zp = Op, t_ = $p, Oa = hc, wa = kn, e_ = Rp, uc = Function, So = function(i) {
  try {
    return uc('"use strict"; return (' + i + ").constructor;")();
  } catch (t) {
  }
}, ta = Object.getOwnPropertyDescriptor;
if (ta)
  try {
    ta({}, "");
  } catch (i) {
    ta = null;
  }
var Eo = function() {
  throw new wa();
}, r_ = ta ? function() {
  try {
    return arguments.callee, Eo;
  } catch (i) {
    try {
      return ta(arguments, "callee").get;
    } catch (t) {
      return Eo;
    }
  }
}() : Eo, va = Np(), i_ = Hp(), ze = Object.getPrototypeOf || (i_ ? function(i) {
  return i.__proto__;
} : null), Ta = {}, a_ = typeof Uint8Array == "undefined" || !ze ? Yt : ze(Uint8Array), ea = {
  __proto__: null,
  "%AggregateError%": typeof AggregateError == "undefined" ? Yt : AggregateError,
  "%Array%": Array,
  "%ArrayBuffer%": typeof ArrayBuffer == "undefined" ? Yt : ArrayBuffer,
  "%ArrayIteratorPrototype%": va && ze ? ze([][Symbol.iterator]()) : Yt,
  "%AsyncFromSyncIteratorPrototype%": Yt,
  "%AsyncFunction%": Ta,
  "%AsyncGenerator%": Ta,
  "%AsyncGeneratorFunction%": Ta,
  "%AsyncIteratorPrototype%": Ta,
  "%Atomics%": typeof Atomics == "undefined" ? Yt : Atomics,
  "%BigInt%": typeof BigInt == "undefined" ? Yt : BigInt,
  "%BigInt64Array%": typeof BigInt64Array == "undefined" ? Yt : BigInt64Array,
  "%BigUint64Array%": typeof BigUint64Array == "undefined" ? Yt : BigUint64Array,
  "%Boolean%": Boolean,
  "%DataView%": typeof DataView == "undefined" ? Yt : DataView,
  "%Date%": Date,
  "%decodeURI%": decodeURI,
  "%decodeURIComponent%": decodeURIComponent,
  "%encodeURI%": encodeURI,
  "%encodeURIComponent%": encodeURIComponent,
  "%Error%": Jp,
  "%eval%": eval,
  // eslint-disable-line no-eval
  "%EvalError%": qp,
  "%Float32Array%": typeof Float32Array == "undefined" ? Yt : Float32Array,
  "%Float64Array%": typeof Float64Array == "undefined" ? Yt : Float64Array,
  "%FinalizationRegistry%": typeof FinalizationRegistry == "undefined" ? Yt : FinalizationRegistry,
  "%Function%": uc,
  "%GeneratorFunction%": Ta,
  "%Int8Array%": typeof Int8Array == "undefined" ? Yt : Int8Array,
  "%Int16Array%": typeof Int16Array == "undefined" ? Yt : Int16Array,
  "%Int32Array%": typeof Int32Array == "undefined" ? Yt : Int32Array,
  "%isFinite%": isFinite,
  "%isNaN%": isNaN,
  "%IteratorPrototype%": va && ze ? ze(ze([][Symbol.iterator]())) : Yt,
  "%JSON%": typeof JSON == "object" ? JSON : Yt,
  "%Map%": typeof Map == "undefined" ? Yt : Map,
  "%MapIteratorPrototype%": typeof Map == "undefined" || !va || !ze ? Yt : ze((/* @__PURE__ */ new Map())[Symbol.iterator]()),
  "%Math%": Math,
  "%Number%": Number,
  "%Object%": Object,
  "%parseFloat%": parseFloat,
  "%parseInt%": parseInt,
  "%Promise%": typeof Promise == "undefined" ? Yt : Promise,
  "%Proxy%": typeof Proxy == "undefined" ? Yt : Proxy,
  "%RangeError%": Zp,
  "%ReferenceError%": t_,
  "%Reflect%": typeof Reflect == "undefined" ? Yt : Reflect,
  "%RegExp%": RegExp,
  "%Set%": typeof Set == "undefined" ? Yt : Set,
  "%SetIteratorPrototype%": typeof Set == "undefined" || !va || !ze ? Yt : ze((/* @__PURE__ */ new Set())[Symbol.iterator]()),
  "%SharedArrayBuffer%": typeof SharedArrayBuffer == "undefined" ? Yt : SharedArrayBuffer,
  "%String%": String,
  "%StringIteratorPrototype%": va && ze ? ze(""[Symbol.iterator]()) : Yt,
  "%Symbol%": va ? Symbol : Yt,
  "%SyntaxError%": Oa,
  "%ThrowTypeError%": r_,
  "%TypedArray%": a_,
  "%TypeError%": wa,
  "%Uint8Array%": typeof Uint8Array == "undefined" ? Yt : Uint8Array,
  "%Uint8ClampedArray%": typeof Uint8ClampedArray == "undefined" ? Yt : Uint8ClampedArray,
  "%Uint16Array%": typeof Uint16Array == "undefined" ? Yt : Uint16Array,
  "%Uint32Array%": typeof Uint32Array == "undefined" ? Yt : Uint32Array,
  "%URIError%": e_,
  "%WeakMap%": typeof WeakMap == "undefined" ? Yt : WeakMap,
  "%WeakRef%": typeof WeakRef == "undefined" ? Yt : WeakRef,
  "%WeakSet%": typeof WeakSet == "undefined" ? Yt : WeakSet
};
if (ze)
  try {
    null.error;
  } catch (i) {
    var n_ = ze(ze(i));
    ea["%Error.prototype%"] = n_;
  }
var s_ = function i(t) {
  var e;
  if (t === "%AsyncFunction%")
    e = So("async function () {}");
  else if (t === "%GeneratorFunction%")
    e = So("function* () {}");
  else if (t === "%AsyncGeneratorFunction%")
    e = So("async function* () {}");
  else if (t === "%AsyncGenerator%") {
    var a = i("%AsyncGeneratorFunction%");
    a && (e = a.prototype);
  } else if (t === "%AsyncIteratorPrototype%") {
    var n = i("%AsyncGenerator%");
    n && ze && (e = ze(n.prototype));
  }
  return ea[t] = e, e;
}, If = {
  __proto__: null,
  "%ArrayBufferPrototype%": ["ArrayBuffer", "prototype"],
  "%ArrayPrototype%": ["Array", "prototype"],
  "%ArrayProto_entries%": ["Array", "prototype", "entries"],
  "%ArrayProto_forEach%": ["Array", "prototype", "forEach"],
  "%ArrayProto_keys%": ["Array", "prototype", "keys"],
  "%ArrayProto_values%": ["Array", "prototype", "values"],
  "%AsyncFunctionPrototype%": ["AsyncFunction", "prototype"],
  "%AsyncGenerator%": ["AsyncGeneratorFunction", "prototype"],
  "%AsyncGeneratorPrototype%": ["AsyncGeneratorFunction", "prototype", "prototype"],
  "%BooleanPrototype%": ["Boolean", "prototype"],
  "%DataViewPrototype%": ["DataView", "prototype"],
  "%DatePrototype%": ["Date", "prototype"],
  "%ErrorPrototype%": ["Error", "prototype"],
  "%EvalErrorPrototype%": ["EvalError", "prototype"],
  "%Float32ArrayPrototype%": ["Float32Array", "prototype"],
  "%Float64ArrayPrototype%": ["Float64Array", "prototype"],
  "%FunctionPrototype%": ["Function", "prototype"],
  "%Generator%": ["GeneratorFunction", "prototype"],
  "%GeneratorPrototype%": ["GeneratorFunction", "prototype", "prototype"],
  "%Int8ArrayPrototype%": ["Int8Array", "prototype"],
  "%Int16ArrayPrototype%": ["Int16Array", "prototype"],
  "%Int32ArrayPrototype%": ["Int32Array", "prototype"],
  "%JSONParse%": ["JSON", "parse"],
  "%JSONStringify%": ["JSON", "stringify"],
  "%MapPrototype%": ["Map", "prototype"],
  "%NumberPrototype%": ["Number", "prototype"],
  "%ObjectPrototype%": ["Object", "prototype"],
  "%ObjProto_toString%": ["Object", "prototype", "toString"],
  "%ObjProto_valueOf%": ["Object", "prototype", "valueOf"],
  "%PromisePrototype%": ["Promise", "prototype"],
  "%PromiseProto_then%": ["Promise", "prototype", "then"],
  "%Promise_all%": ["Promise", "all"],
  "%Promise_reject%": ["Promise", "reject"],
  "%Promise_resolve%": ["Promise", "resolve"],
  "%RangeErrorPrototype%": ["RangeError", "prototype"],
  "%ReferenceErrorPrototype%": ["ReferenceError", "prototype"],
  "%RegExpPrototype%": ["RegExp", "prototype"],
  "%SetPrototype%": ["Set", "prototype"],
  "%SharedArrayBufferPrototype%": ["SharedArrayBuffer", "prototype"],
  "%StringPrototype%": ["String", "prototype"],
  "%SymbolPrototype%": ["Symbol", "prototype"],
  "%SyntaxErrorPrototype%": ["SyntaxError", "prototype"],
  "%TypedArrayPrototype%": ["TypedArray", "prototype"],
  "%TypeErrorPrototype%": ["TypeError", "prototype"],
  "%Uint8ArrayPrototype%": ["Uint8Array", "prototype"],
  "%Uint8ClampedArrayPrototype%": ["Uint8ClampedArray", "prototype"],
  "%Uint16ArrayPrototype%": ["Uint16Array", "prototype"],
  "%Uint32ArrayPrototype%": ["Uint32Array", "prototype"],
  "%URIErrorPrototype%": ["URIError", "prototype"],
  "%WeakMapPrototype%": ["WeakMap", "prototype"],
  "%WeakSetPrototype%": ["WeakSet", "prototype"]
}, Un = xu, Rs = Qp, o_ = Un.call(Function.call, Array.prototype.concat), h_ = Un.call(Function.apply, Array.prototype.splice), Pf = Un.call(Function.call, String.prototype.replace), Ls = Un.call(Function.call, String.prototype.slice), u_ = Un.call(Function.call, RegExp.prototype.exec), l_ = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g, f_ = /\\(\\)?/g, c_ = function(t) {
  var e = Ls(t, 0, 1), a = Ls(t, -1);
  if (e === "%" && a !== "%")
    throw new Oa("invalid intrinsic syntax, expected closing `%`");
  if (a === "%" && e !== "%")
    throw new Oa("invalid intrinsic syntax, expected opening `%`");
  var n = [];
  return Pf(t, l_, function(s, o, u, m) {
    n[n.length] = u ? Pf(m, f_, "$1") : o || s;
  }), n;
}, d_ = function(t, e) {
  var a = t, n;
  if (Rs(If, a) && (n = If[a], a = "%" + n[0] + "%"), Rs(ea, a)) {
    var s = ea[a];
    if (s === Ta && (s = s_(a)), typeof s == "undefined" && !e)
      throw new wa("intrinsic " + t + " exists, but is not available. Please file an issue!");
    return {
      alias: n,
      name: a,
      value: s
    };
  }
  throw new Oa("intrinsic " + t + " does not exist!");
}, ka = function(t, e) {
  if (typeof t != "string" || t.length === 0)
    throw new wa("intrinsic name must be a non-empty string");
  if (arguments.length > 1 && typeof e != "boolean")
    throw new wa('"allowMissing" argument must be a boolean');
  if (u_(/^%?[^%]*%?$/, t) === null)
    throw new Oa("`%` may not be present anywhere but at the beginning and end of the intrinsic name");
  var a = c_(t), n = a.length > 0 ? a[0] : "", s = d_("%" + n + "%", e), o = s.name, u = s.value, m = !1, g = s.alias;
  g && (n = g[0], h_(a, o_([0, 1], g)));
  for (var A = 1, x = !0; A < a.length; A += 1) {
    var w = a[A], C = Ls(w, 0, 1), O = Ls(w, -1);
    if ((C === '"' || C === "'" || C === "`" || O === '"' || O === "'" || O === "`") && C !== O)
      throw new Oa("property names with quotes must have matching quotes");
    if ((w === "constructor" || !x) && (m = !0), n += "." + w, o = "%" + n + "%", Rs(ea, o))
      u = ea[o];
    else if (u != null) {
      if (!(w in u)) {
        if (!e)
          throw new wa("base intrinsic for " + t + " exists, but the property is not available.");
        return;
      }
      if (ta && A + 1 >= a.length) {
        var L = ta(u, w);
        x = !!L, x && "get" in L && !("originalValue" in L.get) ? u = L.get : u = u[w];
      } else
        x = Rs(u, w), u = u[w];
      x && !m && (ea[o] = u);
    }
  }
  return u;
}, lc = { exports: {} }, wo, Mf;
function Tu() {
  if (Mf)
    return wo;
  Mf = 1;
  var i = ka, t = i("%Object.defineProperty%", !0) || !1;
  if (t)
    try {
      t({}, "a", { value: 1 });
    } catch (e) {
      t = !1;
    }
  return wo = t, wo;
}
var p_ = ka, Ss = p_("%Object.getOwnPropertyDescriptor%", !0);
if (Ss)
  try {
    Ss([], "length");
  } catch (i) {
    Ss = null;
  }
var fc = Ss, Cf = Tu(), __ = hc, ma = kn, Of = fc, v_ = function(t, e, a) {
  if (!t || typeof t != "object" && typeof t != "function")
    throw new ma("`obj` must be an object or a function`");
  if (typeof e != "string" && typeof e != "symbol")
    throw new ma("`property` must be a string or a symbol`");
  if (arguments.length > 3 && typeof arguments[3] != "boolean" && arguments[3] !== null)
    throw new ma("`nonEnumerable`, if provided, must be a boolean or null");
  if (arguments.length > 4 && typeof arguments[4] != "boolean" && arguments[4] !== null)
    throw new ma("`nonWritable`, if provided, must be a boolean or null");
  if (arguments.length > 5 && typeof arguments[5] != "boolean" && arguments[5] !== null)
    throw new ma("`nonConfigurable`, if provided, must be a boolean or null");
  if (arguments.length > 6 && typeof arguments[6] != "boolean")
    throw new ma("`loose`, if provided, must be a boolean");
  var n = arguments.length > 3 ? arguments[3] : null, s = arguments.length > 4 ? arguments[4] : null, o = arguments.length > 5 ? arguments[5] : null, u = arguments.length > 6 ? arguments[6] : !1, m = !!Of && Of(t, e);
  if (Cf)
    Cf(t, e, {
      configurable: o === null && m ? m.configurable : !o,
      enumerable: n === null && m ? m.enumerable : !n,
      value: a,
      writable: s === null && m ? m.writable : !s
    });
  else if (u || !n && !s && !o)
    t[e] = a;
  else
    throw new __("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");
}, vh = Tu(), cc = function() {
  return !!vh;
};
cc.hasArrayLengthDefineBug = function() {
  if (!vh)
    return null;
  try {
    return vh([], "length", { value: 1 }).length !== 1;
  } catch (t) {
    return !0;
  }
};
var m_ = cc, g_ = ka, $f = v_, y_ = m_(), Rf = fc, Lf = kn, b_ = g_("%Math.floor%"), x_ = function(t, e) {
  if (typeof t != "function")
    throw new Lf("`fn` is not a function");
  if (typeof e != "number" || e < 0 || e > 4294967295 || b_(e) !== e)
    throw new Lf("`length` must be a positive 32-bit integer");
  var a = arguments.length > 2 && !!arguments[2], n = !0, s = !0;
  if ("length" in t && Rf) {
    var o = Rf(t, "length");
    o && !o.configurable && (n = !1), o && !o.writable && (s = !1);
  }
  return (n || s || !a) && (y_ ? $f(
    /** @type {Parameters<define>[0]} */
    t,
    "length",
    e,
    !0,
    !0
  ) : $f(
    /** @type {Parameters<define>[0]} */
    t,
    "length",
    e
  )), t;
};
(function(i) {
  var t = xu, e = ka, a = x_, n = kn, s = e("%Function.prototype.apply%"), o = e("%Function.prototype.call%"), u = e("%Reflect.apply%", !0) || t.call(o, s), m = Tu(), g = e("%Math.max%");
  i.exports = function(w) {
    if (typeof w != "function")
      throw new n("a function is required");
    var C = u(t, o, arguments);
    return a(
      C,
      1 + g(0, w.length - (arguments.length - 1)),
      !0
    );
  };
  var A = function() {
    return u(t, s, arguments);
  };
  m ? m(i.exports, "apply", { value: A }) : i.exports.apply = A;
})(lc);
var T_ = lc.exports, dc = ka, pc = T_, A_ = pc(dc("String.prototype.indexOf")), S_ = function(t, e) {
  var a = dc(t, !!e);
  return typeof a == "function" && A_(t, ".prototype.") > -1 ? pc(a) : a;
};
const E_ = {}, w_ = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: E_
}, Symbol.toStringTag, { value: "Module" })), I_ = /* @__PURE__ */ lp(w_);
var Au = typeof Map == "function" && Map.prototype, Io = Object.getOwnPropertyDescriptor && Au ? Object.getOwnPropertyDescriptor(Map.prototype, "size") : null, Ds = Au && Io && typeof Io.get == "function" ? Io.get : null, Df = Au && Map.prototype.forEach, Su = typeof Set == "function" && Set.prototype, Po = Object.getOwnPropertyDescriptor && Su ? Object.getOwnPropertyDescriptor(Set.prototype, "size") : null, Ns = Su && Po && typeof Po.get == "function" ? Po.get : null, Nf = Su && Set.prototype.forEach, P_ = typeof WeakMap == "function" && WeakMap.prototype, _n = P_ ? WeakMap.prototype.has : null, M_ = typeof WeakSet == "function" && WeakSet.prototype, vn = M_ ? WeakSet.prototype.has : null, C_ = typeof WeakRef == "function" && WeakRef.prototype, Ff = C_ ? WeakRef.prototype.deref : null, O_ = Boolean.prototype.valueOf, $_ = Object.prototype.toString, R_ = Function.prototype.toString, L_ = String.prototype.match, Eu = String.prototype.slice, Ei = String.prototype.replace, D_ = String.prototype.toUpperCase, Hf = String.prototype.toLowerCase, _c = RegExp.prototype.test, Bf = Array.prototype.concat, Wr = Array.prototype.join, N_ = Array.prototype.slice, kf = Math.floor, mh = typeof BigInt == "function" ? BigInt.prototype.valueOf : null, Mo = Object.getOwnPropertySymbols, gh = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? Symbol.prototype.toString : null, $a = typeof Symbol == "function" && typeof Symbol.iterator == "object", ir = typeof Symbol == "function" && Symbol.toStringTag && (typeof Symbol.toStringTag === $a || !0) ? Symbol.toStringTag : null, vc = Object.prototype.propertyIsEnumerable, Uf = (typeof Reflect == "function" ? Reflect.getPrototypeOf : Object.getPrototypeOf) || ([].__proto__ === Array.prototype ? function(i) {
  return i.__proto__;
} : null);
function Gf(i, t) {
  if (i === 1 / 0 || i === -1 / 0 || i !== i || i && i > -1e3 && i < 1e3 || _c.call(/e/, t))
    return t;
  var e = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;
  if (typeof i == "number") {
    var a = i < 0 ? -kf(-i) : kf(i);
    if (a !== i) {
      var n = String(a), s = Eu.call(t, n.length + 1);
      return Ei.call(n, e, "$&_") + "." + Ei.call(Ei.call(s, /([0-9]{3})/g, "$&_"), /_$/, "");
    }
  }
  return Ei.call(t, e, "$&_");
}
var yh = I_, Xf = yh.custom, Vf = gc(Xf) ? Xf : null, F_ = function i(t, e, a, n) {
  var s = e || {};
  if (Ai(s, "quoteStyle") && s.quoteStyle !== "single" && s.quoteStyle !== "double")
    throw new TypeError('option "quoteStyle" must be "single" or "double"');
  if (Ai(s, "maxStringLength") && (typeof s.maxStringLength == "number" ? s.maxStringLength < 0 && s.maxStringLength !== 1 / 0 : s.maxStringLength !== null))
    throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');
  var o = Ai(s, "customInspect") ? s.customInspect : !0;
  if (typeof o != "boolean" && o !== "symbol")
    throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");
  if (Ai(s, "indent") && s.indent !== null && s.indent !== "	" && !(parseInt(s.indent, 10) === s.indent && s.indent > 0))
    throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');
  if (Ai(s, "numericSeparator") && typeof s.numericSeparator != "boolean")
    throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');
  var u = s.numericSeparator;
  if (typeof t == "undefined")
    return "undefined";
  if (t === null)
    return "null";
  if (typeof t == "boolean")
    return t ? "true" : "false";
  if (typeof t == "string")
    return bc(t, s);
  if (typeof t == "number") {
    if (t === 0)
      return 1 / 0 / t > 0 ? "0" : "-0";
    var m = String(t);
    return u ? Gf(t, m) : m;
  }
  if (typeof t == "bigint") {
    var g = String(t) + "n";
    return u ? Gf(t, g) : g;
  }
  var A = typeof s.depth == "undefined" ? 5 : s.depth;
  if (typeof a == "undefined" && (a = 0), a >= A && A > 0 && typeof t == "object")
    return bh(t) ? "[Array]" : "[Object]";
  var x = ev(s, a);
  if (typeof n == "undefined")
    n = [];
  else if (yc(n, t) >= 0)
    return "[Circular]";
  function w(Et, Bt, pt) {
    if (Bt && (n = N_.call(n), n.push(Bt)), pt) {
      var dt = {
        depth: s.depth
      };
      return Ai(s, "quoteStyle") && (dt.quoteStyle = s.quoteStyle), i(Et, dt, a + 1, n);
    }
    return i(Et, s, a + 1, n);
  }
  if (typeof t == "function" && !Yf(t)) {
    var C = z_(t), O = Jn(t, w);
    return "[Function" + (C ? ": " + C : " (anonymous)") + "]" + (O.length > 0 ? " { " + Wr.call(O, ", ") + " }" : "");
  }
  if (gc(t)) {
    var L = $a ? Ei.call(String(t), /^(Symbol\(.*\))_[^)]*$/, "$1") : gh.call(t);
    return typeof t == "object" && !$a ? Qa(L) : L;
  }
  if (q_(t)) {
    for (var D = "<" + Hf.call(String(t.nodeName)), H = t.attributes || [], k = 0; k < H.length; k++)
      D += " " + H[k].name + "=" + mc(H_(H[k].value), "double", s);
    return D += ">", t.childNodes && t.childNodes.length && (D += "..."), D += "</" + Hf.call(String(t.nodeName)) + ">", D;
  }
  if (bh(t)) {
    if (t.length === 0)
      return "[]";
    var G = Jn(t, w);
    return x && !tv(G) ? "[" + xh(G, x) + "]" : "[ " + Wr.call(G, ", ") + " ]";
  }
  if (k_(t)) {
    var z = Jn(t, w);
    return !("cause" in Error.prototype) && "cause" in t && !vc.call(t, "cause") ? "{ [" + String(t) + "] " + Wr.call(Bf.call("[cause]: " + w(t.cause), z), ", ") + " }" : z.length === 0 ? "[" + String(t) + "]" : "{ [" + String(t) + "] " + Wr.call(z, ", ") + " }";
  }
  if (typeof t == "object" && o) {
    if (Vf && typeof t[Vf] == "function" && yh)
      return yh(t, { depth: A - a });
    if (o !== "symbol" && typeof t.inspect == "function")
      return t.inspect();
  }
  if (K_(t)) {
    var Y = [];
    return Df && Df.call(t, function(Et, Bt) {
      Y.push(w(Bt, t, !0) + " => " + w(Et, t));
    }), zf("Map", Ds.call(t), Y, x);
  }
  if (Q_(t)) {
    var K = [];
    return Nf && Nf.call(t, function(Et) {
      K.push(w(Et, t));
    }), zf("Set", Ns.call(t), K, x);
  }
  if (W_(t))
    return Co("WeakMap");
  if (J_(t))
    return Co("WeakSet");
  if (j_(t))
    return Co("WeakRef");
  if (G_(t))
    return Qa(w(Number(t)));
  if (V_(t))
    return Qa(w(mh.call(t)));
  if (X_(t))
    return Qa(O_.call(t));
  if (U_(t))
    return Qa(w(String(t)));
  if (typeof window != "undefined" && t === window)
    return "{ [object Window] }";
  if (t === As)
    return "{ [object globalThis] }";
  if (!B_(t) && !Yf(t)) {
    var J = Jn(t, w), nt = Uf ? Uf(t) === Object.prototype : t instanceof Object || t.constructor === Object, q = t instanceof Object ? "" : "null prototype", tt = !nt && ir && Object(t) === t && ir in t ? Eu.call(Li(t), 8, -1) : q ? "Object" : "", lt = nt || typeof t.constructor != "function" ? "" : t.constructor.name ? t.constructor.name + " " : "", bt = lt + (tt || q ? "[" + Wr.call(Bf.call([], tt || [], q || []), ": ") + "] " : "");
    return J.length === 0 ? bt + "{}" : x ? bt + "{" + xh(J, x) + "}" : bt + "{ " + Wr.call(J, ", ") + " }";
  }
  return String(t);
};
function mc(i, t, e) {
  var a = (e.quoteStyle || t) === "double" ? '"' : "'";
  return a + i + a;
}
function H_(i) {
  return Ei.call(String(i), /"/g, "&quot;");
}
function bh(i) {
  return Li(i) === "[object Array]" && (!ir || !(typeof i == "object" && ir in i));
}
function B_(i) {
  return Li(i) === "[object Date]" && (!ir || !(typeof i == "object" && ir in i));
}
function Yf(i) {
  return Li(i) === "[object RegExp]" && (!ir || !(typeof i == "object" && ir in i));
}
function k_(i) {
  return Li(i) === "[object Error]" && (!ir || !(typeof i == "object" && ir in i));
}
function U_(i) {
  return Li(i) === "[object String]" && (!ir || !(typeof i == "object" && ir in i));
}
function G_(i) {
  return Li(i) === "[object Number]" && (!ir || !(typeof i == "object" && ir in i));
}
function X_(i) {
  return Li(i) === "[object Boolean]" && (!ir || !(typeof i == "object" && ir in i));
}
function gc(i) {
  if ($a)
    return i && typeof i == "object" && i instanceof Symbol;
  if (typeof i == "symbol")
    return !0;
  if (!i || typeof i != "object" || !gh)
    return !1;
  try {
    return gh.call(i), !0;
  } catch (t) {
  }
  return !1;
}
function V_(i) {
  if (!i || typeof i != "object" || !mh)
    return !1;
  try {
    return mh.call(i), !0;
  } catch (t) {
  }
  return !1;
}
var Y_ = Object.prototype.hasOwnProperty || function(i) {
  return i in this;
};
function Ai(i, t) {
  return Y_.call(i, t);
}
function Li(i) {
  return $_.call(i);
}
function z_(i) {
  if (i.name)
    return i.name;
  var t = L_.call(R_.call(i), /^function\s*([\w$]+)/);
  return t ? t[1] : null;
}
function yc(i, t) {
  if (i.indexOf)
    return i.indexOf(t);
  for (var e = 0, a = i.length; e < a; e++)
    if (i[e] === t)
      return e;
  return -1;
}
function K_(i) {
  if (!Ds || !i || typeof i != "object")
    return !1;
  try {
    Ds.call(i);
    try {
      Ns.call(i);
    } catch (t) {
      return !0;
    }
    return i instanceof Map;
  } catch (t) {
  }
  return !1;
}
function W_(i) {
  if (!_n || !i || typeof i != "object")
    return !1;
  try {
    _n.call(i, _n);
    try {
      vn.call(i, vn);
    } catch (t) {
      return !0;
    }
    return i instanceof WeakMap;
  } catch (t) {
  }
  return !1;
}
function j_(i) {
  if (!Ff || !i || typeof i != "object")
    return !1;
  try {
    return Ff.call(i), !0;
  } catch (t) {
  }
  return !1;
}
function Q_(i) {
  if (!Ns || !i || typeof i != "object")
    return !1;
  try {
    Ns.call(i);
    try {
      Ds.call(i);
    } catch (t) {
      return !0;
    }
    return i instanceof Set;
  } catch (t) {
  }
  return !1;
}
function J_(i) {
  if (!vn || !i || typeof i != "object")
    return !1;
  try {
    vn.call(i, vn);
    try {
      _n.call(i, _n);
    } catch (t) {
      return !0;
    }
    return i instanceof WeakSet;
  } catch (t) {
  }
  return !1;
}
function q_(i) {
  return !i || typeof i != "object" ? !1 : typeof HTMLElement != "undefined" && i instanceof HTMLElement ? !0 : typeof i.nodeName == "string" && typeof i.getAttribute == "function";
}
function bc(i, t) {
  if (i.length > t.maxStringLength) {
    var e = i.length - t.maxStringLength, a = "... " + e + " more character" + (e > 1 ? "s" : "");
    return bc(Eu.call(i, 0, t.maxStringLength), t) + a;
  }
  var n = Ei.call(Ei.call(i, /(['\\])/g, "\\$1"), /[\x00-\x1f]/g, Z_);
  return mc(n, "single", t);
}
function Z_(i) {
  var t = i.charCodeAt(0), e = {
    8: "b",
    9: "t",
    10: "n",
    12: "f",
    13: "r"
  }[t];
  return e ? "\\" + e : "\\x" + (t < 16 ? "0" : "") + D_.call(t.toString(16));
}
function Qa(i) {
  return "Object(" + i + ")";
}
function Co(i) {
  return i + " { ? }";
}
function zf(i, t, e, a) {
  var n = a ? xh(e, a) : Wr.call(e, ", ");
  return i + " (" + t + ") {" + n + "}";
}
function tv(i) {
  for (var t = 0; t < i.length; t++)
    if (yc(i[t], `
`) >= 0)
      return !1;
  return !0;
}
function ev(i, t) {
  var e;
  if (i.indent === "	")
    e = "	";
  else if (typeof i.indent == "number" && i.indent > 0)
    e = Wr.call(Array(i.indent + 1), " ");
  else
    return null;
  return {
    base: e,
    prev: Wr.call(Array(t + 1), e)
  };
}
function xh(i, t) {
  if (i.length === 0)
    return "";
  var e = `
` + t.prev + t.base;
  return e + Wr.call(i, "," + e) + `
` + t.prev;
}
function Jn(i, t) {
  var e = bh(i), a = [];
  if (e) {
    a.length = i.length;
    for (var n = 0; n < i.length; n++)
      a[n] = Ai(i, n) ? t(i[n], i) : "";
  }
  var s = typeof Mo == "function" ? Mo(i) : [], o;
  if ($a) {
    o = {};
    for (var u = 0; u < s.length; u++)
      o["$" + s[u]] = s[u];
  }
  for (var m in i)
    Ai(i, m) && (e && String(Number(m)) === m && m < i.length || $a && o["$" + m] instanceof Symbol || (_c.call(/[^\w$]/, m) ? a.push(t(m, i) + ": " + t(i[m], i)) : a.push(m + ": " + t(i[m], i))));
  if (typeof Mo == "function")
    for (var g = 0; g < s.length; g++)
      vc.call(i, s[g]) && a.push("[" + t(s[g]) + "]: " + t(i[s[g]], i));
  return a;
}
var xc = ka, Ua = S_, rv = F_, iv = kn, qn = xc("%WeakMap%", !0), Zn = xc("%Map%", !0), av = Ua("WeakMap.prototype.get", !0), nv = Ua("WeakMap.prototype.set", !0), sv = Ua("WeakMap.prototype.has", !0), ov = Ua("Map.prototype.get", !0), hv = Ua("Map.prototype.set", !0), uv = Ua("Map.prototype.has", !0), wu = function(i, t) {
  for (var e = i, a; (a = e.next) !== null; e = a)
    if (a.key === t)
      return e.next = a.next, a.next = /** @type {NonNullable<typeof list.next>} */
      i.next, i.next = a, a;
}, lv = function(i, t) {
  var e = wu(i, t);
  return e && e.value;
}, fv = function(i, t, e) {
  var a = wu(i, t);
  a ? a.value = e : i.next = /** @type {import('.').ListNode<typeof value>} */
  {
    // eslint-disable-line no-param-reassign, no-extra-parens
    key: t,
    next: i.next,
    value: e
  };
}, cv = function(i, t) {
  return !!wu(i, t);
}, dv = function() {
  var t, e, a, n = {
    assert: function(s) {
      if (!n.has(s))
        throw new iv("Side channel does not contain " + rv(s));
    },
    get: function(s) {
      if (qn && s && (typeof s == "object" || typeof s == "function")) {
        if (t)
          return av(t, s);
      } else if (Zn) {
        if (e)
          return ov(e, s);
      } else if (a)
        return lv(a, s);
    },
    has: function(s) {
      if (qn && s && (typeof s == "object" || typeof s == "function")) {
        if (t)
          return sv(t, s);
      } else if (Zn) {
        if (e)
          return uv(e, s);
      } else if (a)
        return cv(a, s);
      return !1;
    },
    set: function(s, o) {
      qn && s && (typeof s == "object" || typeof s == "function") ? (t || (t = new qn()), nv(t, s, o)) : Zn ? (e || (e = new Zn()), hv(e, s, o)) : (a || (a = { key: {}, next: null }), fv(a, s, o));
    }
  };
  return n;
}, pv = String.prototype.replace, _v = /%20/g, Oo = {
  RFC1738: "RFC1738",
  RFC3986: "RFC3986"
}, Iu = {
  default: Oo.RFC3986,
  formatters: {
    RFC1738: function(i) {
      return pv.call(i, _v, "+");
    },
    RFC3986: function(i) {
      return String(i);
    }
  },
  RFC1738: Oo.RFC1738,
  RFC3986: Oo.RFC3986
}, vv = Iu, $o = Object.prototype.hasOwnProperty, qi = Array.isArray, Yr = function() {
  for (var i = [], t = 0; t < 256; ++t)
    i.push("%" + ((t < 16 ? "0" : "") + t.toString(16)).toUpperCase());
  return i;
}(), mv = function(t) {
  for (; t.length > 1; ) {
    var e = t.pop(), a = e.obj[e.prop];
    if (qi(a)) {
      for (var n = [], s = 0; s < a.length; ++s)
        typeof a[s] != "undefined" && n.push(a[s]);
      e.obj[e.prop] = n;
    }
  }
}, Tc = function(t, e) {
  for (var a = e && e.plainObjects ? /* @__PURE__ */ Object.create(null) : {}, n = 0; n < t.length; ++n)
    typeof t[n] != "undefined" && (a[n] = t[n]);
  return a;
}, gv = function i(t, e, a) {
  if (!e)
    return t;
  if (typeof e != "object") {
    if (qi(t))
      t.push(e);
    else if (t && typeof t == "object")
      (a && (a.plainObjects || a.allowPrototypes) || !$o.call(Object.prototype, e)) && (t[e] = !0);
    else
      return [t, e];
    return t;
  }
  if (!t || typeof t != "object")
    return [t].concat(e);
  var n = t;
  return qi(t) && !qi(e) && (n = Tc(t, a)), qi(t) && qi(e) ? (e.forEach(function(s, o) {
    if ($o.call(t, o)) {
      var u = t[o];
      u && typeof u == "object" && s && typeof s == "object" ? t[o] = i(u, s, a) : t.push(s);
    } else
      t[o] = s;
  }), t) : Object.keys(e).reduce(function(s, o) {
    var u = e[o];
    return $o.call(s, o) ? s[o] = i(s[o], u, a) : s[o] = u, s;
  }, n);
}, yv = function(t, e) {
  return Object.keys(e).reduce(function(a, n) {
    return a[n] = e[n], a;
  }, t);
}, bv = function(i, t, e) {
  var a = i.replace(/\+/g, " ");
  if (e === "iso-8859-1")
    return a.replace(/%[0-9a-f]{2}/gi, unescape);
  try {
    return decodeURIComponent(a);
  } catch (n) {
    return a;
  }
}, xv = function(t, e, a, n, s) {
  if (t.length === 0)
    return t;
  var o = t;
  if (typeof t == "symbol" ? o = Symbol.prototype.toString.call(t) : typeof t != "string" && (o = String(t)), a === "iso-8859-1")
    return escape(o).replace(/%u[0-9a-f]{4}/gi, function(A) {
      return "%26%23" + parseInt(A.slice(2), 16) + "%3B";
    });
  for (var u = "", m = 0; m < o.length; ++m) {
    var g = o.charCodeAt(m);
    if (g === 45 || g === 46 || g === 95 || g === 126 || g >= 48 && g <= 57 || g >= 65 && g <= 90 || g >= 97 && g <= 122 || s === vv.RFC1738 && (g === 40 || g === 41)) {
      u += o.charAt(m);
      continue;
    }
    if (g < 128) {
      u = u + Yr[g];
      continue;
    }
    if (g < 2048) {
      u = u + (Yr[192 | g >> 6] + Yr[128 | g & 63]);
      continue;
    }
    if (g < 55296 || g >= 57344) {
      u = u + (Yr[224 | g >> 12] + Yr[128 | g >> 6 & 63] + Yr[128 | g & 63]);
      continue;
    }
    m += 1, g = 65536 + ((g & 1023) << 10 | o.charCodeAt(m) & 1023), u += Yr[240 | g >> 18] + Yr[128 | g >> 12 & 63] + Yr[128 | g >> 6 & 63] + Yr[128 | g & 63];
  }
  return u;
}, Tv = function(t) {
  for (var e = [{ obj: { o: t }, prop: "o" }], a = [], n = 0; n < e.length; ++n)
    for (var s = e[n], o = s.obj[s.prop], u = Object.keys(o), m = 0; m < u.length; ++m) {
      var g = u[m], A = o[g];
      typeof A == "object" && A !== null && a.indexOf(A) === -1 && (e.push({ obj: o, prop: g }), a.push(A));
    }
  return mv(e), t;
}, Av = function(t) {
  return Object.prototype.toString.call(t) === "[object RegExp]";
}, Sv = function(t) {
  return !t || typeof t != "object" ? !1 : !!(t.constructor && t.constructor.isBuffer && t.constructor.isBuffer(t));
}, Ev = function(t, e) {
  return [].concat(t, e);
}, wv = function(t, e) {
  if (qi(t)) {
    for (var a = [], n = 0; n < t.length; n += 1)
      a.push(e(t[n]));
    return a;
  }
  return e(t);
}, Ac = {
  arrayToObject: Tc,
  assign: yv,
  combine: Ev,
  compact: Tv,
  decode: bv,
  encode: xv,
  isBuffer: Sv,
  isRegExp: Av,
  maybeMap: wv,
  merge: gv
}, Sc = dv, Es = Ac, mn = Iu, Iv = Object.prototype.hasOwnProperty, Kf = {
  brackets: function(t) {
    return t + "[]";
  },
  comma: "comma",
  indices: function(t, e) {
    return t + "[" + e + "]";
  },
  repeat: function(t) {
    return t;
  }
}, fi = Array.isArray, Pv = Array.prototype.push, Ec = function(i, t) {
  Pv.apply(i, fi(t) ? t : [t]);
}, Mv = Date.prototype.toISOString, Wf = mn.default, er = {
  addQueryPrefix: !1,
  allowDots: !1,
  charset: "utf-8",
  charsetSentinel: !1,
  delimiter: "&",
  encode: !0,
  encoder: Es.encode,
  encodeValuesOnly: !1,
  format: Wf,
  formatter: mn.formatters[Wf],
  // deprecated
  indices: !1,
  serializeDate: function(t) {
    return Mv.call(t);
  },
  skipNulls: !1,
  strictNullHandling: !1
}, Cv = function(t) {
  return typeof t == "string" || typeof t == "number" || typeof t == "boolean" || typeof t == "symbol" || typeof t == "bigint";
}, Ro = {}, Ov = function i(t, e, a, n, s, o, u, m, g, A, x, w, C, O, L, D) {
  for (var H = t, k = D, G = 0, z = !1; (k = k.get(Ro)) !== void 0 && !z; ) {
    var Y = k.get(t);
    if (G += 1, typeof Y != "undefined") {
      if (Y === G)
        throw new RangeError("Cyclic object value");
      z = !0;
    }
    typeof k.get(Ro) == "undefined" && (G = 0);
  }
  if (typeof m == "function" ? H = m(e, H) : H instanceof Date ? H = x(H) : a === "comma" && fi(H) && (H = Es.maybeMap(H, function(dt) {
    return dt instanceof Date ? x(dt) : dt;
  })), H === null) {
    if (s)
      return u && !O ? u(e, er.encoder, L, "key", w) : e;
    H = "";
  }
  if (Cv(H) || Es.isBuffer(H)) {
    if (u) {
      var K = O ? e : u(e, er.encoder, L, "key", w);
      return [C(K) + "=" + C(u(H, er.encoder, L, "value", w))];
    }
    return [C(e) + "=" + C(String(H))];
  }
  var J = [];
  if (typeof H == "undefined")
    return J;
  var nt;
  if (a === "comma" && fi(H))
    O && u && (H = Es.maybeMap(H, u)), nt = [{ value: H.length > 0 ? H.join(",") || null : void 0 }];
  else if (fi(m))
    nt = m;
  else {
    var q = Object.keys(H);
    nt = g ? q.sort(g) : q;
  }
  for (var tt = n && fi(H) && H.length === 1 ? e + "[]" : e, lt = 0; lt < nt.length; ++lt) {
    var bt = nt[lt], Et = typeof bt == "object" && typeof bt.value != "undefined" ? bt.value : H[bt];
    if (!(o && Et === null)) {
      var Bt = fi(H) ? typeof a == "function" ? a(tt, bt) : tt : tt + (A ? "." + bt : "[" + bt + "]");
      D.set(t, G);
      var pt = Sc();
      pt.set(Ro, D), Ec(J, i(
        Et,
        Bt,
        a,
        n,
        s,
        o,
        a === "comma" && O && fi(H) ? null : u,
        m,
        g,
        A,
        x,
        w,
        C,
        O,
        L,
        pt
      ));
    }
  }
  return J;
}, $v = function(t) {
  if (!t)
    return er;
  if (t.encoder !== null && typeof t.encoder != "undefined" && typeof t.encoder != "function")
    throw new TypeError("Encoder has to be a function.");
  var e = t.charset || er.charset;
  if (typeof t.charset != "undefined" && t.charset !== "utf-8" && t.charset !== "iso-8859-1")
    throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
  var a = mn.default;
  if (typeof t.format != "undefined") {
    if (!Iv.call(mn.formatters, t.format))
      throw new TypeError("Unknown format option provided.");
    a = t.format;
  }
  var n = mn.formatters[a], s = er.filter;
  return (typeof t.filter == "function" || fi(t.filter)) && (s = t.filter), {
    addQueryPrefix: typeof t.addQueryPrefix == "boolean" ? t.addQueryPrefix : er.addQueryPrefix,
    allowDots: typeof t.allowDots == "undefined" ? er.allowDots : !!t.allowDots,
    charset: e,
    charsetSentinel: typeof t.charsetSentinel == "boolean" ? t.charsetSentinel : er.charsetSentinel,
    delimiter: typeof t.delimiter == "undefined" ? er.delimiter : t.delimiter,
    encode: typeof t.encode == "boolean" ? t.encode : er.encode,
    encoder: typeof t.encoder == "function" ? t.encoder : er.encoder,
    encodeValuesOnly: typeof t.encodeValuesOnly == "boolean" ? t.encodeValuesOnly : er.encodeValuesOnly,
    filter: s,
    format: a,
    formatter: n,
    serializeDate: typeof t.serializeDate == "function" ? t.serializeDate : er.serializeDate,
    skipNulls: typeof t.skipNulls == "boolean" ? t.skipNulls : er.skipNulls,
    sort: typeof t.sort == "function" ? t.sort : null,
    strictNullHandling: typeof t.strictNullHandling == "boolean" ? t.strictNullHandling : er.strictNullHandling
  };
}, Rv = function(i, t) {
  var e = i, a = $v(t), n, s;
  typeof a.filter == "function" ? (s = a.filter, e = s("", e)) : fi(a.filter) && (s = a.filter, n = s);
  var o = [];
  if (typeof e != "object" || e === null)
    return "";
  var u;
  t && t.arrayFormat in Kf ? u = t.arrayFormat : t && "indices" in t ? u = t.indices ? "indices" : "repeat" : u = "indices";
  var m = Kf[u];
  if (t && "commaRoundTrip" in t && typeof t.commaRoundTrip != "boolean")
    throw new TypeError("`commaRoundTrip` must be a boolean, or absent");
  var g = m === "comma" && t && t.commaRoundTrip;
  n || (n = Object.keys(e)), a.sort && n.sort(a.sort);
  for (var A = Sc(), x = 0; x < n.length; ++x) {
    var w = n[x];
    a.skipNulls && e[w] === null || Ec(o, Ov(
      e[w],
      w,
      m,
      g,
      a.strictNullHandling,
      a.skipNulls,
      a.encode ? a.encoder : null,
      a.filter,
      a.sort,
      a.allowDots,
      a.serializeDate,
      a.format,
      a.formatter,
      a.encodeValuesOnly,
      a.charset,
      A
    ));
  }
  var C = o.join(a.delimiter), O = a.addQueryPrefix === !0 ? "?" : "";
  return a.charsetSentinel && (a.charset === "iso-8859-1" ? O += "utf8=%26%2310003%3B&" : O += "utf8=%E2%9C%93&"), C.length > 0 ? O + C : "";
}, Ra = Ac, Th = Object.prototype.hasOwnProperty, Lv = Array.isArray, Ye = {
  allowDots: !1,
  allowPrototypes: !1,
  allowSparse: !1,
  arrayLimit: 20,
  charset: "utf-8",
  charsetSentinel: !1,
  comma: !1,
  decoder: Ra.decode,
  delimiter: "&",
  depth: 5,
  ignoreQueryPrefix: !1,
  interpretNumericEntities: !1,
  parameterLimit: 1e3,
  parseArrays: !0,
  plainObjects: !1,
  strictNullHandling: !1
}, Dv = function(i) {
  return i.replace(/&#(\d+);/g, function(t, e) {
    return String.fromCharCode(parseInt(e, 10));
  });
}, wc = function(i, t) {
  return i && typeof i == "string" && t.comma && i.indexOf(",") > -1 ? i.split(",") : i;
}, Nv = "utf8=%26%2310003%3B", Fv = "utf8=%E2%9C%93", Hv = function(t, e) {
  var a = { __proto__: null }, n = e.ignoreQueryPrefix ? t.replace(/^\?/, "") : t, s = e.parameterLimit === 1 / 0 ? void 0 : e.parameterLimit, o = n.split(e.delimiter, s), u = -1, m, g = e.charset;
  if (e.charsetSentinel)
    for (m = 0; m < o.length; ++m)
      o[m].indexOf("utf8=") === 0 && (o[m] === Fv ? g = "utf-8" : o[m] === Nv && (g = "iso-8859-1"), u = m, m = o.length);
  for (m = 0; m < o.length; ++m)
    if (m !== u) {
      var A = o[m], x = A.indexOf("]="), w = x === -1 ? A.indexOf("=") : x + 1, C, O;
      w === -1 ? (C = e.decoder(A, Ye.decoder, g, "key"), O = e.strictNullHandling ? null : "") : (C = e.decoder(A.slice(0, w), Ye.decoder, g, "key"), O = Ra.maybeMap(
        wc(A.slice(w + 1), e),
        function(L) {
          return e.decoder(L, Ye.decoder, g, "value");
        }
      )), O && e.interpretNumericEntities && g === "iso-8859-1" && (O = Dv(O)), A.indexOf("[]=") > -1 && (O = Lv(O) ? [O] : O), Th.call(a, C) ? a[C] = Ra.combine(a[C], O) : a[C] = O;
    }
  return a;
}, Bv = function(i, t, e, a) {
  for (var n = a ? t : wc(t, e), s = i.length - 1; s >= 0; --s) {
    var o, u = i[s];
    if (u === "[]" && e.parseArrays)
      o = [].concat(n);
    else {
      o = e.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
      var m = u.charAt(0) === "[" && u.charAt(u.length - 1) === "]" ? u.slice(1, -1) : u, g = parseInt(m, 10);
      !e.parseArrays && m === "" ? o = { 0: n } : !isNaN(g) && u !== m && String(g) === m && g >= 0 && e.parseArrays && g <= e.arrayLimit ? (o = [], o[g] = n) : m !== "__proto__" && (o[m] = n);
    }
    n = o;
  }
  return n;
}, kv = function(t, e, a, n) {
  if (t) {
    var s = a.allowDots ? t.replace(/\.([^.[]+)/g, "[$1]") : t, o = /(\[[^[\]]*])/, u = /(\[[^[\]]*])/g, m = a.depth > 0 && o.exec(s), g = m ? s.slice(0, m.index) : s, A = [];
    if (g) {
      if (!a.plainObjects && Th.call(Object.prototype, g) && !a.allowPrototypes)
        return;
      A.push(g);
    }
    for (var x = 0; a.depth > 0 && (m = u.exec(s)) !== null && x < a.depth; ) {
      if (x += 1, !a.plainObjects && Th.call(Object.prototype, m[1].slice(1, -1)) && !a.allowPrototypes)
        return;
      A.push(m[1]);
    }
    return m && A.push("[" + s.slice(m.index) + "]"), Bv(A, e, a, n);
  }
}, Uv = function(t) {
  if (!t)
    return Ye;
  if (t.decoder !== null && t.decoder !== void 0 && typeof t.decoder != "function")
    throw new TypeError("Decoder has to be a function.");
  if (typeof t.charset != "undefined" && t.charset !== "utf-8" && t.charset !== "iso-8859-1")
    throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
  var e = typeof t.charset == "undefined" ? Ye.charset : t.charset;
  return {
    allowDots: typeof t.allowDots == "undefined" ? Ye.allowDots : !!t.allowDots,
    allowPrototypes: typeof t.allowPrototypes == "boolean" ? t.allowPrototypes : Ye.allowPrototypes,
    allowSparse: typeof t.allowSparse == "boolean" ? t.allowSparse : Ye.allowSparse,
    arrayLimit: typeof t.arrayLimit == "number" ? t.arrayLimit : Ye.arrayLimit,
    charset: e,
    charsetSentinel: typeof t.charsetSentinel == "boolean" ? t.charsetSentinel : Ye.charsetSentinel,
    comma: typeof t.comma == "boolean" ? t.comma : Ye.comma,
    decoder: typeof t.decoder == "function" ? t.decoder : Ye.decoder,
    delimiter: typeof t.delimiter == "string" || Ra.isRegExp(t.delimiter) ? t.delimiter : Ye.delimiter,
    // eslint-disable-next-line no-implicit-coercion, no-extra-parens
    depth: typeof t.depth == "number" || t.depth === !1 ? +t.depth : Ye.depth,
    ignoreQueryPrefix: t.ignoreQueryPrefix === !0,
    interpretNumericEntities: typeof t.interpretNumericEntities == "boolean" ? t.interpretNumericEntities : Ye.interpretNumericEntities,
    parameterLimit: typeof t.parameterLimit == "number" ? t.parameterLimit : Ye.parameterLimit,
    parseArrays: t.parseArrays !== !1,
    plainObjects: typeof t.plainObjects == "boolean" ? t.plainObjects : Ye.plainObjects,
    strictNullHandling: typeof t.strictNullHandling == "boolean" ? t.strictNullHandling : Ye.strictNullHandling
  };
}, Gv = function(i, t) {
  var e = Uv(t);
  if (i === "" || i === null || typeof i == "undefined")
    return e.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
  for (var a = typeof i == "string" ? Hv(i, e) : i, n = e.plainObjects ? /* @__PURE__ */ Object.create(null) : {}, s = Object.keys(a), o = 0; o < s.length; ++o) {
    var u = s[o], m = kv(u, a[u], e, typeof i == "string");
    n = Ra.merge(n, m, e);
  }
  return e.allowSparse === !0 ? n : Ra.compact(n);
}, Xv = Rv, Vv = Gv, Yv = Iu, zv = {
  formats: Yv,
  parse: Vv,
  stringify: Xv
}, Kv = Pp;
function Hr() {
  this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null;
}
var Wv = /^([a-z0-9.+-]+:)/i, jv = /:[0-9]*$/, Qv = /^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/, Jv = [
  "<",
  ">",
  '"',
  "`",
  " ",
  "\r",
  `
`,
  "	"
], qv = [
  "{",
  "}",
  "|",
  "\\",
  "^",
  "`"
].concat(Jv), Ah = ["'"].concat(qv), jf = [
  "%",
  "/",
  "?",
  ";",
  "#"
].concat(Ah), Qf = [
  "/",
  "?",
  "#"
], Zv = 255, Jf = /^[+a-z0-9A-Z_-]{0,63}$/, t1 = /^([+a-z0-9A-Z_-]{0,63})(.*)$/, e1 = {
  javascript: !0,
  "javascript:": !0
}, Sh = {
  javascript: !0,
  "javascript:": !0
}, Ia = {
  http: !0,
  https: !0,
  ftp: !0,
  gopher: !0,
  file: !0,
  "http:": !0,
  "https:": !0,
  "ftp:": !0,
  "gopher:": !0,
  "file:": !0
}, Eh = zv;
function Ks(i, t, e) {
  if (i && typeof i == "object" && i instanceof Hr)
    return i;
  var a = new Hr();
  return a.parse(i, t, e), a;
}
Hr.prototype.parse = function(i, t, e) {
  if (typeof i != "string")
    throw new TypeError("Parameter 'url' must be a string, not " + typeof i);
  var a = i.indexOf("?"), n = a !== -1 && a < i.indexOf("#") ? "?" : "#", s = i.split(n), o = /\\/g;
  s[0] = s[0].replace(o, "/"), i = s.join(n);
  var u = i;
  if (u = u.trim(), !e && i.split("#").length === 1) {
    var m = Qv.exec(u);
    if (m)
      return this.path = u, this.href = u, this.pathname = m[1], m[2] ? (this.search = m[2], t ? this.query = Eh.parse(this.search.substr(1)) : this.query = this.search.substr(1)) : t && (this.search = "", this.query = {}), this;
  }
  var g = Wv.exec(u);
  if (g) {
    g = g[0];
    var A = g.toLowerCase();
    this.protocol = A, u = u.substr(g.length);
  }
  if (e || g || u.match(/^\/\/[^@/]+@[^@/]+/)) {
    var x = u.substr(0, 2) === "//";
    x && !(g && Sh[g]) && (u = u.substr(2), this.slashes = !0);
  }
  if (!Sh[g] && (x || g && !Ia[g])) {
    for (var w = -1, C = 0; C < Qf.length; C++) {
      var O = u.indexOf(Qf[C]);
      O !== -1 && (w === -1 || O < w) && (w = O);
    }
    var L, D;
    w === -1 ? D = u.lastIndexOf("@") : D = u.lastIndexOf("@", w), D !== -1 && (L = u.slice(0, D), u = u.slice(D + 1), this.auth = decodeURIComponent(L)), w = -1;
    for (var C = 0; C < jf.length; C++) {
      var O = u.indexOf(jf[C]);
      O !== -1 && (w === -1 || O < w) && (w = O);
    }
    w === -1 && (w = u.length), this.host = u.slice(0, w), u = u.slice(w), this.parseHost(), this.hostname = this.hostname || "";
    var H = this.hostname[0] === "[" && this.hostname[this.hostname.length - 1] === "]";
    if (!H)
      for (var k = this.hostname.split(/\./), C = 0, G = k.length; C < G; C++) {
        var z = k[C];
        if (z && !z.match(Jf)) {
          for (var Y = "", K = 0, J = z.length; K < J; K++)
            z.charCodeAt(K) > 127 ? Y += "x" : Y += z[K];
          if (!Y.match(Jf)) {
            var nt = k.slice(0, C), q = k.slice(C + 1), tt = z.match(t1);
            tt && (nt.push(tt[1]), q.unshift(tt[2])), q.length && (u = "/" + q.join(".") + u), this.hostname = nt.join(".");
            break;
          }
        }
      }
    this.hostname.length > Zv ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), H || (this.hostname = Kv.toASCII(this.hostname));
    var lt = this.port ? ":" + this.port : "", bt = this.hostname || "";
    this.host = bt + lt, this.href += this.host, H && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), u[0] !== "/" && (u = "/" + u));
  }
  if (!e1[A])
    for (var C = 0, G = Ah.length; C < G; C++) {
      var Et = Ah[C];
      if (u.indexOf(Et) !== -1) {
        var Bt = encodeURIComponent(Et);
        Bt === Et && (Bt = escape(Et)), u = u.split(Et).join(Bt);
      }
    }
  var pt = u.indexOf("#");
  pt !== -1 && (this.hash = u.substr(pt), u = u.slice(0, pt));
  var dt = u.indexOf("?");
  if (dt !== -1 ? (this.search = u.substr(dt), this.query = u.substr(dt + 1), t && (this.query = Eh.parse(this.query)), u = u.slice(0, dt)) : t && (this.search = "", this.query = {}), u && (this.pathname = u), Ia[A] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) {
    var lt = this.pathname || "", $t = this.search || "";
    this.path = lt + $t;
  }
  return this.href = this.format(), this;
};
function r1(i) {
  return typeof i == "string" && (i = Ks(i)), i instanceof Hr ? i.format() : Hr.prototype.format.call(i);
}
Hr.prototype.format = function() {
  var i = this.auth || "";
  i && (i = encodeURIComponent(i), i = i.replace(/%3A/i, ":"), i += "@");
  var t = this.protocol || "", e = this.pathname || "", a = this.hash || "", n = !1, s = "";
  this.host ? n = i + this.host : this.hostname && (n = i + (this.hostname.indexOf(":") === -1 ? this.hostname : "[" + this.hostname + "]"), this.port && (n += ":" + this.port)), this.query && typeof this.query == "object" && Object.keys(this.query).length && (s = Eh.stringify(this.query, {
    arrayFormat: "repeat",
    addQueryPrefix: !1
  }));
  var o = this.search || s && "?" + s || "";
  return t && t.substr(-1) !== ":" && (t += ":"), this.slashes || (!t || Ia[t]) && n !== !1 ? (n = "//" + (n || ""), e && e.charAt(0) !== "/" && (e = "/" + e)) : n || (n = ""), a && a.charAt(0) !== "#" && (a = "#" + a), o && o.charAt(0) !== "?" && (o = "?" + o), e = e.replace(/[?#]/g, function(u) {
    return encodeURIComponent(u);
  }), o = o.replace("#", "%23"), t + n + e + o + a;
};
function i1(i, t) {
  return Ks(i, !1, !0).resolve(t);
}
Hr.prototype.resolve = function(i) {
  return this.resolveObject(Ks(i, !1, !0)).format();
};
Hr.prototype.resolveObject = function(i) {
  if (typeof i == "string") {
    var t = new Hr();
    t.parse(i, !1, !0), i = t;
  }
  for (var e = new Hr(), a = Object.keys(this), n = 0; n < a.length; n++) {
    var s = a[n];
    e[s] = this[s];
  }
  if (e.hash = i.hash, i.href === "")
    return e.href = e.format(), e;
  if (i.slashes && !i.protocol) {
    for (var o = Object.keys(i), u = 0; u < o.length; u++) {
      var m = o[u];
      m !== "protocol" && (e[m] = i[m]);
    }
    return Ia[e.protocol] && e.hostname && !e.pathname && (e.pathname = "/", e.path = e.pathname), e.href = e.format(), e;
  }
  if (i.protocol && i.protocol !== e.protocol) {
    if (!Ia[i.protocol]) {
      for (var g = Object.keys(i), A = 0; A < g.length; A++) {
        var x = g[A];
        e[x] = i[x];
      }
      return e.href = e.format(), e;
    }
    if (e.protocol = i.protocol, !i.host && !Sh[i.protocol]) {
      for (var G = (i.pathname || "").split("/"); G.length && !(i.host = G.shift()); )
        ;
      i.host || (i.host = ""), i.hostname || (i.hostname = ""), G[0] !== "" && G.unshift(""), G.length < 2 && G.unshift(""), e.pathname = G.join("/");
    } else
      e.pathname = i.pathname;
    if (e.search = i.search, e.query = i.query, e.host = i.host || "", e.auth = i.auth, e.hostname = i.hostname || i.host, e.port = i.port, e.pathname || e.search) {
      var w = e.pathname || "", C = e.search || "";
      e.path = w + C;
    }
    return e.slashes = e.slashes || i.slashes, e.href = e.format(), e;
  }
  var O = e.pathname && e.pathname.charAt(0) === "/", L = i.host || i.pathname && i.pathname.charAt(0) === "/", D = L || O || e.host && i.pathname, H = D, k = e.pathname && e.pathname.split("/") || [], G = i.pathname && i.pathname.split("/") || [], z = e.protocol && !Ia[e.protocol];
  if (z && (e.hostname = "", e.port = null, e.host && (k[0] === "" ? k[0] = e.host : k.unshift(e.host)), e.host = "", i.protocol && (i.hostname = null, i.port = null, i.host && (G[0] === "" ? G[0] = i.host : G.unshift(i.host)), i.host = null), D = D && (G[0] === "" || k[0] === "")), L)
    e.host = i.host || i.host === "" ? i.host : e.host, e.hostname = i.hostname || i.hostname === "" ? i.hostname : e.hostname, e.search = i.search, e.query = i.query, k = G;
  else if (G.length)
    k || (k = []), k.pop(), k = k.concat(G), e.search = i.search, e.query = i.query;
  else if (i.search != null) {
    if (z) {
      e.host = k.shift(), e.hostname = e.host;
      var Y = e.host && e.host.indexOf("@") > 0 ? e.host.split("@") : !1;
      Y && (e.auth = Y.shift(), e.hostname = Y.shift(), e.host = e.hostname);
    }
    return e.search = i.search, e.query = i.query, (e.pathname !== null || e.search !== null) && (e.path = (e.pathname ? e.pathname : "") + (e.search ? e.search : "")), e.href = e.format(), e;
  }
  if (!k.length)
    return e.pathname = null, e.search ? e.path = "/" + e.search : e.path = null, e.href = e.format(), e;
  for (var K = k.slice(-1)[0], J = (e.host || i.host || k.length > 1) && (K === "." || K === "..") || K === "", nt = 0, q = k.length; q >= 0; q--)
    K = k[q], K === "." ? k.splice(q, 1) : K === ".." ? (k.splice(q, 1), nt++) : nt && (k.splice(q, 1), nt--);
  if (!D && !H)
    for (; nt--; nt)
      k.unshift("..");
  D && k[0] !== "" && (!k[0] || k[0].charAt(0) !== "/") && k.unshift(""), J && k.join("/").substr(-1) !== "/" && k.push("");
  var tt = k[0] === "" || k[0] && k[0].charAt(0) === "/";
  if (z) {
    e.hostname = tt ? "" : k.length ? k.shift() : "", e.host = e.hostname;
    var Y = e.host && e.host.indexOf("@") > 0 ? e.host.split("@") : !1;
    Y && (e.auth = Y.shift(), e.hostname = Y.shift(), e.host = e.hostname);
  }
  return D = D || e.host && k.length, D && !tt && k.unshift(""), k.length > 0 ? e.pathname = k.join("/") : (e.pathname = null, e.path = null), (e.pathname !== null || e.search !== null) && (e.path = (e.pathname ? e.pathname : "") + (e.search ? e.search : "")), e.auth = i.auth || e.auth, e.slashes = e.slashes || i.slashes, e.href = e.format(), e;
};
Hr.prototype.parseHost = function() {
  var i = this.host, t = jv.exec(i);
  t && (t = t[0], t !== ":" && (this.port = t.substr(1)), i = i.substr(0, i.length - t.length)), i && (this.hostname = i);
};
var a1 = Ks, n1 = i1, s1 = r1;
/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var qr = {
  parse: a1,
  format: s1,
  resolve: n1
};
function Or(i) {
  if (typeof i != "string")
    throw new TypeError("Path must be a string. Received " + JSON.stringify(i));
}
function qf(i) {
  var t = i.split("?")[0];
  return t.split("#")[0];
}
function o1(i) {
  return i.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
function h1(i, t, e) {
  return i.replace(new RegExp(o1(t), "g"), e);
}
function u1(i, t) {
  for (var e = "", a = 0, n = -1, s = 0, o, u = 0; u <= i.length; ++u) {
    if (u < i.length)
      o = i.charCodeAt(u);
    else {
      if (o === 47)
        break;
      o = 47;
    }
    if (o === 47) {
      if (!(n === u - 1 || s === 1))
        if (n !== u - 1 && s === 2) {
          if (e.length < 2 || a !== 2 || e.charCodeAt(e.length - 1) !== 46 || e.charCodeAt(e.length - 2) !== 46) {
            if (e.length > 2) {
              var m = e.lastIndexOf("/");
              if (m !== e.length - 1) {
                m === -1 ? (e = "", a = 0) : (e = e.slice(0, m), a = e.length - 1 - e.lastIndexOf("/")), n = u, s = 0;
                continue;
              }
            } else if (e.length === 2 || e.length === 1) {
              e = "", a = 0, n = u, s = 0;
              continue;
            }
          }
        } else
          e.length > 0 ? e += "/" + i.slice(n + 1, u) : e = i.slice(n + 1, u), a = u - n - 1;
      n = u, s = 0;
    } else
      o === 46 && s !== -1 ? ++s : s = -1;
  }
  return e;
}
var Ic = {
  /**
   * Converts a path to posix format.
   * @param path - The path to convert to posix
   */
  toPosix: function(i) {
    return h1(i, "\\", "/");
  },
  /**
   * Checks if the path is a URL
   * @param path - The path to check
   */
  isUrl: function(i) {
    return /^https?:/.test(this.toPosix(i));
  },
  /**
   * Checks if the path is a data URL
   * @param path - The path to check
   */
  isDataUrl: function(i) {
    return /^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i);
  },
  /**
   * Checks if the path has a protocol e.g. http://
   * This will return true for windows file paths
   * @param path - The path to check
   */
  hasProtocol: function(i) {
    return /^[^/:]+:\//.test(this.toPosix(i));
  },
  /**
   * Returns the protocol of the path e.g. http://, C:/, file:///
   * @param path - The path to get the protocol from
   */
  getProtocol: function(i) {
    Or(i), i = this.toPosix(i);
    var t = "", e = /^file:\/\/\//.exec(i), a = /^[^/:]+:\/\//.exec(i), n = /^[^/:]+:\//.exec(i);
    if (e || a || n) {
      var s = (e == null ? void 0 : e[0]) || (a == null ? void 0 : a[0]) || (n == null ? void 0 : n[0]);
      t = s, i = i.slice(s.length);
    }
    return t;
  },
  /**
   * Converts URL to an absolute path.
   * When loading from a Web Worker, we must use absolute paths.
   * If the URL is already absolute we return it as is
   * If it's not, we convert it
   * @param url - The URL to test
   * @param customBaseUrl - The base URL to use
   * @param customRootUrl - The root URL to use
   */
  toAbsolute: function(i, t, e) {
    if (this.isDataUrl(i))
      return i;
    var a = qf(this.toPosix(t != null ? t : mt.ADAPTER.getBaseUrl())), n = qf(this.toPosix(e != null ? e : this.rootname(a)));
    if (Or(i), i = this.toPosix(i), i.startsWith("/"))
      return Ic.join(n, i.slice(1));
    var s = this.isAbsolute(i) ? i : this.join(a, i);
    return s;
  },
  /**
   * Normalizes the given path, resolving '..' and '.' segments
   * @param path - The path to normalize
   */
  normalize: function(i) {
    if (i = this.toPosix(i), Or(i), i.length === 0)
      return ".";
    var t = "", e = i.startsWith("/");
    this.hasProtocol(i) && (t = this.rootname(i), i = i.slice(t.length));
    var a = i.endsWith("/");
    return i = u1(i), i.length > 0 && a && (i += "/"), e ? "/" + i : t + i;
  },
  /**
   * Determines if path is an absolute path.
   * Absolute paths can be urls, data urls, or paths on disk
   * @param path - The path to test
   */
  isAbsolute: function(i) {
    return Or(i), i = this.toPosix(i), this.hasProtocol(i) ? !0 : i.startsWith("/");
  },
  /**
   * Joins all given path segments together using the platform-specific separator as a delimiter,
   * then normalizes the resulting path
   * @param segments - The segments of the path to join
   */
  join: function() {
    for (var i = arguments, t, e = [], a = 0; a < arguments.length; a++)
      e[a] = i[a];
    if (e.length === 0)
      return ".";
    for (var n, s = 0; s < e.length; ++s) {
      var o = e[s];
      if (Or(o), o.length > 0)
        if (n === void 0)
          n = o;
        else {
          var u = (t = e[s - 1]) !== null && t !== void 0 ? t : "";
          this.extname(u) ? n += "/../" + o : n += "/" + o;
        }
    }
    return n === void 0 ? "." : this.normalize(n);
  },
  /**
   * Returns the directory name of a path
   * @param path - The path to parse
   */
  dirname: function(i) {
    if (Or(i), i.length === 0)
      return ".";
    i = this.toPosix(i);
    var t = i.charCodeAt(0), e = t === 47, a = -1, n = !0, s = this.getProtocol(i), o = i;
    i = i.slice(s.length);
    for (var u = i.length - 1; u >= 1; --u)
      if (t = i.charCodeAt(u), t === 47) {
        if (!n) {
          a = u;
          break;
        }
      } else
        n = !1;
    return a === -1 ? e ? "/" : this.isUrl(o) ? s + i : s : e && a === 1 ? "//" : s + i.slice(0, a);
  },
  /**
   * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/
   * @param path - The path to parse
   */
  rootname: function(i) {
    Or(i), i = this.toPosix(i);
    var t = "";
    if (i.startsWith("/") ? t = "/" : t = this.getProtocol(i), this.isUrl(i)) {
      var e = i.indexOf("/", t.length);
      e !== -1 ? t = i.slice(0, e) : t = i, t.endsWith("/") || (t += "/");
    }
    return t;
  },
  /**
   * Returns the last portion of a path
   * @param path - The path to test
   * @param ext - Optional extension to remove
   */
  basename: function(i, t) {
    Or(i), t && Or(t), i = this.toPosix(i);
    var e = 0, a = -1, n = !0, s;
    if (t !== void 0 && t.length > 0 && t.length <= i.length) {
      if (t.length === i.length && t === i)
        return "";
      var o = t.length - 1, u = -1;
      for (s = i.length - 1; s >= 0; --s) {
        var m = i.charCodeAt(s);
        if (m === 47) {
          if (!n) {
            e = s + 1;
            break;
          }
        } else
          u === -1 && (n = !1, u = s + 1), o >= 0 && (m === t.charCodeAt(o) ? --o === -1 && (a = s) : (o = -1, a = u));
      }
      return e === a ? a = u : a === -1 && (a = i.length), i.slice(e, a);
    }
    for (s = i.length - 1; s >= 0; --s)
      if (i.charCodeAt(s) === 47) {
        if (!n) {
          e = s + 1;
          break;
        }
      } else
        a === -1 && (n = !1, a = s + 1);
    return a === -1 ? "" : i.slice(e, a);
  },
  /**
   * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last
   * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than
   * the first character of the basename of path, an empty string is returned.
   * @param path - The path to parse
   */
  extname: function(i) {
    Or(i), i = this.toPosix(i);
    for (var t = -1, e = 0, a = -1, n = !0, s = 0, o = i.length - 1; o >= 0; --o) {
      var u = i.charCodeAt(o);
      if (u === 47) {
        if (!n) {
          e = o + 1;
          break;
        }
        continue;
      }
      a === -1 && (n = !1, a = o + 1), u === 46 ? t === -1 ? t = o : s !== 1 && (s = 1) : t !== -1 && (s = -1);
    }
    return t === -1 || a === -1 || s === 0 || s === 1 && t === a - 1 && t === e + 1 ? "" : i.slice(t, a);
  },
  /**
   * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.
   * @param path - The path to parse
   */
  parse: function(i) {
    Or(i);
    var t = { root: "", dir: "", base: "", ext: "", name: "" };
    if (i.length === 0)
      return t;
    i = this.toPosix(i);
    var e = i.charCodeAt(0), a = this.isAbsolute(i), n;
    t.root = this.rootname(i), a || this.hasProtocol(i) ? n = 1 : n = 0;
    for (var s = -1, o = 0, u = -1, m = !0, g = i.length - 1, A = 0; g >= n; --g) {
      if (e = i.charCodeAt(g), e === 47) {
        if (!m) {
          o = g + 1;
          break;
        }
        continue;
      }
      u === -1 && (m = !1, u = g + 1), e === 46 ? s === -1 ? s = g : A !== 1 && (A = 1) : s !== -1 && (A = -1);
    }
    return s === -1 || u === -1 || A === 0 || A === 1 && s === u - 1 && s === o + 1 ? u !== -1 && (o === 0 && a ? t.base = t.name = i.slice(1, u) : t.base = t.name = i.slice(o, u)) : (o === 0 && a ? (t.name = i.slice(1, s), t.base = i.slice(1, u)) : (t.name = i.slice(o, s), t.base = i.slice(o, u)), t.ext = i.slice(s, u)), t.dir = this.dirname(i), t;
  },
  sep: "/",
  delimiter: ":"
};
mt.RETINA_PREFIX = /@([0-9\.]+)x/;
mt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1;
var wh = !1, Zf = "6.5.10";
function l1() {
  wh = !0;
}
function Pc(i) {
  var t;
  if (!wh) {
    if (mt.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome") > -1) {
      var e = [
        `
 %c %c %c PixiJS ` + Zf + " -  " + i + `   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,
        "background: #ff66a5; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "color: #ff66a5; background: #030307; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "background: #ffc3dc; padding:5px 0;",
        "background: #ff66a5; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;",
        "color: #ff2424; background: #fff; padding:5px 0;"
      ];
      (t = globalThis.console).log.apply(t, e);
    } else
      globalThis.console && globalThis.console.log("PixiJS " + Zf + " - " + i + " - http://www.pixijs.com/");
    wh = !0;
  }
}
var Lo;
function Mc() {
  return typeof Lo == "undefined" && (Lo = function() {
    var t = {
      stencil: !0,
      failIfMajorPerformanceCaveat: mt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT
    };
    try {
      if (!mt.ADAPTER.getWebGLRenderingContext())
        return !1;
      var e = mt.ADAPTER.createCanvas(), a = e.getContext("webgl", t) || e.getContext("experimental-webgl", t), n = !!(a && a.getContextAttributes().stencil);
      if (a) {
        var s = a.getExtension("WEBGL_lose_context");
        s && s.loseContext();
      }
      return a = null, n;
    } catch (o) {
      return !1;
    }
  }()), Lo;
}
var f1 = "#f0f8ff", c1 = "#faebd7", d1 = "#00ffff", p1 = "#7fffd4", _1 = "#f0ffff", v1 = "#f5f5dc", m1 = "#ffe4c4", g1 = "#000000", y1 = "#ffebcd", b1 = "#0000ff", x1 = "#8a2be2", T1 = "#a52a2a", A1 = "#deb887", S1 = "#5f9ea0", E1 = "#7fff00", w1 = "#d2691e", I1 = "#ff7f50", P1 = "#6495ed", M1 = "#fff8dc", C1 = "#dc143c", O1 = "#00ffff", $1 = "#00008b", R1 = "#008b8b", L1 = "#b8860b", D1 = "#a9a9a9", N1 = "#006400", F1 = "#a9a9a9", H1 = "#bdb76b", B1 = "#8b008b", k1 = "#556b2f", U1 = "#ff8c00", G1 = "#9932cc", X1 = "#8b0000", V1 = "#e9967a", Y1 = "#8fbc8f", z1 = "#483d8b", K1 = "#2f4f4f", W1 = "#2f4f4f", j1 = "#00ced1", Q1 = "#9400d3", J1 = "#ff1493", q1 = "#00bfff", Z1 = "#696969", tm = "#696969", em = "#1e90ff", rm = "#b22222", im = "#fffaf0", am = "#228b22", nm = "#ff00ff", sm = "#dcdcdc", om = "#f8f8ff", hm = "#daa520", um = "#ffd700", lm = "#808080", fm = "#008000", cm = "#adff2f", dm = "#808080", pm = "#f0fff0", _m = "#ff69b4", vm = "#cd5c5c", mm = "#4b0082", gm = "#fffff0", ym = "#f0e68c", bm = "#fff0f5", xm = "#e6e6fa", Tm = "#7cfc00", Am = "#fffacd", Sm = "#add8e6", Em = "#f08080", wm = "#e0ffff", Im = "#fafad2", Pm = "#d3d3d3", Mm = "#90ee90", Cm = "#d3d3d3", Om = "#ffb6c1", $m = "#ffa07a", Rm = "#20b2aa", Lm = "#87cefa", Dm = "#778899", Nm = "#778899", Fm = "#b0c4de", Hm = "#ffffe0", Bm = "#00ff00", km = "#32cd32", Um = "#faf0e6", Gm = "#ff00ff", Xm = "#800000", Vm = "#66cdaa", Ym = "#0000cd", zm = "#ba55d3", Km = "#9370db", Wm = "#3cb371", jm = "#7b68ee", Qm = "#00fa9a", Jm = "#48d1cc", qm = "#c71585", Zm = "#191970", tg = "#f5fffa", eg = "#ffe4e1", rg = "#ffe4b5", ig = "#ffdead", ag = "#000080", ng = "#fdf5e6", sg = "#808000", og = "#6b8e23", hg = "#ffa500", ug = "#ff4500", lg = "#da70d6", fg = "#eee8aa", cg = "#98fb98", dg = "#afeeee", pg = "#db7093", _g = "#ffefd5", vg = "#ffdab9", mg = "#cd853f", gg = "#ffc0cb", yg = "#dda0dd", bg = "#b0e0e6", xg = "#800080", Tg = "#663399", Ag = "#ff0000", Sg = "#bc8f8f", Eg = "#4169e1", wg = "#8b4513", Ig = "#fa8072", Pg = "#f4a460", Mg = "#2e8b57", Cg = "#fff5ee", Og = "#a0522d", $g = "#c0c0c0", Rg = "#87ceeb", Lg = "#6a5acd", Dg = "#708090", Ng = "#708090", Fg = "#fffafa", Hg = "#00ff7f", Bg = "#4682b4", kg = "#d2b48c", Ug = "#008080", Gg = "#d8bfd8", Xg = "#ff6347", Vg = "#40e0d0", Yg = "#ee82ee", zg = "#f5deb3", Kg = "#ffffff", Wg = "#f5f5f5", jg = "#ffff00", Qg = "#9acd32", Jg = {
  aliceblue: f1,
  antiquewhite: c1,
  aqua: d1,
  aquamarine: p1,
  azure: _1,
  beige: v1,
  bisque: m1,
  black: g1,
  blanchedalmond: y1,
  blue: b1,
  blueviolet: x1,
  brown: T1,
  burlywood: A1,
  cadetblue: S1,
  chartreuse: E1,
  chocolate: w1,
  coral: I1,
  cornflowerblue: P1,
  cornsilk: M1,
  crimson: C1,
  cyan: O1,
  darkblue: $1,
  darkcyan: R1,
  darkgoldenrod: L1,
  darkgray: D1,
  darkgreen: N1,
  darkgrey: F1,
  darkkhaki: H1,
  darkmagenta: B1,
  darkolivegreen: k1,
  darkorange: U1,
  darkorchid: G1,
  darkred: X1,
  darksalmon: V1,
  darkseagreen: Y1,
  darkslateblue: z1,
  darkslategray: K1,
  darkslategrey: W1,
  darkturquoise: j1,
  darkviolet: Q1,
  deeppink: J1,
  deepskyblue: q1,
  dimgray: Z1,
  dimgrey: tm,
  dodgerblue: em,
  firebrick: rm,
  floralwhite: im,
  forestgreen: am,
  fuchsia: nm,
  gainsboro: sm,
  ghostwhite: om,
  goldenrod: hm,
  gold: um,
  gray: lm,
  green: fm,
  greenyellow: cm,
  grey: dm,
  honeydew: pm,
  hotpink: _m,
  indianred: vm,
  indigo: mm,
  ivory: gm,
  khaki: ym,
  lavenderblush: bm,
  lavender: xm,
  lawngreen: Tm,
  lemonchiffon: Am,
  lightblue: Sm,
  lightcoral: Em,
  lightcyan: wm,
  lightgoldenrodyellow: Im,
  lightgray: Pm,
  lightgreen: Mm,
  lightgrey: Cm,
  lightpink: Om,
  lightsalmon: $m,
  lightseagreen: Rm,
  lightskyblue: Lm,
  lightslategray: Dm,
  lightslategrey: Nm,
  lightsteelblue: Fm,
  lightyellow: Hm,
  lime: Bm,
  limegreen: km,
  linen: Um,
  magenta: Gm,
  maroon: Xm,
  mediumaquamarine: Vm,
  mediumblue: Ym,
  mediumorchid: zm,
  mediumpurple: Km,
  mediumseagreen: Wm,
  mediumslateblue: jm,
  mediumspringgreen: Qm,
  mediumturquoise: Jm,
  mediumvioletred: qm,
  midnightblue: Zm,
  mintcream: tg,
  mistyrose: eg,
  moccasin: rg,
  navajowhite: ig,
  navy: ag,
  oldlace: ng,
  olive: sg,
  olivedrab: og,
  orange: hg,
  orangered: ug,
  orchid: lg,
  palegoldenrod: fg,
  palegreen: cg,
  paleturquoise: dg,
  palevioletred: pg,
  papayawhip: _g,
  peachpuff: vg,
  peru: mg,
  pink: gg,
  plum: yg,
  powderblue: bg,
  purple: xg,
  rebeccapurple: Tg,
  red: Ag,
  rosybrown: Sg,
  royalblue: Eg,
  saddlebrown: wg,
  salmon: Ig,
  sandybrown: Pg,
  seagreen: Mg,
  seashell: Cg,
  sienna: Og,
  silver: $g,
  skyblue: Rg,
  slateblue: Lg,
  slategray: Dg,
  slategrey: Ng,
  snow: Fg,
  springgreen: Hg,
  steelblue: Bg,
  tan: kg,
  teal: Ug,
  thistle: Gg,
  tomato: Xg,
  turquoise: Vg,
  violet: Yg,
  wheat: zg,
  white: Kg,
  whitesmoke: Wg,
  yellow: jg,
  yellowgreen: Qg
};
function sa(i, t) {
  return t === void 0 && (t = []), t[0] = (i >> 16 & 255) / 255, t[1] = (i >> 8 & 255) / 255, t[2] = (i & 255) / 255, t;
}
function Pu(i) {
  var t = i.toString(16);
  return t = "000000".substring(0, 6 - t.length) + t, "#" + t;
}
function Mu(i) {
  return typeof i == "string" && (i = Jg[i.toLowerCase()] || i, i[0] === "#" && (i = i.slice(1))), parseInt(i, 16);
}
function qg(i) {
  return (i[0] * 255 << 16) + (i[1] * 255 << 8) + (i[2] * 255 | 0);
}
function Zg() {
  for (var i = [], t = [], e = 0; e < 32; e++)
    i[e] = e, t[e] = e;
  i[It.NORMAL_NPM] = It.NORMAL, i[It.ADD_NPM] = It.ADD, i[It.SCREEN_NPM] = It.SCREEN, t[It.NORMAL] = It.NORMAL_NPM, t[It.ADD] = It.ADD_NPM, t[It.SCREEN] = It.SCREEN_NPM;
  var a = [];
  return a.push(t), a.push(i), a;
}
var Cu = Zg();
function Ou(i, t) {
  return Cu[t ? 1 : 0][i];
}
function Cc(i, t, e, a) {
  return e = e || new Float32Array(4), a || a === void 0 ? (e[0] = i[0] * t, e[1] = i[1] * t, e[2] = i[2] * t) : (e[0] = i[0], e[1] = i[1], e[2] = i[2]), e[3] = t, e;
}
function Ws(i, t) {
  if (t === 1)
    return (t * 255 << 24) + i;
  if (t === 0)
    return 0;
  var e = i >> 16 & 255, a = i >> 8 & 255, n = i & 255;
  return e = e * t + 0.5 | 0, a = a * t + 0.5 | 0, n = n * t + 0.5 | 0, (t * 255 << 24) + (e << 16) + (a << 8) + n;
}
function $u(i, t, e, a) {
  return e = e || new Float32Array(4), e[0] = (i >> 16 & 255) / 255, e[1] = (i >> 8 & 255) / 255, e[2] = (i & 255) / 255, (a || a === void 0) && (e[0] *= t, e[1] *= t, e[2] *= t), e[3] = t, e;
}
function Oc(i, t) {
  t === void 0 && (t = null);
  var e = i * 6;
  if (t = t || new Uint16Array(e), t.length !== e)
    throw new Error("Out buffer length is incorrect, got " + t.length + " and expected " + e);
  for (var a = 0, n = 0; a < e; a += 6, n += 4)
    t[a + 0] = n + 0, t[a + 1] = n + 1, t[a + 2] = n + 2, t[a + 3] = n + 0, t[a + 4] = n + 2, t[a + 5] = n + 3;
  return t;
}
function js(i) {
  if (i.BYTES_PER_ELEMENT === 4)
    return i instanceof Float32Array ? "Float32Array" : i instanceof Uint32Array ? "Uint32Array" : "Int32Array";
  if (i.BYTES_PER_ELEMENT === 2) {
    if (i instanceof Uint16Array)
      return "Uint16Array";
  } else if (i.BYTES_PER_ELEMENT === 1 && i instanceof Uint8Array)
    return "Uint8Array";
  return null;
}
var ty = { Float32Array, Uint32Array, Int32Array, Uint8Array };
function ey(i, t) {
  for (var e = 0, a = 0, n = {}, s = 0; s < i.length; s++)
    a += t[s], e += i[s].length;
  for (var o = new ArrayBuffer(e * 4), u = null, m = 0, s = 0; s < i.length; s++) {
    var g = t[s], A = i[s], x = js(A);
    n[x] || (n[x] = new ty[x](o)), u = n[x];
    for (var w = 0; w < A.length; w++) {
      var C = (w / g | 0) * a + m, O = w % g;
      u[C + O] = A[w];
    }
    m += g;
  }
  return new Float32Array(o);
}
function Pn(i) {
  return i += i === 0 ? 1 : 0, --i, i |= i >>> 1, i |= i >>> 2, i |= i >>> 4, i |= i >>> 8, i |= i >>> 16, i + 1;
}
function Ih(i) {
  return !(i & i - 1) && !!i;
}
function Ph(i) {
  var t = (i > 65535 ? 1 : 0) << 4;
  i >>>= t;
  var e = (i > 255 ? 1 : 0) << 3;
  return i >>>= e, t |= e, e = (i > 15 ? 1 : 0) << 2, i >>>= e, t |= e, e = (i > 3 ? 1 : 0) << 1, i >>>= e, t |= e, t | i >> 1;
}
function ra(i, t, e) {
  var a = i.length, n;
  if (!(t >= a || e === 0)) {
    e = t + e > a ? a - t : e;
    var s = a - e;
    for (n = t; n < s; ++n)
      i[n] = i[n + e];
    i.length = s;
  }
}
function Zi(i) {
  return i === 0 ? 0 : i < 0 ? -1 : 1;
}
var ry = 0;
function Ci() {
  return ++ry;
}
var t0 = {};
function sr(i, t, e) {
  if (e === void 0 && (e = 3), !t0[t]) {
    var a = new Error().stack;
    typeof a == "undefined" ? console.warn("PixiJS Deprecation Warning: ", t + `
Deprecated since v` + i) : (a = a.split(`
`).splice(e).join(`
`), console.groupCollapsed ? (console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", t + `
Deprecated since v` + i), console.warn(a), console.groupEnd()) : (console.warn("PixiJS Deprecation Warning: ", t + `
Deprecated since v` + i), console.warn(a))), t0[t] = !0;
  }
}
var Mh = {}, fr = /* @__PURE__ */ Object.create(null), gr = /* @__PURE__ */ Object.create(null);
function iy() {
  var i;
  for (i in fr)
    fr[i].destroy();
  for (i in gr)
    gr[i].destroy();
}
function ay() {
  var i;
  for (i in fr)
    delete fr[i];
  for (i in gr)
    delete gr[i];
}
var Ch = (
  /** @class */
  function() {
    function i(t, e, a) {
      this.canvas = mt.ADAPTER.createCanvas(), this.context = this.canvas.getContext("2d"), this.resolution = a || mt.RESOLUTION, this.resize(t, e);
    }
    return i.prototype.clear = function() {
      this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }, i.prototype.resize = function(t, e) {
      this.canvas.width = Math.round(t * this.resolution), this.canvas.height = Math.round(e * this.resolution);
    }, i.prototype.destroy = function() {
      this.context = null, this.canvas = null;
    }, Object.defineProperty(i.prototype, "width", {
      /**
       * The width of the canvas buffer in pixels.
       * @member {number}
       */
      get: function() {
        return this.canvas.width;
      },
      set: function(t) {
        this.canvas.width = Math.round(t);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "height", {
      /**
       * The height of the canvas buffer in pixels.
       * @member {number}
       */
      get: function() {
        return this.canvas.height;
      },
      set: function(t) {
        this.canvas.height = Math.round(t);
      },
      enumerable: !1,
      configurable: !0
    }), i;
  }()
);
function $c(i) {
  var t = i.width, e = i.height, a = i.getContext("2d", {
    willReadFrequently: !0
  }), n = a.getImageData(0, 0, t, e), s = n.data, o = s.length, u = {
    top: null,
    left: null,
    right: null,
    bottom: null
  }, m = null, g, A, x;
  for (g = 0; g < o; g += 4)
    s[g + 3] !== 0 && (A = g / 4 % t, x = ~~(g / 4 / t), u.top === null && (u.top = x), (u.left === null || A < u.left) && (u.left = A), (u.right === null || u.right < A) && (u.right = A + 1), (u.bottom === null || u.bottom < x) && (u.bottom = x));
  return u.top !== null && (t = u.right - u.left, e = u.bottom - u.top + 1, m = a.getImageData(u.left, u.top, t, e)), {
    height: e,
    width: t,
    data: m
  };
}
var Rc = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;
function ny(i) {
  var t = Rc.exec(i);
  if (t)
    return {
      mediaType: t[1] ? t[1].toLowerCase() : void 0,
      subType: t[2] ? t[2].toLowerCase() : void 0,
      charset: t[3] ? t[3].toLowerCase() : void 0,
      encoding: t[4] ? t[4].toLowerCase() : void 0,
      data: t[5]
    };
}
var ts;
function Lc(i, t) {
  if (t === void 0 && (t = globalThis.location), i.indexOf("data:") === 0)
    return "";
  t = t || globalThis.location, ts || (ts = document.createElement("a")), ts.href = i;
  var e = qr.parse(ts.href), a = !e.port && t.port === "" || e.port === t.port;
  return e.hostname !== t.hostname || !a || e.protocol !== t.protocol ? "anonymous" : "";
}
function Mn(i, t) {
  var e = mt.RETINA_PREFIX.exec(i);
  return e ? parseFloat(e[1]) : t !== void 0 ? t : 1;
}
const sy = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  BaseTextureCache: gr,
  CanvasRenderTarget: Ch,
  DATA_URI: Rc,
  EventEmitter: mi,
  ProgramCache: Mh,
  TextureCache: fr,
  clearTextureCache: ay,
  correctBlendMode: Ou,
  createIndicesForQuads: Oc,
  decomposeDataUri: ny,
  deprecation: sr,
  destroyTextureCache: iy,
  determineCrossOrigin: Lc,
  earcut: bu,
  getBufferType: js,
  getResolutionOfUrl: Mn,
  hex2rgb: sa,
  hex2string: Pu,
  interleaveTypedArrays: ey,
  isMobile: Tr,
  isPow2: Ih,
  isWebGLSupported: Mc,
  log2: Ph,
  nextPow2: Pn,
  path: Ic,
  premultiplyBlendMode: Cu,
  premultiplyRgba: Cc,
  premultiplyTint: Ws,
  premultiplyTintToRgba: $u,
  removeItems: ra,
  rgb2hex: qg,
  sayHello: Pc,
  sign: Zi,
  skipHello: l1,
  string2hex: Mu,
  trimCanvas: $c,
  uid: Ci,
  url: qr
}, Symbol.toStringTag, { value: "Module" }));
/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Cn = Math.PI * 2, Dc = 180 / Math.PI, Nc = Math.PI / 180, Ve;
(function(i) {
  i[i.POLY = 0] = "POLY", i[i.RECT = 1] = "RECT", i[i.CIRC = 2] = "CIRC", i[i.ELIP = 3] = "ELIP", i[i.RREC = 4] = "RREC";
})(Ve || (Ve = {}));
var le = (
  /** @class */
  function() {
    function i(t, e) {
      t === void 0 && (t = 0), e === void 0 && (e = 0), this.x = 0, this.y = 0, this.x = t, this.y = e;
    }
    return i.prototype.clone = function() {
      return new i(this.x, this.y);
    }, i.prototype.copyFrom = function(t) {
      return this.set(t.x, t.y), this;
    }, i.prototype.copyTo = function(t) {
      return t.set(this.x, this.y), t;
    }, i.prototype.equals = function(t) {
      return t.x === this.x && t.y === this.y;
    }, i.prototype.set = function(t, e) {
      return t === void 0 && (t = 0), e === void 0 && (e = t), this.x = t, this.y = e, this;
    }, i.prototype.toString = function() {
      return "[@pixi/math:Point x=" + this.x + " y=" + this.y + "]";
    }, i;
  }()
), es = [new le(), new le(), new le(), new le()], zt = (
  /** @class */
  function() {
    function i(t, e, a, n) {
      t === void 0 && (t = 0), e === void 0 && (e = 0), a === void 0 && (a = 0), n === void 0 && (n = 0), this.x = Number(t), this.y = Number(e), this.width = Number(a), this.height = Number(n), this.type = Ve.RECT;
    }
    return Object.defineProperty(i.prototype, "left", {
      /** Returns the left edge of the rectangle. */
      get: function() {
        return this.x;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "right", {
      /** Returns the right edge of the rectangle. */
      get: function() {
        return this.x + this.width;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "top", {
      /** Returns the top edge of the rectangle. */
      get: function() {
        return this.y;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "bottom", {
      /** Returns the bottom edge of the rectangle. */
      get: function() {
        return this.y + this.height;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i, "EMPTY", {
      /** A constant empty rectangle. */
      get: function() {
        return new i(0, 0, 0, 0);
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.clone = function() {
      return new i(this.x, this.y, this.width, this.height);
    }, i.prototype.copyFrom = function(t) {
      return this.x = t.x, this.y = t.y, this.width = t.width, this.height = t.height, this;
    }, i.prototype.copyTo = function(t) {
      return t.x = this.x, t.y = this.y, t.width = this.width, t.height = this.height, t;
    }, i.prototype.contains = function(t, e) {
      return this.width <= 0 || this.height <= 0 ? !1 : t >= this.x && t < this.x + this.width && e >= this.y && e < this.y + this.height;
    }, i.prototype.intersects = function(t, e) {
      if (!e) {
        var a = this.x < t.x ? t.x : this.x, n = this.right > t.right ? t.right : this.right;
        if (n <= a)
          return !1;
        var s = this.y < t.y ? t.y : this.y, o = this.bottom > t.bottom ? t.bottom : this.bottom;
        return o > s;
      }
      var u = this.left, m = this.right, g = this.top, A = this.bottom;
      if (m <= u || A <= g)
        return !1;
      var x = es[0].set(t.left, t.top), w = es[1].set(t.left, t.bottom), C = es[2].set(t.right, t.top), O = es[3].set(t.right, t.bottom);
      if (C.x <= x.x || w.y <= x.y)
        return !1;
      var L = Math.sign(e.a * e.d - e.b * e.c);
      if (L === 0 || (e.apply(x, x), e.apply(w, w), e.apply(C, C), e.apply(O, O), Math.max(x.x, w.x, C.x, O.x) <= u || Math.min(x.x, w.x, C.x, O.x) >= m || Math.max(x.y, w.y, C.y, O.y) <= g || Math.min(x.y, w.y, C.y, O.y) >= A))
        return !1;
      var D = L * (w.y - x.y), H = L * (x.x - w.x), k = D * u + H * g, G = D * m + H * g, z = D * u + H * A, Y = D * m + H * A;
      if (Math.max(k, G, z, Y) <= D * x.x + H * x.y || Math.min(k, G, z, Y) >= D * O.x + H * O.y)
        return !1;
      var K = L * (x.y - C.y), J = L * (C.x - x.x), nt = K * u + J * g, q = K * m + J * g, tt = K * u + J * A, lt = K * m + J * A;
      return !(Math.max(nt, q, tt, lt) <= K * x.x + J * x.y || Math.min(nt, q, tt, lt) >= K * O.x + J * O.y);
    }, i.prototype.pad = function(t, e) {
      return t === void 0 && (t = 0), e === void 0 && (e = t), this.x -= t, this.y -= e, this.width += t * 2, this.height += e * 2, this;
    }, i.prototype.fit = function(t) {
      var e = Math.max(this.x, t.x), a = Math.min(this.x + this.width, t.x + t.width), n = Math.max(this.y, t.y), s = Math.min(this.y + this.height, t.y + t.height);
      return this.x = e, this.width = Math.max(a - e, 0), this.y = n, this.height = Math.max(s - n, 0), this;
    }, i.prototype.ceil = function(t, e) {
      t === void 0 && (t = 1), e === void 0 && (e = 1e-3);
      var a = Math.ceil((this.x + this.width - e) * t) / t, n = Math.ceil((this.y + this.height - e) * t) / t;
      return this.x = Math.floor((this.x + e) * t) / t, this.y = Math.floor((this.y + e) * t) / t, this.width = a - this.x, this.height = n - this.y, this;
    }, i.prototype.enlarge = function(t) {
      var e = Math.min(this.x, t.x), a = Math.max(this.x + this.width, t.x + t.width), n = Math.min(this.y, t.y), s = Math.max(this.y + this.height, t.y + t.height);
      return this.x = e, this.width = a - e, this.y = n, this.height = s - n, this;
    }, i.prototype.toString = function() {
      return "[@pixi/math:Rectangle x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]";
    }, i;
  }()
), Fc = (
  /** @class */
  function() {
    function i(t, e, a) {
      t === void 0 && (t = 0), e === void 0 && (e = 0), a === void 0 && (a = 0), this.x = t, this.y = e, this.radius = a, this.type = Ve.CIRC;
    }
    return i.prototype.clone = function() {
      return new i(this.x, this.y, this.radius);
    }, i.prototype.contains = function(t, e) {
      if (this.radius <= 0)
        return !1;
      var a = this.radius * this.radius, n = this.x - t, s = this.y - e;
      return n *= n, s *= s, n + s <= a;
    }, i.prototype.getBounds = function() {
      return new zt(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);
    }, i.prototype.toString = function() {
      return "[@pixi/math:Circle x=" + this.x + " y=" + this.y + " radius=" + this.radius + "]";
    }, i;
  }()
), Hc = (
  /** @class */
  function() {
    function i(t, e, a, n) {
      t === void 0 && (t = 0), e === void 0 && (e = 0), a === void 0 && (a = 0), n === void 0 && (n = 0), this.x = t, this.y = e, this.width = a, this.height = n, this.type = Ve.ELIP;
    }
    return i.prototype.clone = function() {
      return new i(this.x, this.y, this.width, this.height);
    }, i.prototype.contains = function(t, e) {
      if (this.width <= 0 || this.height <= 0)
        return !1;
      var a = (t - this.x) / this.width, n = (e - this.y) / this.height;
      return a *= a, n *= n, a + n <= 1;
    }, i.prototype.getBounds = function() {
      return new zt(this.x - this.width, this.y - this.height, this.width, this.height);
    }, i.prototype.toString = function() {
      return "[@pixi/math:Ellipse x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]";
    }, i;
  }()
), gn = (
  /** @class */
  function() {
    function i() {
      for (var t = arguments, e = [], a = 0; a < arguments.length; a++)
        e[a] = t[a];
      var n = Array.isArray(e[0]) ? e[0] : e;
      if (typeof n[0] != "number") {
        for (var s = [], o = 0, u = n.length; o < u; o++)
          s.push(n[o].x, n[o].y);
        n = s;
      }
      this.points = n, this.type = Ve.POLY, this.closeStroke = !0;
    }
    return i.prototype.clone = function() {
      var t = this.points.slice(), e = new i(t);
      return e.closeStroke = this.closeStroke, e;
    }, i.prototype.contains = function(t, e) {
      for (var a = !1, n = this.points.length / 2, s = 0, o = n - 1; s < n; o = s++) {
        var u = this.points[s * 2], m = this.points[s * 2 + 1], g = this.points[o * 2], A = this.points[o * 2 + 1], x = m > e != A > e && t < (g - u) * ((e - m) / (A - m)) + u;
        x && (a = !a);
      }
      return a;
    }, i.prototype.toString = function() {
      return "[@pixi/math:Polygon" + ("closeStroke=" + this.closeStroke) + ("points=" + this.points.reduce(function(t, e) {
        return t + ", " + e;
      }, "") + "]");
    }, i;
  }()
), Bc = (
  /** @class */
  function() {
    function i(t, e, a, n, s) {
      t === void 0 && (t = 0), e === void 0 && (e = 0), a === void 0 && (a = 0), n === void 0 && (n = 0), s === void 0 && (s = 20), this.x = t, this.y = e, this.width = a, this.height = n, this.radius = s, this.type = Ve.RREC;
    }
    return i.prototype.clone = function() {
      return new i(this.x, this.y, this.width, this.height, this.radius);
    }, i.prototype.contains = function(t, e) {
      if (this.width <= 0 || this.height <= 0)
        return !1;
      if (t >= this.x && t <= this.x + this.width && e >= this.y && e <= this.y + this.height) {
        var a = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));
        if (e >= this.y + a && e <= this.y + this.height - a || t >= this.x + a && t <= this.x + this.width - a)
          return !0;
        var n = t - (this.x + a), s = e - (this.y + a), o = a * a;
        if (n * n + s * s <= o || (n = t - (this.x + this.width - a), n * n + s * s <= o) || (s = e - (this.y + this.height - a), n * n + s * s <= o) || (n = t - (this.x + a), n * n + s * s <= o))
          return !0;
      }
      return !1;
    }, i.prototype.toString = function() {
      return "[@pixi/math:RoundedRectangle x=" + this.x + " y=" + this.y + ("width=" + this.width + " height=" + this.height + " radius=" + this.radius + "]");
    }, i;
  }()
), wi = (
  /** @class */
  function() {
    function i(t, e, a, n) {
      a === void 0 && (a = 0), n === void 0 && (n = 0), this._x = a, this._y = n, this.cb = t, this.scope = e;
    }
    return i.prototype.clone = function(t, e) {
      return t === void 0 && (t = this.cb), e === void 0 && (e = this.scope), new i(t, e, this._x, this._y);
    }, i.prototype.set = function(t, e) {
      return t === void 0 && (t = 0), e === void 0 && (e = t), (this._x !== t || this._y !== e) && (this._x = t, this._y = e, this.cb.call(this.scope)), this;
    }, i.prototype.copyFrom = function(t) {
      return (this._x !== t.x || this._y !== t.y) && (this._x = t.x, this._y = t.y, this.cb.call(this.scope)), this;
    }, i.prototype.copyTo = function(t) {
      return t.set(this._x, this._y), t;
    }, i.prototype.equals = function(t) {
      return t.x === this._x && t.y === this._y;
    }, i.prototype.toString = function() {
      return "[@pixi/math:ObservablePoint x=0 y=0 scope=" + this.scope + "]";
    }, Object.defineProperty(i.prototype, "x", {
      /** Position of the observable point on the x axis. */
      get: function() {
        return this._x;
      },
      set: function(t) {
        this._x !== t && (this._x = t, this.cb.call(this.scope));
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "y", {
      /** Position of the observable point on the y axis. */
      get: function() {
        return this._y;
      },
      set: function(t) {
        this._y !== t && (this._y = t, this.cb.call(this.scope));
      },
      enumerable: !1,
      configurable: !0
    }), i;
  }()
), be = (
  /** @class */
  function() {
    function i(t, e, a, n, s, o) {
      t === void 0 && (t = 1), e === void 0 && (e = 0), a === void 0 && (a = 0), n === void 0 && (n = 1), s === void 0 && (s = 0), o === void 0 && (o = 0), this.array = null, this.a = t, this.b = e, this.c = a, this.d = n, this.tx = s, this.ty = o;
    }
    return i.prototype.fromArray = function(t) {
      this.a = t[0], this.b = t[1], this.c = t[3], this.d = t[4], this.tx = t[2], this.ty = t[5];
    }, i.prototype.set = function(t, e, a, n, s, o) {
      return this.a = t, this.b = e, this.c = a, this.d = n, this.tx = s, this.ty = o, this;
    }, i.prototype.toArray = function(t, e) {
      this.array || (this.array = new Float32Array(9));
      var a = e || this.array;
      return t ? (a[0] = this.a, a[1] = this.b, a[2] = 0, a[3] = this.c, a[4] = this.d, a[5] = 0, a[6] = this.tx, a[7] = this.ty, a[8] = 1) : (a[0] = this.a, a[1] = this.c, a[2] = this.tx, a[3] = this.b, a[4] = this.d, a[5] = this.ty, a[6] = 0, a[7] = 0, a[8] = 1), a;
    }, i.prototype.apply = function(t, e) {
      e = e || new le();
      var a = t.x, n = t.y;
      return e.x = this.a * a + this.c * n + this.tx, e.y = this.b * a + this.d * n + this.ty, e;
    }, i.prototype.applyInverse = function(t, e) {
      e = e || new le();
      var a = 1 / (this.a * this.d + this.c * -this.b), n = t.x, s = t.y;
      return e.x = this.d * a * n + -this.c * a * s + (this.ty * this.c - this.tx * this.d) * a, e.y = this.a * a * s + -this.b * a * n + (-this.ty * this.a + this.tx * this.b) * a, e;
    }, i.prototype.translate = function(t, e) {
      return this.tx += t, this.ty += e, this;
    }, i.prototype.scale = function(t, e) {
      return this.a *= t, this.d *= e, this.c *= t, this.b *= e, this.tx *= t, this.ty *= e, this;
    }, i.prototype.rotate = function(t) {
      var e = Math.cos(t), a = Math.sin(t), n = this.a, s = this.c, o = this.tx;
      return this.a = n * e - this.b * a, this.b = n * a + this.b * e, this.c = s * e - this.d * a, this.d = s * a + this.d * e, this.tx = o * e - this.ty * a, this.ty = o * a + this.ty * e, this;
    }, i.prototype.append = function(t) {
      var e = this.a, a = this.b, n = this.c, s = this.d;
      return this.a = t.a * e + t.b * n, this.b = t.a * a + t.b * s, this.c = t.c * e + t.d * n, this.d = t.c * a + t.d * s, this.tx = t.tx * e + t.ty * n + this.tx, this.ty = t.tx * a + t.ty * s + this.ty, this;
    }, i.prototype.setTransform = function(t, e, a, n, s, o, u, m, g) {
      return this.a = Math.cos(u + g) * s, this.b = Math.sin(u + g) * s, this.c = -Math.sin(u - m) * o, this.d = Math.cos(u - m) * o, this.tx = t - (a * this.a + n * this.c), this.ty = e - (a * this.b + n * this.d), this;
    }, i.prototype.prepend = function(t) {
      var e = this.tx;
      if (t.a !== 1 || t.b !== 0 || t.c !== 0 || t.d !== 1) {
        var a = this.a, n = this.c;
        this.a = a * t.a + this.b * t.c, this.b = a * t.b + this.b * t.d, this.c = n * t.a + this.d * t.c, this.d = n * t.b + this.d * t.d;
      }
      return this.tx = e * t.a + this.ty * t.c + t.tx, this.ty = e * t.b + this.ty * t.d + t.ty, this;
    }, i.prototype.decompose = function(t) {
      var e = this.a, a = this.b, n = this.c, s = this.d, o = t.pivot, u = -Math.atan2(-n, s), m = Math.atan2(a, e), g = Math.abs(u + m);
      return g < 1e-5 || Math.abs(Cn - g) < 1e-5 ? (t.rotation = m, t.skew.x = t.skew.y = 0) : (t.rotation = 0, t.skew.x = u, t.skew.y = m), t.scale.x = Math.sqrt(e * e + a * a), t.scale.y = Math.sqrt(n * n + s * s), t.position.x = this.tx + (o.x * e + o.y * n), t.position.y = this.ty + (o.x * a + o.y * s), t;
    }, i.prototype.invert = function() {
      var t = this.a, e = this.b, a = this.c, n = this.d, s = this.tx, o = t * n - e * a;
      return this.a = n / o, this.b = -e / o, this.c = -a / o, this.d = t / o, this.tx = (a * this.ty - n * s) / o, this.ty = -(t * this.ty - e * s) / o, this;
    }, i.prototype.identity = function() {
      return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this;
    }, i.prototype.clone = function() {
      var t = new i();
      return t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty, t;
    }, i.prototype.copyTo = function(t) {
      return t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty, t;
    }, i.prototype.copyFrom = function(t) {
      return this.a = t.a, this.b = t.b, this.c = t.c, this.d = t.d, this.tx = t.tx, this.ty = t.ty, this;
    }, i.prototype.toString = function() {
      return "[@pixi/math:Matrix a=" + this.a + " b=" + this.b + " c=" + this.c + " d=" + this.d + " tx=" + this.tx + " ty=" + this.ty + "]";
    }, Object.defineProperty(i, "IDENTITY", {
      /**
       * A default (identity) matrix
       * @readonly
       */
      get: function() {
        return new i();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i, "TEMP_MATRIX", {
      /**
       * A temp matrix
       * @readonly
       */
      get: function() {
        return new i();
      },
      enumerable: !1,
      configurable: !0
    }), i;
  }()
), Yi = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1], zi = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1], Ki = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1], Wi = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1], Oh = [], kc = [], rs = Math.sign;
function oy() {
  for (var i = 0; i < 16; i++) {
    var t = [];
    Oh.push(t);
    for (var e = 0; e < 16; e++)
      for (var a = rs(Yi[i] * Yi[e] + Ki[i] * zi[e]), n = rs(zi[i] * Yi[e] + Wi[i] * zi[e]), s = rs(Yi[i] * Ki[e] + Ki[i] * Wi[e]), o = rs(zi[i] * Ki[e] + Wi[i] * Wi[e]), u = 0; u < 16; u++)
        if (Yi[u] === a && zi[u] === n && Ki[u] === s && Wi[u] === o) {
          t.push(u);
          break;
        }
  }
  for (var i = 0; i < 16; i++) {
    var m = new be();
    m.set(Yi[i], zi[i], Ki[i], Wi[i], 0, 0), kc.push(m);
  }
}
oy();
var ye = {
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 0       | East      |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  E: 0,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 45     | Southeast |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  SE: 1,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 90     | South     |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  S: 2,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 135    | Southwest |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  SW: 3,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 180     | West      |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  W: 4,
  /**
   * | Rotation    | Direction    |
   * |-------------|--------------|
   * | -135/225 | Northwest    |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  NW: 5,
  /**
   * | Rotation    | Direction    |
   * |-------------|--------------|
   * | -90/270  | North        |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  N: 6,
  /**
   * | Rotation    | Direction    |
   * |-------------|--------------|
   * | -45/315  | Northeast    |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  NE: 7,
  /**
   * Reflection about Y-axis.
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  MIRROR_VERTICAL: 8,
  /**
   * Reflection about the main diagonal.
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  MAIN_DIAGONAL: 10,
  /**
   * Reflection about X-axis.
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  MIRROR_HORIZONTAL: 12,
  /**
   * Reflection about reverse diagonal.
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  REVERSE_DIAGONAL: 14,
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @returns {PIXI.GD8Symmetry} The X-component of the U-axis
   *    after rotating the axes.
   */
  uX: function(i) {
    return Yi[i];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @returns {PIXI.GD8Symmetry} The Y-component of the U-axis
   *    after rotating the axes.
   */
  uY: function(i) {
    return zi[i];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @returns {PIXI.GD8Symmetry} The X-component of the V-axis
   *    after rotating the axes.
   */
  vX: function(i) {
    return Ki[i];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @returns {PIXI.GD8Symmetry} The Y-component of the V-axis
   *    after rotating the axes.
   */
  vY: function(i) {
    return Wi[i];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotation - symmetry whose opposite
   *   is needed. Only rotations have opposite symmetries while
   *   reflections don't.
   * @returns {PIXI.GD8Symmetry} The opposite symmetry of `rotation`
   */
  inv: function(i) {
    return i & 8 ? i & 15 : -i & 7;
  },
  /**
   * Composes the two D8 operations.
   *
   * Taking `^` as reflection:
   *
   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |
   * |-------|-----|-----|-----|-----|------|-------|-------|-------|
   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |
   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |
   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |
   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |
   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |
   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |
   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |
   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |
   *
   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotationSecond - Second operation, which
   *   is the row in the above cayley table.
   * @param {PIXI.GD8Symmetry} rotationFirst - First operation, which
   *   is the column in the above cayley table.
   * @returns {PIXI.GD8Symmetry} Composed operation
   */
  add: function(i, t) {
    return Oh[i][t];
  },
  /**
   * Reverse of `add`.
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotationSecond - Second operation
   * @param {PIXI.GD8Symmetry} rotationFirst - First operation
   * @returns {PIXI.GD8Symmetry} Result
   */
  sub: function(i, t) {
    return Oh[i][ye.inv(t)];
  },
  /**
   * Adds 180 degrees to rotation, which is a commutative
   * operation.
   * @memberof PIXI.groupD8
   * @param {number} rotation - The number to rotate.
   * @returns {number} Rotated number
   */
  rotate180: function(i) {
    return i ^ 4;
  },
  /**
   * Checks if the rotation angle is vertical, i.e. south
   * or north. It doesn't work for reflections.
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotation - The number to check.
   * @returns {boolean} Whether or not the direction is vertical
   */
  isVertical: function(i) {
    return (i & 3) === 2;
  },
  /**
   * Approximates the vector `V(dx,dy)` into one of the
   * eight directions provided by `groupD8`.
   * @memberof PIXI.groupD8
   * @param {number} dx - X-component of the vector
   * @param {number} dy - Y-component of the vector
   * @returns {PIXI.GD8Symmetry} Approximation of the vector into
   *  one of the eight symmetries.
   */
  byDirection: function(i, t) {
    return Math.abs(i) * 2 <= Math.abs(t) ? t >= 0 ? ye.S : ye.N : Math.abs(t) * 2 <= Math.abs(i) ? i > 0 ? ye.E : ye.W : t > 0 ? i > 0 ? ye.SE : ye.SW : i > 0 ? ye.NE : ye.NW;
  },
  /**
   * Helps sprite to compensate texture packer rotation.
   * @memberof PIXI.groupD8
   * @param {PIXI.Matrix} matrix - sprite world matrix
   * @param {PIXI.GD8Symmetry} rotation - The rotation factor to use.
   * @param {number} tx - sprite anchoring
   * @param {number} ty - sprite anchoring
   */
  matrixAppendRotationInv: function(i, t, e, a) {
    e === void 0 && (e = 0), a === void 0 && (a = 0);
    var n = kc[ye.inv(t)];
    n.tx = e, n.ty = a, i.append(n);
  }
}, Qs = (
  /** @class */
  function() {
    function i() {
      this.worldTransform = new be(), this.localTransform = new be(), this.position = new wi(this.onChange, this, 0, 0), this.scale = new wi(this.onChange, this, 1, 1), this.pivot = new wi(this.onChange, this, 0, 0), this.skew = new wi(this.updateSkew, this, 0, 0), this._rotation = 0, this._cx = 1, this._sx = 0, this._cy = 0, this._sy = 1, this._localID = 0, this._currentLocalID = 0, this._worldID = 0, this._parentID = 0;
    }
    return i.prototype.onChange = function() {
      this._localID++;
    }, i.prototype.updateSkew = function() {
      this._cx = Math.cos(this._rotation + this.skew.y), this._sx = Math.sin(this._rotation + this.skew.y), this._cy = -Math.sin(this._rotation - this.skew.x), this._sy = Math.cos(this._rotation - this.skew.x), this._localID++;
    }, i.prototype.toString = function() {
      return "[@pixi/math:Transform " + ("position=(" + this.position.x + ", " + this.position.y + ") ") + ("rotation=" + this.rotation + " ") + ("scale=(" + this.scale.x + ", " + this.scale.y + ") ") + ("skew=(" + this.skew.x + ", " + this.skew.y + ") ") + "]";
    }, i.prototype.updateLocalTransform = function() {
      var t = this.localTransform;
      this._localID !== this._currentLocalID && (t.a = this._cx * this.scale.x, t.b = this._sx * this.scale.x, t.c = this._cy * this.scale.y, t.d = this._sy * this.scale.y, t.tx = this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c), t.ty = this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d), this._currentLocalID = this._localID, this._parentID = -1);
    }, i.prototype.updateTransform = function(t) {
      var e = this.localTransform;
      if (this._localID !== this._currentLocalID && (e.a = this._cx * this.scale.x, e.b = this._sx * this.scale.x, e.c = this._cy * this.scale.y, e.d = this._sy * this.scale.y, e.tx = this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c), e.ty = this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d), this._currentLocalID = this._localID, this._parentID = -1), this._parentID !== t._worldID) {
        var a = t.worldTransform, n = this.worldTransform;
        n.a = e.a * a.a + e.b * a.c, n.b = e.a * a.b + e.b * a.d, n.c = e.c * a.a + e.d * a.c, n.d = e.c * a.b + e.d * a.d, n.tx = e.tx * a.a + e.ty * a.c + a.tx, n.ty = e.tx * a.b + e.ty * a.d + a.ty, this._parentID = t._worldID, this._worldID++;
      }
    }, i.prototype.setFromMatrix = function(t) {
      t.decompose(this), this._localID++;
    }, Object.defineProperty(i.prototype, "rotation", {
      /** The rotation of the object in radians. */
      get: function() {
        return this._rotation;
      },
      set: function(t) {
        this._rotation !== t && (this._rotation = t, this.updateSkew());
      },
      enumerable: !1,
      configurable: !0
    }), i.IDENTITY = new i(), i;
  }()
);
/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var yn = function() {
  return yn = Object.assign || function(t) {
    for (var e = arguments, a, n = 1, s = arguments.length; n < s; n++) {
      a = e[n];
      for (var o in a)
        Object.prototype.hasOwnProperty.call(a, o) && (t[o] = a[o]);
    }
    return t;
  }, yn.apply(this, arguments);
}, se;
(function(i) {
  i.Application = "application", i.RendererPlugin = "renderer-webgl-plugin", i.CanvasRendererPlugin = "renderer-canvas-plugin", i.Loader = "loader", i.LoadParser = "load-parser", i.ResolveParser = "resolve-parser", i.CacheParser = "cache-parser", i.DetectionParser = "detection-parser";
})(se || (se = {}));
var e0 = function(i) {
  if (typeof i == "function" || typeof i == "object" && i.extension) {
    if (!i.extension)
      throw new Error("Extension class must have an extension object");
    var t = typeof i.extension != "object" ? { type: i.extension } : i.extension;
    i = yn(yn({}, t), { ref: i });
  }
  if (typeof i == "object")
    i = yn({}, i);
  else
    throw new Error("Invalid extension type");
  return typeof i.type == "string" && (i.type = [i.type]), i;
}, ri = {
  /** @ignore */
  _addHandlers: null,
  /** @ignore */
  _removeHandlers: null,
  /** @ignore */
  _queue: {},
  /**
   * Remove extensions from PixiJS.
   * @param extensions - Extensions to be removed.
   * @returns {PIXI.extensions} For chaining.
   */
  remove: function() {
    for (var i = arguments, t = this, e = [], a = 0; a < arguments.length; a++)
      e[a] = i[a];
    return e.map(e0).forEach(function(n) {
      n.type.forEach(function(s) {
        var o, u;
        return (u = (o = t._removeHandlers)[s]) === null || u === void 0 ? void 0 : u.call(o, n);
      });
    }), this;
  },
  /**
   * Register new extensions with PixiJS.
   * @param extensions - The spread of extensions to add to PixiJS.
   * @returns {PIXI.extensions} For chaining.
   */
  add: function() {
    for (var i = arguments, t = this, e = [], a = 0; a < arguments.length; a++)
      e[a] = i[a];
    return e.map(e0).forEach(function(n) {
      n.type.forEach(function(s) {
        var o = t._addHandlers, u = t._queue;
        o[s] ? o[s](n) : (u[s] = u[s] || [], u[s].push(n));
      });
    }), this;
  },
  /**
   * Internal method to handle extensions by name.
   * @param type - The extension type.
   * @param onAdd  - Function for handling when extensions are added/registered passes {@link PIXI.ExtensionFormat}.
   * @param onRemove  - Function for handling when extensions are removed/unregistered passes {@link PIXI.ExtensionFormat}.
   * @returns {PIXI.extensions} For chaining.
   */
  handle: function(i, t, e) {
    var a = this._addHandlers = this._addHandlers || {}, n = this._removeHandlers = this._removeHandlers || {};
    if (a[i] || n[i])
      throw new Error("Extension type " + i + " already has a handler");
    a[i] = t, n[i] = e;
    var s = this._queue;
    return s[i] && (s[i].forEach(function(o) {
      return t(o);
    }), delete s[i]), this;
  },
  /**
   * Handle a type, but using a map by `name` property.
   * @param type - Type of extension to handle.
   * @param map - The object map of named extensions.
   * @returns {PIXI.extensions} For chaining.
   */
  handleByMap: function(i, t) {
    return this.handle(i, function(e) {
      t[e.name] = e.ref;
    }, function(e) {
      delete t[e.name];
    });
  },
  /**
   * Handle a type, but using a list of extensions.
   * @param type - Type of extension to handle.
   * @param list - The list of extensions.
   * @returns {PIXI.extensions} For chaining.
   */
  handleByList: function(i, t) {
    return this.handle(i, function(e) {
      var a, n;
      t.includes(e.ref) || (t.push(e.ref), i === se.Loader && ((n = (a = e.ref).add) === null || n === void 0 || n.call(a)));
    }, function(e) {
      var a = t.indexOf(e.ref);
      a !== -1 && t.splice(a, 1);
    });
  }
};
/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ke = (
  /** @class */
  function() {
    function i(t) {
      this.items = [], this._name = t, this._aliasCount = 0;
    }
    return i.prototype.emit = function(t, e, a, n, s, o, u, m) {
      if (arguments.length > 8)
        throw new Error("max arguments reached");
      var g = this, A = g.name, x = g.items;
      this._aliasCount++;
      for (var w = 0, C = x.length; w < C; w++)
        x[w][A](t, e, a, n, s, o, u, m);
      return x === this.items && this._aliasCount--, this;
    }, i.prototype.ensureNonAliasedItems = function() {
      this._aliasCount > 0 && this.items.length > 1 && (this._aliasCount = 0, this.items = this.items.slice(0));
    }, i.prototype.add = function(t) {
      return t[this._name] && (this.ensureNonAliasedItems(), this.remove(t), this.items.push(t)), this;
    }, i.prototype.remove = function(t) {
      var e = this.items.indexOf(t);
      return e !== -1 && (this.ensureNonAliasedItems(), this.items.splice(e, 1)), this;
    }, i.prototype.contains = function(t) {
      return this.items.indexOf(t) !== -1;
    }, i.prototype.removeAll = function() {
      return this.ensureNonAliasedItems(), this.items.length = 0, this;
    }, i.prototype.destroy = function() {
      this.removeAll(), this.items = null, this._name = null;
    }, Object.defineProperty(i.prototype, "empty", {
      /**
       * `true` if there are no this Runner contains no listeners
       * @readonly
       */
      get: function() {
        return this.items.length === 0;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "name", {
      /**
       * The name of the runner.
       * @readonly
       */
      get: function() {
        return this._name;
      },
      enumerable: !1,
      configurable: !0
    }), i;
  }()
);
Object.defineProperties(Ke.prototype, {
  /**
   * Alias for `emit`
   * @memberof PIXI.Runner#
   * @method dispatch
   * @see PIXI.Runner#emit
   */
  dispatch: { value: Ke.prototype.emit },
  /**
   * Alias for `emit`
   * @memberof PIXI.Runner#
   * @method run
   * @see PIXI.Runner#emit
   */
  run: { value: Ke.prototype.emit }
});
/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
mt.TARGET_FPMS = 0.06;
var ti;
(function(i) {
  i[i.INTERACTION = 50] = "INTERACTION", i[i.HIGH = 25] = "HIGH", i[i.NORMAL = 0] = "NORMAL", i[i.LOW = -25] = "LOW", i[i.UTILITY = -50] = "UTILITY";
})(ti || (ti = {}));
var Do = (
  /** @class */
  function() {
    function i(t, e, a, n) {
      e === void 0 && (e = null), a === void 0 && (a = 0), n === void 0 && (n = !1), this.next = null, this.previous = null, this._destroyed = !1, this.fn = t, this.context = e, this.priority = a, this.once = n;
    }
    return i.prototype.match = function(t, e) {
      return e === void 0 && (e = null), this.fn === t && this.context === e;
    }, i.prototype.emit = function(t) {
      this.fn && (this.context ? this.fn.call(this.context, t) : this.fn(t));
      var e = this.next;
      return this.once && this.destroy(!0), this._destroyed && (this.next = null), e;
    }, i.prototype.connect = function(t) {
      this.previous = t, t.next && (t.next.previous = this), this.next = t.next, t.next = this;
    }, i.prototype.destroy = function(t) {
      t === void 0 && (t = !1), this._destroyed = !0, this.fn = null, this.context = null, this.previous && (this.previous.next = this.next), this.next && (this.next.previous = this.previous);
      var e = this.next;
      return this.next = t ? null : e, this.previous = null, e;
    }, i;
  }()
), We = (
  /** @class */
  function() {
    function i() {
      var t = this;
      this.autoStart = !1, this.deltaTime = 1, this.lastTime = -1, this.speed = 1, this.started = !1, this._requestId = null, this._maxElapsedMS = 100, this._minElapsedMS = 0, this._protected = !1, this._lastFrame = -1, this._head = new Do(null, null, 1 / 0), this.deltaMS = 1 / mt.TARGET_FPMS, this.elapsedMS = 1 / mt.TARGET_FPMS, this._tick = function(e) {
        t._requestId = null, t.started && (t.update(e), t.started && t._requestId === null && t._head.next && (t._requestId = requestAnimationFrame(t._tick)));
      };
    }
    return i.prototype._requestIfNeeded = function() {
      this._requestId === null && this._head.next && (this.lastTime = performance.now(), this._lastFrame = this.lastTime, this._requestId = requestAnimationFrame(this._tick));
    }, i.prototype._cancelIfNeeded = function() {
      this._requestId !== null && (cancelAnimationFrame(this._requestId), this._requestId = null);
    }, i.prototype._startIfPossible = function() {
      this.started ? this._requestIfNeeded() : this.autoStart && this.start();
    }, i.prototype.add = function(t, e, a) {
      return a === void 0 && (a = ti.NORMAL), this._addListener(new Do(t, e, a));
    }, i.prototype.addOnce = function(t, e, a) {
      return a === void 0 && (a = ti.NORMAL), this._addListener(new Do(t, e, a, !0));
    }, i.prototype._addListener = function(t) {
      var e = this._head.next, a = this._head;
      if (!e)
        t.connect(a);
      else {
        for (; e; ) {
          if (t.priority > e.priority) {
            t.connect(a);
            break;
          }
          a = e, e = e.next;
        }
        t.previous || t.connect(a);
      }
      return this._startIfPossible(), this;
    }, i.prototype.remove = function(t, e) {
      for (var a = this._head.next; a; )
        a.match(t, e) ? a = a.destroy() : a = a.next;
      return this._head.next || this._cancelIfNeeded(), this;
    }, Object.defineProperty(i.prototype, "count", {
      /**
       * The number of listeners on this ticker, calculated by walking through linked list
       * @readonly
       * @member {number}
       */
      get: function() {
        if (!this._head)
          return 0;
        for (var t = 0, e = this._head; e = e.next; )
          t++;
        return t;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.start = function() {
      this.started || (this.started = !0, this._requestIfNeeded());
    }, i.prototype.stop = function() {
      this.started && (this.started = !1, this._cancelIfNeeded());
    }, i.prototype.destroy = function() {
      if (!this._protected) {
        this.stop();
        for (var t = this._head.next; t; )
          t = t.destroy(!0);
        this._head.destroy(), this._head = null;
      }
    }, i.prototype.update = function(t) {
      t === void 0 && (t = performance.now());
      var e;
      if (t > this.lastTime) {
        if (e = this.elapsedMS = t - this.lastTime, e > this._maxElapsedMS && (e = this._maxElapsedMS), e *= this.speed, this._minElapsedMS) {
          var a = t - this._lastFrame | 0;
          if (a < this._minElapsedMS)
            return;
          this._lastFrame = t - a % this._minElapsedMS;
        }
        this.deltaMS = e, this.deltaTime = this.deltaMS * mt.TARGET_FPMS;
        for (var n = this._head, s = n.next; s; )
          s = s.emit(this.deltaTime);
        n.next || this._cancelIfNeeded();
      } else
        this.deltaTime = this.deltaMS = this.elapsedMS = 0;
      this.lastTime = t;
    }, Object.defineProperty(i.prototype, "FPS", {
      /**
       * The frames per second at which this ticker is running.
       * The default is approximately 60 in most modern browsers.
       * **Note:** This does not factor in the value of
       * {@link PIXI.Ticker#speed}, which is specific
       * to scaling {@link PIXI.Ticker#deltaTime}.
       * @member {number}
       * @readonly
       */
      get: function() {
        return 1e3 / this.elapsedMS;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "minFPS", {
      /**
       * Manages the maximum amount of milliseconds allowed to
       * elapse between invoking {@link PIXI.Ticker#update}.
       * This value is used to cap {@link PIXI.Ticker#deltaTime},
       * but does not effect the measured value of {@link PIXI.Ticker#FPS}.
       * When setting this property it is clamped to a value between
       * `0` and `PIXI.settings.TARGET_FPMS * 1000`.
       * @member {number}
       * @default 10
       */
      get: function() {
        return 1e3 / this._maxElapsedMS;
      },
      set: function(t) {
        var e = Math.min(this.maxFPS, t), a = Math.min(Math.max(0, e) / 1e3, mt.TARGET_FPMS);
        this._maxElapsedMS = 1 / a;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "maxFPS", {
      /**
       * Manages the minimum amount of milliseconds required to
       * elapse between invoking {@link PIXI.Ticker#update}.
       * This will effect the measured value of {@link PIXI.Ticker#FPS}.
       * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.
       * Otherwise it will be at least `minFPS`
       * @member {number}
       * @default 0
       */
      get: function() {
        return this._minElapsedMS ? Math.round(1e3 / this._minElapsedMS) : 0;
      },
      set: function(t) {
        if (t === 0)
          this._minElapsedMS = 0;
        else {
          var e = Math.max(this.minFPS, t);
          this._minElapsedMS = 1 / (e / 1e3);
        }
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i, "shared", {
      /**
       * The shared ticker instance used by {@link PIXI.AnimatedSprite} and by
       * {@link PIXI.VideoResource} to update animation frames / video textures.
       *
       * It may also be used by {@link PIXI.Application} if created with the `sharedTicker` option property set to true.
       *
       * The property {@link PIXI.Ticker#autoStart} is set to `true` for this instance.
       * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.
       * @example
       * let ticker = PIXI.Ticker.shared;
       * // Set this to prevent starting this ticker when listeners are added.
       * // By default this is true only for the PIXI.Ticker.shared instance.
       * ticker.autoStart = false;
       * // FYI, call this to ensure the ticker is stopped. It should be stopped
       * // if you have not attempted to render anything yet.
       * ticker.stop();
       * // Call this when you are ready for a running shared ticker.
       * ticker.start();
       * @example
       * // You may use the shared ticker to render...
       * let renderer = PIXI.autoDetectRenderer();
       * let stage = new PIXI.Container();
       * document.body.appendChild(renderer.view);
       * ticker.add(function (time) {
       *     renderer.render(stage);
       * });
       * @example
       * // Or you can just update it manually.
       * ticker.autoStart = false;
       * ticker.stop();
       * function animate(time) {
       *     ticker.update(time);
       *     renderer.render(stage);
       *     requestAnimationFrame(animate);
       * }
       * animate(performance.now());
       * @member {PIXI.Ticker}
       * @static
       */
      get: function() {
        if (!i._shared) {
          var t = i._shared = new i();
          t.autoStart = !0, t._protected = !0;
        }
        return i._shared;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i, "system", {
      /**
       * The system ticker instance used by {@link PIXI.InteractionManager} and by
       * {@link PIXI.BasePrepare} for core timing functionality that shouldn't usually need to be paused,
       * unlike the `shared` ticker which drives visual animations and rendering which may want to be paused.
       *
       * The property {@link PIXI.Ticker#autoStart} is set to `true` for this instance.
       * @member {PIXI.Ticker}
       * @static
       */
      get: function() {
        if (!i._system) {
          var t = i._system = new i();
          t.autoStart = !0, t._protected = !0;
        }
        return i._system;
      },
      enumerable: !1,
      configurable: !0
    }), i;
  }()
), Uc = (
  /** @class */
  function() {
    function i() {
    }
    return i.init = function(t) {
      var e = this;
      t = Object.assign({
        autoStart: !0,
        sharedTicker: !1
      }, t), Object.defineProperty(this, "ticker", {
        set: function(a) {
          this._ticker && this._ticker.remove(this.render, this), this._ticker = a, a && a.add(this.render, this, ti.LOW);
        },
        get: function() {
          return this._ticker;
        }
      }), this.stop = function() {
        e._ticker.stop();
      }, this.start = function() {
        e._ticker.start();
      }, this._ticker = null, this.ticker = t.sharedTicker ? We.shared : new We(), t.autoStart && this.start();
    }, i.destroy = function() {
      if (this._ticker) {
        var t = this._ticker;
        this.ticker = null, t.destroy();
      }
    }, i.extension = se.Application, i;
  }()
);
/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
mt.PREFER_ENV = Tr.any ? Zr.WEBGL : Zr.WEBGL2;
mt.STRICT_TEXTURE_CACHE = !1;
var On = [];
function Js(i, t) {
  if (!i)
    return null;
  var e = "";
  if (typeof i == "string") {
    var a = /\.(\w{3,4})(?:$|\?|#)/i.exec(i);
    a && (e = a[1].toLowerCase());
  }
  for (var n = On.length - 1; n >= 0; --n) {
    var s = On[n];
    if (s.test && s.test(i, e))
      return new s(i, t);
  }
  throw new Error("Unrecognized source type to auto-detect Resource");
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var $h = function(i, t) {
  return $h = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, $h(i, t);
};
function pe(i, t) {
  $h(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Rh = function() {
  return Rh = Object.assign || function(t) {
    for (var e = arguments, a, n = 1, s = arguments.length; n < s; n++) {
      a = e[n];
      for (var o in a)
        Object.prototype.hasOwnProperty.call(a, o) && (t[o] = a[o]);
    }
    return t;
  }, Rh.apply(this, arguments);
};
function hy(i, t) {
  var e = {};
  for (var a in i)
    Object.prototype.hasOwnProperty.call(i, a) && t.indexOf(a) < 0 && (e[a] = i[a]);
  if (i != null && typeof Object.getOwnPropertySymbols == "function")
    for (var n = 0, a = Object.getOwnPropertySymbols(i); n < a.length; n++)
      t.indexOf(a[n]) < 0 && Object.prototype.propertyIsEnumerable.call(i, a[n]) && (e[a[n]] = i[a[n]]);
  return e;
}
var oa = (
  /** @class */
  function() {
    function i(t, e) {
      t === void 0 && (t = 0), e === void 0 && (e = 0), this._width = t, this._height = e, this.destroyed = !1, this.internal = !1, this.onResize = new Ke("setRealSize"), this.onUpdate = new Ke("update"), this.onError = new Ke("onError");
    }
    return i.prototype.bind = function(t) {
      this.onResize.add(t), this.onUpdate.add(t), this.onError.add(t), (this._width || this._height) && this.onResize.emit(this._width, this._height);
    }, i.prototype.unbind = function(t) {
      this.onResize.remove(t), this.onUpdate.remove(t), this.onError.remove(t);
    }, i.prototype.resize = function(t, e) {
      (t !== this._width || e !== this._height) && (this._width = t, this._height = e, this.onResize.emit(t, e));
    }, Object.defineProperty(i.prototype, "valid", {
      /**
       * Has been validated
       * @readonly
       */
      get: function() {
        return !!this._width && !!this._height;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.update = function() {
      this.destroyed || this.onUpdate.emit();
    }, i.prototype.load = function() {
      return Promise.resolve(this);
    }, Object.defineProperty(i.prototype, "width", {
      /**
       * The width of the resource.
       * @readonly
       */
      get: function() {
        return this._width;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "height", {
      /**
       * The height of the resource.
       * @readonly
       */
      get: function() {
        return this._height;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.style = function(t, e, a) {
      return !1;
    }, i.prototype.dispose = function() {
    }, i.prototype.destroy = function() {
      this.destroyed || (this.destroyed = !0, this.dispose(), this.onError.removeAll(), this.onError = null, this.onResize.removeAll(), this.onResize = null, this.onUpdate.removeAll(), this.onUpdate = null);
    }, i.test = function(t, e) {
      return !1;
    }, i;
  }()
), ha = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      var n = this, s = a || {}, o = s.width, u = s.height;
      if (!o || !u)
        throw new Error("BufferResource width or height invalid");
      return n = i.call(this, o, u) || this, n.data = e, n;
    }
    return t.prototype.upload = function(e, a, n) {
      var s = e.gl;
      s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a.alphaMode === Er.UNPACK);
      var o = a.realWidth, u = a.realHeight;
      return n.width === o && n.height === u ? s.texSubImage2D(a.target, 0, 0, 0, o, u, a.format, n.type, this.data) : (n.width = o, n.height = u, s.texImage2D(a.target, 0, n.internalFormat, o, u, 0, a.format, n.type, this.data)), !0;
    }, t.prototype.dispose = function() {
      this.data = null;
    }, t.test = function(e) {
      return e instanceof Float32Array || e instanceof Uint8Array || e instanceof Uint32Array;
    }, t;
  }(oa)
), uy = {
  scaleMode: Dr.NEAREST,
  format: ot.RGBA,
  alphaMode: Er.NPM
}, Qt = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      e === void 0 && (e = null), a === void 0 && (a = null);
      var n = i.call(this) || this;
      a = a || {};
      var s = a.alphaMode, o = a.mipmap, u = a.anisotropicLevel, m = a.scaleMode, g = a.width, A = a.height, x = a.wrapMode, w = a.format, C = a.type, O = a.target, L = a.resolution, D = a.resourceOptions;
      return e && !(e instanceof oa) && (e = Js(e, D), e.internal = !0), n.resolution = L || mt.RESOLUTION, n.width = Math.round((g || 0) * n.resolution) / n.resolution, n.height = Math.round((A || 0) * n.resolution) / n.resolution, n._mipmap = o !== void 0 ? o : mt.MIPMAP_TEXTURES, n.anisotropicLevel = u !== void 0 ? u : mt.ANISOTROPIC_LEVEL, n._wrapMode = x || mt.WRAP_MODE, n._scaleMode = m !== void 0 ? m : mt.SCALE_MODE, n.format = w || ot.RGBA, n.type = C || wt.UNSIGNED_BYTE, n.target = O || Ii.TEXTURE_2D, n.alphaMode = s !== void 0 ? s : Er.UNPACK, n.uid = Ci(), n.touched = 0, n.isPowerOfTwo = !1, n._refreshPOT(), n._glTextures = {}, n.dirtyId = 0, n.dirtyStyleId = 0, n.cacheId = null, n.valid = g > 0 && A > 0, n.textureCacheIds = [], n.destroyed = !1, n.resource = null, n._batchEnabled = 0, n._batchLocation = 0, n.parentTextureArray = null, n.setResource(e), n;
    }
    return Object.defineProperty(t.prototype, "realWidth", {
      /**
       * Pixel width of the source of this texture
       * @readonly
       */
      get: function() {
        return Math.round(this.width * this.resolution);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "realHeight", {
      /**
       * Pixel height of the source of this texture
       * @readonly
       */
      get: function() {
        return Math.round(this.height * this.resolution);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "mipmap", {
      /**
       * Mipmap mode of the texture, affects downscaled images
       * @default PIXI.settings.MIPMAP_TEXTURES
       */
      get: function() {
        return this._mipmap;
      },
      set: function(e) {
        this._mipmap !== e && (this._mipmap = e, this.dirtyStyleId++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "scaleMode", {
      /**
       * The scale mode to apply when scaling this texture
       * @default PIXI.settings.SCALE_MODE
       */
      get: function() {
        return this._scaleMode;
      },
      set: function(e) {
        this._scaleMode !== e && (this._scaleMode = e, this.dirtyStyleId++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "wrapMode", {
      /**
       * How the texture wraps
       * @default PIXI.settings.WRAP_MODE
       */
      get: function() {
        return this._wrapMode;
      },
      set: function(e) {
        this._wrapMode !== e && (this._wrapMode = e, this.dirtyStyleId++);
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setStyle = function(e, a) {
      var n;
      return e !== void 0 && e !== this.scaleMode && (this.scaleMode = e, n = !0), a !== void 0 && a !== this.mipmap && (this.mipmap = a, n = !0), n && this.dirtyStyleId++, this;
    }, t.prototype.setSize = function(e, a, n) {
      return n = n || this.resolution, this.setRealSize(e * n, a * n, n);
    }, t.prototype.setRealSize = function(e, a, n) {
      return this.resolution = n || this.resolution, this.width = Math.round(e) / this.resolution, this.height = Math.round(a) / this.resolution, this._refreshPOT(), this.update(), this;
    }, t.prototype._refreshPOT = function() {
      this.isPowerOfTwo = Ih(this.realWidth) && Ih(this.realHeight);
    }, t.prototype.setResolution = function(e) {
      var a = this.resolution;
      return a === e ? this : (this.resolution = e, this.valid && (this.width = Math.round(this.width * a) / e, this.height = Math.round(this.height * a) / e, this.emit("update", this)), this._refreshPOT(), this);
    }, t.prototype.setResource = function(e) {
      if (this.resource === e)
        return this;
      if (this.resource)
        throw new Error("Resource can be set only once");
      return e.bind(this), this.resource = e, this;
    }, t.prototype.update = function() {
      this.valid ? (this.dirtyId++, this.dirtyStyleId++, this.emit("update", this)) : this.width > 0 && this.height > 0 && (this.valid = !0, this.emit("loaded", this), this.emit("update", this));
    }, t.prototype.onError = function(e) {
      this.emit("error", this, e);
    }, t.prototype.destroy = function() {
      this.resource && (this.resource.unbind(this), this.resource.internal && this.resource.destroy(), this.resource = null), this.cacheId && (delete gr[this.cacheId], delete fr[this.cacheId], this.cacheId = null), this.dispose(), t.removeFromCache(this), this.textureCacheIds = null, this.destroyed = !0;
    }, t.prototype.dispose = function() {
      this.emit("dispose", this);
    }, t.prototype.castToBaseTexture = function() {
      return this;
    }, t.from = function(e, a, n) {
      n === void 0 && (n = mt.STRICT_TEXTURE_CACHE);
      var s = typeof e == "string", o = null;
      if (s)
        o = e;
      else {
        if (!e._pixiId) {
          var u = a && a.pixiIdPrefix || "pixiid";
          e._pixiId = u + "_" + Ci();
        }
        o = e._pixiId;
      }
      var m = gr[o];
      if (s && n && !m)
        throw new Error('The cacheId "' + o + '" does not exist in BaseTextureCache.');
      return m || (m = new t(e, a), m.cacheId = o, t.addToCache(m, o)), m;
    }, t.fromBuffer = function(e, a, n, s) {
      e = e || new Float32Array(a * n * 4);
      var o = new ha(e, { width: a, height: n }), u = e instanceof Float32Array ? wt.FLOAT : wt.UNSIGNED_BYTE;
      return new t(o, Object.assign({}, uy, s || { width: a, height: n, type: u }));
    }, t.addToCache = function(e, a) {
      a && (e.textureCacheIds.indexOf(a) === -1 && e.textureCacheIds.push(a), gr[a] && console.warn("BaseTexture added to the cache with an id [" + a + "] that already had an entry"), gr[a] = e);
    }, t.removeFromCache = function(e) {
      if (typeof e == "string") {
        var a = gr[e];
        if (a) {
          var n = a.textureCacheIds.indexOf(e);
          return n > -1 && a.textureCacheIds.splice(n, 1), delete gr[e], a;
        }
      } else if (e && e.textureCacheIds) {
        for (var s = 0; s < e.textureCacheIds.length; ++s)
          delete gr[e.textureCacheIds[s]];
        return e.textureCacheIds.length = 0, e;
      }
      return null;
    }, t._globalBatch = 0, t;
  }(mi)
), qs = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      var n = this, s = a || {}, o = s.width, u = s.height;
      n = i.call(this, o, u) || this, n.items = [], n.itemDirtyIds = [];
      for (var m = 0; m < e; m++) {
        var g = new Qt();
        n.items.push(g), n.itemDirtyIds.push(-2);
      }
      return n.length = e, n._load = null, n.baseTexture = null, n;
    }
    return t.prototype.initFromArray = function(e, a) {
      for (var n = 0; n < this.length; n++)
        e[n] && (e[n].castToBaseTexture ? this.addBaseTextureAt(e[n].castToBaseTexture(), n) : e[n] instanceof oa ? this.addResourceAt(e[n], n) : this.addResourceAt(Js(e[n], a), n));
    }, t.prototype.dispose = function() {
      for (var e = 0, a = this.length; e < a; e++)
        this.items[e].destroy();
      this.items = null, this.itemDirtyIds = null, this._load = null;
    }, t.prototype.addResourceAt = function(e, a) {
      if (!this.items[a])
        throw new Error("Index " + a + " is out of bounds");
      return e.valid && !this.valid && this.resize(e.width, e.height), this.items[a].setResource(e), this;
    }, t.prototype.bind = function(e) {
      if (this.baseTexture !== null)
        throw new Error("Only one base texture per TextureArray is allowed");
      i.prototype.bind.call(this, e);
      for (var a = 0; a < this.length; a++)
        this.items[a].parentTextureArray = e, this.items[a].on("update", e.update, e);
    }, t.prototype.unbind = function(e) {
      i.prototype.unbind.call(this, e);
      for (var a = 0; a < this.length; a++)
        this.items[a].parentTextureArray = null, this.items[a].off("update", e.update, e);
    }, t.prototype.load = function() {
      var e = this;
      if (this._load)
        return this._load;
      var a = this.items.map(function(s) {
        return s.resource;
      }).filter(function(s) {
        return s;
      }), n = a.map(function(s) {
        return s.load();
      });
      return this._load = Promise.all(n).then(function() {
        var s = e.items[0], o = s.realWidth, u = s.realHeight;
        return e.resize(o, u), Promise.resolve(e);
      }), this._load;
    }, t;
  }(oa)
), Ru = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      var n = this, s = a || {}, o = s.width, u = s.height, m, g;
      return Array.isArray(e) ? (m = e, g = e.length) : g = e, n = i.call(this, g, { width: o, height: u }) || this, m && n.initFromArray(m, a), n;
    }
    return t.prototype.addBaseTextureAt = function(e, a) {
      if (e.resource)
        this.addResourceAt(e.resource, a);
      else
        throw new Error("ArrayResource does not support RenderTexture");
      return this;
    }, t.prototype.bind = function(e) {
      i.prototype.bind.call(this, e), e.target = Ii.TEXTURE_2D_ARRAY;
    }, t.prototype.upload = function(e, a, n) {
      var s = this, o = s.length, u = s.itemDirtyIds, m = s.items, g = e.gl;
      n.dirtyId < 0 && g.texImage3D(g.TEXTURE_2D_ARRAY, 0, n.internalFormat, this._width, this._height, o, 0, a.format, n.type, null);
      for (var A = 0; A < o; A++) {
        var x = m[A];
        u[A] < x.dirtyId && (u[A] = x.dirtyId, x.valid && g.texSubImage3D(
          g.TEXTURE_2D_ARRAY,
          0,
          0,
          // xoffset
          0,
          // yoffset
          A,
          // zoffset
          x.resource.width,
          x.resource.height,
          1,
          a.format,
          n.type,
          x.resource.source
        ));
      }
      return !0;
    }, t;
  }(qs)
), ei = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e) {
      var a = this, n = e, s = n.naturalWidth || n.videoWidth || n.width, o = n.naturalHeight || n.videoHeight || n.height;
      return a = i.call(this, s, o) || this, a.source = e, a.noSubImage = !1, a;
    }
    return t.crossOrigin = function(e, a, n) {
      n === void 0 && a.indexOf("data:") !== 0 ? e.crossOrigin = Lc(a) : n !== !1 && (e.crossOrigin = typeof n == "string" ? n : "anonymous");
    }, t.prototype.upload = function(e, a, n, s) {
      var o = e.gl, u = a.realWidth, m = a.realHeight;
      if (s = s || this.source, s instanceof HTMLImageElement) {
        if (!s.complete || s.naturalWidth === 0)
          return !1;
      } else if (s instanceof HTMLVideoElement && s.readyState <= 1)
        return !1;
      return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a.alphaMode === Er.UNPACK), !this.noSubImage && a.target === o.TEXTURE_2D && n.width === u && n.height === m ? o.texSubImage2D(o.TEXTURE_2D, 0, 0, 0, a.format, n.type, s) : (n.width = u, n.height = m, o.texImage2D(a.target, 0, n.internalFormat, a.format, n.type, s)), !0;
    }, t.prototype.update = function() {
      if (!this.destroyed) {
        var e = this.source, a = e.naturalWidth || e.videoWidth || e.width, n = e.naturalHeight || e.videoHeight || e.height;
        this.resize(a, n), i.prototype.update.call(this);
      }
    }, t.prototype.dispose = function() {
      this.source = null;
    }, t;
  }(oa)
), Lu = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e) {
      return i.call(this, e) || this;
    }
    return t.test = function(e) {
      var a = globalThis.OffscreenCanvas;
      return a && e instanceof a ? !0 : globalThis.HTMLCanvasElement && e instanceof HTMLCanvasElement;
    }, t;
  }(ei)
), Du = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      var n = this, s = a || {}, o = s.width, u = s.height, m = s.autoLoad, g = s.linkBaseTexture;
      if (e && e.length !== t.SIDES)
        throw new Error("Invalid length. Got " + e.length + ", expected 6");
      n = i.call(this, 6, { width: o, height: u }) || this;
      for (var A = 0; A < t.SIDES; A++)
        n.items[A].target = Ii.TEXTURE_CUBE_MAP_POSITIVE_X + A;
      return n.linkBaseTexture = g !== !1, e && n.initFromArray(e, a), m !== !1 && n.load(), n;
    }
    return t.prototype.bind = function(e) {
      i.prototype.bind.call(this, e), e.target = Ii.TEXTURE_CUBE_MAP;
    }, t.prototype.addBaseTextureAt = function(e, a, n) {
      if (!this.items[a])
        throw new Error("Index " + a + " is out of bounds");
      if (!this.linkBaseTexture || e.parentTextureArray || Object.keys(e._glTextures).length > 0)
        if (e.resource)
          this.addResourceAt(e.resource, a);
        else
          throw new Error("CubeResource does not support copying of renderTexture.");
      else
        e.target = Ii.TEXTURE_CUBE_MAP_POSITIVE_X + a, e.parentTextureArray = this.baseTexture, this.items[a] = e;
      return e.valid && !this.valid && this.resize(e.realWidth, e.realHeight), this.items[a] = e, this;
    }, t.prototype.upload = function(e, a, n) {
      for (var s = this.itemDirtyIds, o = 0; o < t.SIDES; o++) {
        var u = this.items[o];
        (s[o] < u.dirtyId || n.dirtyId < a.dirtyId) && (u.valid && u.resource ? (u.resource.upload(e, u, n), s[o] = u.dirtyId) : s[o] < -1 && (e.gl.texImage2D(u.target, 0, n.internalFormat, a.realWidth, a.realHeight, 0, a.format, n.type, null), s[o] = -1));
      }
      return !0;
    }, t.test = function(e) {
      return Array.isArray(e) && e.length === t.SIDES;
    }, t.SIDES = 6, t;
  }(qs)
), Zs = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      var n = this;
      if (a = a || {}, !(e instanceof HTMLImageElement)) {
        var s = new Image();
        ei.crossOrigin(s, e, a.crossorigin), s.src = e, e = s;
      }
      return n = i.call(this, e) || this, !e.complete && n._width && n._height && (n._width = 0, n._height = 0), n.url = e.src, n._process = null, n.preserveBitmap = !1, n.createBitmap = (a.createBitmap !== void 0 ? a.createBitmap : mt.CREATE_IMAGE_BITMAP) && !!globalThis.createImageBitmap, n.alphaMode = typeof a.alphaMode == "number" ? a.alphaMode : null, n.bitmap = null, n._load = null, a.autoLoad !== !1 && n.load(), n;
    }
    return t.prototype.load = function(e) {
      var a = this;
      return this._load ? this._load : (e !== void 0 && (this.createBitmap = e), this._load = new Promise(function(n, s) {
        var o = a.source;
        a.url = o.src;
        var u = function() {
          a.destroyed || (o.onload = null, o.onerror = null, a.resize(o.width, o.height), a._load = null, a.createBitmap ? n(a.process()) : n(a));
        };
        o.complete && o.src ? u() : (o.onload = u, o.onerror = function(m) {
          s(m), a.onError.emit(m);
        });
      }), this._load);
    }, t.prototype.process = function() {
      var e = this, a = this.source;
      if (this._process !== null)
        return this._process;
      if (this.bitmap !== null || !globalThis.createImageBitmap)
        return Promise.resolve(this);
      var n = globalThis.createImageBitmap, s = !a.crossOrigin || a.crossOrigin === "anonymous";
      return this._process = fetch(a.src, {
        mode: s ? "cors" : "no-cors"
      }).then(function(o) {
        return o.blob();
      }).then(function(o) {
        return n(o, 0, 0, a.width, a.height, {
          premultiplyAlpha: e.alphaMode === null || e.alphaMode === Er.UNPACK ? "premultiply" : "none"
        });
      }).then(function(o) {
        return e.destroyed ? Promise.reject() : (e.bitmap = o, e.update(), e._process = null, Promise.resolve(e));
      }), this._process;
    }, t.prototype.upload = function(e, a, n) {
      if (typeof this.alphaMode == "number" && (a.alphaMode = this.alphaMode), !this.createBitmap)
        return i.prototype.upload.call(this, e, a, n);
      if (!this.bitmap && (this.process(), !this.bitmap))
        return !1;
      if (i.prototype.upload.call(this, e, a, n, this.bitmap), !this.preserveBitmap) {
        var s = !0, o = a._glTextures;
        for (var u in o) {
          var m = o[u];
          if (m !== n && m.dirtyId !== a.dirtyId) {
            s = !1;
            break;
          }
        }
        s && (this.bitmap.close && this.bitmap.close(), this.bitmap = null);
      }
      return !0;
    }, t.prototype.dispose = function() {
      this.source.onload = null, this.source.onerror = null, i.prototype.dispose.call(this), this.bitmap && (this.bitmap.close(), this.bitmap = null), this._process = null, this._load = null;
    }, t.test = function(e) {
      return typeof e == "string" || e instanceof HTMLImageElement;
    }, t;
  }(ei)
), Nu = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      var n = this;
      return a = a || {}, n = i.call(this, mt.ADAPTER.createCanvas()) || this, n._width = 0, n._height = 0, n.svg = e, n.scale = a.scale || 1, n._overrideWidth = a.width, n._overrideHeight = a.height, n._resolve = null, n._crossorigin = a.crossorigin, n._load = null, a.autoLoad !== !1 && n.load(), n;
    }
    return t.prototype.load = function() {
      var e = this;
      return this._load ? this._load : (this._load = new Promise(function(a) {
        if (e._resolve = function() {
          e.resize(e.source.width, e.source.height), a(e);
        }, t.SVG_XML.test(e.svg.trim())) {
          if (!btoa)
            throw new Error("Your browser doesn't support base64 conversions.");
          e.svg = "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(e.svg)));
        }
        e._loadSvg();
      }), this._load);
    }, t.prototype._loadSvg = function() {
      var e = this, a = new Image();
      ei.crossOrigin(a, this.svg, this._crossorigin), a.src = this.svg, a.onerror = function(n) {
        e._resolve && (a.onerror = null, e.onError.emit(n));
      }, a.onload = function() {
        if (e._resolve) {
          var n = a.width, s = a.height;
          if (!n || !s)
            throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
          var o = n * e.scale, u = s * e.scale;
          (e._overrideWidth || e._overrideHeight) && (o = e._overrideWidth || e._overrideHeight / s * n, u = e._overrideHeight || e._overrideWidth / n * s), o = Math.round(o), u = Math.round(u);
          var m = e.source;
          m.width = o, m.height = u, m._pixiId = "canvas_" + Ci(), m.getContext("2d").drawImage(a, 0, 0, n, s, 0, 0, o, u), e._resolve(), e._resolve = null;
        }
      };
    }, t.getSize = function(e) {
      var a = t.SVG_SIZE.exec(e), n = {};
      return a && (n[a[1]] = Math.round(parseFloat(a[3])), n[a[5]] = Math.round(parseFloat(a[7]))), n;
    }, t.prototype.dispose = function() {
      i.prototype.dispose.call(this), this._resolve = null, this._crossorigin = null;
    }, t.test = function(e, a) {
      return a === "svg" || typeof e == "string" && e.startsWith("data:image/svg+xml") || typeof e == "string" && t.SVG_XML.test(e);
    }, t.SVG_XML = /^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m, t.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i, t;
  }(ei)
), Fu = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      var n = this;
      if (a = a || {}, !(e instanceof HTMLVideoElement)) {
        var s = document.createElement("video");
        s.setAttribute("preload", "auto"), s.setAttribute("webkit-playsinline", ""), s.setAttribute("playsinline", ""), typeof e == "string" && (e = [e]);
        var o = e[0].src || e[0];
        ei.crossOrigin(s, o, a.crossorigin);
        for (var u = 0; u < e.length; ++u) {
          var m = document.createElement("source"), g = e[u], A = g.src, x = g.mime;
          A = A || e[u];
          var w = A.split("?").shift().toLowerCase(), C = w.slice(w.lastIndexOf(".") + 1);
          x = x || t.MIME_TYPES[C] || "video/" + C, m.src = A, m.type = x, s.appendChild(m);
        }
        e = s;
      }
      return n = i.call(this, e) || this, n.noSubImage = !0, n._autoUpdate = !0, n._isConnectedToTicker = !1, n._updateFPS = a.updateFPS || 0, n._msToNextUpdate = 0, n.autoPlay = a.autoPlay !== !1, n._load = null, n._resolve = null, n._onCanPlay = n._onCanPlay.bind(n), n._onError = n._onError.bind(n), a.autoLoad !== !1 && n.load(), n;
    }
    return t.prototype.update = function(e) {
      if (!this.destroyed) {
        var a = We.shared.elapsedMS * this.source.playbackRate;
        this._msToNextUpdate = Math.floor(this._msToNextUpdate - a), (!this._updateFPS || this._msToNextUpdate <= 0) && (i.prototype.update.call(this), this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0);
      }
    }, t.prototype.load = function() {
      var e = this;
      if (this._load)
        return this._load;
      var a = this.source;
      return (a.readyState === a.HAVE_ENOUGH_DATA || a.readyState === a.HAVE_FUTURE_DATA) && a.width && a.height && (a.complete = !0), a.addEventListener("play", this._onPlayStart.bind(this)), a.addEventListener("pause", this._onPlayStop.bind(this)), this._isSourceReady() ? this._onCanPlay() : (a.addEventListener("canplay", this._onCanPlay), a.addEventListener("canplaythrough", this._onCanPlay), a.addEventListener("error", this._onError, !0)), this._load = new Promise(function(n) {
        e.valid ? n(e) : (e._resolve = n, a.load());
      }), this._load;
    }, t.prototype._onError = function(e) {
      this.source.removeEventListener("error", this._onError, !0), this.onError.emit(e);
    }, t.prototype._isSourcePlaying = function() {
      var e = this.source;
      return !e.paused && !e.ended && this._isSourceReady();
    }, t.prototype._isSourceReady = function() {
      var e = this.source;
      return e.readyState > 2;
    }, t.prototype._onPlayStart = function() {
      this.valid || this._onCanPlay(), this.autoUpdate && !this._isConnectedToTicker && (We.shared.add(this.update, this), this._isConnectedToTicker = !0);
    }, t.prototype._onPlayStop = function() {
      this._isConnectedToTicker && (We.shared.remove(this.update, this), this._isConnectedToTicker = !1);
    }, t.prototype._onCanPlay = function() {
      var e = this.source;
      e.removeEventListener("canplay", this._onCanPlay), e.removeEventListener("canplaythrough", this._onCanPlay);
      var a = this.valid;
      this.resize(e.videoWidth, e.videoHeight), !a && this._resolve && (this._resolve(this), this._resolve = null), this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && e.play();
    }, t.prototype.dispose = function() {
      this._isConnectedToTicker && (We.shared.remove(this.update, this), this._isConnectedToTicker = !1);
      var e = this.source;
      e && (e.removeEventListener("error", this._onError, !0), e.pause(), e.src = "", e.load()), i.prototype.dispose.call(this);
    }, Object.defineProperty(t.prototype, "autoUpdate", {
      /** Should the base texture automatically update itself, set to true by default. */
      get: function() {
        return this._autoUpdate;
      },
      set: function(e) {
        e !== this._autoUpdate && (this._autoUpdate = e, !this._autoUpdate && this._isConnectedToTicker ? (We.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._isSourcePlaying() && (We.shared.add(this.update, this), this._isConnectedToTicker = !0));
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "updateFPS", {
      /**
       * How many times a second to update the texture from the video. Leave at 0 to update at every render.
       * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.
       */
      get: function() {
        return this._updateFPS;
      },
      set: function(e) {
        e !== this._updateFPS && (this._updateFPS = e);
      },
      enumerable: !1,
      configurable: !0
    }), t.test = function(e, a) {
      return globalThis.HTMLVideoElement && e instanceof HTMLVideoElement || t.TYPES.indexOf(a) > -1;
    }, t.TYPES = ["mp4", "m4v", "webm", "ogg", "ogv", "h264", "avi", "mov"], t.MIME_TYPES = {
      ogv: "video/ogg",
      mov: "video/quicktime",
      m4v: "video/mp4"
    }, t;
  }(ei)
), Hu = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e) {
      return i.call(this, e) || this;
    }
    return t.test = function(e) {
      return !!globalThis.createImageBitmap && typeof ImageBitmap != "undefined" && e instanceof ImageBitmap;
    }, t;
  }(ei)
);
On.push(Zs, Hu, Lu, Fu, Nu, ha, Du, Ru);
var Gc = {
  __proto__: null,
  Resource: oa,
  BaseImageResource: ei,
  INSTALLED: On,
  autoDetectResource: Js,
  AbstractMultiResource: qs,
  ArrayResource: Ru,
  BufferResource: ha,
  CanvasResource: Lu,
  CubeResource: Du,
  ImageResource: Zs,
  SVGResource: Nu,
  VideoResource: Fu,
  ImageBitmapResource: Hu
}, ly = (
  /** @class */
  function(i) {
    pe(t, i);
    function t() {
      return i !== null && i.apply(this, arguments) || this;
    }
    return t.prototype.upload = function(e, a, n) {
      var s = e.gl;
      s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a.alphaMode === Er.UNPACK);
      var o = a.realWidth, u = a.realHeight;
      return n.width === o && n.height === u ? s.texSubImage2D(a.target, 0, 0, 0, o, u, a.format, n.type, this.data) : (n.width = o, n.height = u, s.texImage2D(a.target, 0, n.internalFormat, o, u, 0, a.format, n.type, this.data)), !0;
    }, t;
  }(ha)
), Fs = (
  /** @class */
  function() {
    function i(t, e) {
      this.width = Math.round(t || 100), this.height = Math.round(e || 100), this.stencil = !1, this.depth = !1, this.dirtyId = 0, this.dirtyFormat = 0, this.dirtySize = 0, this.depthTexture = null, this.colorTextures = [], this.glFramebuffers = {}, this.disposeRunner = new Ke("disposeFramebuffer"), this.multisample = _e.NONE;
    }
    return Object.defineProperty(i.prototype, "colorTexture", {
      /**
       * Reference to the colorTexture.
       * @readonly
       */
      get: function() {
        return this.colorTextures[0];
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.addColorTexture = function(t, e) {
      return t === void 0 && (t = 0), this.colorTextures[t] = e || new Qt(null, {
        scaleMode: Dr.NEAREST,
        resolution: 1,
        mipmap: Sr.OFF,
        width: this.width,
        height: this.height
      }), this.dirtyId++, this.dirtyFormat++, this;
    }, i.prototype.addDepthTexture = function(t) {
      return this.depthTexture = t || new Qt(new ly(null, { width: this.width, height: this.height }), {
        scaleMode: Dr.NEAREST,
        resolution: 1,
        width: this.width,
        height: this.height,
        mipmap: Sr.OFF,
        format: ot.DEPTH_COMPONENT,
        type: wt.UNSIGNED_SHORT
      }), this.dirtyId++, this.dirtyFormat++, this;
    }, i.prototype.enableDepth = function() {
      return this.depth = !0, this.dirtyId++, this.dirtyFormat++, this;
    }, i.prototype.enableStencil = function() {
      return this.stencil = !0, this.dirtyId++, this.dirtyFormat++, this;
    }, i.prototype.resize = function(t, e) {
      if (t = Math.round(t), e = Math.round(e), !(t === this.width && e === this.height)) {
        this.width = t, this.height = e, this.dirtyId++, this.dirtySize++;
        for (var a = 0; a < this.colorTextures.length; a++) {
          var n = this.colorTextures[a], s = n.resolution;
          n.setSize(t / s, e / s);
        }
        if (this.depthTexture) {
          var s = this.depthTexture.resolution;
          this.depthTexture.setSize(t / s, e / s);
        }
      }
    }, i.prototype.dispose = function() {
      this.disposeRunner.emit(this, !1);
    }, i.prototype.destroyDepthTexture = function() {
      this.depthTexture && (this.depthTexture.destroy(), this.depthTexture = null, ++this.dirtyId, ++this.dirtyFormat);
    }, i;
  }()
), Bu = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e) {
      e === void 0 && (e = {});
      var a = this;
      if (typeof e == "number") {
        var n = arguments[0], s = arguments[1], o = arguments[2], u = arguments[3];
        e = { width: n, height: s, scaleMode: o, resolution: u };
      }
      return e.width = e.width || 100, e.height = e.height || 100, e.multisample = e.multisample !== void 0 ? e.multisample : _e.NONE, a = i.call(this, null, e) || this, a.mipmap = Sr.OFF, a.valid = !0, a.clearColor = [0, 0, 0, 0], a.framebuffer = new Fs(a.realWidth, a.realHeight).addColorTexture(0, a), a.framebuffer.multisample = e.multisample, a.maskStack = [], a.filterStack = [{}], a;
    }
    return t.prototype.resize = function(e, a) {
      this.framebuffer.resize(e * this.resolution, a * this.resolution), this.setRealSize(this.framebuffer.width, this.framebuffer.height);
    }, t.prototype.dispose = function() {
      this.framebuffer.dispose(), i.prototype.dispose.call(this);
    }, t.prototype.destroy = function() {
      i.prototype.destroy.call(this), this.framebuffer.destroyDepthTexture(), this.framebuffer = null;
    }, t;
  }(Qt)
), ku = (
  /** @class */
  function() {
    function i() {
      this.x0 = 0, this.y0 = 0, this.x1 = 1, this.y1 = 0, this.x2 = 1, this.y2 = 1, this.x3 = 0, this.y3 = 1, this.uvsFloat32 = new Float32Array(8);
    }
    return i.prototype.set = function(t, e, a) {
      var n = e.width, s = e.height;
      if (a) {
        var o = t.width / 2 / n, u = t.height / 2 / s, m = t.x / n + o, g = t.y / s + u;
        a = ye.add(a, ye.NW), this.x0 = m + o * ye.uX(a), this.y0 = g + u * ye.uY(a), a = ye.add(a, 2), this.x1 = m + o * ye.uX(a), this.y1 = g + u * ye.uY(a), a = ye.add(a, 2), this.x2 = m + o * ye.uX(a), this.y2 = g + u * ye.uY(a), a = ye.add(a, 2), this.x3 = m + o * ye.uX(a), this.y3 = g + u * ye.uY(a);
      } else
        this.x0 = t.x / n, this.y0 = t.y / s, this.x1 = (t.x + t.width) / n, this.y1 = t.y / s, this.x2 = (t.x + t.width) / n, this.y2 = (t.y + t.height) / s, this.x3 = t.x / n, this.y3 = (t.y + t.height) / s;
      this.uvsFloat32[0] = this.x0, this.uvsFloat32[1] = this.y0, this.uvsFloat32[2] = this.x1, this.uvsFloat32[3] = this.y1, this.uvsFloat32[4] = this.x2, this.uvsFloat32[5] = this.y2, this.uvsFloat32[6] = this.x3, this.uvsFloat32[7] = this.y3;
    }, i.prototype.toString = function() {
      return "[@pixi/core:TextureUvs " + ("x0=" + this.x0 + " y0=" + this.y0 + " ") + ("x1=" + this.x1 + " y1=" + this.y1 + " x2=" + this.x2 + " ") + ("y2=" + this.y2 + " x3=" + this.x3 + " y3=" + this.y3) + "]";
    }, i;
  }()
), r0 = new ku();
function is(i) {
  i.destroy = function() {
  }, i.on = function() {
  }, i.once = function() {
  }, i.emit = function() {
  };
}
var Ot = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a, n, s, o, u) {
      var m = i.call(this) || this;
      if (m.noFrame = !1, a || (m.noFrame = !0, a = new zt(0, 0, 1, 1)), e instanceof t && (e = e.baseTexture), m.baseTexture = e, m._frame = a, m.trim = s, m.valid = !1, m._uvs = r0, m.uvMatrix = null, m.orig = n || a, m._rotate = Number(o || 0), o === !0)
        m._rotate = 2;
      else if (m._rotate % 2 !== 0)
        throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");
      return m.defaultAnchor = u ? new le(u.x, u.y) : new le(0, 0), m._updateID = 0, m.textureCacheIds = [], e.valid ? m.noFrame ? e.valid && m.onBaseTextureUpdated(e) : m.frame = a : e.once("loaded", m.onBaseTextureUpdated, m), m.noFrame && e.on("update", m.onBaseTextureUpdated, m), m;
    }
    return t.prototype.update = function() {
      this.baseTexture.resource && this.baseTexture.resource.update();
    }, t.prototype.onBaseTextureUpdated = function(e) {
      if (this.noFrame) {
        if (!this.baseTexture.valid)
          return;
        this._frame.width = e.width, this._frame.height = e.height, this.valid = !0, this.updateUvs();
      } else
        this.frame = this._frame;
      this.emit("update", this);
    }, t.prototype.destroy = function(e) {
      if (this.baseTexture) {
        if (e) {
          var a = this.baseTexture.resource;
          a && a.url && fr[a.url] && t.removeFromCache(a.url), this.baseTexture.destroy();
        }
        this.baseTexture.off("loaded", this.onBaseTextureUpdated, this), this.baseTexture.off("update", this.onBaseTextureUpdated, this), this.baseTexture = null;
      }
      this._frame = null, this._uvs = null, this.trim = null, this.orig = null, this.valid = !1, t.removeFromCache(this), this.textureCacheIds = null;
    }, t.prototype.clone = function() {
      var e = this._frame.clone(), a = this._frame === this.orig ? e : this.orig.clone(), n = new t(this.baseTexture, !this.noFrame && e, a, this.trim && this.trim.clone(), this.rotate, this.defaultAnchor);
      return this.noFrame && (n._frame = e), n;
    }, t.prototype.updateUvs = function() {
      this._uvs === r0 && (this._uvs = new ku()), this._uvs.set(this._frame, this.baseTexture, this.rotate), this._updateID++;
    }, t.from = function(e, a, n) {
      a === void 0 && (a = {}), n === void 0 && (n = mt.STRICT_TEXTURE_CACHE);
      var s = typeof e == "string", o = null;
      if (s)
        o = e;
      else if (e instanceof Qt) {
        if (!e.cacheId) {
          var u = a && a.pixiIdPrefix || "pixiid";
          e.cacheId = u + "-" + Ci(), Qt.addToCache(e, e.cacheId);
        }
        o = e.cacheId;
      } else {
        if (!e._pixiId) {
          var u = a && a.pixiIdPrefix || "pixiid";
          e._pixiId = u + "_" + Ci();
        }
        o = e._pixiId;
      }
      var m = fr[o];
      if (s && n && !m)
        throw new Error('The cacheId "' + o + '" does not exist in TextureCache.');
      return !m && !(e instanceof Qt) ? (a.resolution || (a.resolution = Mn(e)), m = new t(new Qt(e, a)), m.baseTexture.cacheId = o, Qt.addToCache(m.baseTexture, o), t.addToCache(m, o)) : !m && e instanceof Qt && (m = new t(e), t.addToCache(m, o)), m;
    }, t.fromURL = function(e, a) {
      var n = Object.assign({ autoLoad: !1 }, a == null ? void 0 : a.resourceOptions), s = t.from(e, Object.assign({ resourceOptions: n }, a), !1), o = s.baseTexture.resource;
      return s.baseTexture.valid ? Promise.resolve(s) : o.load().then(function() {
        return Promise.resolve(s);
      });
    }, t.fromBuffer = function(e, a, n, s) {
      return new t(Qt.fromBuffer(e, a, n, s));
    }, t.fromLoader = function(e, a, n, s) {
      var o = new Qt(e, Object.assign({
        scaleMode: mt.SCALE_MODE,
        resolution: Mn(a)
      }, s)), u = o.resource;
      u instanceof Zs && (u.url = a);
      var m = new t(o);
      return n || (n = a), Qt.addToCache(m.baseTexture, n), t.addToCache(m, n), n !== a && (Qt.addToCache(m.baseTexture, a), t.addToCache(m, a)), m.baseTexture.valid ? Promise.resolve(m) : new Promise(function(g) {
        m.baseTexture.once("loaded", function() {
          return g(m);
        });
      });
    }, t.addToCache = function(e, a) {
      a && (e.textureCacheIds.indexOf(a) === -1 && e.textureCacheIds.push(a), fr[a] && console.warn("Texture added to the cache with an id [" + a + "] that already had an entry"), fr[a] = e);
    }, t.removeFromCache = function(e) {
      if (typeof e == "string") {
        var a = fr[e];
        if (a) {
          var n = a.textureCacheIds.indexOf(e);
          return n > -1 && a.textureCacheIds.splice(n, 1), delete fr[e], a;
        }
      } else if (e && e.textureCacheIds) {
        for (var s = 0; s < e.textureCacheIds.length; ++s)
          fr[e.textureCacheIds[s]] === e && delete fr[e.textureCacheIds[s]];
        return e.textureCacheIds.length = 0, e;
      }
      return null;
    }, Object.defineProperty(t.prototype, "resolution", {
      /**
       * Returns resolution of baseTexture
       * @readonly
       */
      get: function() {
        return this.baseTexture.resolution;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "frame", {
      /**
       * The frame specifies the region of the base texture that this texture uses.
       * Please call `updateUvs()` after you change coordinates of `frame` manually.
       */
      get: function() {
        return this._frame;
      },
      set: function(e) {
        this._frame = e, this.noFrame = !1;
        var a = e.x, n = e.y, s = e.width, o = e.height, u = a + s > this.baseTexture.width, m = n + o > this.baseTexture.height;
        if (u || m) {
          var g = u && m ? "and" : "or", A = "X: " + a + " + " + s + " = " + (a + s) + " > " + this.baseTexture.width, x = "Y: " + n + " + " + o + " = " + (n + o) + " > " + this.baseTexture.height;
          throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + (A + " " + g + " " + x));
        }
        this.valid = s && o && this.baseTexture.valid, !this.trim && !this.rotate && (this.orig = e), this.valid && this.updateUvs();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "rotate", {
      /**
       * Indicates whether the texture is rotated inside the atlas
       * set to 2 to compensate for texture packer rotation
       * set to 6 to compensate for spine packer rotation
       * can be used to rotate or mirror sprites
       * See {@link PIXI.groupD8} for explanation
       */
      get: function() {
        return this._rotate;
      },
      set: function(e) {
        this._rotate = e, this.valid && this.updateUvs();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "width", {
      /** The width of the Texture in pixels. */
      get: function() {
        return this.orig.width;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      /** The height of the Texture in pixels. */
      get: function() {
        return this.orig.height;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.castToBaseTexture = function() {
      return this.baseTexture;
    }, Object.defineProperty(t, "EMPTY", {
      /** An empty texture, used often to not have to create multiple empty textures. Can not be destroyed. */
      get: function() {
        return t._EMPTY || (t._EMPTY = new t(new Qt()), is(t._EMPTY), is(t._EMPTY.baseTexture)), t._EMPTY;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "WHITE", {
      /** A white texture of 16x16 size, used for graphics and other things Can not be destroyed. */
      get: function() {
        if (!t._WHITE) {
          var e = mt.ADAPTER.createCanvas(16, 16), a = e.getContext("2d");
          e.width = 16, e.height = 16, a.fillStyle = "white", a.fillRect(0, 0, 16, 16), t._WHITE = new t(Qt.from(e)), is(t._WHITE), is(t._WHITE.baseTexture);
        }
        return t._WHITE;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(mi)
), Oi = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      var n = i.call(this, e, a) || this;
      return n.valid = !0, n.filterFrame = null, n.filterPoolKey = null, n.updateUvs(), n;
    }
    return Object.defineProperty(t.prototype, "framebuffer", {
      /**
       * Shortcut to `this.baseTexture.framebuffer`, saves baseTexture cast.
       * @readonly
       */
      get: function() {
        return this.baseTexture.framebuffer;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "multisample", {
      /**
       * Shortcut to `this.framebuffer.multisample`.
       * @default PIXI.MSAA_QUALITY.NONE
       */
      get: function() {
        return this.framebuffer.multisample;
      },
      set: function(e) {
        this.framebuffer.multisample = e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.resize = function(e, a, n) {
      n === void 0 && (n = !0);
      var s = this.baseTexture.resolution, o = Math.round(e * s) / s, u = Math.round(a * s) / s;
      this.valid = o > 0 && u > 0, this._frame.width = this.orig.width = o, this._frame.height = this.orig.height = u, n && this.baseTexture.resize(o, u), this.updateUvs();
    }, t.prototype.setResolution = function(e) {
      var a = this.baseTexture;
      a.resolution !== e && (a.setResolution(e), this.resize(a.width, a.height, !1));
    }, t.create = function(e) {
      for (var a = arguments, n = [], s = 1; s < arguments.length; s++)
        n[s - 1] = a[s];
      return typeof e == "number" && (sr("6.0.0", "Arguments (width, height, scaleMode, resolution) have been deprecated."), e = {
        width: e,
        height: n[0],
        scaleMode: n[1],
        resolution: n[2]
      }), new t(new Bu(e));
    }, t;
  }(Ot)
), Xc = (
  /** @class */
  function() {
    function i(t) {
      this.texturePool = {}, this.textureOptions = t || {}, this.enableFullScreen = !1, this._pixelsWidth = 0, this._pixelsHeight = 0;
    }
    return i.prototype.createTexture = function(t, e, a) {
      a === void 0 && (a = _e.NONE);
      var n = new Bu(Object.assign({
        width: t,
        height: e,
        resolution: 1,
        multisample: a
      }, this.textureOptions));
      return new Oi(n);
    }, i.prototype.getOptimalTexture = function(t, e, a, n) {
      a === void 0 && (a = 1), n === void 0 && (n = _e.NONE);
      var s;
      t = Math.ceil(t * a - 1e-6), e = Math.ceil(e * a - 1e-6), !this.enableFullScreen || t !== this._pixelsWidth || e !== this._pixelsHeight ? (t = Pn(t), e = Pn(e), s = ((t & 65535) << 16 | e & 65535) >>> 0, n > 1 && (s += n * 4294967296)) : s = n > 1 ? -n : -1, this.texturePool[s] || (this.texturePool[s] = []);
      var o = this.texturePool[s].pop();
      return o || (o = this.createTexture(t, e, n)), o.filterPoolKey = s, o.setResolution(a), o;
    }, i.prototype.getFilterTexture = function(t, e, a) {
      var n = this.getOptimalTexture(t.width, t.height, e || t.resolution, a || _e.NONE);
      return n.filterFrame = t.filterFrame, n;
    }, i.prototype.returnTexture = function(t) {
      var e = t.filterPoolKey;
      t.filterFrame = null, this.texturePool[e].push(t);
    }, i.prototype.returnFilterTexture = function(t) {
      this.returnTexture(t);
    }, i.prototype.clear = function(t) {
      if (t = t !== !1, t)
        for (var e in this.texturePool) {
          var a = this.texturePool[e];
          if (a)
            for (var n = 0; n < a.length; n++)
              a[n].destroy(!0);
        }
      this.texturePool = {};
    }, i.prototype.setScreenSize = function(t) {
      if (!(t.width === this._pixelsWidth && t.height === this._pixelsHeight)) {
        this.enableFullScreen = t.width > 0 && t.height > 0;
        for (var e in this.texturePool)
          if (Number(e) < 0) {
            var a = this.texturePool[e];
            if (a)
              for (var n = 0; n < a.length; n++)
                a[n].destroy(!0);
            this.texturePool[e] = [];
          }
        this._pixelsWidth = t.width, this._pixelsHeight = t.height;
      }
    }, i.SCREEN_KEY = -1, i;
  }()
), Lh = (
  /** @class */
  function() {
    function i(t, e, a, n, s, o, u) {
      e === void 0 && (e = 0), a === void 0 && (a = !1), n === void 0 && (n = wt.FLOAT), this.buffer = t, this.size = e, this.normalized = a, this.type = n, this.stride = s, this.start = o, this.instance = u;
    }
    return i.prototype.destroy = function() {
      this.buffer = null;
    }, i.from = function(t, e, a, n, s) {
      return new i(t, e, a, n, s);
    }, i;
  }()
), fy = 0, Fe = (
  /** @class */
  function() {
    function i(t, e, a) {
      e === void 0 && (e = !0), a === void 0 && (a = !1), this.data = t || new Float32Array(1), this._glBuffers = {}, this._updateID = 0, this.index = a, this.static = e, this.id = fy++, this.disposeRunner = new Ke("disposeBuffer");
    }
    return i.prototype.update = function(t) {
      t instanceof Array && (t = new Float32Array(t)), this.data = t || this.data, this._updateID++;
    }, i.prototype.dispose = function() {
      this.disposeRunner.emit(this, !1);
    }, i.prototype.destroy = function() {
      this.dispose(), this.data = null;
    }, Object.defineProperty(i.prototype, "index", {
      get: function() {
        return this.type === Fr.ELEMENT_ARRAY_BUFFER;
      },
      /**
       * Flags whether this is an index buffer.
       *
       * Index buffers are of type `ELEMENT_ARRAY_BUFFER`. Note that setting this property to false will make
       * the buffer of type `ARRAY_BUFFER`.
       *
       * For backwards compatibility.
       */
      set: function(t) {
        this.type = t ? Fr.ELEMENT_ARRAY_BUFFER : Fr.ARRAY_BUFFER;
      },
      enumerable: !1,
      configurable: !0
    }), i.from = function(t) {
      return t instanceof Array && (t = new Float32Array(t)), new i(t);
    }, i;
  }()
), cy = {
  Float32Array,
  Uint32Array,
  Int32Array,
  Uint8Array
};
function dy(i, t) {
  for (var e = 0, a = 0, n = {}, s = 0; s < i.length; s++)
    a += t[s], e += i[s].length;
  for (var o = new ArrayBuffer(e * 4), u = null, m = 0, s = 0; s < i.length; s++) {
    var g = t[s], A = i[s], x = js(A);
    n[x] || (n[x] = new cy[x](o)), u = n[x];
    for (var w = 0; w < A.length; w++) {
      var C = (w / g | 0) * a + m, O = w % g;
      u[C + O] = A[w];
    }
    m += g;
  }
  return new Float32Array(o);
}
var i0 = { 5126: 4, 5123: 2, 5121: 1 }, py = 0, _y = {
  Float32Array,
  Uint32Array,
  Int32Array,
  Uint8Array,
  Uint16Array
}, Ga = (
  /** @class */
  function() {
    function i(t, e) {
      t === void 0 && (t = []), e === void 0 && (e = {}), this.buffers = t, this.indexBuffer = null, this.attributes = e, this.glVertexArrayObjects = {}, this.id = py++, this.instanced = !1, this.instanceCount = 1, this.disposeRunner = new Ke("disposeGeometry"), this.refCount = 0;
    }
    return i.prototype.addAttribute = function(t, e, a, n, s, o, u, m) {
      if (a === void 0 && (a = 0), n === void 0 && (n = !1), m === void 0 && (m = !1), !e)
        throw new Error("You must pass a buffer when creating an attribute");
      e instanceof Fe || (e instanceof Array && (e = new Float32Array(e)), e = new Fe(e));
      var g = t.split("|");
      if (g.length > 1) {
        for (var A = 0; A < g.length; A++)
          this.addAttribute(g[A], e, a, n, s);
        return this;
      }
      var x = this.buffers.indexOf(e);
      return x === -1 && (this.buffers.push(e), x = this.buffers.length - 1), this.attributes[t] = new Lh(x, a, n, s, o, u, m), this.instanced = this.instanced || m, this;
    }, i.prototype.getAttribute = function(t) {
      return this.attributes[t];
    }, i.prototype.getBuffer = function(t) {
      return this.buffers[this.getAttribute(t).buffer];
    }, i.prototype.addIndex = function(t) {
      return t instanceof Fe || (t instanceof Array && (t = new Uint16Array(t)), t = new Fe(t)), t.type = Fr.ELEMENT_ARRAY_BUFFER, this.indexBuffer = t, this.buffers.indexOf(t) === -1 && this.buffers.push(t), this;
    }, i.prototype.getIndex = function() {
      return this.indexBuffer;
    }, i.prototype.interleave = function() {
      if (this.buffers.length === 1 || this.buffers.length === 2 && this.indexBuffer)
        return this;
      var t = [], e = [], a = new Fe(), n;
      for (n in this.attributes) {
        var s = this.attributes[n], o = this.buffers[s.buffer];
        t.push(o.data), e.push(s.size * i0[s.type] / 4), s.buffer = 0;
      }
      for (a.data = dy(t, e), n = 0; n < this.buffers.length; n++)
        this.buffers[n] !== this.indexBuffer && this.buffers[n].destroy();
      return this.buffers = [a], this.indexBuffer && this.buffers.push(this.indexBuffer), this;
    }, i.prototype.getSize = function() {
      for (var t in this.attributes) {
        var e = this.attributes[t], a = this.buffers[e.buffer];
        return a.data.length / (e.stride / 4 || e.size);
      }
      return 0;
    }, i.prototype.dispose = function() {
      this.disposeRunner.emit(this, !1);
    }, i.prototype.destroy = function() {
      this.dispose(), this.buffers = null, this.indexBuffer = null, this.attributes = null;
    }, i.prototype.clone = function() {
      for (var t = new i(), e = 0; e < this.buffers.length; e++)
        t.buffers[e] = new Fe(this.buffers[e].data.slice(0));
      for (var e in this.attributes) {
        var a = this.attributes[e];
        t.attributes[e] = new Lh(a.buffer, a.size, a.normalized, a.type, a.stride, a.start, a.instance);
      }
      return this.indexBuffer && (t.indexBuffer = t.buffers[this.buffers.indexOf(this.indexBuffer)], t.indexBuffer.type = Fr.ELEMENT_ARRAY_BUFFER), t;
    }, i.merge = function(t) {
      for (var e = new i(), a = [], n = [], s = [], o, u = 0; u < t.length; u++) {
        o = t[u];
        for (var m = 0; m < o.buffers.length; m++)
          n[m] = n[m] || 0, n[m] += o.buffers[m].data.length, s[m] = 0;
      }
      for (var u = 0; u < o.buffers.length; u++)
        a[u] = new _y[js(o.buffers[u].data)](n[u]), e.buffers[u] = new Fe(a[u]);
      for (var u = 0; u < t.length; u++) {
        o = t[u];
        for (var m = 0; m < o.buffers.length; m++)
          a[m].set(o.buffers[m].data, s[m]), s[m] += o.buffers[m].data.length;
      }
      if (e.attributes = o.attributes, o.indexBuffer) {
        e.indexBuffer = e.buffers[o.buffers.indexOf(o.indexBuffer)], e.indexBuffer.type = Fr.ELEMENT_ARRAY_BUFFER;
        for (var g = 0, A = 0, x = 0, w = 0, u = 0; u < o.buffers.length; u++)
          if (o.buffers[u] !== o.indexBuffer) {
            w = u;
            break;
          }
        for (var u in o.attributes) {
          var C = o.attributes[u];
          (C.buffer | 0) === w && (A += C.size * i0[C.type] / 4);
        }
        for (var u = 0; u < t.length; u++) {
          for (var O = t[u].indexBuffer.data, m = 0; m < O.length; m++)
            e.indexBuffer.data[m + x] += g;
          g += t[u].buffers[w].data.length / A, x += O.length;
        }
      }
      return e;
    }, i;
  }()
), Vc = (
  /** @class */
  function(i) {
    pe(t, i);
    function t() {
      var e = i.call(this) || this;
      return e.addAttribute("aVertexPosition", new Float32Array([
        0,
        0,
        1,
        0,
        1,
        1,
        0,
        1
      ])).addIndex([0, 1, 3, 2]), e;
    }
    return t;
  }(Ga)
), Uu = (
  /** @class */
  function(i) {
    pe(t, i);
    function t() {
      var e = i.call(this) || this;
      return e.vertices = new Float32Array([
        -1,
        -1,
        1,
        -1,
        1,
        1,
        -1,
        1
      ]), e.uvs = new Float32Array([
        0,
        0,
        1,
        0,
        1,
        1,
        0,
        1
      ]), e.vertexBuffer = new Fe(e.vertices), e.uvBuffer = new Fe(e.uvs), e.addAttribute("aVertexPosition", e.vertexBuffer).addAttribute("aTextureCoord", e.uvBuffer).addIndex([0, 1, 2, 0, 2, 3]), e;
    }
    return t.prototype.map = function(e, a) {
      var n = 0, s = 0;
      return this.uvs[0] = n, this.uvs[1] = s, this.uvs[2] = n + a.width / e.width, this.uvs[3] = s, this.uvs[4] = n + a.width / e.width, this.uvs[5] = s + a.height / e.height, this.uvs[6] = n, this.uvs[7] = s + a.height / e.height, n = a.x, s = a.y, this.vertices[0] = n, this.vertices[1] = s, this.vertices[2] = n + a.width, this.vertices[3] = s, this.vertices[4] = n + a.width, this.vertices[5] = s + a.height, this.vertices[6] = n, this.vertices[7] = s + a.height, this.invalidate(), this;
    }, t.prototype.invalidate = function() {
      return this.vertexBuffer._updateID++, this.uvBuffer._updateID++, this;
    }, t;
  }(Ga)
), vy = 0, Pi = (
  /** @class */
  function() {
    function i(t, e, a) {
      this.group = !0, this.syncUniforms = {}, this.dirtyId = 0, this.id = vy++, this.static = !!e, this.ubo = !!a, t instanceof Fe ? (this.buffer = t, this.buffer.type = Fr.UNIFORM_BUFFER, this.autoManage = !1, this.ubo = !0) : (this.uniforms = t, this.ubo && (this.buffer = new Fe(new Float32Array(1)), this.buffer.type = Fr.UNIFORM_BUFFER, this.autoManage = !0));
    }
    return i.prototype.update = function() {
      this.dirtyId++, !this.autoManage && this.buffer && this.buffer.update();
    }, i.prototype.add = function(t, e, a) {
      if (!this.ubo)
        this.uniforms[t] = new i(e, a);
      else
        throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");
    }, i.from = function(t, e, a) {
      return new i(t, e, a);
    }, i.uboFrom = function(t, e) {
      return new i(t, e != null ? e : !0, !0);
    }, i;
  }()
), Yc = (
  /** @class */
  function() {
    function i() {
      this.renderTexture = null, this.target = null, this.legacy = !1, this.resolution = 1, this.multisample = _e.NONE, this.sourceFrame = new zt(), this.destinationFrame = new zt(), this.bindingSourceFrame = new zt(), this.bindingDestinationFrame = new zt(), this.filters = [], this.transform = null;
    }
    return i.prototype.clear = function() {
      this.target = null, this.filters = null, this.renderTexture = null;
    }, i;
  }()
), as = [new le(), new le(), new le(), new le()], No = new be(), Gu = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.defaultFilterStack = [{}], this.texturePool = new Xc(), this.texturePool.setScreenSize(t.view), this.statePool = [], this.quad = new Vc(), this.quadUv = new Uu(), this.tempRect = new zt(), this.activeState = {}, this.globalUniforms = new Pi({
        outputFrame: new zt(),
        inputSize: new Float32Array(4),
        inputPixel: new Float32Array(4),
        inputClamp: new Float32Array(4),
        resolution: 1,
        // legacy variables
        filterArea: new Float32Array(4),
        filterClamp: new Float32Array(4)
      }, !0), this.forceClear = !1, this.useMaxPadding = !1;
    }
    return i.prototype.push = function(t, e) {
      for (var a, n, s = this.renderer, o = this.defaultFilterStack, u = this.statePool.pop() || new Yc(), m = this.renderer.renderTexture, g = e[0].resolution, A = e[0].multisample, x = e[0].padding, w = e[0].autoFit, C = (a = e[0].legacy) !== null && a !== void 0 ? a : !0, O = 1; O < e.length; O++) {
        var L = e[O];
        g = Math.min(g, L.resolution), A = Math.min(A, L.multisample), x = this.useMaxPadding ? Math.max(x, L.padding) : x + L.padding, w = w && L.autoFit, C = C || ((n = L.legacy) !== null && n !== void 0 ? n : !0);
      }
      o.length === 1 && (this.defaultFilterStack[0].renderTexture = m.current), o.push(u), u.resolution = g, u.multisample = A, u.legacy = C, u.target = t, u.sourceFrame.copyFrom(t.filterArea || t.getBounds(!0)), u.sourceFrame.pad(x);
      var D = this.tempRect.copyFrom(m.sourceFrame);
      s.projection.transform && this.transformAABB(No.copyFrom(s.projection.transform).invert(), D), w ? (u.sourceFrame.fit(D), (u.sourceFrame.width <= 0 || u.sourceFrame.height <= 0) && (u.sourceFrame.width = 0, u.sourceFrame.height = 0)) : u.sourceFrame.intersects(D) || (u.sourceFrame.width = 0, u.sourceFrame.height = 0), this.roundFrame(u.sourceFrame, m.current ? m.current.resolution : s.resolution, m.sourceFrame, m.destinationFrame, s.projection.transform), u.renderTexture = this.getOptimalFilterTexture(u.sourceFrame.width, u.sourceFrame.height, g, A), u.filters = e, u.destinationFrame.width = u.renderTexture.width, u.destinationFrame.height = u.renderTexture.height;
      var H = this.tempRect;
      H.x = 0, H.y = 0, H.width = u.sourceFrame.width, H.height = u.sourceFrame.height, u.renderTexture.filterFrame = u.sourceFrame, u.bindingSourceFrame.copyFrom(m.sourceFrame), u.bindingDestinationFrame.copyFrom(m.destinationFrame), u.transform = s.projection.transform, s.projection.transform = null, m.bind(u.renderTexture, u.sourceFrame, H), s.framebuffer.clear(0, 0, 0, 0);
    }, i.prototype.pop = function() {
      var t = this.defaultFilterStack, e = t.pop(), a = e.filters;
      this.activeState = e;
      var n = this.globalUniforms.uniforms;
      n.outputFrame = e.sourceFrame, n.resolution = e.resolution;
      var s = n.inputSize, o = n.inputPixel, u = n.inputClamp;
      if (s[0] = e.destinationFrame.width, s[1] = e.destinationFrame.height, s[2] = 1 / s[0], s[3] = 1 / s[1], o[0] = Math.round(s[0] * e.resolution), o[1] = Math.round(s[1] * e.resolution), o[2] = 1 / o[0], o[3] = 1 / o[1], u[0] = 0.5 * o[2], u[1] = 0.5 * o[3], u[2] = e.sourceFrame.width * s[2] - 0.5 * o[2], u[3] = e.sourceFrame.height * s[3] - 0.5 * o[3], e.legacy) {
        var m = n.filterArea;
        m[0] = e.destinationFrame.width, m[1] = e.destinationFrame.height, m[2] = e.sourceFrame.x, m[3] = e.sourceFrame.y, n.filterClamp = n.inputClamp;
      }
      this.globalUniforms.update();
      var g = t[t.length - 1];
      if (this.renderer.framebuffer.blit(), a.length === 1)
        a[0].apply(this, e.renderTexture, g.renderTexture, yr.BLEND, e), this.returnFilterTexture(e.renderTexture);
      else {
        var A = e.renderTexture, x = this.getOptimalFilterTexture(A.width, A.height, e.resolution);
        x.filterFrame = A.filterFrame;
        var w = 0;
        for (w = 0; w < a.length - 1; ++w) {
          w === 1 && e.multisample > 1 && (x = this.getOptimalFilterTexture(A.width, A.height, e.resolution), x.filterFrame = A.filterFrame), a[w].apply(this, A, x, yr.CLEAR, e);
          var C = A;
          A = x, x = C;
        }
        a[w].apply(this, A, g.renderTexture, yr.BLEND, e), w > 1 && e.multisample > 1 && this.returnFilterTexture(e.renderTexture), this.returnFilterTexture(A), this.returnFilterTexture(x);
      }
      e.clear(), this.statePool.push(e);
    }, i.prototype.bindAndClear = function(t, e) {
      e === void 0 && (e = yr.CLEAR);
      var a = this.renderer, n = a.renderTexture, s = a.state;
      if (t === this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? this.renderer.projection.transform = this.activeState.transform : this.renderer.projection.transform = null, t && t.filterFrame) {
        var o = this.tempRect;
        o.x = 0, o.y = 0, o.width = t.filterFrame.width, o.height = t.filterFrame.height, n.bind(t, t.filterFrame, o);
      } else
        t !== this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? n.bind(t) : this.renderer.renderTexture.bind(t, this.activeState.bindingSourceFrame, this.activeState.bindingDestinationFrame);
      var u = s.stateId & 1 || this.forceClear;
      (e === yr.CLEAR || e === yr.BLIT && u) && this.renderer.framebuffer.clear(0, 0, 0, 0);
    }, i.prototype.applyFilter = function(t, e, a, n) {
      var s = this.renderer;
      s.state.set(t.state), this.bindAndClear(a, n), t.uniforms.uSampler = e, t.uniforms.filterGlobals = this.globalUniforms, s.shader.bind(t), t.legacy = !!t.program.attributeData.aTextureCoord, t.legacy ? (this.quadUv.map(e._frame, e.filterFrame), s.geometry.bind(this.quadUv), s.geometry.draw(xr.TRIANGLES)) : (s.geometry.bind(this.quad), s.geometry.draw(xr.TRIANGLE_STRIP));
    }, i.prototype.calculateSpriteMatrix = function(t, e) {
      var a = this.activeState, n = a.sourceFrame, s = a.destinationFrame, o = e._texture.orig, u = t.set(s.width, 0, 0, s.height, n.x, n.y), m = e.worldTransform.copyTo(be.TEMP_MATRIX);
      return m.invert(), u.prepend(m), u.scale(1 / o.width, 1 / o.height), u.translate(e.anchor.x, e.anchor.y), u;
    }, i.prototype.destroy = function() {
      this.renderer = null, this.texturePool.clear(!1);
    }, i.prototype.getOptimalFilterTexture = function(t, e, a, n) {
      return a === void 0 && (a = 1), n === void 0 && (n = _e.NONE), this.texturePool.getOptimalTexture(t, e, a, n);
    }, i.prototype.getFilterTexture = function(t, e, a) {
      if (typeof t == "number") {
        var n = t;
        t = e, e = n;
      }
      t = t || this.activeState.renderTexture;
      var s = this.texturePool.getOptimalTexture(t.width, t.height, e || t.resolution, a || _e.NONE);
      return s.filterFrame = t.filterFrame, s;
    }, i.prototype.returnFilterTexture = function(t) {
      this.texturePool.returnTexture(t);
    }, i.prototype.emptyPool = function() {
      this.texturePool.clear(!0);
    }, i.prototype.resize = function() {
      this.texturePool.setScreenSize(this.renderer.view);
    }, i.prototype.transformAABB = function(t, e) {
      var a = as[0], n = as[1], s = as[2], o = as[3];
      a.set(e.left, e.top), n.set(e.left, e.bottom), s.set(e.right, e.top), o.set(e.right, e.bottom), t.apply(a, a), t.apply(n, n), t.apply(s, s), t.apply(o, o);
      var u = Math.min(a.x, n.x, s.x, o.x), m = Math.min(a.y, n.y, s.y, o.y), g = Math.max(a.x, n.x, s.x, o.x), A = Math.max(a.y, n.y, s.y, o.y);
      e.x = u, e.y = m, e.width = g - u, e.height = A - m;
    }, i.prototype.roundFrame = function(t, e, a, n, s) {
      if (!(t.width <= 0 || t.height <= 0 || a.width <= 0 || a.height <= 0)) {
        if (s) {
          var o = s.a, u = s.b, m = s.c, g = s.d;
          if ((Math.abs(u) > 1e-4 || Math.abs(m) > 1e-4) && (Math.abs(o) > 1e-4 || Math.abs(g) > 1e-4))
            return;
        }
        s = s ? No.copyFrom(s) : No.identity(), s.translate(-a.x, -a.y).scale(n.width / a.width, n.height / a.height).translate(n.x, n.y), this.transformAABB(s, t), t.ceil(e), this.transformAABB(s.invert(), t);
      }
    }, i;
  }()
), Gn = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t;
    }
    return i.prototype.flush = function() {
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i.prototype.start = function() {
    }, i.prototype.stop = function() {
      this.flush();
    }, i.prototype.render = function(t) {
    }, i;
  }()
), Xu = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.emptyRenderer = new Gn(t), this.currentRenderer = this.emptyRenderer;
    }
    return i.prototype.setObjectRenderer = function(t) {
      this.currentRenderer !== t && (this.currentRenderer.stop(), this.currentRenderer = t, this.currentRenderer.start());
    }, i.prototype.flush = function() {
      this.setObjectRenderer(this.emptyRenderer);
    }, i.prototype.reset = function() {
      this.setObjectRenderer(this.emptyRenderer);
    }, i.prototype.copyBoundTextures = function(t, e) {
      for (var a = this.renderer.texture.boundTextures, n = e - 1; n >= 0; --n)
        t[n] = a[n] || null, t[n] && (t[n]._batchLocation = n);
    }, i.prototype.boundArray = function(t, e, a, n) {
      for (var s = t.elements, o = t.ids, u = t.count, m = 0, g = 0; g < u; g++) {
        var A = s[g], x = A._batchLocation;
        if (x >= 0 && x < n && e[x] === A) {
          o[g] = x;
          continue;
        }
        for (; m < n; ) {
          var w = e[m];
          if (w && w._batchEnabled === a && w._batchLocation === m) {
            m++;
            continue;
          }
          o[g] = m, A._batchLocation = m, e[m] = A;
          break;
        }
      }
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i;
  }()
), a0 = 0, Vu = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.webGLVersion = 1, this.extensions = {}, this.supports = {
        uint32Indices: !1
      }, this.handleContextLost = this.handleContextLost.bind(this), this.handleContextRestored = this.handleContextRestored.bind(this), t.view.addEventListener("webglcontextlost", this.handleContextLost, !1), t.view.addEventListener("webglcontextrestored", this.handleContextRestored, !1);
    }
    return Object.defineProperty(i.prototype, "isLost", {
      /**
       * `true` if the context is lost
       * @readonly
       */
      get: function() {
        return !this.gl || this.gl.isContextLost();
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.contextChange = function(t) {
      this.gl = t, this.renderer.gl = t, this.renderer.CONTEXT_UID = a0++;
    }, i.prototype.initFromContext = function(t) {
      this.gl = t, this.validateContext(t), this.renderer.gl = t, this.renderer.CONTEXT_UID = a0++, this.renderer.runners.contextChange.emit(t);
    }, i.prototype.initFromOptions = function(t) {
      var e = this.createContext(this.renderer.view, t);
      this.initFromContext(e);
    }, i.prototype.createContext = function(t, e) {
      var a;
      if (mt.PREFER_ENV >= Zr.WEBGL2 && (a = t.getContext("webgl2", e)), a)
        this.webGLVersion = 2;
      else if (this.webGLVersion = 1, a = t.getContext("webgl", e) || t.getContext("experimental-webgl", e), !a)
        throw new Error("This browser does not support WebGL. Try using the canvas renderer");
      return this.gl = a, this.getExtensions(), this.gl;
    }, i.prototype.getExtensions = function() {
      var t = this.gl, e = {
        loseContext: t.getExtension("WEBGL_lose_context"),
        anisotropicFiltering: t.getExtension("EXT_texture_filter_anisotropic"),
        floatTextureLinear: t.getExtension("OES_texture_float_linear"),
        s3tc: t.getExtension("WEBGL_compressed_texture_s3tc"),
        s3tc_sRGB: t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
        etc: t.getExtension("WEBGL_compressed_texture_etc"),
        etc1: t.getExtension("WEBGL_compressed_texture_etc1"),
        pvrtc: t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
        atc: t.getExtension("WEBGL_compressed_texture_atc"),
        astc: t.getExtension("WEBGL_compressed_texture_astc")
      };
      this.webGLVersion === 1 ? Object.assign(this.extensions, e, {
        drawBuffers: t.getExtension("WEBGL_draw_buffers"),
        depthTexture: t.getExtension("WEBGL_depth_texture"),
        vertexArrayObject: t.getExtension("OES_vertex_array_object") || t.getExtension("MOZ_OES_vertex_array_object") || t.getExtension("WEBKIT_OES_vertex_array_object"),
        uint32ElementIndex: t.getExtension("OES_element_index_uint"),
        // Floats and half-floats
        floatTexture: t.getExtension("OES_texture_float"),
        floatTextureLinear: t.getExtension("OES_texture_float_linear"),
        textureHalfFloat: t.getExtension("OES_texture_half_float"),
        textureHalfFloatLinear: t.getExtension("OES_texture_half_float_linear")
      }) : this.webGLVersion === 2 && Object.assign(this.extensions, e, {
        // Floats and half-floats
        colorBufferFloat: t.getExtension("EXT_color_buffer_float")
      });
    }, i.prototype.handleContextLost = function(t) {
      var e = this;
      t.preventDefault(), setTimeout(function() {
        e.gl.isContextLost() && e.extensions.loseContext && e.extensions.loseContext.restoreContext();
      }, 0);
    }, i.prototype.handleContextRestored = function() {
      this.renderer.runners.contextChange.emit(this.gl);
    }, i.prototype.destroy = function() {
      var t = this.renderer.view;
      this.renderer = null, t.removeEventListener("webglcontextlost", this.handleContextLost), t.removeEventListener("webglcontextrestored", this.handleContextRestored), this.gl.useProgram(null), this.extensions.loseContext && this.extensions.loseContext.loseContext();
    }, i.prototype.postrender = function() {
      this.renderer.renderingToScreen && this.gl.flush();
    }, i.prototype.validateContext = function(t) {
      var e = t.getContextAttributes(), a = "WebGL2RenderingContext" in globalThis && t instanceof globalThis.WebGL2RenderingContext;
      a && (this.webGLVersion = 2), e && !e.stencil && console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");
      var n = a || !!t.getExtension("OES_element_index_uint");
      this.supports.uint32Indices = n, n || console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly");
    }, i;
  }()
), zc = (
  /** @class */
  /* @__PURE__ */ function() {
    function i(t) {
      this.framebuffer = t, this.stencil = null, this.dirtyId = -1, this.dirtyFormat = -1, this.dirtySize = -1, this.multisample = _e.NONE, this.msaaBuffer = null, this.blitFramebuffer = null, this.mipLevel = 0;
    }
    return i;
  }()
), my = new zt(), Yu = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.managedFramebuffers = [], this.unknownFramebuffer = new Fs(10, 10), this.msaaSamples = null;
    }
    return i.prototype.contextChange = function() {
      this.disposeAll(!0);
      var t = this.gl = this.renderer.gl;
      if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.current = this.unknownFramebuffer, this.viewport = new zt(), this.hasMRT = !0, this.writeDepthTexture = !0, this.renderer.context.webGLVersion === 1) {
        var e = this.renderer.context.extensions.drawBuffers, a = this.renderer.context.extensions.depthTexture;
        mt.PREFER_ENV === Zr.WEBGL_LEGACY && (e = null, a = null), e ? t.drawBuffers = function(n) {
          return e.drawBuffersWEBGL(n);
        } : (this.hasMRT = !1, t.drawBuffers = function() {
        }), a || (this.writeDepthTexture = !1);
      } else
        this.msaaSamples = t.getInternalformatParameter(t.RENDERBUFFER, t.RGBA8, t.SAMPLES);
    }, i.prototype.bind = function(t, e, a) {
      a === void 0 && (a = 0);
      var n = this.gl;
      if (t) {
        var s = t.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(t);
        this.current !== t && (this.current = t, n.bindFramebuffer(n.FRAMEBUFFER, s.framebuffer)), s.mipLevel !== a && (t.dirtyId++, t.dirtyFormat++, s.mipLevel = a), s.dirtyId !== t.dirtyId && (s.dirtyId = t.dirtyId, s.dirtyFormat !== t.dirtyFormat ? (s.dirtyFormat = t.dirtyFormat, s.dirtySize = t.dirtySize, this.updateFramebuffer(t, a)) : s.dirtySize !== t.dirtySize && (s.dirtySize = t.dirtySize, this.resizeFramebuffer(t)));
        for (var o = 0; o < t.colorTextures.length; o++) {
          var u = t.colorTextures[o];
          this.renderer.texture.unbind(u.parentTextureArray || u);
        }
        if (t.depthTexture && this.renderer.texture.unbind(t.depthTexture), e) {
          var m = e.width >> a, g = e.height >> a, A = m / e.width;
          this.setViewport(e.x * A, e.y * A, m, g);
        } else {
          var m = t.width >> a, g = t.height >> a;
          this.setViewport(0, 0, m, g);
        }
      } else
        this.current && (this.current = null, n.bindFramebuffer(n.FRAMEBUFFER, null)), e ? this.setViewport(e.x, e.y, e.width, e.height) : this.setViewport(0, 0, this.renderer.width, this.renderer.height);
    }, i.prototype.setViewport = function(t, e, a, n) {
      var s = this.viewport;
      t = Math.round(t), e = Math.round(e), a = Math.round(a), n = Math.round(n), (s.width !== a || s.height !== n || s.x !== t || s.y !== e) && (s.x = t, s.y = e, s.width = a, s.height = n, this.gl.viewport(t, e, a, n));
    }, Object.defineProperty(i.prototype, "size", {
      /**
       * Get the size of the current width and height. Returns object with `width` and `height` values.
       * @readonly
       */
      get: function() {
        return this.current ? { x: 0, y: 0, width: this.current.width, height: this.current.height } : { x: 0, y: 0, width: this.renderer.width, height: this.renderer.height };
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.clear = function(t, e, a, n, s) {
      s === void 0 && (s = Tn.COLOR | Tn.DEPTH);
      var o = this.gl;
      o.clearColor(t, e, a, n), o.clear(s);
    }, i.prototype.initFramebuffer = function(t) {
      var e = this.gl, a = new zc(e.createFramebuffer());
      return a.multisample = this.detectSamples(t.multisample), t.glFramebuffers[this.CONTEXT_UID] = a, this.managedFramebuffers.push(t), t.disposeRunner.add(this), a;
    }, i.prototype.resizeFramebuffer = function(t) {
      var e = this.gl, a = t.glFramebuffers[this.CONTEXT_UID];
      a.msaaBuffer && (e.bindRenderbuffer(e.RENDERBUFFER, a.msaaBuffer), e.renderbufferStorageMultisample(e.RENDERBUFFER, a.multisample, e.RGBA8, t.width, t.height)), a.stencil && (e.bindRenderbuffer(e.RENDERBUFFER, a.stencil), a.msaaBuffer ? e.renderbufferStorageMultisample(e.RENDERBUFFER, a.multisample, e.DEPTH24_STENCIL8, t.width, t.height) : e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, t.width, t.height));
      var n = t.colorTextures, s = n.length;
      e.drawBuffers || (s = Math.min(s, 1));
      for (var o = 0; o < s; o++) {
        var u = n[o], m = u.parentTextureArray || u;
        this.renderer.texture.bind(m, 0);
      }
      t.depthTexture && this.writeDepthTexture && this.renderer.texture.bind(t.depthTexture, 0);
    }, i.prototype.updateFramebuffer = function(t, e) {
      var a = this.gl, n = t.glFramebuffers[this.CONTEXT_UID], s = t.colorTextures, o = s.length;
      a.drawBuffers || (o = Math.min(o, 1)), n.multisample > 1 && this.canMultisampleFramebuffer(t) ? (n.msaaBuffer = n.msaaBuffer || a.createRenderbuffer(), a.bindRenderbuffer(a.RENDERBUFFER, n.msaaBuffer), a.renderbufferStorageMultisample(a.RENDERBUFFER, n.multisample, a.RGBA8, t.width, t.height), a.framebufferRenderbuffer(a.FRAMEBUFFER, a.COLOR_ATTACHMENT0, a.RENDERBUFFER, n.msaaBuffer)) : n.msaaBuffer && (a.deleteRenderbuffer(n.msaaBuffer), n.msaaBuffer = null, n.blitFramebuffer && (n.blitFramebuffer.dispose(), n.blitFramebuffer = null));
      for (var u = [], m = 0; m < o; m++) {
        var g = s[m], A = g.parentTextureArray || g;
        this.renderer.texture.bind(A, 0), !(m === 0 && n.msaaBuffer) && (a.framebufferTexture2D(a.FRAMEBUFFER, a.COLOR_ATTACHMENT0 + m, g.target, A._glTextures[this.CONTEXT_UID].texture, e), u.push(a.COLOR_ATTACHMENT0 + m));
      }
      if (u.length > 1 && a.drawBuffers(u), t.depthTexture) {
        var x = this.writeDepthTexture;
        if (x) {
          var w = t.depthTexture;
          this.renderer.texture.bind(w, 0), a.framebufferTexture2D(a.FRAMEBUFFER, a.DEPTH_ATTACHMENT, a.TEXTURE_2D, w._glTextures[this.CONTEXT_UID].texture, e);
        }
      }
      (t.stencil || t.depth) && !(t.depthTexture && this.writeDepthTexture) ? (n.stencil = n.stencil || a.createRenderbuffer(), a.bindRenderbuffer(a.RENDERBUFFER, n.stencil), n.msaaBuffer ? a.renderbufferStorageMultisample(a.RENDERBUFFER, n.multisample, a.DEPTH24_STENCIL8, t.width, t.height) : a.renderbufferStorage(a.RENDERBUFFER, a.DEPTH_STENCIL, t.width, t.height), a.framebufferRenderbuffer(a.FRAMEBUFFER, a.DEPTH_STENCIL_ATTACHMENT, a.RENDERBUFFER, n.stencil)) : n.stencil && (a.deleteRenderbuffer(n.stencil), n.stencil = null);
    }, i.prototype.canMultisampleFramebuffer = function(t) {
      return this.renderer.context.webGLVersion !== 1 && t.colorTextures.length <= 1 && !t.depthTexture;
    }, i.prototype.detectSamples = function(t) {
      var e = this.msaaSamples, a = _e.NONE;
      if (t <= 1 || e === null)
        return a;
      for (var n = 0; n < e.length; n++)
        if (e[n] <= t) {
          a = e[n];
          break;
        }
      return a === 1 && (a = _e.NONE), a;
    }, i.prototype.blit = function(t, e, a) {
      var n = this, s = n.current, o = n.renderer, u = n.gl, m = n.CONTEXT_UID;
      if (o.context.webGLVersion === 2 && s) {
        var g = s.glFramebuffers[m];
        if (g) {
          if (!t) {
            if (!g.msaaBuffer)
              return;
            var A = s.colorTextures[0];
            if (!A)
              return;
            g.blitFramebuffer || (g.blitFramebuffer = new Fs(s.width, s.height), g.blitFramebuffer.addColorTexture(0, A)), t = g.blitFramebuffer, t.colorTextures[0] !== A && (t.colorTextures[0] = A, t.dirtyId++, t.dirtyFormat++), (t.width !== s.width || t.height !== s.height) && (t.width = s.width, t.height = s.height, t.dirtyId++, t.dirtySize++);
          }
          e || (e = my, e.width = s.width, e.height = s.height), a || (a = e);
          var x = e.width === a.width && e.height === a.height;
          this.bind(t), u.bindFramebuffer(u.READ_FRAMEBUFFER, g.framebuffer), u.blitFramebuffer(e.left, e.top, e.right, e.bottom, a.left, a.top, a.right, a.bottom, u.COLOR_BUFFER_BIT, x ? u.NEAREST : u.LINEAR);
        }
      }
    }, i.prototype.disposeFramebuffer = function(t, e) {
      var a = t.glFramebuffers[this.CONTEXT_UID], n = this.gl;
      if (a) {
        delete t.glFramebuffers[this.CONTEXT_UID];
        var s = this.managedFramebuffers.indexOf(t);
        s >= 0 && this.managedFramebuffers.splice(s, 1), t.disposeRunner.remove(this), e || (n.deleteFramebuffer(a.framebuffer), a.msaaBuffer && n.deleteRenderbuffer(a.msaaBuffer), a.stencil && n.deleteRenderbuffer(a.stencil)), a.blitFramebuffer && a.blitFramebuffer.dispose();
      }
    }, i.prototype.disposeAll = function(t) {
      var e = this.managedFramebuffers;
      this.managedFramebuffers = [];
      for (var a = 0; a < e.length; a++)
        this.disposeFramebuffer(e[a], t);
    }, i.prototype.forceStencil = function() {
      var t = this.current;
      if (t) {
        var e = t.glFramebuffers[this.CONTEXT_UID];
        if (!(!e || e.stencil)) {
          t.stencil = !0;
          var a = t.width, n = t.height, s = this.gl, o = s.createRenderbuffer();
          s.bindRenderbuffer(s.RENDERBUFFER, o), e.msaaBuffer ? s.renderbufferStorageMultisample(s.RENDERBUFFER, e.multisample, s.DEPTH24_STENCIL8, a, n) : s.renderbufferStorage(s.RENDERBUFFER, s.DEPTH_STENCIL, a, n), e.stencil = o, s.framebufferRenderbuffer(s.FRAMEBUFFER, s.DEPTH_STENCIL_ATTACHMENT, s.RENDERBUFFER, o);
        }
      }
    }, i.prototype.reset = function() {
      this.current = this.unknownFramebuffer, this.viewport = new zt();
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i;
  }()
), Fo = { 5126: 4, 5123: 2, 5121: 1 }, zu = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this._activeGeometry = null, this._activeVao = null, this.hasVao = !0, this.hasInstance = !0, this.canUseUInt32ElementIndex = !1, this.managedGeometries = {};
    }
    return i.prototype.contextChange = function() {
      this.disposeAll(!0);
      var t = this.gl = this.renderer.gl, e = this.renderer.context;
      if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, e.webGLVersion !== 2) {
        var a = this.renderer.context.extensions.vertexArrayObject;
        mt.PREFER_ENV === Zr.WEBGL_LEGACY && (a = null), a ? (t.createVertexArray = function() {
          return a.createVertexArrayOES();
        }, t.bindVertexArray = function(s) {
          return a.bindVertexArrayOES(s);
        }, t.deleteVertexArray = function(s) {
          return a.deleteVertexArrayOES(s);
        }) : (this.hasVao = !1, t.createVertexArray = function() {
          return null;
        }, t.bindVertexArray = function() {
          return null;
        }, t.deleteVertexArray = function() {
          return null;
        });
      }
      if (e.webGLVersion !== 2) {
        var n = t.getExtension("ANGLE_instanced_arrays");
        n ? (t.vertexAttribDivisor = function(s, o) {
          return n.vertexAttribDivisorANGLE(s, o);
        }, t.drawElementsInstanced = function(s, o, u, m, g) {
          return n.drawElementsInstancedANGLE(s, o, u, m, g);
        }, t.drawArraysInstanced = function(s, o, u, m) {
          return n.drawArraysInstancedANGLE(s, o, u, m);
        }) : this.hasInstance = !1;
      }
      this.canUseUInt32ElementIndex = e.webGLVersion === 2 || !!e.extensions.uint32ElementIndex;
    }, i.prototype.bind = function(t, e) {
      e = e || this.renderer.shader.shader;
      var a = this.gl, n = t.glVertexArrayObjects[this.CONTEXT_UID], s = !1;
      n || (this.managedGeometries[t.id] = t, t.disposeRunner.add(this), t.glVertexArrayObjects[this.CONTEXT_UID] = n = {}, s = !0);
      var o = n[e.program.id] || this.initGeometryVao(t, e, s);
      this._activeGeometry = t, this._activeVao !== o && (this._activeVao = o, this.hasVao ? a.bindVertexArray(o) : this.activateVao(t, e.program)), this.updateBuffers();
    }, i.prototype.reset = function() {
      this.unbind();
    }, i.prototype.updateBuffers = function() {
      for (var t = this._activeGeometry, e = this.renderer.buffer, a = 0; a < t.buffers.length; a++) {
        var n = t.buffers[a];
        e.update(n);
      }
    }, i.prototype.checkCompatibility = function(t, e) {
      var a = t.attributes, n = e.attributeData;
      for (var s in n)
        if (!a[s])
          throw new Error('shader and geometry incompatible, geometry missing the "' + s + '" attribute');
    }, i.prototype.getSignature = function(t, e) {
      var a = t.attributes, n = e.attributeData, s = ["g", t.id];
      for (var o in a)
        n[o] && s.push(o, n[o].location);
      return s.join("-");
    }, i.prototype.initGeometryVao = function(t, e, a) {
      a === void 0 && (a = !0);
      var n = this.gl, s = this.CONTEXT_UID, o = this.renderer.buffer, u = e.program;
      u.glPrograms[s] || this.renderer.shader.generateProgram(e), this.checkCompatibility(t, u);
      var m = this.getSignature(t, u), g = t.glVertexArrayObjects[this.CONTEXT_UID], A = g[m];
      if (A)
        return g[u.id] = A, A;
      var x = t.buffers, w = t.attributes, C = {}, O = {};
      for (var L in x)
        C[L] = 0, O[L] = 0;
      for (var L in w)
        !w[L].size && u.attributeData[L] ? w[L].size = u.attributeData[L].size : w[L].size || console.warn("PIXI Geometry attribute '" + L + "' size cannot be determined (likely the bound shader does not have the attribute)"), C[w[L].buffer] += w[L].size * Fo[w[L].type];
      for (var L in w) {
        var D = w[L], H = D.size;
        D.stride === void 0 && (C[D.buffer] === H * Fo[D.type] ? D.stride = 0 : D.stride = C[D.buffer]), D.start === void 0 && (D.start = O[D.buffer], O[D.buffer] += H * Fo[D.type]);
      }
      A = n.createVertexArray(), n.bindVertexArray(A);
      for (var k = 0; k < x.length; k++) {
        var G = x[k];
        o.bind(G), a && G._glBuffers[s].refCount++;
      }
      return this.activateVao(t, u), this._activeVao = A, g[u.id] = A, g[m] = A, A;
    }, i.prototype.disposeGeometry = function(t, e) {
      var a;
      if (this.managedGeometries[t.id]) {
        delete this.managedGeometries[t.id];
        var n = t.glVertexArrayObjects[this.CONTEXT_UID], s = this.gl, o = t.buffers, u = (a = this.renderer) === null || a === void 0 ? void 0 : a.buffer;
        if (t.disposeRunner.remove(this), !!n) {
          if (u)
            for (var m = 0; m < o.length; m++) {
              var g = o[m]._glBuffers[this.CONTEXT_UID];
              g && (g.refCount--, g.refCount === 0 && !e && u.dispose(o[m], e));
            }
          if (!e) {
            for (var A in n)
              if (A[0] === "g") {
                var x = n[A];
                this._activeVao === x && this.unbind(), s.deleteVertexArray(x);
              }
          }
          delete t.glVertexArrayObjects[this.CONTEXT_UID];
        }
      }
    }, i.prototype.disposeAll = function(t) {
      for (var e = Object.keys(this.managedGeometries), a = 0; a < e.length; a++)
        this.disposeGeometry(this.managedGeometries[e[a]], t);
    }, i.prototype.activateVao = function(t, e) {
      var a = this.gl, n = this.CONTEXT_UID, s = this.renderer.buffer, o = t.buffers, u = t.attributes;
      t.indexBuffer && s.bind(t.indexBuffer);
      var m = null;
      for (var g in u) {
        var A = u[g], x = o[A.buffer], w = x._glBuffers[n];
        if (e.attributeData[g]) {
          m !== w && (s.bind(x), m = w);
          var C = e.attributeData[g].location;
          if (a.enableVertexAttribArray(C), a.vertexAttribPointer(C, A.size, A.type || a.FLOAT, A.normalized, A.stride, A.start), A.instance)
            if (this.hasInstance)
              a.vertexAttribDivisor(C, 1);
            else
              throw new Error("geometry error, GPU Instancing is not supported on this device");
        }
      }
    }, i.prototype.draw = function(t, e, a, n) {
      var s = this.gl, o = this._activeGeometry;
      if (o.indexBuffer) {
        var u = o.indexBuffer.data.BYTES_PER_ELEMENT, m = u === 2 ? s.UNSIGNED_SHORT : s.UNSIGNED_INT;
        u === 2 || u === 4 && this.canUseUInt32ElementIndex ? o.instanced ? s.drawElementsInstanced(t, e || o.indexBuffer.data.length, m, (a || 0) * u, n || 1) : s.drawElements(t, e || o.indexBuffer.data.length, m, (a || 0) * u) : console.warn("unsupported index buffer type: uint32");
      } else
        o.instanced ? s.drawArraysInstanced(t, a, e || o.getSize(), n || 1) : s.drawArrays(t, a, e || o.getSize());
      return this;
    }, i.prototype.unbind = function() {
      this.gl.bindVertexArray(null), this._activeVao = null, this._activeGeometry = null;
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i;
  }()
), Kc = (
  /** @class */
  function() {
    function i(t) {
      t === void 0 && (t = null), this.type = Me.NONE, this.autoDetect = !0, this.maskObject = t || null, this.pooled = !1, this.isMaskData = !0, this.resolution = null, this.multisample = mt.FILTER_MULTISAMPLE, this.enabled = !0, this.colorMask = 15, this._filters = null, this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null, this._scissorRectLocal = null, this._colorMask = 15, this._target = null;
    }
    return Object.defineProperty(i.prototype, "filter", {
      /**
       * The sprite mask filter.
       * If set to `null`, the default sprite mask filter is used.
       * @default null
       */
      get: function() {
        return this._filters ? this._filters[0] : null;
      },
      set: function(t) {
        t ? this._filters ? this._filters[0] = t : this._filters = [t] : this._filters = null;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.reset = function() {
      this.pooled && (this.maskObject = null, this.type = Me.NONE, this.autoDetect = !0), this._target = null, this._scissorRectLocal = null;
    }, i.prototype.copyCountersOrReset = function(t) {
      t ? (this._stencilCounter = t._stencilCounter, this._scissorCounter = t._scissorCounter, this._scissorRect = t._scissorRect) : (this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null);
    }, i;
  }()
);
function n0(i, t, e) {
  var a = i.createShader(t);
  return i.shaderSource(a, e), i.compileShader(a), a;
}
function s0(i, t) {
  var e = i.getShaderSource(t).split(`
`).map(function(g, A) {
    return A + ": " + g;
  }), a = i.getShaderInfoLog(t), n = a.split(`
`), s = {}, o = n.map(function(g) {
    return parseFloat(g.replace(/^ERROR\: 0\:([\d]+)\:.*$/, "$1"));
  }).filter(function(g) {
    return g && !s[g] ? (s[g] = !0, !0) : !1;
  }), u = [""];
  o.forEach(function(g) {
    e[g - 1] = "%c" + e[g - 1] + "%c", u.push("background: #FF0000; color:#FFFFFF; font-size: 10px", "font-size: 10px");
  });
  var m = e.join(`
`);
  u[0] = m, console.error(a), console.groupCollapsed("click to view full shader code"), console.warn.apply(console, u), console.groupEnd();
}
function gy(i, t, e, a) {
  i.getProgramParameter(t, i.LINK_STATUS) || (i.getShaderParameter(e, i.COMPILE_STATUS) || s0(i, e), i.getShaderParameter(a, i.COMPILE_STATUS) || s0(i, a), console.error("PixiJS Error: Could not initialize shader."), i.getProgramInfoLog(t) !== "" && console.warn("PixiJS Warning: gl.getProgramInfoLog()", i.getProgramInfoLog(t)));
}
function Ho(i) {
  for (var t = new Array(i), e = 0; e < t.length; e++)
    t[e] = !1;
  return t;
}
function Wc(i, t) {
  switch (i) {
    case "float":
      return 0;
    case "vec2":
      return new Float32Array(2 * t);
    case "vec3":
      return new Float32Array(3 * t);
    case "vec4":
      return new Float32Array(4 * t);
    case "int":
    case "uint":
    case "sampler2D":
    case "sampler2DArray":
      return 0;
    case "ivec2":
      return new Int32Array(2 * t);
    case "ivec3":
      return new Int32Array(3 * t);
    case "ivec4":
      return new Int32Array(4 * t);
    case "uvec2":
      return new Uint32Array(2 * t);
    case "uvec3":
      return new Uint32Array(3 * t);
    case "uvec4":
      return new Uint32Array(4 * t);
    case "bool":
      return !1;
    case "bvec2":
      return Ho(2 * t);
    case "bvec3":
      return Ho(3 * t);
    case "bvec4":
      return Ho(4 * t);
    case "mat2":
      return new Float32Array([
        1,
        0,
        0,
        1
      ]);
    case "mat3":
      return new Float32Array([
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1
      ]);
    case "mat4":
      return new Float32Array([
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1
      ]);
  }
  return null;
}
var jc = {}, Ja = jc;
function Qc() {
  if (Ja === jc || Ja && Ja.isContextLost()) {
    var i = mt.ADAPTER.createCanvas(), t = void 0;
    mt.PREFER_ENV >= Zr.WEBGL2 && (t = i.getContext("webgl2", {})), t || (t = i.getContext("webgl", {}) || i.getContext("experimental-webgl", {}), t ? t.getExtension("WEBGL_draw_buffers") : t = null), Ja = t;
  }
  return Ja;
}
var ns;
function yy() {
  if (!ns) {
    ns = cr.MEDIUM;
    var i = Qc();
    if (i && i.getShaderPrecisionFormat) {
      var t = i.getShaderPrecisionFormat(i.FRAGMENT_SHADER, i.HIGH_FLOAT);
      ns = t.precision ? cr.HIGH : cr.MEDIUM;
    }
  }
  return ns;
}
function o0(i, t, e) {
  if (i.substring(0, 9) !== "precision") {
    var a = t;
    return t === cr.HIGH && e !== cr.HIGH && (a = cr.MEDIUM), "precision " + a + ` float;
` + i;
  } else if (e !== cr.HIGH && i.substring(0, 15) === "precision highp")
    return i.replace("precision highp", "precision mediump");
  return i;
}
var by = {
  float: 1,
  vec2: 2,
  vec3: 3,
  vec4: 4,
  int: 1,
  ivec2: 2,
  ivec3: 3,
  ivec4: 4,
  uint: 1,
  uvec2: 2,
  uvec3: 3,
  uvec4: 4,
  bool: 1,
  bvec2: 2,
  bvec3: 3,
  bvec4: 4,
  mat2: 4,
  mat3: 9,
  mat4: 16,
  sampler2D: 1
};
function Jc(i) {
  return by[i];
}
var ss = null, h0 = {
  FLOAT: "float",
  FLOAT_VEC2: "vec2",
  FLOAT_VEC3: "vec3",
  FLOAT_VEC4: "vec4",
  INT: "int",
  INT_VEC2: "ivec2",
  INT_VEC3: "ivec3",
  INT_VEC4: "ivec4",
  UNSIGNED_INT: "uint",
  UNSIGNED_INT_VEC2: "uvec2",
  UNSIGNED_INT_VEC3: "uvec3",
  UNSIGNED_INT_VEC4: "uvec4",
  BOOL: "bool",
  BOOL_VEC2: "bvec2",
  BOOL_VEC3: "bvec3",
  BOOL_VEC4: "bvec4",
  FLOAT_MAT2: "mat2",
  FLOAT_MAT3: "mat3",
  FLOAT_MAT4: "mat4",
  SAMPLER_2D: "sampler2D",
  INT_SAMPLER_2D: "sampler2D",
  UNSIGNED_INT_SAMPLER_2D: "sampler2D",
  SAMPLER_CUBE: "samplerCube",
  INT_SAMPLER_CUBE: "samplerCube",
  UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
  SAMPLER_2D_ARRAY: "sampler2DArray",
  INT_SAMPLER_2D_ARRAY: "sampler2DArray",
  UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray"
};
function qc(i, t) {
  if (!ss) {
    var e = Object.keys(h0);
    ss = {};
    for (var a = 0; a < e.length; ++a) {
      var n = e[a];
      ss[i[n]] = h0[n];
    }
  }
  return ss[t];
}
var ia = [
  // a float cache layer
  {
    test: function(i) {
      return i.type === "float" && i.size === 1 && !i.isArray;
    },
    code: function(i) {
      return `
            if(uv["` + i + '"] !== ud["' + i + `"].value)
            {
                ud["` + i + '"].value = uv["' + i + `"]
                gl.uniform1f(ud["` + i + '"].location, uv["' + i + `"])
            }
            `;
    }
  },
  // handling samplers
  {
    test: function(i, t) {
      return (i.type === "sampler2D" || i.type === "samplerCube" || i.type === "sampler2DArray") && i.size === 1 && !i.isArray && (t == null || t.castToBaseTexture !== void 0);
    },
    code: function(i) {
      return `t = syncData.textureCount++;

            renderer.texture.bind(uv["` + i + `"], t);

            if(ud["` + i + `"].value !== t)
            {
                ud["` + i + `"].value = t;
                gl.uniform1i(ud["` + i + `"].location, t);
; // eslint-disable-line max-len
            }`;
    }
  },
  // uploading pixi matrix object to mat3
  {
    test: function(i, t) {
      return i.type === "mat3" && i.size === 1 && !i.isArray && t.a !== void 0;
    },
    code: function(i) {
      return `
            gl.uniformMatrix3fv(ud["` + i + '"].location, false, uv["' + i + `"].toArray(true));
            `;
    },
    codeUbo: function(i) {
      return `
                var ` + i + "_matrix = uv." + i + `.toArray(true);

                data[offset] = ` + i + `_matrix[0];
                data[offset+1] = ` + i + `_matrix[1];
                data[offset+2] = ` + i + `_matrix[2];
        
                data[offset + 4] = ` + i + `_matrix[3];
                data[offset + 5] = ` + i + `_matrix[4];
                data[offset + 6] = ` + i + `_matrix[5];
        
                data[offset + 8] = ` + i + `_matrix[6];
                data[offset + 9] = ` + i + `_matrix[7];
                data[offset + 10] = ` + i + `_matrix[8];
            `;
    }
  },
  // uploading a pixi point as a vec2 with caching layer
  {
    test: function(i, t) {
      return i.type === "vec2" && i.size === 1 && !i.isArray && t.x !== void 0;
    },
    code: function(i) {
      return `
                cv = ud["` + i + `"].value;
                v = uv["` + i + `"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["` + i + `"].location, v.x, v.y);
                }`;
    },
    codeUbo: function(i) {
      return `
                v = uv.` + i + `;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `;
    }
  },
  // caching layer for a vec2
  {
    test: function(i) {
      return i.type === "vec2" && i.size === 1 && !i.isArray;
    },
    code: function(i) {
      return `
                cv = ud["` + i + `"].value;
                v = uv["` + i + `"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["` + i + `"].location, v[0], v[1]);
                }
            `;
    }
  },
  // upload a pixi rectangle as a vec4 with caching layer
  {
    test: function(i, t) {
      return i.type === "vec4" && i.size === 1 && !i.isArray && t.width !== void 0;
    },
    code: function(i) {
      return `
                cv = ud["` + i + `"].value;
                v = uv["` + i + `"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["` + i + `"].location, v.x, v.y, v.width, v.height)
                }`;
    },
    codeUbo: function(i) {
      return `
                    v = uv.` + i + `;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `;
    }
  },
  // a caching layer for vec4 uploading
  {
    test: function(i) {
      return i.type === "vec4" && i.size === 1 && !i.isArray;
    },
    code: function(i) {
      return `
                cv = ud["` + i + `"].value;
                v = uv["` + i + `"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["` + i + `"].location, v[0], v[1], v[2], v[3])
                }`;
    }
  }
], xy = {
  float: `
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,
  vec2: `
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,
  vec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,
  vec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,
  int: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,
  ivec2: `
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,
  ivec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,
  ivec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,
  uint: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,
  uvec2: `
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,
  uvec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,
  uvec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,
  bool: `
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,
  bvec2: `
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,
  bvec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,
  bvec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,
  mat2: "gl.uniformMatrix2fv(location, false, v)",
  mat3: "gl.uniformMatrix3fv(location, false, v)",
  mat4: "gl.uniformMatrix4fv(location, false, v)",
  sampler2D: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,
  samplerCube: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,
  sampler2DArray: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`
}, Ty = {
  float: "gl.uniform1fv(location, v)",
  vec2: "gl.uniform2fv(location, v)",
  vec3: "gl.uniform3fv(location, v)",
  vec4: "gl.uniform4fv(location, v)",
  mat4: "gl.uniformMatrix4fv(location, false, v)",
  mat3: "gl.uniformMatrix3fv(location, false, v)",
  mat2: "gl.uniformMatrix2fv(location, false, v)",
  int: "gl.uniform1iv(location, v)",
  ivec2: "gl.uniform2iv(location, v)",
  ivec3: "gl.uniform3iv(location, v)",
  ivec4: "gl.uniform4iv(location, v)",
  uint: "gl.uniform1uiv(location, v)",
  uvec2: "gl.uniform2uiv(location, v)",
  uvec3: "gl.uniform3uiv(location, v)",
  uvec4: "gl.uniform4uiv(location, v)",
  bool: "gl.uniform1iv(location, v)",
  bvec2: "gl.uniform2iv(location, v)",
  bvec3: "gl.uniform3iv(location, v)",
  bvec4: "gl.uniform4iv(location, v)",
  sampler2D: "gl.uniform1iv(location, v)",
  samplerCube: "gl.uniform1iv(location, v)",
  sampler2DArray: "gl.uniform1iv(location, v)"
};
function Ay(i, t) {
  var e, a = [`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];
  for (var n in i.uniforms) {
    var s = t[n];
    if (!s) {
      !((e = i.uniforms[n]) === null || e === void 0) && e.group && (i.uniforms[n].ubo ? a.push(`
                        renderer.shader.syncUniformBufferGroup(uv.` + n + ", '" + n + `');
                    `) : a.push(`
                        renderer.shader.syncUniformGroup(uv.` + n + `, syncData);
                    `));
      continue;
    }
    for (var o = i.uniforms[n], u = !1, m = 0; m < ia.length; m++)
      if (ia[m].test(s, o)) {
        a.push(ia[m].code(n, o)), u = !0;
        break;
      }
    if (!u) {
      var g = s.size === 1 && !s.isArray ? xy : Ty, A = g[s.type].replace("location", 'ud["' + n + '"].location');
      a.push(`
            cu = ud["` + n + `"];
            cv = cu.value;
            v = uv["` + n + `"];
            ` + A + ";");
    }
  }
  return new Function("ud", "uv", "renderer", "syncData", a.join(`
`));
}
var Sy = [
  "precision mediump float;",
  "void main(void){",
  "float test = 0.1;",
  "%forloop%",
  "gl_FragColor = vec4(0.0);",
  "}"
].join(`
`);
function Ey(i) {
  for (var t = "", e = 0; e < i; ++e)
    e > 0 && (t += `
else `), e < i - 1 && (t += "if(test == " + e + ".0){}");
  return t;
}
function Zc(i, t) {
  if (i === 0)
    throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");
  for (var e = t.createShader(t.FRAGMENT_SHADER); ; ) {
    var a = Sy.replace(/%forloop%/gi, Ey(i));
    if (t.shaderSource(e, a), t.compileShader(e), !t.getShaderParameter(e, t.COMPILE_STATUS))
      i = i / 2 | 0;
    else
      break;
  }
  return i;
}
var qa;
function wy() {
  if (typeof qa == "boolean")
    return qa;
  try {
    var i = new Function("param1", "param2", "param3", "return param1[param2] === param3;");
    qa = i({ a: "b" }, "a", "b") === !0;
  } catch (t) {
    qa = !1;
  }
  return qa;
}
var Iy = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`, Py = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`, My = 0, os = {}, Xa = (
  /** @class */
  function() {
    function i(t, e, a) {
      a === void 0 && (a = "pixi-shader"), this.id = My++, this.vertexSrc = t || i.defaultVertexSrc, this.fragmentSrc = e || i.defaultFragmentSrc, this.vertexSrc = this.vertexSrc.trim(), this.fragmentSrc = this.fragmentSrc.trim(), this.vertexSrc.substring(0, 8) !== "#version" && (a = a.replace(/\s+/g, "-"), os[a] ? (os[a]++, a += "-" + os[a]) : os[a] = 1, this.vertexSrc = "#define SHADER_NAME " + a + `
` + this.vertexSrc, this.fragmentSrc = "#define SHADER_NAME " + a + `
` + this.fragmentSrc, this.vertexSrc = o0(this.vertexSrc, mt.PRECISION_VERTEX, cr.HIGH), this.fragmentSrc = o0(this.fragmentSrc, mt.PRECISION_FRAGMENT, yy())), this.glPrograms = {}, this.syncUniforms = null;
    }
    return Object.defineProperty(i, "defaultVertexSrc", {
      /**
       * The default vertex shader source.
       * @constant
       */
      get: function() {
        return Py;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i, "defaultFragmentSrc", {
      /**
       * The default fragment shader source.
       * @constant
       */
      get: function() {
        return Iy;
      },
      enumerable: !1,
      configurable: !0
    }), i.from = function(t, e, a) {
      var n = t + e, s = Mh[n];
      return s || (Mh[n] = s = new i(t, e, a)), s;
    }, i;
  }()
), pi = (
  /** @class */
  function() {
    function i(t, e) {
      this.uniformBindCount = 0, this.program = t, e ? e instanceof Pi ? this.uniformGroup = e : this.uniformGroup = new Pi(e) : this.uniformGroup = new Pi({}), this.disposeRunner = new Ke("disposeShader");
    }
    return i.prototype.checkUniformExists = function(t, e) {
      if (e.uniforms[t])
        return !0;
      for (var a in e.uniforms) {
        var n = e.uniforms[a];
        if (n.group && this.checkUniformExists(t, n))
          return !0;
      }
      return !1;
    }, i.prototype.destroy = function() {
      this.uniformGroup = null, this.disposeRunner.emit(this), this.disposeRunner.destroy();
    }, Object.defineProperty(i.prototype, "uniforms", {
      /**
       * Shader uniform values, shortcut for `uniformGroup.uniforms`.
       * @readonly
       */
      get: function() {
        return this.uniformGroup.uniforms;
      },
      enumerable: !1,
      configurable: !0
    }), i.from = function(t, e, a) {
      var n = Xa.from(t, e);
      return new i(n, a);
    }, i;
  }()
), Bo = 0, ko = 1, Uo = 2, Go = 3, Xo = 4, Vo = 5, Di = (
  /** @class */
  function() {
    function i() {
      this.data = 0, this.blendMode = It.NORMAL, this.polygonOffset = 0, this.blend = !0, this.depthMask = !0;
    }
    return Object.defineProperty(i.prototype, "blend", {
      /**
       * Activates blending of the computed fragment color values.
       * @default true
       */
      get: function() {
        return !!(this.data & 1 << Bo);
      },
      set: function(t) {
        !!(this.data & 1 << Bo) !== t && (this.data ^= 1 << Bo);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "offsets", {
      /**
       * Activates adding an offset to depth values of polygon's fragments
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << ko);
      },
      set: function(t) {
        !!(this.data & 1 << ko) !== t && (this.data ^= 1 << ko);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "culling", {
      /**
       * Activates culling of polygons.
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << Uo);
      },
      set: function(t) {
        !!(this.data & 1 << Uo) !== t && (this.data ^= 1 << Uo);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "depthTest", {
      /**
       * Activates depth comparisons and updates to the depth buffer.
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << Go);
      },
      set: function(t) {
        !!(this.data & 1 << Go) !== t && (this.data ^= 1 << Go);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "depthMask", {
      /**
       * Enables or disables writing to the depth buffer.
       * @default true
       */
      get: function() {
        return !!(this.data & 1 << Vo);
      },
      set: function(t) {
        !!(this.data & 1 << Vo) !== t && (this.data ^= 1 << Vo);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "clockwiseFrontFace", {
      /**
       * Specifies whether or not front or back-facing polygons can be culled.
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << Xo);
      },
      set: function(t) {
        !!(this.data & 1 << Xo) !== t && (this.data ^= 1 << Xo);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "blendMode", {
      /**
       * The blend mode to be applied when this state is set. Apply a value of `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.
       * Setting this mode to anything other than NO_BLEND will automatically switch blending on.
       * @default PIXI.BLEND_MODES.NORMAL
       */
      get: function() {
        return this._blendMode;
      },
      set: function(t) {
        this.blend = t !== It.NONE, this._blendMode = t;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "polygonOffset", {
      /**
       * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.
       * @default 0
       */
      get: function() {
        return this._polygonOffset;
      },
      set: function(t) {
        this.offsets = !!t, this._polygonOffset = t;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.toString = function() {
      return "[@pixi/core:State " + ("blendMode=" + this.blendMode + " ") + ("clockwiseFrontFace=" + this.clockwiseFrontFace + " ") + ("culling=" + this.culling + " ") + ("depthMask=" + this.depthMask + " ") + ("polygonOffset=" + this.polygonOffset) + "]";
    }, i.for2d = function() {
      var t = new i();
      return t.depthTest = !1, t.blend = !0, t;
    }, i;
  }()
), Cy = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`, Oy = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`, gi = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a, n) {
      var s = this, o = Xa.from(e || t.defaultVertexSrc, a || t.defaultFragmentSrc);
      return s = i.call(this, o, n) || this, s.padding = 0, s.resolution = mt.FILTER_RESOLUTION, s.multisample = mt.FILTER_MULTISAMPLE, s.enabled = !0, s.autoFit = !0, s.state = new Di(), s;
    }
    return t.prototype.apply = function(e, a, n, s, o) {
      e.applyFilter(this, a, n, s);
    }, Object.defineProperty(t.prototype, "blendMode", {
      /**
       * Sets the blend mode of the filter.
       * @default PIXI.BLEND_MODES.NORMAL
       */
      get: function() {
        return this.state.blendMode;
      },
      set: function(e) {
        this.state.blendMode = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "resolution", {
      /**
       * The resolution of the filter. Setting this to be lower will lower the quality but
       * increase the performance of the filter.
       */
      get: function() {
        return this._resolution;
      },
      set: function(e) {
        this._resolution = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "defaultVertexSrc", {
      /**
       * The default vertex shader source
       * @constant
       */
      get: function() {
        return Oy;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "defaultFragmentSrc", {
      /**
       * The default fragment shader source
       * @constant
       */
      get: function() {
        return Cy;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(pi)
), $y = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`, Ry = `varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`, u0 = new be(), to = (
  /** @class */
  function() {
    function i(t, e) {
      this._texture = t, this.mapCoord = new be(), this.uClampFrame = new Float32Array(4), this.uClampOffset = new Float32Array(2), this._textureID = -1, this._updateID = 0, this.clampOffset = 0, this.clampMargin = typeof e == "undefined" ? 0.5 : e, this.isSimple = !1;
    }
    return Object.defineProperty(i.prototype, "texture", {
      /** Texture property. */
      get: function() {
        return this._texture;
      },
      set: function(t) {
        this._texture = t, this._textureID = -1;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.multiplyUvs = function(t, e) {
      e === void 0 && (e = t);
      for (var a = this.mapCoord, n = 0; n < t.length; n += 2) {
        var s = t[n], o = t[n + 1];
        e[n] = s * a.a + o * a.c + a.tx, e[n + 1] = s * a.b + o * a.d + a.ty;
      }
      return e;
    }, i.prototype.update = function(t) {
      var e = this._texture;
      if (!e || !e.valid || !t && this._textureID === e._updateID)
        return !1;
      this._textureID = e._updateID, this._updateID++;
      var a = e._uvs;
      this.mapCoord.set(a.x1 - a.x0, a.y1 - a.y0, a.x3 - a.x0, a.y3 - a.y0, a.x0, a.y0);
      var n = e.orig, s = e.trim;
      s && (u0.set(n.width / s.width, 0, 0, n.height / s.height, -s.x / s.width, -s.y / s.height), this.mapCoord.append(u0));
      var o = e.baseTexture, u = this.uClampFrame, m = this.clampMargin / o.resolution, g = this.clampOffset;
      return u[0] = (e._frame.x + m + g) / o.width, u[1] = (e._frame.y + m + g) / o.height, u[2] = (e._frame.x + e._frame.width - m + g) / o.width, u[3] = (e._frame.y + e._frame.height - m + g) / o.height, this.uClampOffset[0] = g / o.realWidth, this.uClampOffset[1] = g / o.realHeight, this.isSimple = e._frame.width === o.width && e._frame.height === o.height && e.rotate === 0, !0;
    }, i;
  }()
), td = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a, n) {
      var s = this, o = null;
      return typeof e != "string" && a === void 0 && n === void 0 && (o = e, e = void 0, a = void 0, n = void 0), s = i.call(this, e || $y, a || Ry, n) || this, s.maskSprite = o, s.maskMatrix = new be(), s;
    }
    return Object.defineProperty(t.prototype, "maskSprite", {
      /**
       * Sprite mask
       * @type {PIXI.DisplayObject}
       */
      get: function() {
        return this._maskSprite;
      },
      set: function(e) {
        this._maskSprite = e, this._maskSprite && (this._maskSprite.renderable = !1);
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.apply = function(e, a, n, s) {
      var o = this._maskSprite, u = o._texture;
      u.valid && (u.uvMatrix || (u.uvMatrix = new to(u, 0)), u.uvMatrix.update(), this.uniforms.npmAlpha = u.baseTexture.alphaMode ? 0 : 1, this.uniforms.mask = u, this.uniforms.otherMatrix = e.calculateSpriteMatrix(this.maskMatrix, o).prepend(u.uvMatrix.mapCoord), this.uniforms.alpha = o.worldAlpha, this.uniforms.maskClamp = u.uvMatrix.uClampFrame, e.applyFilter(this, a, n, s));
    }, t;
  }(gi)
), Ku = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.enableScissor = !0, this.alphaMaskPool = [], this.maskDataPool = [], this.maskStack = [], this.alphaMaskIndex = 0;
    }
    return i.prototype.setMaskStack = function(t) {
      this.maskStack = t, this.renderer.scissor.setMaskStack(t), this.renderer.stencil.setMaskStack(t);
    }, i.prototype.push = function(t, e) {
      var a = e;
      if (!a.isMaskData) {
        var n = this.maskDataPool.pop() || new Kc();
        n.pooled = !0, n.maskObject = e, a = n;
      }
      var s = this.maskStack.length !== 0 ? this.maskStack[this.maskStack.length - 1] : null;
      if (a.copyCountersOrReset(s), a._colorMask = s ? s._colorMask : 15, a.autoDetect && this.detect(a), a._target = t, a.type !== Me.SPRITE && this.maskStack.push(a), a.enabled)
        switch (a.type) {
          case Me.SCISSOR:
            this.renderer.scissor.push(a);
            break;
          case Me.STENCIL:
            this.renderer.stencil.push(a);
            break;
          case Me.SPRITE:
            a.copyCountersOrReset(null), this.pushSpriteMask(a);
            break;
          case Me.COLOR:
            this.pushColorMask(a);
            break;
        }
      a.type === Me.SPRITE && this.maskStack.push(a);
    }, i.prototype.pop = function(t) {
      var e = this.maskStack.pop();
      if (!(!e || e._target !== t)) {
        if (e.enabled)
          switch (e.type) {
            case Me.SCISSOR:
              this.renderer.scissor.pop(e);
              break;
            case Me.STENCIL:
              this.renderer.stencil.pop(e.maskObject);
              break;
            case Me.SPRITE:
              this.popSpriteMask(e);
              break;
            case Me.COLOR:
              this.popColorMask(e);
              break;
          }
        if (e.reset(), e.pooled && this.maskDataPool.push(e), this.maskStack.length !== 0) {
          var a = this.maskStack[this.maskStack.length - 1];
          a.type === Me.SPRITE && a._filters && (a._filters[0].maskSprite = a.maskObject);
        }
      }
    }, i.prototype.detect = function(t) {
      var e = t.maskObject;
      e ? e.isSprite ? t.type = Me.SPRITE : this.enableScissor && this.renderer.scissor.testScissor(t) ? t.type = Me.SCISSOR : t.type = Me.STENCIL : t.type = Me.COLOR;
    }, i.prototype.pushSpriteMask = function(t) {
      var e, a, n = t.maskObject, s = t._target, o = t._filters;
      o || (o = this.alphaMaskPool[this.alphaMaskIndex], o || (o = this.alphaMaskPool[this.alphaMaskIndex] = [new td()]));
      var u = this.renderer, m = u.renderTexture, g, A;
      if (m.current) {
        var x = m.current;
        g = t.resolution || x.resolution, A = (e = t.multisample) !== null && e !== void 0 ? e : x.multisample;
      } else
        g = t.resolution || u.resolution, A = (a = t.multisample) !== null && a !== void 0 ? a : u.multisample;
      o[0].resolution = g, o[0].multisample = A, o[0].maskSprite = n;
      var w = s.filterArea;
      s.filterArea = n.getBounds(!0), u.filter.push(s, o), s.filterArea = w, t._filters || this.alphaMaskIndex++;
    }, i.prototype.popSpriteMask = function(t) {
      this.renderer.filter.pop(), t._filters ? t._filters[0].maskSprite = null : (this.alphaMaskIndex--, this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite = null);
    }, i.prototype.pushColorMask = function(t) {
      var e = t._colorMask, a = t._colorMask = e & t.colorMask;
      a !== e && this.renderer.gl.colorMask((a & 1) !== 0, (a & 2) !== 0, (a & 4) !== 0, (a & 8) !== 0);
    }, i.prototype.popColorMask = function(t) {
      var e = t._colorMask, a = this.maskStack.length > 0 ? this.maskStack[this.maskStack.length - 1]._colorMask : 15;
      a !== e && this.renderer.gl.colorMask((a & 1) !== 0, (a & 2) !== 0, (a & 4) !== 0, (a & 8) !== 0);
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i;
  }()
), ed = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.maskStack = [], this.glConst = 0;
    }
    return i.prototype.getStackLength = function() {
      return this.maskStack.length;
    }, i.prototype.setMaskStack = function(t) {
      var e = this.renderer.gl, a = this.getStackLength();
      this.maskStack = t;
      var n = this.getStackLength();
      n !== a && (n === 0 ? e.disable(this.glConst) : (e.enable(this.glConst), this._useCurrent()));
    }, i.prototype._useCurrent = function() {
    }, i.prototype.destroy = function() {
      this.renderer = null, this.maskStack = null;
    }, i;
  }()
), l0 = new be(), f0 = [], Wu = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e) {
      var a = i.call(this, e) || this;
      return a.glConst = mt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST, a;
    }
    return t.prototype.getStackLength = function() {
      var e = this.maskStack[this.maskStack.length - 1];
      return e ? e._scissorCounter : 0;
    }, t.prototype.calcScissorRect = function(e) {
      var a;
      if (!e._scissorRectLocal) {
        var n = e._scissorRect, s = e.maskObject, o = this.renderer, u = o.renderTexture, m = s.getBounds(!0, (a = f0.pop()) !== null && a !== void 0 ? a : new zt());
        this.roundFrameToPixels(m, u.current ? u.current.resolution : o.resolution, u.sourceFrame, u.destinationFrame, o.projection.transform), n && m.fit(n), e._scissorRectLocal = m;
      }
    }, t.isMatrixRotated = function(e) {
      if (!e)
        return !1;
      var a = e.a, n = e.b, s = e.c, o = e.d;
      return (Math.abs(n) > 1e-4 || Math.abs(s) > 1e-4) && (Math.abs(a) > 1e-4 || Math.abs(o) > 1e-4);
    }, t.prototype.testScissor = function(e) {
      var a = e.maskObject;
      if (!a.isFastRect || !a.isFastRect() || t.isMatrixRotated(a.worldTransform) || t.isMatrixRotated(this.renderer.projection.transform))
        return !1;
      this.calcScissorRect(e);
      var n = e._scissorRectLocal;
      return n.width > 0 && n.height > 0;
    }, t.prototype.roundFrameToPixels = function(e, a, n, s, o) {
      t.isMatrixRotated(o) || (o = o ? l0.copyFrom(o) : l0.identity(), o.translate(-n.x, -n.y).scale(s.width / n.width, s.height / n.height).translate(s.x, s.y), this.renderer.filter.transformAABB(o, e), e.fit(s), e.x = Math.round(e.x * a), e.y = Math.round(e.y * a), e.width = Math.round(e.width * a), e.height = Math.round(e.height * a));
    }, t.prototype.push = function(e) {
      e._scissorRectLocal || this.calcScissorRect(e);
      var a = this.renderer.gl;
      e._scissorRect || a.enable(a.SCISSOR_TEST), e._scissorCounter++, e._scissorRect = e._scissorRectLocal, this._useCurrent();
    }, t.prototype.pop = function(e) {
      var a = this.renderer.gl;
      e && f0.push(e._scissorRectLocal), this.getStackLength() > 0 ? this._useCurrent() : a.disable(a.SCISSOR_TEST);
    }, t.prototype._useCurrent = function() {
      var e = this.maskStack[this.maskStack.length - 1]._scissorRect, a;
      this.renderer.renderTexture.current ? a = e.y : a = this.renderer.height - e.height - e.y, this.renderer.gl.scissor(e.x, a, e.width, e.height);
    }, t;
  }(ed)
), ju = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e) {
      var a = i.call(this, e) || this;
      return a.glConst = mt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST, a;
    }
    return t.prototype.getStackLength = function() {
      var e = this.maskStack[this.maskStack.length - 1];
      return e ? e._stencilCounter : 0;
    }, t.prototype.push = function(e) {
      var a = e.maskObject, n = this.renderer.gl, s = e._stencilCounter;
      s === 0 && (this.renderer.framebuffer.forceStencil(), n.clearStencil(0), n.clear(n.STENCIL_BUFFER_BIT), n.enable(n.STENCIL_TEST)), e._stencilCounter++;
      var o = e._colorMask;
      o !== 0 && (e._colorMask = 0, n.colorMask(!1, !1, !1, !1)), n.stencilFunc(n.EQUAL, s, 4294967295), n.stencilOp(n.KEEP, n.KEEP, n.INCR), a.renderable = !0, a.render(this.renderer), this.renderer.batch.flush(), a.renderable = !1, o !== 0 && (e._colorMask = o, n.colorMask((o & 1) !== 0, (o & 2) !== 0, (o & 4) !== 0, (o & 8) !== 0)), this._useCurrent();
    }, t.prototype.pop = function(e) {
      var a = this.renderer.gl;
      if (this.getStackLength() === 0)
        a.disable(a.STENCIL_TEST);
      else {
        var n = this.maskStack.length !== 0 ? this.maskStack[this.maskStack.length - 1] : null, s = n ? n._colorMask : 15;
        s !== 0 && (n._colorMask = 0, a.colorMask(!1, !1, !1, !1)), a.stencilOp(a.KEEP, a.KEEP, a.DECR), e.renderable = !0, e.render(this.renderer), this.renderer.batch.flush(), e.renderable = !1, s !== 0 && (n._colorMask = s, a.colorMask((s & 1) !== 0, (s & 2) !== 0, (s & 4) !== 0, (s & 8) !== 0)), this._useCurrent();
      }
    }, t.prototype._useCurrent = function() {
      var e = this.renderer.gl;
      e.stencilFunc(e.EQUAL, this.getStackLength(), 4294967295), e.stencilOp(e.KEEP, e.KEEP, e.KEEP);
    }, t;
  }(ed)
), Qu = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.destinationFrame = null, this.sourceFrame = null, this.defaultFrame = null, this.projectionMatrix = new be(), this.transform = null;
    }
    return i.prototype.update = function(t, e, a, n) {
      this.destinationFrame = t || this.destinationFrame || this.defaultFrame, this.sourceFrame = e || this.sourceFrame || t, this.calculateProjection(this.destinationFrame, this.sourceFrame, a, n), this.transform && this.projectionMatrix.append(this.transform);
      var s = this.renderer;
      s.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix, s.globalUniforms.update(), s.shader.shader && s.shader.syncUniformGroup(s.shader.shader.uniforms.globals);
    }, i.prototype.calculateProjection = function(t, e, a, n) {
      var s = this.projectionMatrix, o = n ? -1 : 1;
      s.identity(), s.a = 1 / e.width * 2, s.d = o * (1 / e.height * 2), s.tx = -1 - e.x * s.a, s.ty = -o - e.y * s.d;
    }, i.prototype.setTransform = function(t) {
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i;
  }()
), Hi = new zt(), Za = new zt(), Ju = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.clearColor = t._backgroundColorRgba, this.defaultMaskStack = [], this.current = null, this.sourceFrame = new zt(), this.destinationFrame = new zt(), this.viewportFrame = new zt();
    }
    return i.prototype.bind = function(t, e, a) {
      t === void 0 && (t = null);
      var n = this.renderer;
      this.current = t;
      var s, o, u;
      t ? (s = t.baseTexture, u = s.resolution, e || (Hi.width = t.frame.width, Hi.height = t.frame.height, e = Hi), a || (Za.x = t.frame.x, Za.y = t.frame.y, Za.width = e.width, Za.height = e.height, a = Za), o = s.framebuffer) : (u = n.resolution, e || (Hi.width = n.screen.width, Hi.height = n.screen.height, e = Hi), a || (a = Hi, a.width = e.width, a.height = e.height));
      var m = this.viewportFrame;
      m.x = a.x * u, m.y = a.y * u, m.width = a.width * u, m.height = a.height * u, t || (m.y = n.view.height - (m.y + m.height)), m.ceil(), this.renderer.framebuffer.bind(o, m), this.renderer.projection.update(a, e, u, !o), t ? this.renderer.mask.setMaskStack(s.maskStack) : this.renderer.mask.setMaskStack(this.defaultMaskStack), this.sourceFrame.copyFrom(e), this.destinationFrame.copyFrom(a);
    }, i.prototype.clear = function(t, e) {
      this.current ? t = t || this.current.baseTexture.clearColor : t = t || this.clearColor;
      var a = this.destinationFrame, n = this.current ? this.current.baseTexture : this.renderer.screen, s = a.width !== n.width || a.height !== n.height;
      if (s) {
        var o = this.viewportFrame, u = o.x, m = o.y, g = o.width, A = o.height;
        u = Math.round(u), m = Math.round(m), g = Math.round(g), A = Math.round(A), this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST), this.renderer.gl.scissor(u, m, g, A);
      }
      this.renderer.framebuffer.clear(t[0], t[1], t[2], t[3], e), s && this.renderer.scissor.pop();
    }, i.prototype.resize = function() {
      this.bind(null);
    }, i.prototype.reset = function() {
      this.bind(null);
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i;
  }()
);
function Ly(i, t, e, a, n) {
  e.buffer.update(n);
}
var Dy = {
  float: `
        data[offset] = v;
    `,
  vec2: `
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,
  vec3: `
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,
  vec4: `
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,
  mat2: `
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,
  mat3: `
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,
  mat4: `
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `
}, rd = {
  float: 4,
  vec2: 8,
  vec3: 12,
  vec4: 16,
  int: 4,
  ivec2: 8,
  ivec3: 12,
  ivec4: 16,
  uint: 4,
  uvec2: 8,
  uvec3: 12,
  uvec4: 16,
  bool: 4,
  bvec2: 8,
  bvec3: 12,
  bvec4: 16,
  mat2: 16 * 2,
  mat3: 16 * 3,
  mat4: 16 * 4
};
function id(i) {
  for (var t = i.map(function(m) {
    return {
      data: m,
      offset: 0,
      dataLen: 0,
      dirty: 0
    };
  }), e = 0, a = 0, n = 0, s = 0; s < t.length; s++) {
    var o = t[s];
    if (e = rd[o.data.type], o.data.size > 1 && (e = Math.max(e, 16) * o.data.size), o.dataLen = e, a % e !== 0 && a < 16) {
      var u = a % e % 16;
      a += u, n += u;
    }
    a + e > 16 ? (n = Math.ceil(n / 16) * 16, o.offset = n, n += e, a = e) : (o.offset = n, a += e, n += e);
  }
  return n = Math.ceil(n / 16) * 16, { uboElements: t, size: n };
}
function ad(i, t) {
  var e = [];
  for (var a in i)
    t[a] && e.push(t[a]);
  return e.sort(function(n, s) {
    return n.index - s.index;
  }), e;
}
function nd(i, t) {
  if (!i.autoManage)
    return { size: 0, syncFunc: Ly };
  for (var e = ad(i.uniforms, t), a = id(e), n = a.uboElements, s = a.size, o = [`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `], u = 0; u < n.length; u++) {
    for (var m = n[u], g = i.uniforms[m.data.name], A = m.data.name, x = !1, w = 0; w < ia.length; w++) {
      var C = ia[w];
      if (C.codeUbo && C.test(m.data, g)) {
        o.push("offset = " + m.offset / 4 + ";", ia[w].codeUbo(m.data.name, g)), x = !0;
        break;
      }
    }
    if (!x)
      if (m.data.size > 1) {
        var O = Jc(m.data.type), L = Math.max(rd[m.data.type] / 16, 1), D = O / L, H = (4 - D % 4) % 4;
        o.push(`
                cv = ud.` + A + `.value;
                v = uv.` + A + `;
                offset = ` + m.offset / 4 + `;

                t = 0;

                for(var i=0; i < ` + m.data.size * L + `; i++)
                {
                    for(var j = 0; j < ` + D + `; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ` + H + `;
                }

                `);
      } else {
        var k = Dy[m.data.type];
        o.push(`
                cv = ud.` + A + `.value;
                v = uv.` + A + `;
                offset = ` + m.offset / 4 + `;
                ` + k + `;
                `);
      }
  }
  return o.push(`
       renderer.buffer.update(buffer);
    `), {
    size: s,
    // eslint-disable-next-line no-new-func
    syncFunc: new Function("ud", "uv", "renderer", "syncData", "buffer", o.join(`
`))
  };
}
var Ny = (
  /** @class */
  /* @__PURE__ */ function() {
    function i() {
    }
    return i;
  }()
), sd = (
  /** @class */
  function() {
    function i(t, e) {
      this.program = t, this.uniformData = e, this.uniformGroups = {}, this.uniformDirtyGroups = {}, this.uniformBufferBindings = {};
    }
    return i.prototype.destroy = function() {
      this.uniformData = null, this.uniformGroups = null, this.uniformDirtyGroups = null, this.uniformBufferBindings = null, this.program = null;
    }, i;
  }()
);
function Fy(i, t) {
  for (var e = {}, a = t.getProgramParameter(i, t.ACTIVE_ATTRIBUTES), n = 0; n < a; n++) {
    var s = t.getActiveAttrib(i, n);
    if (s.name.indexOf("gl_") !== 0) {
      var o = qc(t, s.type), u = {
        type: o,
        name: s.name,
        size: Jc(o),
        location: t.getAttribLocation(i, s.name)
      };
      e[s.name] = u;
    }
  }
  return e;
}
function Hy(i, t) {
  for (var e = {}, a = t.getProgramParameter(i, t.ACTIVE_UNIFORMS), n = 0; n < a; n++) {
    var s = t.getActiveUniform(i, n), o = s.name.replace(/\[.*?\]$/, ""), u = !!s.name.match(/\[.*?\]$/), m = qc(t, s.type);
    e[o] = {
      name: o,
      index: n,
      type: m,
      size: s.size,
      isArray: u,
      value: Wc(m, s.size)
    };
  }
  return e;
}
function od(i, t) {
  var e = n0(i, i.VERTEX_SHADER, t.vertexSrc), a = n0(i, i.FRAGMENT_SHADER, t.fragmentSrc), n = i.createProgram();
  if (i.attachShader(n, e), i.attachShader(n, a), i.linkProgram(n), i.getProgramParameter(n, i.LINK_STATUS) || gy(i, n, e, a), t.attributeData = Fy(n, i), t.uniformData = Hy(n, i), !/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)) {
    var s = Object.keys(t.attributeData);
    s.sort(function(A, x) {
      return A > x ? 1 : -1;
    });
    for (var o = 0; o < s.length; o++)
      t.attributeData[s[o]].location = o, i.bindAttribLocation(n, o, s[o]);
    i.linkProgram(n);
  }
  i.deleteShader(e), i.deleteShader(a);
  var u = {};
  for (var o in t.uniformData) {
    var m = t.uniformData[o];
    u[o] = {
      location: i.getUniformLocation(n, o),
      value: Wc(m.type, m.size)
    };
  }
  var g = new sd(n, u);
  return g;
}
var By = 0, hs = { textureCount: 0, uboCount: 0 }, qu = (
  /** @class */
  function() {
    function i(t) {
      this.destroyed = !1, this.renderer = t, this.systemCheck(), this.gl = null, this.shader = null, this.program = null, this.cache = {}, this._uboCache = {}, this.id = By++;
    }
    return i.prototype.systemCheck = function() {
      if (!wy())
        throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.");
    }, i.prototype.contextChange = function(t) {
      this.gl = t, this.reset();
    }, i.prototype.bind = function(t, e) {
      t.disposeRunner.add(this), t.uniforms.globals = this.renderer.globalUniforms;
      var a = t.program, n = a.glPrograms[this.renderer.CONTEXT_UID] || this.generateProgram(t);
      return this.shader = t, this.program !== a && (this.program = a, this.gl.useProgram(n.program)), e || (hs.textureCount = 0, hs.uboCount = 0, this.syncUniformGroup(t.uniformGroup, hs)), n;
    }, i.prototype.setUniforms = function(t) {
      var e = this.shader.program, a = e.glPrograms[this.renderer.CONTEXT_UID];
      e.syncUniforms(a.uniformData, t, this.renderer);
    }, i.prototype.syncUniformGroup = function(t, e) {
      var a = this.getGlProgram();
      (!t.static || t.dirtyId !== a.uniformDirtyGroups[t.id]) && (a.uniformDirtyGroups[t.id] = t.dirtyId, this.syncUniforms(t, a, e));
    }, i.prototype.syncUniforms = function(t, e, a) {
      var n = t.syncUniforms[this.shader.program.id] || this.createSyncGroups(t);
      n(e.uniformData, t.uniforms, this.renderer, a);
    }, i.prototype.createSyncGroups = function(t) {
      var e = this.getSignature(t, this.shader.program.uniformData, "u");
      return this.cache[e] || (this.cache[e] = Ay(t, this.shader.program.uniformData)), t.syncUniforms[this.shader.program.id] = this.cache[e], t.syncUniforms[this.shader.program.id];
    }, i.prototype.syncUniformBufferGroup = function(t, e) {
      var a = this.getGlProgram();
      if (!t.static || t.dirtyId !== 0 || !a.uniformGroups[t.id]) {
        t.dirtyId = 0;
        var n = a.uniformGroups[t.id] || this.createSyncBufferGroup(t, a, e);
        t.buffer.update(), n(a.uniformData, t.uniforms, this.renderer, hs, t.buffer);
      }
      this.renderer.buffer.bindBufferBase(t.buffer, a.uniformBufferBindings[e]);
    }, i.prototype.createSyncBufferGroup = function(t, e, a) {
      var n = this.renderer.gl;
      this.renderer.buffer.bind(t.buffer);
      var s = this.gl.getUniformBlockIndex(e.program, a);
      e.uniformBufferBindings[a] = this.shader.uniformBindCount, n.uniformBlockBinding(e.program, s, this.shader.uniformBindCount), this.shader.uniformBindCount++;
      var o = this.getSignature(t, this.shader.program.uniformData, "ubo"), u = this._uboCache[o];
      if (u || (u = this._uboCache[o] = nd(t, this.shader.program.uniformData)), t.autoManage) {
        var m = new Float32Array(u.size / 4);
        t.buffer.update(m);
      }
      return e.uniformGroups[t.id] = u.syncFunc, e.uniformGroups[t.id];
    }, i.prototype.getSignature = function(t, e, a) {
      var n = t.uniforms, s = [a + "-"];
      for (var o in n)
        s.push(o), e[o] && s.push(e[o].type);
      return s.join("-");
    }, i.prototype.getGlProgram = function() {
      return this.shader ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID] : null;
    }, i.prototype.generateProgram = function(t) {
      var e = this.gl, a = t.program, n = od(e, a);
      return a.glPrograms[this.renderer.CONTEXT_UID] = n, n;
    }, i.prototype.reset = function() {
      this.program = null, this.shader = null;
    }, i.prototype.disposeShader = function(t) {
      this.shader === t && (this.shader = null);
    }, i.prototype.destroy = function() {
      this.renderer = null, this.destroyed = !0;
    }, i;
  }()
);
function ky(i, t) {
  return t === void 0 && (t = []), t[It.NORMAL] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.ADD] = [i.ONE, i.ONE], t[It.MULTIPLY] = [i.DST_COLOR, i.ONE_MINUS_SRC_ALPHA, i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.SCREEN] = [i.ONE, i.ONE_MINUS_SRC_COLOR, i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.OVERLAY] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.DARKEN] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.LIGHTEN] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.COLOR_DODGE] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.COLOR_BURN] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.HARD_LIGHT] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.SOFT_LIGHT] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.DIFFERENCE] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.EXCLUSION] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.HUE] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.SATURATION] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.COLOR] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.LUMINOSITY] = [i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.NONE] = [0, 0], t[It.NORMAL_NPM] = [i.SRC_ALPHA, i.ONE_MINUS_SRC_ALPHA, i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.ADD_NPM] = [i.SRC_ALPHA, i.ONE, i.ONE, i.ONE], t[It.SCREEN_NPM] = [i.SRC_ALPHA, i.ONE_MINUS_SRC_COLOR, i.ONE, i.ONE_MINUS_SRC_ALPHA], t[It.SRC_IN] = [i.DST_ALPHA, i.ZERO], t[It.SRC_OUT] = [i.ONE_MINUS_DST_ALPHA, i.ZERO], t[It.SRC_ATOP] = [i.DST_ALPHA, i.ONE_MINUS_SRC_ALPHA], t[It.DST_OVER] = [i.ONE_MINUS_DST_ALPHA, i.ONE], t[It.DST_IN] = [i.ZERO, i.SRC_ALPHA], t[It.DST_OUT] = [i.ZERO, i.ONE_MINUS_SRC_ALPHA], t[It.DST_ATOP] = [i.ONE_MINUS_DST_ALPHA, i.SRC_ALPHA], t[It.XOR] = [i.ONE_MINUS_DST_ALPHA, i.ONE_MINUS_SRC_ALPHA], t[It.SUBTRACT] = [i.ONE, i.ONE, i.ONE, i.ONE, i.FUNC_REVERSE_SUBTRACT, i.FUNC_ADD], t;
}
var Uy = 0, Gy = 1, Xy = 2, Vy = 3, Yy = 4, zy = 5, Zu = (
  /** @class */
  function() {
    function i() {
      this.gl = null, this.stateId = 0, this.polygonOffset = 0, this.blendMode = It.NONE, this._blendEq = !1, this.map = [], this.map[Uy] = this.setBlend, this.map[Gy] = this.setOffset, this.map[Xy] = this.setCullFace, this.map[Vy] = this.setDepthTest, this.map[Yy] = this.setFrontFace, this.map[zy] = this.setDepthMask, this.checks = [], this.defaultState = new Di(), this.defaultState.blend = !0;
    }
    return i.prototype.contextChange = function(t) {
      this.gl = t, this.blendModes = ky(t), this.set(this.defaultState), this.reset();
    }, i.prototype.set = function(t) {
      if (t = t || this.defaultState, this.stateId !== t.data) {
        for (var e = this.stateId ^ t.data, a = 0; e; )
          e & 1 && this.map[a].call(this, !!(t.data & 1 << a)), e = e >> 1, a++;
        this.stateId = t.data;
      }
      for (var a = 0; a < this.checks.length; a++)
        this.checks[a](this, t);
    }, i.prototype.forceState = function(t) {
      t = t || this.defaultState;
      for (var e = 0; e < this.map.length; e++)
        this.map[e].call(this, !!(t.data & 1 << e));
      for (var e = 0; e < this.checks.length; e++)
        this.checks[e](this, t);
      this.stateId = t.data;
    }, i.prototype.setBlend = function(t) {
      this.updateCheck(i.checkBlendMode, t), this.gl[t ? "enable" : "disable"](this.gl.BLEND);
    }, i.prototype.setOffset = function(t) {
      this.updateCheck(i.checkPolygonOffset, t), this.gl[t ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL);
    }, i.prototype.setDepthTest = function(t) {
      this.gl[t ? "enable" : "disable"](this.gl.DEPTH_TEST);
    }, i.prototype.setDepthMask = function(t) {
      this.gl.depthMask(t);
    }, i.prototype.setCullFace = function(t) {
      this.gl[t ? "enable" : "disable"](this.gl.CULL_FACE);
    }, i.prototype.setFrontFace = function(t) {
      this.gl.frontFace(this.gl[t ? "CW" : "CCW"]);
    }, i.prototype.setBlendMode = function(t) {
      if (t !== this.blendMode) {
        this.blendMode = t;
        var e = this.blendModes[t], a = this.gl;
        e.length === 2 ? a.blendFunc(e[0], e[1]) : a.blendFuncSeparate(e[0], e[1], e[2], e[3]), e.length === 6 ? (this._blendEq = !0, a.blendEquationSeparate(e[4], e[5])) : this._blendEq && (this._blendEq = !1, a.blendEquationSeparate(a.FUNC_ADD, a.FUNC_ADD));
      }
    }, i.prototype.setPolygonOffset = function(t, e) {
      this.gl.polygonOffset(t, e);
    }, i.prototype.reset = function() {
      this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1), this.forceState(this.defaultState), this._blendEq = !0, this.blendMode = -1, this.setBlendMode(0);
    }, i.prototype.updateCheck = function(t, e) {
      var a = this.checks.indexOf(t);
      e && a === -1 ? this.checks.push(t) : !e && a !== -1 && this.checks.splice(a, 1);
    }, i.checkBlendMode = function(t, e) {
      t.setBlendMode(e.blendMode);
    }, i.checkPolygonOffset = function(t, e) {
      t.setPolygonOffset(1, e.polygonOffset);
    }, i.prototype.destroy = function() {
      this.gl = null;
    }, i;
  }()
), tl = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.count = 0, this.checkCount = 0, this.maxIdle = mt.GC_MAX_IDLE, this.checkCountMax = mt.GC_MAX_CHECK_COUNT, this.mode = mt.GC_MODE;
    }
    return i.prototype.postrender = function() {
      this.renderer.renderingToScreen && (this.count++, this.mode !== Sn.MANUAL && (this.checkCount++, this.checkCount > this.checkCountMax && (this.checkCount = 0, this.run())));
    }, i.prototype.run = function() {
      for (var t = this.renderer.texture, e = t.managedTextures, a = !1, n = 0; n < e.length; n++) {
        var s = e[n];
        !s.framebuffer && this.count - s.touched > this.maxIdle && (t.destroyTexture(s, !0), e[n] = null, a = !0);
      }
      if (a) {
        for (var o = 0, n = 0; n < e.length; n++)
          e[n] !== null && (e[o++] = e[n]);
        e.length = o;
      }
    }, i.prototype.unload = function(t) {
      var e = this.renderer.texture, a = t._texture;
      a && !a.framebuffer && e.destroyTexture(a);
      for (var n = t.children.length - 1; n >= 0; n--)
        this.unload(t.children[n]);
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i;
  }()
);
function Ky(i) {
  var t, e, a, n, s, o, u, m, g, A, x, w, C, O, L, D, H, k, G, z, Y, K, J;
  return "WebGL2RenderingContext" in globalThis && i instanceof globalThis.WebGL2RenderingContext ? J = (t = {}, t[wt.UNSIGNED_BYTE] = (e = {}, e[ot.RGBA] = i.RGBA8, e[ot.RGB] = i.RGB8, e[ot.RG] = i.RG8, e[ot.RED] = i.R8, e[ot.RGBA_INTEGER] = i.RGBA8UI, e[ot.RGB_INTEGER] = i.RGB8UI, e[ot.RG_INTEGER] = i.RG8UI, e[ot.RED_INTEGER] = i.R8UI, e[ot.ALPHA] = i.ALPHA, e[ot.LUMINANCE] = i.LUMINANCE, e[ot.LUMINANCE_ALPHA] = i.LUMINANCE_ALPHA, e), t[wt.BYTE] = (a = {}, a[ot.RGBA] = i.RGBA8_SNORM, a[ot.RGB] = i.RGB8_SNORM, a[ot.RG] = i.RG8_SNORM, a[ot.RED] = i.R8_SNORM, a[ot.RGBA_INTEGER] = i.RGBA8I, a[ot.RGB_INTEGER] = i.RGB8I, a[ot.RG_INTEGER] = i.RG8I, a[ot.RED_INTEGER] = i.R8I, a), t[wt.UNSIGNED_SHORT] = (n = {}, n[ot.RGBA_INTEGER] = i.RGBA16UI, n[ot.RGB_INTEGER] = i.RGB16UI, n[ot.RG_INTEGER] = i.RG16UI, n[ot.RED_INTEGER] = i.R16UI, n[ot.DEPTH_COMPONENT] = i.DEPTH_COMPONENT16, n), t[wt.SHORT] = (s = {}, s[ot.RGBA_INTEGER] = i.RGBA16I, s[ot.RGB_INTEGER] = i.RGB16I, s[ot.RG_INTEGER] = i.RG16I, s[ot.RED_INTEGER] = i.R16I, s), t[wt.UNSIGNED_INT] = (o = {}, o[ot.RGBA_INTEGER] = i.RGBA32UI, o[ot.RGB_INTEGER] = i.RGB32UI, o[ot.RG_INTEGER] = i.RG32UI, o[ot.RED_INTEGER] = i.R32UI, o[ot.DEPTH_COMPONENT] = i.DEPTH_COMPONENT24, o), t[wt.INT] = (u = {}, u[ot.RGBA_INTEGER] = i.RGBA32I, u[ot.RGB_INTEGER] = i.RGB32I, u[ot.RG_INTEGER] = i.RG32I, u[ot.RED_INTEGER] = i.R32I, u), t[wt.FLOAT] = (m = {}, m[ot.RGBA] = i.RGBA32F, m[ot.RGB] = i.RGB32F, m[ot.RG] = i.RG32F, m[ot.RED] = i.R32F, m[ot.DEPTH_COMPONENT] = i.DEPTH_COMPONENT32F, m), t[wt.HALF_FLOAT] = (g = {}, g[ot.RGBA] = i.RGBA16F, g[ot.RGB] = i.RGB16F, g[ot.RG] = i.RG16F, g[ot.RED] = i.R16F, g), t[wt.UNSIGNED_SHORT_5_6_5] = (A = {}, A[ot.RGB] = i.RGB565, A), t[wt.UNSIGNED_SHORT_4_4_4_4] = (x = {}, x[ot.RGBA] = i.RGBA4, x), t[wt.UNSIGNED_SHORT_5_5_5_1] = (w = {}, w[ot.RGBA] = i.RGB5_A1, w), t[wt.UNSIGNED_INT_2_10_10_10_REV] = (C = {}, C[ot.RGBA] = i.RGB10_A2, C[ot.RGBA_INTEGER] = i.RGB10_A2UI, C), t[wt.UNSIGNED_INT_10F_11F_11F_REV] = (O = {}, O[ot.RGB] = i.R11F_G11F_B10F, O), t[wt.UNSIGNED_INT_5_9_9_9_REV] = (L = {}, L[ot.RGB] = i.RGB9_E5, L), t[wt.UNSIGNED_INT_24_8] = (D = {}, D[ot.DEPTH_STENCIL] = i.DEPTH24_STENCIL8, D), t[wt.FLOAT_32_UNSIGNED_INT_24_8_REV] = (H = {}, H[ot.DEPTH_STENCIL] = i.DEPTH32F_STENCIL8, H), t) : J = (k = {}, k[wt.UNSIGNED_BYTE] = (G = {}, G[ot.RGBA] = i.RGBA, G[ot.RGB] = i.RGB, G[ot.ALPHA] = i.ALPHA, G[ot.LUMINANCE] = i.LUMINANCE, G[ot.LUMINANCE_ALPHA] = i.LUMINANCE_ALPHA, G), k[wt.UNSIGNED_SHORT_5_6_5] = (z = {}, z[ot.RGB] = i.RGB, z), k[wt.UNSIGNED_SHORT_4_4_4_4] = (Y = {}, Y[ot.RGBA] = i.RGBA, Y), k[wt.UNSIGNED_SHORT_5_5_5_1] = (K = {}, K[ot.RGBA] = i.RGBA, K), k), J;
}
var ws = (
  /** @class */
  /* @__PURE__ */ function() {
    function i(t) {
      this.texture = t, this.width = -1, this.height = -1, this.dirtyId = -1, this.dirtyStyleId = -1, this.mipmap = !1, this.wrapMode = 33071, this.type = wt.UNSIGNED_BYTE, this.internalFormat = ot.RGBA, this.samplerType = 0;
    }
    return i;
  }()
), el = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.boundTextures = [], this.currentLocation = -1, this.managedTextures = [], this._unknownBoundTextures = !1, this.unknownTexture = new Qt(), this.hasIntegerTextures = !1;
    }
    return i.prototype.contextChange = function() {
      var t = this.gl = this.renderer.gl;
      this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.webGLVersion = this.renderer.context.webGLVersion, this.internalFormats = Ky(t);
      var e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);
      this.boundTextures.length = e;
      for (var a = 0; a < e; a++)
        this.boundTextures[a] = null;
      this.emptyTextures = {};
      var n = new ws(t.createTexture());
      t.bindTexture(t.TEXTURE_2D, n.texture), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, new Uint8Array(4)), this.emptyTextures[t.TEXTURE_2D] = n, this.emptyTextures[t.TEXTURE_CUBE_MAP] = new ws(t.createTexture()), t.bindTexture(t.TEXTURE_CUBE_MAP, this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);
      for (var a = 0; a < 6; a++)
        t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + a, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, null);
      t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MIN_FILTER, t.LINEAR);
      for (var a = 0; a < this.boundTextures.length; a++)
        this.bind(null, a);
    }, i.prototype.bind = function(t, e) {
      e === void 0 && (e = 0);
      var a = this.gl;
      if (t = t == null ? void 0 : t.castToBaseTexture(), t && t.valid && !t.parentTextureArray) {
        t.touched = this.renderer.textureGC.count;
        var n = t._glTextures[this.CONTEXT_UID] || this.initTexture(t);
        this.boundTextures[e] !== t && (this.currentLocation !== e && (this.currentLocation = e, a.activeTexture(a.TEXTURE0 + e)), a.bindTexture(t.target, n.texture)), n.dirtyId !== t.dirtyId ? (this.currentLocation !== e && (this.currentLocation = e, a.activeTexture(a.TEXTURE0 + e)), this.updateTexture(t)) : n.dirtyStyleId !== t.dirtyStyleId && this.updateTextureStyle(t), this.boundTextures[e] = t;
      } else
        this.currentLocation !== e && (this.currentLocation = e, a.activeTexture(a.TEXTURE0 + e)), a.bindTexture(a.TEXTURE_2D, this.emptyTextures[a.TEXTURE_2D].texture), this.boundTextures[e] = null;
    }, i.prototype.reset = function() {
      this._unknownBoundTextures = !0, this.hasIntegerTextures = !1, this.currentLocation = -1;
      for (var t = 0; t < this.boundTextures.length; t++)
        this.boundTextures[t] = this.unknownTexture;
    }, i.prototype.unbind = function(t) {
      var e = this, a = e.gl, n = e.boundTextures;
      if (this._unknownBoundTextures) {
        this._unknownBoundTextures = !1;
        for (var s = 0; s < n.length; s++)
          n[s] === this.unknownTexture && this.bind(null, s);
      }
      for (var s = 0; s < n.length; s++)
        n[s] === t && (this.currentLocation !== s && (a.activeTexture(a.TEXTURE0 + s), this.currentLocation = s), a.bindTexture(t.target, this.emptyTextures[t.target].texture), n[s] = null);
    }, i.prototype.ensureSamplerType = function(t) {
      var e = this, a = e.boundTextures, n = e.hasIntegerTextures, s = e.CONTEXT_UID;
      if (n)
        for (var o = t - 1; o >= 0; --o) {
          var u = a[o];
          if (u) {
            var m = u._glTextures[s];
            m.samplerType !== An.FLOAT && this.renderer.texture.unbind(u);
          }
        }
    }, i.prototype.initTexture = function(t) {
      var e = new ws(this.gl.createTexture());
      return e.dirtyId = -1, t._glTextures[this.CONTEXT_UID] = e, this.managedTextures.push(t), t.on("dispose", this.destroyTexture, this), e;
    }, i.prototype.initTextureType = function(t, e) {
      var a, n;
      e.internalFormat = (n = (a = this.internalFormats[t.type]) === null || a === void 0 ? void 0 : a[t.format]) !== null && n !== void 0 ? n : t.format, this.webGLVersion === 2 && t.type === wt.HALF_FLOAT ? e.type = this.gl.HALF_FLOAT : e.type = t.type;
    }, i.prototype.updateTexture = function(t) {
      var e = t._glTextures[this.CONTEXT_UID];
      if (e) {
        var a = this.renderer;
        if (this.initTextureType(t, e), t.resource && t.resource.upload(a, t, e))
          e.samplerType !== An.FLOAT && (this.hasIntegerTextures = !0);
        else {
          var n = t.realWidth, s = t.realHeight, o = a.gl;
          (e.width !== n || e.height !== s || e.dirtyId < 0) && (e.width = n, e.height = s, o.texImage2D(t.target, 0, e.internalFormat, n, s, 0, t.format, e.type, null));
        }
        t.dirtyStyleId !== e.dirtyStyleId && this.updateTextureStyle(t), e.dirtyId = t.dirtyId;
      }
    }, i.prototype.destroyTexture = function(t, e) {
      var a = this.gl;
      if (t = t.castToBaseTexture(), t._glTextures[this.CONTEXT_UID] && (this.unbind(t), a.deleteTexture(t._glTextures[this.CONTEXT_UID].texture), t.off("dispose", this.destroyTexture, this), delete t._glTextures[this.CONTEXT_UID], !e)) {
        var n = this.managedTextures.indexOf(t);
        n !== -1 && ra(this.managedTextures, n, 1);
      }
    }, i.prototype.updateTextureStyle = function(t) {
      var e = t._glTextures[this.CONTEXT_UID];
      e && ((t.mipmap === Sr.POW2 || this.webGLVersion !== 2) && !t.isPowerOfTwo ? e.mipmap = !1 : e.mipmap = t.mipmap >= 1, this.webGLVersion !== 2 && !t.isPowerOfTwo ? e.wrapMode = Nr.CLAMP : e.wrapMode = t.wrapMode, t.resource && t.resource.style(this.renderer, t, e) || this.setStyle(t, e), e.dirtyStyleId = t.dirtyStyleId);
    }, i.prototype.setStyle = function(t, e) {
      var a = this.gl;
      if (e.mipmap && t.mipmap !== Sr.ON_MANUAL && a.generateMipmap(t.target), a.texParameteri(t.target, a.TEXTURE_WRAP_S, e.wrapMode), a.texParameteri(t.target, a.TEXTURE_WRAP_T, e.wrapMode), e.mipmap) {
        a.texParameteri(t.target, a.TEXTURE_MIN_FILTER, t.scaleMode === Dr.LINEAR ? a.LINEAR_MIPMAP_LINEAR : a.NEAREST_MIPMAP_NEAREST);
        var n = this.renderer.context.extensions.anisotropicFiltering;
        if (n && t.anisotropicLevel > 0 && t.scaleMode === Dr.LINEAR) {
          var s = Math.min(t.anisotropicLevel, a.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
          a.texParameterf(t.target, n.TEXTURE_MAX_ANISOTROPY_EXT, s);
        }
      } else
        a.texParameteri(t.target, a.TEXTURE_MIN_FILTER, t.scaleMode === Dr.LINEAR ? a.LINEAR : a.NEAREST);
      a.texParameteri(t.target, a.TEXTURE_MAG_FILTER, t.scaleMode === Dr.LINEAR ? a.LINEAR : a.NEAREST);
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i;
  }()
), hd = {
  __proto__: null,
  FilterSystem: Gu,
  BatchSystem: Xu,
  ContextSystem: Vu,
  FramebufferSystem: Yu,
  GeometrySystem: zu,
  MaskSystem: Ku,
  ScissorSystem: Wu,
  StencilSystem: ju,
  ProjectionSystem: Qu,
  RenderTextureSystem: Ju,
  ShaderSystem: qu,
  StateSystem: Zu,
  TextureGCSystem: tl,
  TextureSystem: el
}, Yo = new be(), ud = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e, a) {
      e === void 0 && (e = Ca.UNKNOWN);
      var n = i.call(this) || this;
      return a = Object.assign({}, mt.RENDER_OPTIONS, a), n.options = a, n.type = e, n.screen = new zt(0, 0, a.width, a.height), n.view = a.view || mt.ADAPTER.createCanvas(), n.resolution = a.resolution || mt.RESOLUTION, n.useContextAlpha = a.useContextAlpha, n.autoDensity = !!a.autoDensity, n.preserveDrawingBuffer = a.preserveDrawingBuffer, n.clearBeforeRender = a.clearBeforeRender, n._backgroundColor = 0, n._backgroundColorRgba = [0, 0, 0, 1], n._backgroundColorString = "#000000", n.backgroundColor = a.backgroundColor || n._backgroundColor, n.backgroundAlpha = a.backgroundAlpha, a.transparent !== void 0 && (sr("6.0.0", "Option transparent is deprecated, please use backgroundAlpha instead."), n.useContextAlpha = a.transparent, n.backgroundAlpha = a.transparent ? 0 : 1), n._lastObjectRendered = null, n.plugins = {}, n;
    }
    return t.prototype.initPlugins = function(e) {
      for (var a in e)
        this.plugins[a] = new e[a](this);
    }, Object.defineProperty(t.prototype, "width", {
      /**
       * Same as view.width, actual number of pixels in the canvas by horizontal.
       * @member {number}
       * @readonly
       * @default 800
       */
      get: function() {
        return this.view.width;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * Same as view.height, actual number of pixels in the canvas by vertical.
       * @member {number}
       * @readonly
       * @default 600
       */
      get: function() {
        return this.view.height;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.resize = function(e, a) {
      this.view.width = Math.round(e * this.resolution), this.view.height = Math.round(a * this.resolution);
      var n = this.view.width / this.resolution, s = this.view.height / this.resolution;
      this.screen.width = n, this.screen.height = s, this.autoDensity && (this.view.style.width = n + "px", this.view.style.height = s + "px"), this.emit("resize", n, s);
    }, t.prototype.generateTexture = function(e, a, n, s) {
      a === void 0 && (a = {}), typeof a == "number" && (sr("6.1.0", "generateTexture options (scaleMode, resolution, region) are now object options."), a = { scaleMode: a, resolution: n, region: s });
      var o = a.region, u = hy(a, ["region"]);
      s = o || e.getLocalBounds(null, !0), s.width === 0 && (s.width = 1), s.height === 0 && (s.height = 1);
      var m = Oi.create(Rh({ width: s.width, height: s.height }, u));
      return Yo.tx = -s.x, Yo.ty = -s.y, this.render(e, {
        renderTexture: m,
        clear: !1,
        transform: Yo,
        skipUpdateTransform: !!e.parent
      }), m;
    }, t.prototype.destroy = function(e) {
      for (var a in this.plugins)
        this.plugins[a].destroy(), this.plugins[a] = null;
      e && this.view.parentNode && this.view.parentNode.removeChild(this.view);
      var n = this;
      n.plugins = null, n.type = Ca.UNKNOWN, n.view = null, n.screen = null, n._tempDisplayObjectParent = null, n.options = null, this._backgroundColorRgba = null, this._backgroundColorString = null, this._lastObjectRendered = null;
    }, Object.defineProperty(t.prototype, "backgroundColor", {
      /**
       * The background color to fill if not transparent
       * @member {number}
       */
      get: function() {
        return this._backgroundColor;
      },
      set: function(e) {
        this._backgroundColor = e, this._backgroundColorString = Pu(e), sa(e, this._backgroundColorRgba);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "backgroundAlpha", {
      /**
       * The background color alpha. Setting this to 0 will make the canvas transparent.
       * @member {number}
       */
      get: function() {
        return this._backgroundColorRgba[3];
      },
      set: function(e) {
        this._backgroundColorRgba[3] = e;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(mi)
), Wy = (
  /** @class */
  /* @__PURE__ */ function() {
    function i(t) {
      this.buffer = t || null, this.updateID = -1, this.byteLength = -1, this.refCount = 0;
    }
    return i;
  }()
), jy = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t, this.managedBuffers = {}, this.boundBufferBases = {};
    }
    return i.prototype.destroy = function() {
      this.renderer = null;
    }, i.prototype.contextChange = function() {
      this.disposeAll(!0), this.gl = this.renderer.gl, this.CONTEXT_UID = this.renderer.CONTEXT_UID;
    }, i.prototype.bind = function(t) {
      var e = this, a = e.gl, n = e.CONTEXT_UID, s = t._glBuffers[n] || this.createGLBuffer(t);
      a.bindBuffer(t.type, s.buffer);
    }, i.prototype.bindBufferBase = function(t, e) {
      var a = this, n = a.gl, s = a.CONTEXT_UID;
      if (this.boundBufferBases[e] !== t) {
        var o = t._glBuffers[s] || this.createGLBuffer(t);
        this.boundBufferBases[e] = t, n.bindBufferBase(n.UNIFORM_BUFFER, e, o.buffer);
      }
    }, i.prototype.bindBufferRange = function(t, e, a) {
      var n = this, s = n.gl, o = n.CONTEXT_UID;
      a = a || 0;
      var u = t._glBuffers[o] || this.createGLBuffer(t);
      s.bindBufferRange(s.UNIFORM_BUFFER, e || 0, u.buffer, a * 256, 256);
    }, i.prototype.update = function(t) {
      var e = this, a = e.gl, n = e.CONTEXT_UID, s = t._glBuffers[n];
      if (t._updateID !== s.updateID)
        if (s.updateID = t._updateID, a.bindBuffer(t.type, s.buffer), s.byteLength >= t.data.byteLength)
          a.bufferSubData(t.type, 0, t.data);
        else {
          var o = t.static ? a.STATIC_DRAW : a.DYNAMIC_DRAW;
          s.byteLength = t.data.byteLength, a.bufferData(t.type, t.data, o);
        }
    }, i.prototype.dispose = function(t, e) {
      if (this.managedBuffers[t.id]) {
        delete this.managedBuffers[t.id];
        var a = t._glBuffers[this.CONTEXT_UID], n = this.gl;
        t.disposeRunner.remove(this), a && (e || n.deleteBuffer(a.buffer), delete t._glBuffers[this.CONTEXT_UID]);
      }
    }, i.prototype.disposeAll = function(t) {
      for (var e = Object.keys(this.managedBuffers), a = 0; a < e.length; a++)
        this.dispose(this.managedBuffers[e[a]], t);
    }, i.prototype.createGLBuffer = function(t) {
      var e = this, a = e.CONTEXT_UID, n = e.gl;
      return t._glBuffers[a] = new Wy(n.createBuffer()), this.managedBuffers[t.id] = t, t.disposeRunner.add(this), t._glBuffers[a];
    }, i;
  }()
), rl = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e) {
      var a = i.call(this, Ca.WEBGL, e) || this;
      return e = a.options, a.gl = null, a.CONTEXT_UID = 0, a.runners = {
        destroy: new Ke("destroy"),
        contextChange: new Ke("contextChange"),
        reset: new Ke("reset"),
        update: new Ke("update"),
        postrender: new Ke("postrender"),
        prerender: new Ke("prerender"),
        resize: new Ke("resize")
      }, a.runners.contextChange.add(a), a.globalUniforms = new Pi({
        projectionMatrix: new be()
      }, !0), a.addSystem(Ku, "mask").addSystem(Vu, "context").addSystem(Zu, "state").addSystem(qu, "shader").addSystem(el, "texture").addSystem(jy, "buffer").addSystem(zu, "geometry").addSystem(Yu, "framebuffer").addSystem(Wu, "scissor").addSystem(ju, "stencil").addSystem(Qu, "projection").addSystem(tl, "textureGC").addSystem(Gu, "filter").addSystem(Ju, "renderTexture").addSystem(Xu, "batch"), a.initPlugins(t.__plugins), a.multisample = void 0, e.context ? a.context.initFromContext(e.context) : a.context.initFromOptions({
        alpha: !!a.useContextAlpha,
        antialias: e.antialias,
        premultipliedAlpha: a.useContextAlpha && a.useContextAlpha !== "notMultiplied",
        stencil: !0,
        preserveDrawingBuffer: e.preserveDrawingBuffer,
        powerPreference: a.options.powerPreference
      }), a.renderingToScreen = !0, Pc(a.context.webGLVersion === 2 ? "WebGL 2" : "WebGL 1"), a.resize(a.options.width, a.options.height), a;
    }
    return t.create = function(e) {
      if (Mc())
        return new t(e);
      throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.');
    }, t.prototype.contextChange = function() {
      var e = this.gl, a;
      if (this.context.webGLVersion === 1) {
        var n = e.getParameter(e.FRAMEBUFFER_BINDING);
        e.bindFramebuffer(e.FRAMEBUFFER, null), a = e.getParameter(e.SAMPLES), e.bindFramebuffer(e.FRAMEBUFFER, n);
      } else {
        var n = e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);
        e.bindFramebuffer(e.DRAW_FRAMEBUFFER, null), a = e.getParameter(e.SAMPLES), e.bindFramebuffer(e.DRAW_FRAMEBUFFER, n);
      }
      a >= _e.HIGH ? this.multisample = _e.HIGH : a >= _e.MEDIUM ? this.multisample = _e.MEDIUM : a >= _e.LOW ? this.multisample = _e.LOW : this.multisample = _e.NONE;
    }, t.prototype.addSystem = function(e, a) {
      var n = new e(this);
      if (this[a])
        throw new Error('Whoops! The name "' + a + '" is already in use');
      this[a] = n;
      for (var s in this.runners)
        this.runners[s].add(n);
      return this;
    }, t.prototype.render = function(e, a) {
      var n, s, o, u;
      if (a && (a instanceof Oi ? (sr("6.0.0", "Renderer#render arguments changed, use options instead."), n = a, s = arguments[2], o = arguments[3], u = arguments[4]) : (n = a.renderTexture, s = a.clear, o = a.transform, u = a.skipUpdateTransform)), this.renderingToScreen = !n, this.runners.prerender.emit(), this.emit("prerender"), this.projection.transform = o, !this.context.isLost) {
        if (n || (this._lastObjectRendered = e), !u) {
          var m = e.enableTempParent();
          e.updateTransform(), e.disableTempParent(m);
        }
        this.renderTexture.bind(n), this.batch.currentRenderer.start(), (s !== void 0 ? s : this.clearBeforeRender) && this.renderTexture.clear(), e.render(this), this.batch.currentRenderer.flush(), n && n.baseTexture.update(), this.runners.postrender.emit(), this.projection.transform = null, this.emit("postrender");
      }
    }, t.prototype.generateTexture = function(e, a, n, s) {
      a === void 0 && (a = {});
      var o = i.prototype.generateTexture.call(this, e, a, n, s);
      return this.framebuffer.blit(), o;
    }, t.prototype.resize = function(e, a) {
      i.prototype.resize.call(this, e, a), this.runners.resize.emit(this.screen.height, this.screen.width);
    }, t.prototype.reset = function() {
      return this.runners.reset.emit(), this;
    }, t.prototype.clear = function() {
      this.renderTexture.bind(), this.renderTexture.clear();
    }, t.prototype.destroy = function(e) {
      this.runners.destroy.emit();
      for (var a in this.runners)
        this.runners[a].destroy();
      i.prototype.destroy.call(this, e), this.gl = null;
    }, Object.defineProperty(t.prototype, "extract", {
      /**
       * Please use `plugins.extract` instead.
       * @member {PIXI.Extract} extract
       * @deprecated since 6.0.0
       * @readonly
       */
      get: function() {
        return sr("6.0.0", "Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."), this.plugins.extract;
      },
      enumerable: !1,
      configurable: !0
    }), t.registerPlugin = function(e, a) {
      sr("6.5.0", "Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."), ri.add({
        name: e,
        type: se.RendererPlugin,
        ref: a
      });
    }, t.__plugins = {}, t;
  }(ud)
);
ri.handleByMap(se.RendererPlugin, rl.__plugins);
function ld(i) {
  return rl.create(i);
}
var Qy = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`, Jy = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`, fd = Qy, il = Jy, qy = (
  /** @class */
  function() {
    function i(t) {
      sr("6.1.0", "System class is deprecated, implemement ISystem interface instead."), this.renderer = t;
    }
    return i.prototype.destroy = function() {
      this.renderer = null;
    }, i;
  }()
), Hs = (
  /** @class */
  /* @__PURE__ */ function() {
    function i() {
      this.texArray = null, this.blend = 0, this.type = xr.TRIANGLES, this.start = 0, this.size = 0, this.data = null;
    }
    return i;
  }()
), Bs = (
  /** @class */
  function() {
    function i() {
      this.elements = [], this.ids = [], this.count = 0;
    }
    return i.prototype.clear = function() {
      for (var t = 0; t < this.count; t++)
        this.elements[t] = null;
      this.count = 0;
    }, i;
  }()
), ks = (
  /** @class */
  function() {
    function i(t) {
      typeof t == "number" ? this.rawBinaryData = new ArrayBuffer(t) : t instanceof Uint8Array ? this.rawBinaryData = t.buffer : this.rawBinaryData = t, this.uint32View = new Uint32Array(this.rawBinaryData), this.float32View = new Float32Array(this.rawBinaryData);
    }
    return Object.defineProperty(i.prototype, "int8View", {
      /** View on the raw binary data as a `Int8Array`. */
      get: function() {
        return this._int8View || (this._int8View = new Int8Array(this.rawBinaryData)), this._int8View;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "uint8View", {
      /** View on the raw binary data as a `Uint8Array`. */
      get: function() {
        return this._uint8View || (this._uint8View = new Uint8Array(this.rawBinaryData)), this._uint8View;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "int16View", {
      /**  View on the raw binary data as a `Int16Array`. */
      get: function() {
        return this._int16View || (this._int16View = new Int16Array(this.rawBinaryData)), this._int16View;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "uint16View", {
      /** View on the raw binary data as a `Uint16Array`. */
      get: function() {
        return this._uint16View || (this._uint16View = new Uint16Array(this.rawBinaryData)), this._uint16View;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "int32View", {
      /** View on the raw binary data as a `Int32Array`. */
      get: function() {
        return this._int32View || (this._int32View = new Int32Array(this.rawBinaryData)), this._int32View;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.view = function(t) {
      return this[t + "View"];
    }, i.prototype.destroy = function() {
      this.rawBinaryData = null, this._int8View = null, this._uint8View = null, this._int16View = null, this._uint16View = null, this._int32View = null, this.uint32View = null, this.float32View = null;
    }, i.sizeOf = function(t) {
      switch (t) {
        case "int8":
        case "uint8":
          return 1;
        case "int16":
        case "uint16":
          return 2;
        case "int32":
        case "uint32":
        case "float32":
          return 4;
        default:
          throw new Error(t + " isn't a valid view type");
      }
    }, i;
  }()
), cd = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e) {
      var a = i.call(this, e) || this;
      return a.shaderGenerator = null, a.geometryClass = null, a.vertexSize = null, a.state = Di.for2d(), a.size = mt.SPRITE_BATCH_SIZE * 4, a._vertexCount = 0, a._indexCount = 0, a._bufferedElements = [], a._bufferedTextures = [], a._bufferSize = 0, a._shader = null, a._packedGeometries = [], a._packedGeometryPoolSize = 2, a._flushId = 0, a._aBuffers = {}, a._iBuffers = {}, a.MAX_TEXTURES = 1, a.renderer.on("prerender", a.onPrerender, a), e.runners.contextChange.add(a), a._dcIndex = 0, a._aIndex = 0, a._iIndex = 0, a._attributeBuffer = null, a._indexBuffer = null, a._tempBoundTextures = [], a;
    }
    return t.prototype.contextChange = function() {
      var e = this.renderer.gl;
      mt.PREFER_ENV === Zr.WEBGL_LEGACY ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS), mt.SPRITE_MAX_TEXTURES), this.MAX_TEXTURES = Zc(this.MAX_TEXTURES, e)), this._shader = this.shaderGenerator.generateShader(this.MAX_TEXTURES);
      for (var a = 0; a < this._packedGeometryPoolSize; a++)
        this._packedGeometries[a] = new this.geometryClass();
      this.initFlushBuffers();
    }, t.prototype.initFlushBuffers = function() {
      for (var e = t._drawCallPool, a = t._textureArrayPool, n = this.size / 4, s = Math.floor(n / this.MAX_TEXTURES) + 1; e.length < n; )
        e.push(new Hs());
      for (; a.length < s; )
        a.push(new Bs());
      for (var o = 0; o < this.MAX_TEXTURES; o++)
        this._tempBoundTextures[o] = null;
    }, t.prototype.onPrerender = function() {
      this._flushId = 0;
    }, t.prototype.render = function(e) {
      e._texture.valid && (this._vertexCount + e.vertexData.length / 2 > this.size && this.flush(), this._vertexCount += e.vertexData.length / 2, this._indexCount += e.indices.length, this._bufferedTextures[this._bufferSize] = e._texture.baseTexture, this._bufferedElements[this._bufferSize++] = e);
    }, t.prototype.buildTexturesAndDrawCalls = function() {
      var e = this, a = e._bufferedTextures, n = e.MAX_TEXTURES, s = t._textureArrayPool, o = this.renderer.batch, u = this._tempBoundTextures, m = this.renderer.textureGC.count, g = ++Qt._globalBatch, A = 0, x = s[0], w = 0;
      o.copyBoundTextures(u, n);
      for (var C = 0; C < this._bufferSize; ++C) {
        var O = a[C];
        a[C] = null, O._batchEnabled !== g && (x.count >= n && (o.boundArray(x, u, g, n), this.buildDrawCalls(x, w, C), w = C, x = s[++A], ++g), O._batchEnabled = g, O.touched = m, x.elements[x.count++] = O);
      }
      x.count > 0 && (o.boundArray(x, u, g, n), this.buildDrawCalls(x, w, this._bufferSize), ++A, ++g);
      for (var C = 0; C < u.length; C++)
        u[C] = null;
      Qt._globalBatch = g;
    }, t.prototype.buildDrawCalls = function(e, a, n) {
      var s = this, o = s._bufferedElements, u = s._attributeBuffer, m = s._indexBuffer, g = s.vertexSize, A = t._drawCallPool, x = this._dcIndex, w = this._aIndex, C = this._iIndex, O = A[x];
      O.start = this._iIndex, O.texArray = e;
      for (var L = a; L < n; ++L) {
        var D = o[L], H = D._texture.baseTexture, k = Cu[H.alphaMode ? 1 : 0][D.blendMode];
        o[L] = null, a < L && O.blend !== k && (O.size = C - O.start, a = L, O = A[++x], O.texArray = e, O.start = C), this.packInterleavedGeometry(D, u, m, w, C), w += D.vertexData.length / 2 * g, C += D.indices.length, O.blend = k;
      }
      a < n && (O.size = C - O.start, ++x), this._dcIndex = x, this._aIndex = w, this._iIndex = C;
    }, t.prototype.bindAndClearTexArray = function(e) {
      for (var a = this.renderer.texture, n = 0; n < e.count; n++)
        a.bind(e.elements[n], e.ids[n]), e.elements[n] = null;
      e.count = 0;
    }, t.prototype.updateGeometry = function() {
      var e = this, a = e._packedGeometries, n = e._attributeBuffer, s = e._indexBuffer;
      mt.CAN_UPLOAD_SAME_BUFFER ? (a[this._flushId]._buffer.update(n.rawBinaryData), a[this._flushId]._indexBuffer.update(s), this.renderer.geometry.updateBuffers()) : (this._packedGeometryPoolSize <= this._flushId && (this._packedGeometryPoolSize++, a[this._flushId] = new this.geometryClass()), a[this._flushId]._buffer.update(n.rawBinaryData), a[this._flushId]._indexBuffer.update(s), this.renderer.geometry.bind(a[this._flushId]), this.renderer.geometry.updateBuffers(), this._flushId++);
    }, t.prototype.drawBatches = function() {
      for (var e = this._dcIndex, a = this.renderer, n = a.gl, s = a.state, o = t._drawCallPool, u = null, m = 0; m < e; m++) {
        var g = o[m], A = g.texArray, x = g.type, w = g.size, C = g.start, O = g.blend;
        u !== A && (u = A, this.bindAndClearTexArray(A)), this.state.blendMode = O, s.set(this.state), n.drawElements(x, w, n.UNSIGNED_SHORT, C * 2);
      }
    }, t.prototype.flush = function() {
      this._vertexCount !== 0 && (this._attributeBuffer = this.getAttributeBuffer(this._vertexCount), this._indexBuffer = this.getIndexBuffer(this._indexCount), this._aIndex = 0, this._iIndex = 0, this._dcIndex = 0, this.buildTexturesAndDrawCalls(), this.updateGeometry(), this.drawBatches(), this._bufferSize = 0, this._vertexCount = 0, this._indexCount = 0);
    }, t.prototype.start = function() {
      this.renderer.state.set(this.state), this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES), this.renderer.shader.bind(this._shader), mt.CAN_UPLOAD_SAME_BUFFER && this.renderer.geometry.bind(this._packedGeometries[this._flushId]);
    }, t.prototype.stop = function() {
      this.flush();
    }, t.prototype.destroy = function() {
      for (var e = 0; e < this._packedGeometryPoolSize; e++)
        this._packedGeometries[e] && this._packedGeometries[e].destroy();
      this.renderer.off("prerender", this.onPrerender, this), this._aBuffers = null, this._iBuffers = null, this._packedGeometries = null, this._attributeBuffer = null, this._indexBuffer = null, this._shader && (this._shader.destroy(), this._shader = null), i.prototype.destroy.call(this);
    }, t.prototype.getAttributeBuffer = function(e) {
      var a = Pn(Math.ceil(e / 8)), n = Ph(a), s = a * 8;
      this._aBuffers.length <= n && (this._iBuffers.length = n + 1);
      var o = this._aBuffers[s];
      return o || (this._aBuffers[s] = o = new ks(s * this.vertexSize * 4)), o;
    }, t.prototype.getIndexBuffer = function(e) {
      var a = Pn(Math.ceil(e / 12)), n = Ph(a), s = a * 12;
      this._iBuffers.length <= n && (this._iBuffers.length = n + 1);
      var o = this._iBuffers[n];
      return o || (this._iBuffers[n] = o = new Uint16Array(s)), o;
    }, t.prototype.packInterleavedGeometry = function(e, a, n, s, o) {
      for (var u = a.uint32View, m = a.float32View, g = s / this.vertexSize, A = e.uvs, x = e.indices, w = e.vertexData, C = e._texture.baseTexture._batchLocation, O = Math.min(e.worldAlpha, 1), L = O < 1 && e._texture.baseTexture.alphaMode ? Ws(e._tintRGB, O) : e._tintRGB + (O * 255 << 24), D = 0; D < w.length; D += 2)
        m[s++] = w[D], m[s++] = w[D + 1], m[s++] = A[D], m[s++] = A[D + 1], u[s++] = L, m[s++] = C;
      for (var D = 0; D < x.length; D++)
        n[o++] = g + x[D];
    }, t._drawCallPool = [], t._textureArrayPool = [], t;
  }(Gn)
), dd = (
  /** @class */
  function() {
    function i(t, e) {
      if (this.vertexSrc = t, this.fragTemplate = e, this.programCache = {}, this.defaultGroupCache = {}, e.indexOf("%count%") < 0)
        throw new Error('Fragment template must contain "%count%".');
      if (e.indexOf("%forloop%") < 0)
        throw new Error('Fragment template must contain "%forloop%".');
    }
    return i.prototype.generateShader = function(t) {
      if (!this.programCache[t]) {
        for (var e = new Int32Array(t), a = 0; a < t; a++)
          e[a] = a;
        this.defaultGroupCache[t] = Pi.from({ uSamplers: e }, !0);
        var n = this.fragTemplate;
        n = n.replace(/%count%/gi, "" + t), n = n.replace(/%forloop%/gi, this.generateSampleSrc(t)), this.programCache[t] = new Xa(this.vertexSrc, n);
      }
      var s = {
        tint: new Float32Array([1, 1, 1, 1]),
        translationMatrix: new be(),
        default: this.defaultGroupCache[t]
      };
      return new pi(this.programCache[t], s);
    }, i.prototype.generateSampleSrc = function(t) {
      var e = "";
      e += `
`, e += `
`;
      for (var a = 0; a < t; a++)
        a > 0 && (e += `
else `), a < t - 1 && (e += "if(vTextureId < " + a + ".5)"), e += `
{`, e += `
	color = texture2D(uSamplers[` + a + "], vTextureCoord);", e += `
}`;
      return e += `
`, e += `
`, e;
    }, i;
  }()
), al = (
  /** @class */
  function(i) {
    pe(t, i);
    function t(e) {
      e === void 0 && (e = !1);
      var a = i.call(this) || this;
      return a._buffer = new Fe(null, e, !1), a._indexBuffer = new Fe(null, e, !0), a.addAttribute("aVertexPosition", a._buffer, 2, !1, wt.FLOAT).addAttribute("aTextureCoord", a._buffer, 2, !1, wt.FLOAT).addAttribute("aColor", a._buffer, 4, !0, wt.UNSIGNED_BYTE).addAttribute("aTextureId", a._buffer, 1, !0, wt.FLOAT).addIndex(a._indexBuffer), a;
    }
    return t;
  }(Ga)
), c0 = `precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`, d0 = `varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`, pd = (
  /** @class */
  function() {
    function i() {
    }
    return i.create = function(t) {
      var e = Object.assign({
        vertex: c0,
        fragment: d0,
        geometryClass: al,
        vertexSize: 6
      }, t), a = e.vertex, n = e.fragment, s = e.vertexSize, o = e.geometryClass;
      return (
        /** @class */
        function(u) {
          pe(m, u);
          function m(g) {
            var A = u.call(this, g) || this;
            return A.shaderGenerator = new dd(a, n), A.geometryClass = o, A.vertexSize = s, A;
          }
          return m;
        }(cd)
      );
    }, Object.defineProperty(i, "defaultVertexSrc", {
      /**
       * The default vertex shader source
       * @readonly
       */
      get: function() {
        return c0;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i, "defaultFragmentTemplate", {
      /**
       * The default fragment shader source
       * @readonly
       */
      get: function() {
        return d0;
      },
      enumerable: !1,
      configurable: !0
    }), i;
  }()
), nl = pd.create();
Object.assign(nl, {
  extension: {
    name: "batch",
    type: se.RendererPlugin
  }
});
var _d = {}, Zy = function(i) {
  Object.defineProperty(_d, i, {
    get: function() {
      return sr("6.0.0", "PIXI.systems." + i + " has moved to PIXI." + i), Gc[i];
    }
  });
};
for (var sl in Gc)
  Zy(sl);
var vd = {}, tb = function(i) {
  Object.defineProperty(vd, i, {
    get: function() {
      return sr("6.0.0", "PIXI.resources." + i + " has moved to PIXI." + i), hd[i];
    }
  });
};
for (var sl in hd)
  tb(sl);
var eb = "6.5.10";
/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
mt.SORTABLE_CHILDREN = !1;
var $n = (
  /** @class */
  function() {
    function i() {
      this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0, this.rect = null, this.updateID = -1;
    }
    return i.prototype.isEmpty = function() {
      return this.minX > this.maxX || this.minY > this.maxY;
    }, i.prototype.clear = function() {
      this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0;
    }, i.prototype.getRectangle = function(t) {
      return this.minX > this.maxX || this.minY > this.maxY ? zt.EMPTY : (t = t || new zt(0, 0, 1, 1), t.x = this.minX, t.y = this.minY, t.width = this.maxX - this.minX, t.height = this.maxY - this.minY, t);
    }, i.prototype.addPoint = function(t) {
      this.minX = Math.min(this.minX, t.x), this.maxX = Math.max(this.maxX, t.x), this.minY = Math.min(this.minY, t.y), this.maxY = Math.max(this.maxY, t.y);
    }, i.prototype.addPointMatrix = function(t, e) {
      var a = t.a, n = t.b, s = t.c, o = t.d, u = t.tx, m = t.ty, g = a * e.x + s * e.y + u, A = n * e.x + o * e.y + m;
      this.minX = Math.min(this.minX, g), this.maxX = Math.max(this.maxX, g), this.minY = Math.min(this.minY, A), this.maxY = Math.max(this.maxY, A);
    }, i.prototype.addQuad = function(t) {
      var e = this.minX, a = this.minY, n = this.maxX, s = this.maxY, o = t[0], u = t[1];
      e = o < e ? o : e, a = u < a ? u : a, n = o > n ? o : n, s = u > s ? u : s, o = t[2], u = t[3], e = o < e ? o : e, a = u < a ? u : a, n = o > n ? o : n, s = u > s ? u : s, o = t[4], u = t[5], e = o < e ? o : e, a = u < a ? u : a, n = o > n ? o : n, s = u > s ? u : s, o = t[6], u = t[7], e = o < e ? o : e, a = u < a ? u : a, n = o > n ? o : n, s = u > s ? u : s, this.minX = e, this.minY = a, this.maxX = n, this.maxY = s;
    }, i.prototype.addFrame = function(t, e, a, n, s) {
      this.addFrameMatrix(t.worldTransform, e, a, n, s);
    }, i.prototype.addFrameMatrix = function(t, e, a, n, s) {
      var o = t.a, u = t.b, m = t.c, g = t.d, A = t.tx, x = t.ty, w = this.minX, C = this.minY, O = this.maxX, L = this.maxY, D = o * e + m * a + A, H = u * e + g * a + x;
      w = D < w ? D : w, C = H < C ? H : C, O = D > O ? D : O, L = H > L ? H : L, D = o * n + m * a + A, H = u * n + g * a + x, w = D < w ? D : w, C = H < C ? H : C, O = D > O ? D : O, L = H > L ? H : L, D = o * e + m * s + A, H = u * e + g * s + x, w = D < w ? D : w, C = H < C ? H : C, O = D > O ? D : O, L = H > L ? H : L, D = o * n + m * s + A, H = u * n + g * s + x, w = D < w ? D : w, C = H < C ? H : C, O = D > O ? D : O, L = H > L ? H : L, this.minX = w, this.minY = C, this.maxX = O, this.maxY = L;
    }, i.prototype.addVertexData = function(t, e, a) {
      for (var n = this.minX, s = this.minY, o = this.maxX, u = this.maxY, m = e; m < a; m += 2) {
        var g = t[m], A = t[m + 1];
        n = g < n ? g : n, s = A < s ? A : s, o = g > o ? g : o, u = A > u ? A : u;
      }
      this.minX = n, this.minY = s, this.maxX = o, this.maxY = u;
    }, i.prototype.addVertices = function(t, e, a, n) {
      this.addVerticesMatrix(t.worldTransform, e, a, n);
    }, i.prototype.addVerticesMatrix = function(t, e, a, n, s, o) {
      s === void 0 && (s = 0), o === void 0 && (o = s);
      for (var u = t.a, m = t.b, g = t.c, A = t.d, x = t.tx, w = t.ty, C = this.minX, O = this.minY, L = this.maxX, D = this.maxY, H = a; H < n; H += 2) {
        var k = e[H], G = e[H + 1], z = u * k + g * G + x, Y = A * G + m * k + w;
        C = Math.min(C, z - s), L = Math.max(L, z + s), O = Math.min(O, Y - o), D = Math.max(D, Y + o);
      }
      this.minX = C, this.minY = O, this.maxX = L, this.maxY = D;
    }, i.prototype.addBounds = function(t) {
      var e = this.minX, a = this.minY, n = this.maxX, s = this.maxY;
      this.minX = t.minX < e ? t.minX : e, this.minY = t.minY < a ? t.minY : a, this.maxX = t.maxX > n ? t.maxX : n, this.maxY = t.maxY > s ? t.maxY : s;
    }, i.prototype.addBoundsMask = function(t, e) {
      var a = t.minX > e.minX ? t.minX : e.minX, n = t.minY > e.minY ? t.minY : e.minY, s = t.maxX < e.maxX ? t.maxX : e.maxX, o = t.maxY < e.maxY ? t.maxY : e.maxY;
      if (a <= s && n <= o) {
        var u = this.minX, m = this.minY, g = this.maxX, A = this.maxY;
        this.minX = a < u ? a : u, this.minY = n < m ? n : m, this.maxX = s > g ? s : g, this.maxY = o > A ? o : A;
      }
    }, i.prototype.addBoundsMatrix = function(t, e) {
      this.addFrameMatrix(e, t.minX, t.minY, t.maxX, t.maxY);
    }, i.prototype.addBoundsArea = function(t, e) {
      var a = t.minX > e.x ? t.minX : e.x, n = t.minY > e.y ? t.minY : e.y, s = t.maxX < e.x + e.width ? t.maxX : e.x + e.width, o = t.maxY < e.y + e.height ? t.maxY : e.y + e.height;
      if (a <= s && n <= o) {
        var u = this.minX, m = this.minY, g = this.maxX, A = this.maxY;
        this.minX = a < u ? a : u, this.minY = n < m ? n : m, this.maxX = s > g ? s : g, this.maxY = o > A ? o : A;
      }
    }, i.prototype.pad = function(t, e) {
      t === void 0 && (t = 0), e === void 0 && (e = t), this.isEmpty() || (this.minX -= t, this.maxX += t, this.minY -= e, this.maxY += e);
    }, i.prototype.addFramePad = function(t, e, a, n, s, o) {
      t -= s, e -= o, a += s, n += o, this.minX = this.minX < t ? this.minX : t, this.maxX = this.maxX > a ? this.maxX : a, this.minY = this.minY < e ? this.minY : e, this.maxY = this.maxY > n ? this.maxY : n;
    }, i;
  }()
);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Dh = function(i, t) {
  return Dh = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, Dh(i, t);
};
function ol(i, t) {
  Dh(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Ie = (
  /** @class */
  function(i) {
    ol(t, i);
    function t() {
      var e = i.call(this) || this;
      return e.tempDisplayObjectParent = null, e.transform = new Qs(), e.alpha = 1, e.visible = !0, e.renderable = !0, e.cullable = !1, e.cullArea = null, e.parent = null, e.worldAlpha = 1, e._lastSortedIndex = 0, e._zIndex = 0, e.filterArea = null, e.filters = null, e._enabledFilters = null, e._bounds = new $n(), e._localBounds = null, e._boundsID = 0, e._boundsRect = null, e._localBoundsRect = null, e._mask = null, e._maskRefCount = 0, e._destroyed = !1, e.isSprite = !1, e.isMask = !1, e;
    }
    return t.mixin = function(e) {
      for (var a = Object.keys(e), n = 0; n < a.length; ++n) {
        var s = a[n];
        Object.defineProperty(t.prototype, s, Object.getOwnPropertyDescriptor(e, s));
      }
    }, Object.defineProperty(t.prototype, "destroyed", {
      /**
       * Fired when this DisplayObject is added to a Container.
       * @instance
       * @event added
       * @param {PIXI.Container} container - The container added to.
       */
      /**
       * Fired when this DisplayObject is removed from a Container.
       * @instance
       * @event removed
       * @param {PIXI.Container} container - The container removed from.
       */
      /**
       * Fired when this DisplayObject is destroyed. This event is emitted once
       * destroy is finished.
       * @instance
       * @event destroyed
       */
      /** Readonly flag for destroyed display objects. */
      get: function() {
        return this._destroyed;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._recursivePostUpdateTransform = function() {
      this.parent ? (this.parent._recursivePostUpdateTransform(), this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform);
    }, t.prototype.updateTransform = function() {
      this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;
    }, t.prototype.getBounds = function(e, a) {
      return e || (this.parent ? (this._recursivePostUpdateTransform(), this.updateTransform()) : (this.parent = this._tempDisplayObjectParent, this.updateTransform(), this.parent = null)), this._bounds.updateID !== this._boundsID && (this.calculateBounds(), this._bounds.updateID = this._boundsID), a || (this._boundsRect || (this._boundsRect = new zt()), a = this._boundsRect), this._bounds.getRectangle(a);
    }, t.prototype.getLocalBounds = function(e) {
      e || (this._localBoundsRect || (this._localBoundsRect = new zt()), e = this._localBoundsRect), this._localBounds || (this._localBounds = new $n());
      var a = this.transform, n = this.parent;
      this.parent = null, this.transform = this._tempDisplayObjectParent.transform;
      var s = this._bounds, o = this._boundsID;
      this._bounds = this._localBounds;
      var u = this.getBounds(!1, e);
      return this.parent = n, this.transform = a, this._bounds = s, this._bounds.updateID += this._boundsID - o, u;
    }, t.prototype.toGlobal = function(e, a, n) {
      return n === void 0 && (n = !1), n || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.apply(e, a);
    }, t.prototype.toLocal = function(e, a, n, s) {
      return a && (e = a.toGlobal(e, n, s)), s || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.applyInverse(e, n);
    }, t.prototype.setParent = function(e) {
      if (!e || !e.addChild)
        throw new Error("setParent: Argument must be a Container");
      return e.addChild(this), e;
    }, t.prototype.setTransform = function(e, a, n, s, o, u, m, g, A) {
      return e === void 0 && (e = 0), a === void 0 && (a = 0), n === void 0 && (n = 1), s === void 0 && (s = 1), o === void 0 && (o = 0), u === void 0 && (u = 0), m === void 0 && (m = 0), g === void 0 && (g = 0), A === void 0 && (A = 0), this.position.x = e, this.position.y = a, this.scale.x = n || 1, this.scale.y = s || 1, this.rotation = o, this.skew.x = u, this.skew.y = m, this.pivot.x = g, this.pivot.y = A, this;
    }, t.prototype.destroy = function(e) {
      this.parent && this.parent.removeChild(this), this._destroyed = !0, this.transform = null, this.parent = null, this._bounds = null, this.mask = null, this.cullArea = null, this.filters = null, this.filterArea = null, this.hitArea = null, this.interactive = !1, this.interactiveChildren = !1, this.emit("destroyed"), this.removeAllListeners();
    }, Object.defineProperty(t.prototype, "_tempDisplayObjectParent", {
      /**
       * @protected
       * @member {PIXI.Container}
       */
      get: function() {
        return this.tempDisplayObjectParent === null && (this.tempDisplayObjectParent = new hl()), this.tempDisplayObjectParent;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.enableTempParent = function() {
      var e = this.parent;
      return this.parent = this._tempDisplayObjectParent, e;
    }, t.prototype.disableTempParent = function(e) {
      this.parent = e;
    }, Object.defineProperty(t.prototype, "x", {
      /**
       * The position of the displayObject on the x axis relative to the local coordinates of the parent.
       * An alias to position.x
       */
      get: function() {
        return this.position.x;
      },
      set: function(e) {
        this.transform.position.x = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "y", {
      /**
       * The position of the displayObject on the y axis relative to the local coordinates of the parent.
       * An alias to position.y
       */
      get: function() {
        return this.position.y;
      },
      set: function(e) {
        this.transform.position.y = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "worldTransform", {
      /**
       * Current transform of the object based on world (parent) factors.
       * @readonly
       */
      get: function() {
        return this.transform.worldTransform;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "localTransform", {
      /**
       * Current transform of the object based on local factors: position, scale, other stuff.
       * @readonly
       */
      get: function() {
        return this.transform.localTransform;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "position", {
      /**
       * The coordinate of the object relative to the local coordinates of the parent.
       * @since 4.0.0
       */
      get: function() {
        return this.transform.position;
      },
      set: function(e) {
        this.transform.position.copyFrom(e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "scale", {
      /**
       * The scale factors of this object along the local coordinate axes.
       *
       * The default scale is (1, 1).
       * @since 4.0.0
       */
      get: function() {
        return this.transform.scale;
      },
      set: function(e) {
        this.transform.scale.copyFrom(e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "pivot", {
      /**
       * The center of rotation, scaling, and skewing for this display object in its local space. The `position`
       * is the projection of `pivot` in the parent's local space.
       *
       * By default, the pivot is the origin (0, 0).
       * @since 4.0.0
       */
      get: function() {
        return this.transform.pivot;
      },
      set: function(e) {
        this.transform.pivot.copyFrom(e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "skew", {
      /**
       * The skew factor for the object in radians.
       * @since 4.0.0
       */
      get: function() {
        return this.transform.skew;
      },
      set: function(e) {
        this.transform.skew.copyFrom(e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "rotation", {
      /**
       * The rotation of the object in radians.
       * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.
       */
      get: function() {
        return this.transform.rotation;
      },
      set: function(e) {
        this.transform.rotation = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "angle", {
      /**
       * The angle of the object in degrees.
       * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.
       */
      get: function() {
        return this.transform.rotation * Dc;
      },
      set: function(e) {
        this.transform.rotation = e * Nc;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "zIndex", {
      /**
       * The zIndex of the displayObject.
       *
       * If a container has the sortableChildren property set to true, children will be automatically
       * sorted by zIndex value; a higher value will mean it will be moved towards the end of the array,
       * and thus rendered on top of other display objects within the same container.
       * @see PIXI.Container#sortableChildren
       */
      get: function() {
        return this._zIndex;
      },
      set: function(e) {
        this._zIndex = e, this.parent && (this.parent.sortDirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "worldVisible", {
      /**
       * Indicates if the object is globally visible.
       * @readonly
       */
      get: function() {
        var e = this;
        do {
          if (!e.visible)
            return !1;
          e = e.parent;
        } while (e);
        return !0;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "mask", {
      /**
       * Sets a mask for the displayObject. A mask is an object that limits the visibility of an
       * object to the shape of the mask applied to it. In PixiJS a regular mask must be a
       * {@link PIXI.Graphics} or a {@link PIXI.Sprite} object. This allows for much faster masking in canvas as it
       * utilities shape clipping. Furthermore, a mask of an object must be in the subtree of its parent.
       * Otherwise, `getLocalBounds` may calculate incorrect bounds, which makes the container's width and height wrong.
       * To remove a mask, set this property to `null`.
       *
       * For sprite mask both alpha and red channel are used. Black mask is the same as transparent mask.
       * @example
       * const graphics = new PIXI.Graphics();
       * graphics.beginFill(0xFF3300);
       * graphics.drawRect(50, 250, 100, 100);
       * graphics.endFill();
       *
       * const sprite = new PIXI.Sprite(texture);
       * sprite.mask = graphics;
       * @todo At the moment, PIXI.CanvasRenderer doesn't support PIXI.Sprite as mask.
       */
      get: function() {
        return this._mask;
      },
      set: function(e) {
        if (this._mask !== e) {
          if (this._mask) {
            var a = this._mask.isMaskData ? this._mask.maskObject : this._mask;
            a && (a._maskRefCount--, a._maskRefCount === 0 && (a.renderable = !0, a.isMask = !1));
          }
          if (this._mask = e, this._mask) {
            var a = this._mask.isMaskData ? this._mask.maskObject : this._mask;
            a && (a._maskRefCount === 0 && (a.renderable = !1, a.isMask = !0), a._maskRefCount++);
          }
        }
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(mi)
), hl = (
  /** @class */
  function(i) {
    ol(t, i);
    function t() {
      var e = i !== null && i.apply(this, arguments) || this;
      return e.sortDirty = null, e;
    }
    return t;
  }(Ie)
);
Ie.prototype.displayObjectUpdateTransform = Ie.prototype.updateTransform;
function rb(i, t) {
  return i.zIndex === t.zIndex ? i._lastSortedIndex - t._lastSortedIndex : i.zIndex - t.zIndex;
}
var wr = (
  /** @class */
  function(i) {
    ol(t, i);
    function t() {
      var e = i.call(this) || this;
      return e.children = [], e.sortableChildren = mt.SORTABLE_CHILDREN, e.sortDirty = !1, e;
    }
    return t.prototype.onChildrenChange = function(e) {
    }, t.prototype.addChild = function() {
      for (var e = arguments, a = [], n = 0; n < arguments.length; n++)
        a[n] = e[n];
      if (a.length > 1)
        for (var s = 0; s < a.length; s++)
          this.addChild(a[s]);
      else {
        var o = a[0];
        o.parent && o.parent.removeChild(o), o.parent = this, this.sortDirty = !0, o.transform._parentID = -1, this.children.push(o), this._boundsID++, this.onChildrenChange(this.children.length - 1), this.emit("childAdded", o, this, this.children.length - 1), o.emit("added", this);
      }
      return a[0];
    }, t.prototype.addChildAt = function(e, a) {
      if (a < 0 || a > this.children.length)
        throw new Error(e + "addChildAt: The index " + a + " supplied is out of bounds " + this.children.length);
      return e.parent && e.parent.removeChild(e), e.parent = this, this.sortDirty = !0, e.transform._parentID = -1, this.children.splice(a, 0, e), this._boundsID++, this.onChildrenChange(a), e.emit("added", this), this.emit("childAdded", e, this, a), e;
    }, t.prototype.swapChildren = function(e, a) {
      if (e !== a) {
        var n = this.getChildIndex(e), s = this.getChildIndex(a);
        this.children[n] = a, this.children[s] = e, this.onChildrenChange(n < s ? n : s);
      }
    }, t.prototype.getChildIndex = function(e) {
      var a = this.children.indexOf(e);
      if (a === -1)
        throw new Error("The supplied DisplayObject must be a child of the caller");
      return a;
    }, t.prototype.setChildIndex = function(e, a) {
      if (a < 0 || a >= this.children.length)
        throw new Error("The index " + a + " supplied is out of bounds " + this.children.length);
      var n = this.getChildIndex(e);
      ra(this.children, n, 1), this.children.splice(a, 0, e), this.onChildrenChange(a);
    }, t.prototype.getChildAt = function(e) {
      if (e < 0 || e >= this.children.length)
        throw new Error("getChildAt: Index (" + e + ") does not exist.");
      return this.children[e];
    }, t.prototype.removeChild = function() {
      for (var e = arguments, a = [], n = 0; n < arguments.length; n++)
        a[n] = e[n];
      if (a.length > 1)
        for (var s = 0; s < a.length; s++)
          this.removeChild(a[s]);
      else {
        var o = a[0], u = this.children.indexOf(o);
        if (u === -1)
          return null;
        o.parent = null, o.transform._parentID = -1, ra(this.children, u, 1), this._boundsID++, this.onChildrenChange(u), o.emit("removed", this), this.emit("childRemoved", o, this, u);
      }
      return a[0];
    }, t.prototype.removeChildAt = function(e) {
      var a = this.getChildAt(e);
      return a.parent = null, a.transform._parentID = -1, ra(this.children, e, 1), this._boundsID++, this.onChildrenChange(e), a.emit("removed", this), this.emit("childRemoved", a, this, e), a;
    }, t.prototype.removeChildren = function(e, a) {
      e === void 0 && (e = 0), a === void 0 && (a = this.children.length);
      var n = e, s = a, o = s - n, u;
      if (o > 0 && o <= s) {
        u = this.children.splice(n, o);
        for (var m = 0; m < u.length; ++m)
          u[m].parent = null, u[m].transform && (u[m].transform._parentID = -1);
        this._boundsID++, this.onChildrenChange(e);
        for (var m = 0; m < u.length; ++m)
          u[m].emit("removed", this), this.emit("childRemoved", u[m], this, m);
        return u;
      } else if (o === 0 && this.children.length === 0)
        return [];
      throw new RangeError("removeChildren: numeric values are outside the acceptable range.");
    }, t.prototype.sortChildren = function() {
      for (var e = !1, a = 0, n = this.children.length; a < n; ++a) {
        var s = this.children[a];
        s._lastSortedIndex = a, !e && s.zIndex !== 0 && (e = !0);
      }
      e && this.children.length > 1 && this.children.sort(rb), this.sortDirty = !1;
    }, t.prototype.updateTransform = function() {
      this.sortableChildren && this.sortDirty && this.sortChildren(), this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;
      for (var e = 0, a = this.children.length; e < a; ++e) {
        var n = this.children[e];
        n.visible && n.updateTransform();
      }
    }, t.prototype.calculateBounds = function() {
      this._bounds.clear(), this._calculateBounds();
      for (var e = 0; e < this.children.length; e++) {
        var a = this.children[e];
        if (!(!a.visible || !a.renderable))
          if (a.calculateBounds(), a._mask) {
            var n = a._mask.isMaskData ? a._mask.maskObject : a._mask;
            n ? (n.calculateBounds(), this._bounds.addBoundsMask(a._bounds, n._bounds)) : this._bounds.addBounds(a._bounds);
          } else
            a.filterArea ? this._bounds.addBoundsArea(a._bounds, a.filterArea) : this._bounds.addBounds(a._bounds);
      }
      this._bounds.updateID = this._boundsID;
    }, t.prototype.getLocalBounds = function(e, a) {
      a === void 0 && (a = !1);
      var n = i.prototype.getLocalBounds.call(this, e);
      if (!a)
        for (var s = 0, o = this.children.length; s < o; ++s) {
          var u = this.children[s];
          u.visible && u.updateTransform();
        }
      return n;
    }, t.prototype._calculateBounds = function() {
    }, t.prototype._renderWithCulling = function(e) {
      var a = e.renderTexture.sourceFrame;
      if (a.width > 0 && a.height > 0) {
        var n, s;
        if (this.cullArea ? (n = this.cullArea, s = this.worldTransform) : this._render !== t.prototype._render && (n = this.getBounds(!0)), n && a.intersects(n, s))
          this._render(e);
        else if (this.cullArea)
          return;
        for (var o = 0, u = this.children.length; o < u; ++o) {
          var m = this.children[o], g = m.cullable;
          m.cullable = g || !this.cullArea, m.render(e), m.cullable = g;
        }
      }
    }, t.prototype.render = function(e) {
      if (!(!this.visible || this.worldAlpha <= 0 || !this.renderable))
        if (this._mask || this.filters && this.filters.length)
          this.renderAdvanced(e);
        else if (this.cullable)
          this._renderWithCulling(e);
        else {
          this._render(e);
          for (var a = 0, n = this.children.length; a < n; ++a)
            this.children[a].render(e);
        }
    }, t.prototype.renderAdvanced = function(e) {
      var a = this.filters, n = this._mask;
      if (a) {
        this._enabledFilters || (this._enabledFilters = []), this._enabledFilters.length = 0;
        for (var s = 0; s < a.length; s++)
          a[s].enabled && this._enabledFilters.push(a[s]);
      }
      var o = a && this._enabledFilters && this._enabledFilters.length || n && (!n.isMaskData || n.enabled && (n.autoDetect || n.type !== Me.NONE));
      if (o && e.batch.flush(), a && this._enabledFilters && this._enabledFilters.length && e.filter.push(this, this._enabledFilters), n && e.mask.push(this, this._mask), this.cullable)
        this._renderWithCulling(e);
      else {
        this._render(e);
        for (var s = 0, u = this.children.length; s < u; ++s)
          this.children[s].render(e);
      }
      o && e.batch.flush(), n && e.mask.pop(this), a && this._enabledFilters && this._enabledFilters.length && e.filter.pop();
    }, t.prototype._render = function(e) {
    }, t.prototype.destroy = function(e) {
      i.prototype.destroy.call(this), this.sortDirty = !1;
      var a = typeof e == "boolean" ? e : e && e.children, n = this.removeChildren(0, this.children.length);
      if (a)
        for (var s = 0; s < n.length; ++s)
          n[s].destroy(e);
    }, Object.defineProperty(t.prototype, "width", {
      /** The width of the Container, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this.scale.x * this.getLocalBounds().width;
      },
      set: function(e) {
        var a = this.getLocalBounds().width;
        a !== 0 ? this.scale.x = e / a : this.scale.x = 1, this._width = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      /** The height of the Container, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this.scale.y * this.getLocalBounds().height;
      },
      set: function(e) {
        var a = this.getLocalBounds().height;
        a !== 0 ? this.scale.y = e / a : this.scale.y = 1, this._height = e;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(Ie)
);
wr.prototype.containerUpdateTransform = wr.prototype.updateTransform;
var Bi = Math.pow, Te = (i, t, e) => new Promise((a, n) => {
  var s = (m) => {
    try {
      u(e.next(m));
    } catch (g) {
      n(g);
    }
  }, o = (m) => {
    try {
      u(e.throw(m));
    } catch (g) {
      n(g);
    }
  }, u = (m) => m.done ? a(m.value) : Promise.resolve(m.value).then(s, o);
  u((e = e.apply(i, t)).next());
});
const p0 = 2, _0 = 2;
var Rn;
((i) => {
  i.supportMoreMaskDivisions = !0, i.setOpacityFromMotion = !1;
})(Rn || (Rn = {}));
var qe;
((i) => {
  i.LOG_LEVEL_VERBOSE = 0, i.LOG_LEVEL_WARNING = 1, i.LOG_LEVEL_ERROR = 2, i.LOG_LEVEL_NONE = 999, i.logLevel = i.LOG_LEVEL_WARNING, i.sound = !0, i.motionSync = !0, i.motionFadingDuration = 500, i.idleMotionFadingDuration = 2e3, i.expressionFadingDuration = 500, i.preserveExpressionOnMotion = !0, i.cubism4 = Rn;
})(qe || (qe = {}));
const ue = {
  log(i, ...t) {
    qe.logLevel <= qe.LOG_LEVEL_VERBOSE && console.log(`[${i}]`, ...t);
  },
  warn(i, ...t) {
    qe.logLevel <= qe.LOG_LEVEL_WARNING && console.warn(`[${i}]`, ...t);
  },
  error(i, ...t) {
    qe.logLevel <= qe.LOG_LEVEL_ERROR && console.error(`[${i}]`, ...t);
  }
};
function Us(i, t, e) {
  return i < t ? t : i > e ? e : i;
}
function ib(i, t) {
  return Math.random() * (t - i) + i;
}
function tn(i, t, e, a, n) {
  const s = t[a];
  s !== null && typeof s === i && (e[n] = s);
}
function en(i, t, e, a, n) {
  const s = t[a];
  Array.isArray(s) && (e[n] = s.filter((o) => o !== null && typeof o === i));
}
function md(i, t) {
  t.forEach((e) => {
    Object.getOwnPropertyNames(e.prototype).forEach((a) => {
      a !== "constructor" && Object.defineProperty(i.prototype, a, Object.getOwnPropertyDescriptor(e.prototype, a));
    });
  });
}
function ab(i) {
  let t = i.lastIndexOf("/");
  return t != -1 && (i = i.slice(0, t)), t = i.lastIndexOf("/"), t !== -1 && (i = i.slice(t + 1)), i;
}
function nb(i, t) {
  const e = i.indexOf(t);
  e !== -1 && i.splice(e, 1);
}
class ul extends mi {
  constructor(t, e) {
    super(), this.expressions = [], this.reserveExpressionIndex = -1, this.destroyed = !1, this.settings = t, this.tag = `ExpressionManager(${t.name})`;
  }
  init() {
    this.defaultExpression = this.createExpression({}, void 0), this.currentExpression = this.defaultExpression, this.stopAllExpressions();
  }
  loadExpression(t) {
    return Te(this, null, function* () {
      if (!this.definitions[t]) {
        ue.warn(this.tag, `Undefined expression at [${t}]`);
        return;
      }
      if (this.expressions[t] === null) {
        ue.warn(this.tag, `Cannot set expression at [${t}] because it's already failed in loading.`);
        return;
      }
      if (this.expressions[t])
        return this.expressions[t];
      const e = yield this._loadExpression(t);
      return this.expressions[t] = e, e;
    });
  }
  _loadExpression(t) {
    throw new Error("Not implemented.");
  }
  setRandomExpression() {
    return Te(this, null, function* () {
      if (this.definitions.length) {
        const t = [];
        for (let e = 0; e < this.definitions.length; e++)
          this.expressions[e] !== null && this.expressions[e] !== this.currentExpression && e !== this.reserveExpressionIndex && t.push(e);
        if (t.length) {
          const e = Math.floor(Math.random() * t.length);
          return this.setExpression(e);
        }
      }
      return !1;
    });
  }
  resetExpression() {
    this._setExpression(this.defaultExpression);
  }
  restoreExpression() {
    this._setExpression(this.currentExpression);
  }
  setExpression(t) {
    return Te(this, null, function* () {
      if (typeof t != "number" && (t = this.getExpressionIndex(t)), !(t > -1 && t < this.definitions.length) || t === this.expressions.indexOf(this.currentExpression))
        return !1;
      this.reserveExpressionIndex = t;
      const e = yield this.loadExpression(t);
      return !e || this.reserveExpressionIndex !== t ? !1 : (this.reserveExpressionIndex = -1, this.currentExpression = e, this._setExpression(e), !0);
    });
  }
  update(t, e) {
    return this.isFinished() ? !1 : this.updateParameters(t, e);
  }
  destroy() {
    this.destroyed = !0, this.emit("destroy");
    const t = this;
    t.definitions = void 0, t.expressions = void 0;
  }
}
const v0 = 0.01, sb = 40 / 7.5, ob = 1 / (0.15 * 1e3);
class hb {
  constructor() {
    this.targetX = 0, this.targetY = 0, this.x = 0, this.y = 0, this.vx = 0, this.vy = 0;
  }
  focus(t, e, a = !1) {
    this.targetX = Us(t, -1, 1), this.targetY = Us(e, -1, 1), a && (this.x = this.targetX, this.y = this.targetY);
  }
  update(t) {
    const e = this.targetX - this.x, a = this.targetY - this.y;
    if (Math.abs(e) < v0 && Math.abs(a) < v0)
      return;
    const n = Math.sqrt(Bi(e, 2) + Bi(a, 2)), s = sb / (1e3 / t);
    let o = s * (e / n) - this.vx, u = s * (a / n) - this.vy;
    const m = Math.sqrt(Bi(o, 2) + Bi(u, 2)), g = s * ob * t;
    m > g && (o *= g / m, u *= g / m), this.vx += o, this.vy += u;
    const A = Math.sqrt(Bi(this.vx, 2) + Bi(this.vy, 2)), x = 0.5 * (Math.sqrt(Bi(g, 2) + 8 * g * n) - g);
    A > x && (this.vx *= x / A, this.vy *= x / A), this.x += this.vx, this.y += this.vy;
  }
}
class eo {
  constructor(t) {
    this.json = t;
    let e = t.url;
    if (typeof e != "string")
      throw new TypeError("The `url` field in settings JSON must be defined as a string.");
    this.url = e, this.name = ab(this.url);
  }
  resolveURL(t) {
    return qr.resolve(this.url, t);
  }
  replaceFiles(t) {
    this.moc = t(this.moc, "moc"), this.pose !== void 0 && (this.pose = t(this.pose, "pose")), this.physics !== void 0 && (this.physics = t(this.physics, "physics"));
    for (let e = 0; e < this.textures.length; e++)
      this.textures[e] = t(this.textures[e], `textures[${e}]`);
  }
  getDefinedFiles() {
    const t = [];
    return this.replaceFiles((e) => (t.push(e), e)), t;
  }
  validateFiles(t) {
    const e = (s, o) => {
      const u = this.resolveURL(s);
      if (!t.includes(u)) {
        if (o)
          throw new Error(`File "${s}" is defined in settings, but doesn't exist in given files`);
        return !1;
      }
      return !0;
    };
    return [this.moc, ...this.textures].forEach((s) => e(s, !0)), this.getDefinedFiles().filter((s) => e(s, !1));
  }
}
var Nh = /* @__PURE__ */ ((i) => (i[i.NONE = 0] = "NONE", i[i.IDLE = 1] = "IDLE", i[i.NORMAL = 2] = "NORMAL", i[i.FORCE = 3] = "FORCE", i))(Nh || {});
class ub {
  constructor() {
    this.debug = !1, this.currentPriority = 0, this.reservePriority = 0;
  }
  reserve(t, e, a) {
    if (a <= 0)
      return ue.log(this.tag, "Cannot start a motion with MotionPriority.NONE."), !1;
    if (t === this.currentGroup && e === this.currentIndex)
      return ue.log(this.tag, "Motion is already playing.", this.dump(t, e)), !1;
    if (t === this.reservedGroup && e === this.reservedIndex || t === this.reservedIdleGroup && e === this.reservedIdleIndex)
      return ue.log(this.tag, "Motion is already reserved.", this.dump(t, e)), !1;
    if (a === 1) {
      if (this.currentPriority !== 0)
        return ue.log(this.tag, "Cannot start idle motion because another motion is playing.", this.dump(t, e)), !1;
      if (this.reservedIdleGroup !== void 0)
        return ue.log(this.tag, "Cannot start idle motion because another idle motion has reserved.", this.dump(t, e)), !1;
      this.setReservedIdle(t, e);
    } else {
      if (a < 3) {
        if (a <= this.currentPriority)
          return ue.log(this.tag, "Cannot start motion because another motion is playing as an equivalent or higher priority.", this.dump(t, e)), !1;
        if (a <= this.reservePriority)
          return ue.log(this.tag, "Cannot start motion because another motion has reserved as an equivalent or higher priority.", this.dump(t, e)), !1;
      }
      this.setReserved(t, e, a);
    }
    return !0;
  }
  start(t, e, a, n) {
    if (n === 1) {
      if (this.setReservedIdle(void 0, void 0), this.currentPriority !== 0)
        return ue.log(this.tag, "Cannot start idle motion because another motion is playing.", this.dump(e, a)), !1;
    } else {
      if (e !== this.reservedGroup || a !== this.reservedIndex)
        return ue.log(this.tag, "Cannot start motion because another motion has taken the place.", this.dump(e, a)), !1;
      this.setReserved(void 0, void 0, 0);
    }
    return t ? (this.setCurrent(e, a, n), !0) : !1;
  }
  complete() {
    this.setCurrent(void 0, void 0, 0);
  }
  setCurrent(t, e, a) {
    this.currentPriority = a, this.currentGroup = t, this.currentIndex = e;
  }
  setReserved(t, e, a) {
    this.reservePriority = a, this.reservedGroup = t, this.reservedIndex = e;
  }
  setReservedIdle(t, e) {
    this.reservedIdleGroup = t, this.reservedIdleIndex = e;
  }
  isActive(t, e) {
    return t === this.currentGroup && e === this.currentIndex || t === this.reservedGroup && e === this.reservedIndex || t === this.reservedIdleGroup && e === this.reservedIdleIndex;
  }
  reset() {
    this.setCurrent(void 0, void 0, 0), this.setReserved(void 0, void 0, 0), this.setReservedIdle(void 0, void 0);
  }
  shouldRequestIdleMotion() {
    return this.currentGroup === void 0 && this.reservedIdleGroup === void 0;
  }
  shouldOverrideExpression() {
    return !qe.preserveExpressionOnMotion && this.currentPriority > 1;
  }
  dump(t, e) {
    if (this.debug) {
      const a = [
        "currentPriority",
        "reservePriority",
        "currentGroup",
        "currentIndex",
        "reservedGroup",
        "reservedIndex",
        "reservedIdleGroup",
        "reservedIdleIndex"
      ];
      return `
<Requested> group = "${t}", index = ${e}
` + a.map((n) => "[" + n + "] " + this[n]).join(`
`);
    }
    return "";
  }
}
const lb = "SoundManager", fb = 0.5;
class Si {
  static get volume() {
    return this._volume;
  }
  static set volume(t) {
    this._volume = (t > 1 ? 1 : t < 0 ? 0 : t) || 0, this.audios.forEach((e) => e.volume = this._volume);
  }
  static add(t, e, a) {
    const n = new Audio(t);
    return n.volume = this._volume, n.preload = "auto", n.addEventListener("ended", () => {
      this.dispose(n), e == null || e();
    }), n.addEventListener("error", (s) => {
      this.dispose(n), ue.warn(lb, `Error occurred on "${t}"`, s.error), a == null || a(s.error);
    }), this.audios.push(n), n;
  }
  static play(t) {
    return new Promise((e, a) => {
      var n;
      (n = t.play()) == null || n.catch((s) => {
        t.dispatchEvent(new ErrorEvent("error", { error: s })), a(s);
      }), t.readyState === t.HAVE_ENOUGH_DATA ? e() : t.addEventListener("canplaythrough", e);
    });
  }
  static dispose(t) {
    t.pause(), t.removeAttribute("src"), nb(this.audios, t);
  }
  static destroy() {
    for (let t = this.audios.length - 1; t >= 0; t--)
      this.dispose(this.audios[t]);
  }
}
Si.audios = [];
Si._volume = fb;
class ro extends mi {
  constructor(t, e) {
    super(), this.motionGroups = {}, this.state = new ub(), this.playing = !1, this.destroyed = !1, this.settings = t, this.tag = `MotionManager(${t.name})`, this.state.tag = this.tag;
  }
  init(t) {
    t != null && t.idleMotionGroup && (this.groups.idle = t.idleMotionGroup), this.setupMotions(t), this.stopAllMotions();
  }
  setupMotions(t) {
    for (const a of Object.keys(this.definitions))
      this.motionGroups[a] = [];
    let e;
    switch (t == null ? void 0 : t.motionPreload) {
      case "NONE":
        return;
      case "ALL":
        e = Object.keys(this.definitions);
        break;
      case "IDLE":
      default:
        e = [this.groups.idle];
        break;
    }
    for (const a of e)
      if (this.definitions[a])
        for (let n = 0; n < this.definitions[a].length; n++)
          this.loadMotion(a, n).then();
  }
  loadMotion(t, e) {
    return Te(this, null, function* () {
      var a;
      if (!((a = this.definitions[t]) != null && a[e])) {
        ue.warn(this.tag, `Undefined motion at "${t}"[${e}]`);
        return;
      }
      if (this.motionGroups[t][e] === null) {
        ue.warn(this.tag, `Cannot start motion at "${t}"[${e}] because it's already failed in loading.`);
        return;
      }
      if (this.motionGroups[t][e])
        return this.motionGroups[t][e];
      const n = yield this._loadMotion(t, e);
      if (!this.destroyed)
        return this.motionGroups[t][e] = n != null ? n : null, n;
    });
  }
  _loadMotion(t, e) {
    throw new Error("Not implemented.");
  }
  startMotion(t, e) {
    return Te(this, arguments, function* (a, n, s = Nh.NORMAL) {
      var o;
      if (!this.state.reserve(a, n, s))
        return !1;
      const u = (o = this.definitions[a]) == null ? void 0 : o[n];
      if (!u)
        return !1;
      this.currentAudio && Si.dispose(this.currentAudio);
      let m;
      if (qe.sound) {
        const A = this.getSoundFile(u);
        if (A)
          try {
            m = Si.add(this.settings.resolveURL(A), () => this.currentAudio = void 0, () => this.currentAudio = void 0), this.currentAudio = m;
          } catch (x) {
            ue.warn(this.tag, "Failed to create audio", A, x);
          }
      }
      const g = yield this.loadMotion(a, n);
      if (m) {
        const A = Si.play(m).catch((x) => ue.warn(this.tag, "Failed to play audio", m.src, x));
        qe.motionSync && (yield A);
      }
      return this.state.start(g, a, n, s) ? (ue.log(this.tag, "Start motion:", this.getMotionName(u)), this.emit("motionStart", a, n, m), this.state.shouldOverrideExpression() && this.expressionManager && this.expressionManager.resetExpression(), this.playing = !0, this._startMotion(g), !0) : (m && (Si.dispose(m), this.currentAudio = void 0), !1);
    });
  }
  startRandomMotion(t, e) {
    return Te(this, null, function* () {
      const a = this.definitions[t];
      if (a != null && a.length) {
        const n = [];
        for (let s = 0; s < a.length; s++)
          this.motionGroups[t][s] !== null && !this.state.isActive(t, s) && n.push(s);
        if (n.length) {
          const s = Math.floor(Math.random() * n.length);
          return this.startMotion(t, n[s], e);
        }
      }
      return !1;
    });
  }
  stopAllMotions() {
    this._stopAllMotions(), this.state.reset(), this.currentAudio && (Si.dispose(this.currentAudio), this.currentAudio = void 0);
  }
  update(t, e) {
    var a;
    return this.isFinished() && (this.playing && (this.playing = !1, this.emit("motionFinish")), this.state.shouldOverrideExpression() && ((a = this.expressionManager) == null || a.restoreExpression()), this.state.complete(), this.state.shouldRequestIdleMotion() && this.startRandomMotion(this.groups.idle, Nh.IDLE)), this.updateParameters(t, e);
  }
  destroy() {
    var t;
    this.destroyed = !0, this.emit("destroy"), this.stopAllMotions(), (t = this.expressionManager) == null || t.destroy();
    const e = this;
    e.definitions = void 0, e.motionGroups = void 0;
  }
}
const cb = { x: 0, y: 0, width: 0, height: 0 };
class gd extends mi {
  constructor() {
    super(...arguments), this.focusController = new hb(), this.originalWidth = 0, this.originalHeight = 0, this.width = 0, this.height = 0, this.localTransform = new be(), this.drawingMatrix = new be(), this.hitAreas = {}, this.textureFlipY = !1, this.viewport = [0, 0, 0, 0], this.destroyed = !1;
  }
  init() {
    this.setupLayout(), this.setupHitAreas();
  }
  setupLayout() {
    const t = this, e = this.getSize();
    t.originalWidth = e[0], t.originalHeight = e[1];
    const a = Object.assign({
      width: p0,
      height: _0
    }, this.getLayout());
    this.localTransform.scale(a.width / p0, a.height / _0), t.width = this.originalWidth * this.localTransform.a, t.height = this.originalHeight * this.localTransform.d;
    const n = a.x !== void 0 && a.x - a.width / 2 || a.centerX !== void 0 && a.centerX || a.left !== void 0 && a.left - a.width / 2 || a.right !== void 0 && a.right + a.width / 2 || 0, s = a.y !== void 0 && a.y - a.height / 2 || a.centerY !== void 0 && a.centerY || a.top !== void 0 && a.top - a.height / 2 || a.bottom !== void 0 && a.bottom + a.height / 2 || 0;
    this.localTransform.translate(this.width * n, -this.height * s);
  }
  setupHitAreas() {
    const t = this.getHitAreaDefs().filter((e) => e.index >= 0);
    for (const e of t)
      this.hitAreas[e.name] = e;
  }
  hitTest(t, e) {
    return Object.keys(this.hitAreas).filter((a) => this.isHit(a, t, e));
  }
  isHit(t, e, a) {
    if (!this.hitAreas[t])
      return !1;
    const n = this.hitAreas[t].index, s = this.getDrawableBounds(n, cb);
    return s.x <= e && e <= s.x + s.width && s.y <= a && a <= s.y + s.height;
  }
  getDrawableBounds(t, e) {
    const a = this.getDrawableVertices(t);
    let n = a[0], s = a[0], o = a[1], u = a[1];
    for (let m = 0; m < a.length; m += 2) {
      const g = a[m], A = a[m + 1];
      n = Math.min(g, n), s = Math.max(g, s), o = Math.min(A, o), u = Math.max(A, u);
    }
    return e != null || (e = {}), e.x = n, e.y = o, e.width = s - n, e.height = u - o, e;
  }
  updateTransform(t) {
    this.drawingMatrix.copyFrom(t).append(this.localTransform);
  }
  update(t, e) {
    this.focusController.update(t);
  }
  destroy() {
    this.destroyed = !0, this.emit("destroy"), this.motionManager.destroy(), this.motionManager = void 0;
  }
}
const db = "XHRLoader";
class m0 extends Error {
  constructor(t, e, a, n = !1) {
    super(t), this.url = e, this.status = a, this.aborted = n;
  }
}
const nr = class {
  static createXHR(i, t, e, a, n) {
    const s = new XMLHttpRequest();
    if (nr.allXhrSet.add(s), i) {
      let o = nr.xhrMap.get(i);
      o ? o.add(s) : (o = /* @__PURE__ */ new Set([s]), nr.xhrMap.set(i, o)), i.listeners("destroy").includes(nr.cancelXHRs) || i.once("destroy", nr.cancelXHRs);
    }
    return s.open("GET", t), s.responseType = e, s.onload = () => {
      (s.status === 200 || s.status === 0) && s.response ? a(s.response) : s.onerror();
    }, s.onerror = () => {
      ue.warn(db, `Failed to load resource as ${s.responseType} (Status ${s.status}): ${t}`), n(new m0("Network error.", t, s.status));
    }, s.onabort = () => n(new m0("Aborted.", t, s.status, !0)), s.onloadend = () => {
      var o;
      nr.allXhrSet.delete(s), i && ((o = nr.xhrMap.get(i)) == null || o.delete(s));
    }, s;
  }
  static cancelXHRs() {
    var i;
    (i = nr.xhrMap.get(this)) == null || i.forEach((t) => {
      t.abort(), nr.allXhrSet.delete(t);
    }), nr.xhrMap.delete(this);
  }
  static release() {
    nr.allXhrSet.forEach((i) => i.abort()), nr.allXhrSet.clear(), nr.xhrMap = /* @__PURE__ */ new WeakMap();
  }
};
let io = nr;
io.xhrMap = /* @__PURE__ */ new WeakMap();
io.allXhrSet = /* @__PURE__ */ new Set();
io.loader = (i, t) => new Promise((e, a) => {
  nr.createXHR(i.target, i.settings ? i.settings.resolveURL(i.url) : i.url, i.type, (s) => {
    i.result = s, e();
  }, a).send();
});
function yd(i, t) {
  let e = -1;
  return a(0);
  function a(n, s) {
    if (s)
      return Promise.reject(s);
    if (n <= e)
      return Promise.reject(new Error("next() called multiple times"));
    e = n;
    const o = i[n];
    if (!o)
      return Promise.resolve();
    try {
      return Promise.resolve(o(t, a.bind(null, n + 1)));
    } catch (u) {
      return Promise.reject(u);
    }
  }
}
class $i {
  static load(t) {
    return yd(this.middlewares, t).then(() => t.result);
  }
}
$i.middlewares = [io.loader];
function pb(i, t = {}) {
  var e;
  const a = { resourceOptions: { crossorigin: t.crossOrigin } };
  if (Ot.fromURL)
    return Ot.fromURL(i, a).catch((o) => {
      if (o instanceof Error)
        throw o;
      const u = new Error("Texture loading error");
      throw u.event = o, u;
    });
  a.resourceOptions.autoLoad = !1;
  const n = Ot.from(i, a);
  if (n.baseTexture.valid)
    return Promise.resolve(n);
  const s = n.baseTexture.resource;
  return (e = s._live2d_load) != null || (s._live2d_load = new Promise((o, u) => {
    const m = (g) => {
      s.source.removeEventListener("error", m);
      const A = new Error("Texture loading error");
      A.event = g, u(A);
    };
    s.source.addEventListener("error", m), s.load().then(() => o(n)).catch(m);
  })), s._live2d_load;
}
const g0 = "Live2DFactory", bd = (i, t) => Te(void 0, null, function* () {
  if (typeof i.source == "string") {
    const e = yield $i.load({
      url: i.source,
      type: "json",
      target: i.live2dModel
    });
    e.url = i.source, i.source = e, i.live2dModel.emit("settingsJSONLoaded", e);
  }
  return t();
}), xd = (i, t) => Te(void 0, null, function* () {
  if (i.source instanceof eo)
    return i.settings = i.source, t();
  if (typeof i.source == "object") {
    const e = xe.findRuntime(i.source);
    if (e) {
      const a = e.createModelSettings(i.source);
      return i.settings = a, i.live2dModel.emit("settingsLoaded", a), t();
    }
  }
  throw new TypeError("Unknown settings format.");
}), Td = (i, t) => {
  if (i.settings) {
    const e = xe.findRuntime(i.settings);
    if (e)
      return e.ready().then(t);
  }
  return t();
}, Ad = (i, t) => Te(void 0, null, function* () {
  yield t();
  const e = i.internalModel;
  if (e) {
    const a = i.settings, n = xe.findRuntime(a);
    if (n) {
      const s = [];
      a.pose && s.push($i.load({
        settings: a,
        url: a.pose,
        type: "json",
        target: e
      }).then((o) => {
        e.pose = n.createPose(e.coreModel, o), i.live2dModel.emit("poseLoaded", e.pose);
      }).catch((o) => {
        i.live2dModel.emit("poseLoadError", o), ue.warn(g0, "Failed to load pose.", o);
      })), a.physics && s.push($i.load({
        settings: a,
        url: a.physics,
        type: "json",
        target: e
      }).then((o) => {
        e.physics = n.createPhysics(e.coreModel, o), i.live2dModel.emit("physicsLoaded", e.physics);
      }).catch((o) => {
        i.live2dModel.emit("physicsLoadError", o), ue.warn(g0, "Failed to load physics.", o);
      })), s.length && (yield Promise.all(s));
    }
  }
}), Sd = (i, t) => Te(void 0, null, function* () {
  if (i.settings) {
    const e = i.live2dModel, a = i.settings.textures.map((n) => {
      const s = i.settings.resolveURL(n);
      return pb(s, { crossOrigin: i.options.crossOrigin });
    });
    if (yield t(), i.internalModel)
      e.internalModel = i.internalModel, e.emit("modelLoaded", i.internalModel);
    else
      throw new TypeError("Missing internal model.");
    e.textures = yield Promise.all(a), e.emit("textureLoaded", e.textures);
  } else
    throw new TypeError("Missing settings.");
}), Ed = (i, t) => Te(void 0, null, function* () {
  const e = i.settings;
  if (e instanceof eo) {
    const a = xe.findRuntime(e);
    if (!a)
      throw new TypeError("Unknown model settings.");
    const n = yield $i.load({
      settings: e,
      url: e.moc,
      type: "arraybuffer",
      target: i.live2dModel
    });
    if (!a.isValidMoc(n))
      throw new Error("Invalid moc data");
    const s = a.createCoreModel(n);
    return i.internalModel = a.createInternalModel(s, e, i.options), t();
  }
  throw new TypeError("Missing settings.");
}), Je = class {
  static registerRuntime(i) {
    Je.runtimes.push(i), Je.runtimes.sort((t, e) => e.version - t.version);
  }
  static findRuntime(i) {
    for (const t of Je.runtimes)
      if (t.test(i))
        return t;
  }
  static setupLive2DModel(i, t, e) {
    return Te(this, null, function* () {
      const a = new Promise((o) => i.once("textureLoaded", o)), n = new Promise((o) => i.once("modelLoaded", o)), s = Promise.all([a, n]).then(() => i.emit("ready"));
      yield yd(Je.live2DModelMiddlewares, {
        live2dModel: i,
        source: t,
        options: e || {}
      }), yield s, i.emit("load");
    });
  }
  static loadMotion(i, t, e) {
    var a, n;
    const s = (o) => i.emit("motionLoadError", t, e, o);
    try {
      const o = (a = i.definitions[t]) == null ? void 0 : a[e];
      if (!o)
        return Promise.resolve(void 0);
      i.listeners("destroy").includes(Je.releaseTasks) || i.once("destroy", Je.releaseTasks);
      let u = Je.motionTasksMap.get(i);
      u || (u = {}, Je.motionTasksMap.set(i, u));
      let m = u[t];
      m || (m = [], u[t] = m);
      const g = i.getMotionFile(o);
      return (n = m[e]) != null || (m[e] = $i.load({
        url: g,
        settings: i.settings,
        type: i.motionDataType,
        target: i
      }).then((A) => {
        var x;
        const w = (x = Je.motionTasksMap.get(i)) == null ? void 0 : x[t];
        w && delete w[e];
        const C = i.createMotion(A, t, o);
        return i.emit("motionLoaded", t, e, C), C;
      }).catch((A) => {
        ue.warn(i.tag, `Failed to load motion: ${g}
`, A), s(A);
      })), m[e];
    } catch (o) {
      ue.warn(i.tag, `Failed to load motion at "${t}"[${e}]
`, o), s(o);
    }
    return Promise.resolve(void 0);
  }
  static loadExpression(i, t) {
    var e;
    const a = (n) => i.emit("expressionLoadError", t, n);
    try {
      const n = i.definitions[t];
      if (!n)
        return Promise.resolve(void 0);
      i.listeners("destroy").includes(Je.releaseTasks) || i.once("destroy", Je.releaseTasks);
      let s = Je.expressionTasksMap.get(i);
      s || (s = [], Je.expressionTasksMap.set(i, s));
      const o = i.getExpressionFile(n);
      return (e = s[t]) != null || (s[t] = $i.load({
        url: o,
        settings: i.settings,
        type: "json",
        target: i
      }).then((u) => {
        const m = Je.expressionTasksMap.get(i);
        m && delete m[t];
        const g = i.createExpression(u, n);
        return i.emit("expressionLoaded", t, g), g;
      }).catch((u) => {
        ue.warn(i.tag, `Failed to load expression: ${o}
`, u), a(u);
      })), s[t];
    } catch (n) {
      ue.warn(i.tag, `Failed to load expression at [${t}]
`, n), a(n);
    }
    return Promise.resolve(void 0);
  }
  static releaseTasks() {
    this instanceof ro ? Je.motionTasksMap.delete(this) : Je.expressionTasksMap.delete(this);
  }
};
let xe = Je;
xe.runtimes = [];
xe.urlToJSON = bd;
xe.jsonToSettings = xd;
xe.waitUntilReady = Td;
xe.setupOptionals = Ad;
xe.setupEssentials = Sd;
xe.createInternalModel = Ed;
xe.live2DModelMiddlewares = [
  bd,
  xd,
  Td,
  Ad,
  Sd,
  Ed
];
xe.motionTasksMap = /* @__PURE__ */ new WeakMap();
xe.expressionTasksMap = /* @__PURE__ */ new WeakMap();
ro.prototype._loadMotion = function(i, t) {
  return xe.loadMotion(this, i, t);
};
ul.prototype._loadExpression = function(i) {
  return xe.loadExpression(this, i);
};
class _b {
  constructor() {
    this._autoInteract = !1;
  }
  get autoInteract() {
    return this._autoInteract;
  }
  set autoInteract(t) {
    t !== this._autoInteract && (t ? this.on("pointertap", y0, this) : this.off("pointertap", y0, this), this._autoInteract = t);
  }
  registerInteraction(t) {
    t !== this.interactionManager && (this.unregisterInteraction(), this._autoInteract && t && (this.interactionManager = t, t.on("pointermove", b0, this)));
  }
  unregisterInteraction() {
    var t;
    this.interactionManager && ((t = this.interactionManager) == null || t.off("pointermove", b0, this), this.interactionManager = void 0);
  }
}
function y0(i) {
  this.tap(i.data.global.x, i.data.global.y);
}
function b0(i) {
  this.focus(i.data.global.x, i.data.global.y);
}
class vb extends Qs {
}
const vr = new le(), mb = new be();
let bi;
class wd extends wr {
  constructor(t) {
    super(), this.tag = "Live2DModel(uninitialized)", this.textures = [], this.transform = new vb(), this.anchor = new wi(this.onAnchorChange, this, 0, 0), this.glContextID = -1, this.elapsedTime = performance.now(), this.deltaTime = 0, this._autoUpdate = !1, this.once("modelLoaded", () => this.init(t));
  }
  static from(t, e) {
    const a = new this(e);
    return xe.setupLive2DModel(a, t, e).then(() => a);
  }
  static fromSync(t, e) {
    const a = new this(e);
    return xe.setupLive2DModel(a, t, e).then(e == null ? void 0 : e.onLoad).catch(e == null ? void 0 : e.onError), a;
  }
  static registerTicker(t) {
    bi = t;
  }
  get autoUpdate() {
    return this._autoUpdate;
  }
  set autoUpdate(t) {
    var e;
    bi || (bi = (e = window.PIXI) == null ? void 0 : e.Ticker), t ? this._destroyed || (bi ? (bi.shared.add(this.onTickerUpdate, this), this._autoUpdate = !0) : ue.warn(this.tag, "No Ticker registered, please call Live2DModel.registerTicker(Ticker).")) : (bi == null || bi.shared.remove(this.onTickerUpdate, this), this._autoUpdate = !1);
  }
  init(t) {
    this.tag = `Live2DModel(${this.internalModel.settings.name})`;
    const e = Object.assign({
      autoUpdate: !0,
      autoInteract: !0
    }, t);
    e.autoInteract && (this.interactive = !0), this.autoInteract = e.autoInteract, this.autoUpdate = e.autoUpdate;
  }
  onAnchorChange() {
    this.pivot.set(this.anchor.x * this.internalModel.width, this.anchor.y * this.internalModel.height);
  }
  motion(t, e, a) {
    return e === void 0 ? this.internalModel.motionManager.startRandomMotion(t, a) : this.internalModel.motionManager.startMotion(t, e, a);
  }
  expression(t) {
    return this.internalModel.motionManager.expressionManager ? t === void 0 ? this.internalModel.motionManager.expressionManager.setRandomExpression() : this.internalModel.motionManager.expressionManager.setExpression(t) : Promise.resolve(!1);
  }
  focus(t, e, a = !1) {
    vr.x = t, vr.y = e, this.toModelPosition(vr, vr, !0);
    let n = vr.x / this.internalModel.originalWidth * 2 - 1, s = vr.y / this.internalModel.originalHeight * 2 - 1, o = Math.atan2(s, n);
    this.internalModel.focusController.focus(Math.cos(o), -Math.sin(o), a);
  }
  tap(t, e) {
    const a = this.hitTest(t, e);
    a.length && (ue.log(this.tag, "Hit", a), this.emit("hit", a));
  }
  hitTest(t, e) {
    return vr.x = t, vr.y = e, this.toModelPosition(vr, vr), this.internalModel.hitTest(vr.x, vr.y);
  }
  toModelPosition(t, e = t.clone(), a) {
    return a || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.transform.worldTransform.applyInverse(t, e), this.internalModel.localTransform.applyInverse(e, e), e;
  }
  containsPoint(t) {
    return this.getBounds(!0).contains(t.x, t.y);
  }
  _calculateBounds() {
    this._bounds.addFrame(this.transform, 0, 0, this.internalModel.width, this.internalModel.height);
  }
  onTickerUpdate() {
    this.update(bi.shared.deltaMS);
  }
  update(t) {
    this.deltaTime += t, this.elapsedTime += t;
  }
  _render(t) {
    this.registerInteraction(t.plugins.interaction), t.batch.reset(), t.geometry.reset(), t.shader.reset(), t.state.reset();
    let e = !1;
    this.glContextID !== t.CONTEXT_UID && (this.glContextID = t.CONTEXT_UID, this.internalModel.updateWebGLContext(t.gl, this.glContextID), e = !0);
    for (let s = 0; s < this.textures.length; s++) {
      const o = this.textures[s];
      o.valid && ((e || !o.baseTexture._glTextures[this.glContextID]) && (t.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL, this.internalModel.textureFlipY), t.texture.bind(o.baseTexture, 0)), this.internalModel.bindTexture(s, o.baseTexture._glTextures[this.glContextID].texture), o.baseTexture.touched = t.textureGC.count);
    }
    const a = t.framebuffer.viewport;
    this.internalModel.viewport = [a.x, a.y, a.width, a.height], this.deltaTime && (this.internalModel.update(this.deltaTime, this.elapsedTime), this.deltaTime = 0);
    const n = mb.copyFrom(t.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);
    this.internalModel.updateTransform(n), this.internalModel.draw(t.gl), t.state.reset(), t.texture.reset();
  }
  destroy(t) {
    this.emit("destroy"), this.autoUpdate = !1, this.unregisterInteraction(), t != null && t.texture && this.textures.forEach((e) => e.destroy(t.baseTexture)), this.internalModel.destroy(), super.destroy(t);
  }
}
md(wd, [_b]);
const jr = class {
  static resolveURL(i, t) {
    var e;
    const a = (e = jr.filesMap[i]) == null ? void 0 : e[t];
    if (a === void 0)
      throw new Error("Cannot find this file from uploaded files: " + t);
    return a;
  }
  static upload(i, t) {
    return Te(this, null, function* () {
      const e = {};
      for (const a of t.getDefinedFiles()) {
        const n = decodeURI(qr.resolve(t.url, a)), s = i.find((o) => o.webkitRelativePath === n);
        s && (e[a] = URL.createObjectURL(s));
      }
      jr.filesMap[t._objectURL] = e;
    });
  }
  static createSettings(i) {
    return Te(this, null, function* () {
      const t = i.find((o) => o.name.endsWith("model.json") || o.name.endsWith("model3.json"));
      if (!t)
        throw new TypeError("Settings file not found");
      const e = yield jr.readText(t), a = JSON.parse(e);
      a.url = t.webkitRelativePath;
      const n = xe.findRuntime(a);
      if (!n)
        throw new Error("Unknown settings JSON");
      const s = n.createModelSettings(a);
      return s._objectURL = URL.createObjectURL(t), s;
    });
  }
  static readText(i) {
    return Te(this, null, function* () {
      return new Promise((t, e) => {
        const a = new FileReader();
        a.onload = () => t(a.result), a.onerror = e, a.readAsText(i, "utf8");
      });
    });
  }
};
let ll = jr;
ll.filesMap = {};
ll.factory = (i, t) => Te(void 0, null, function* () {
  if (Array.isArray(i.source) && i.source[0] instanceof File) {
    const e = i.source;
    let a = e.settings;
    if (!a)
      a = yield jr.createSettings(e);
    else if (!a._objectURL)
      throw new Error('"_objectURL" must be specified in ModelSettings');
    a.validateFiles(e.map((n) => encodeURI(n.webkitRelativePath))), yield jr.upload(e, a), a.resolveURL = function(n) {
      return jr.resolveURL(this._objectURL, n);
    }, i.source = a, i.live2dModel.once("modelLoaded", (n) => {
      n.once("destroy", function() {
        const s = this.settings._objectURL;
        if (URL.revokeObjectURL(s), jr.filesMap[s])
          for (const o of Object.values(jr.filesMap[s]))
            URL.revokeObjectURL(o);
        delete jr.filesMap[s];
      });
    });
  }
  return t();
});
xe.live2DModelMiddlewares.unshift(ll.factory);
const lr = class {
  static unzip(i, t) {
    return Te(this, null, function* () {
      const e = yield lr.getFilePaths(i), a = [];
      for (const s of t.getDefinedFiles()) {
        const o = decodeURI(qr.resolve(t.url, s));
        e.includes(o) && a.push(o);
      }
      const n = yield lr.getFiles(i, a);
      for (let s = 0; s < n.length; s++) {
        const o = a[s], u = n[s];
        Object.defineProperty(u, "webkitRelativePath", {
          value: o
        });
      }
      return n;
    });
  }
  static createSettings(i) {
    return Te(this, null, function* () {
      const e = (yield lr.getFilePaths(i)).find((o) => o.endsWith("model.json") || o.endsWith("model3.json"));
      if (!e)
        throw new Error("Settings file not found");
      const a = yield lr.readText(i, e);
      if (!a)
        throw new Error("Empty settings file: " + e);
      const n = JSON.parse(a);
      n.url = e;
      const s = xe.findRuntime(n);
      if (!s)
        throw new Error("Unknown settings JSON");
      return s.createModelSettings(n);
    });
  }
  static zipReader(i, t) {
    return Te(this, null, function* () {
      throw new Error("Not implemented");
    });
  }
  static getFilePaths(i) {
    return Te(this, null, function* () {
      throw new Error("Not implemented");
    });
  }
  static getFiles(i, t) {
    return Te(this, null, function* () {
      throw new Error("Not implemented");
    });
  }
  static readText(i, t) {
    return Te(this, null, function* () {
      throw new Error("Not implemented");
    });
  }
  static releaseReader(i) {
  }
};
let ao = lr;
ao.ZIP_PROTOCOL = "zip://";
ao.uid = 0;
ao.factory = (i, t) => Te(void 0, null, function* () {
  const e = i.source;
  let a, n, s;
  if (typeof e == "string" && (e.endsWith(".zip") || e.startsWith(lr.ZIP_PROTOCOL)) ? (e.startsWith(lr.ZIP_PROTOCOL) ? a = e.slice(lr.ZIP_PROTOCOL.length) : a = e, n = yield $i.load({
    url: a,
    type: "blob",
    target: i.live2dModel
  })) : Array.isArray(e) && e.length === 1 && e[0] instanceof File && e[0].name.endsWith(".zip") && (n = e[0], a = URL.createObjectURL(n), s = e.settings), n) {
    if (!n.size)
      throw new Error("Empty zip file");
    const o = yield lr.zipReader(n, a);
    s || (s = yield lr.createSettings(o)), s._objectURL = lr.ZIP_PROTOCOL + lr.uid + "/" + s.url;
    const u = yield lr.unzip(o, s);
    u.settings = s, i.source = u, a.startsWith("blob:") && i.live2dModel.once("modelLoaded", (m) => {
      m.once("destroy", function() {
        URL.revokeObjectURL(a);
      });
    }), lr.releaseReader(o);
  }
  return t();
});
xe.live2DModelMiddlewares.unshift(ao.factory);
if (!window.Live2D)
  throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");
const gb = Live2DMotion.prototype.updateParam;
Live2DMotion.prototype.updateParam = function(i, t) {
  gb.call(this, i, t), t.isFinished() && this.onFinishHandler && (this.onFinishHandler(this), delete this.onFinishHandler);
};
class yb extends AMotion {
  constructor(t) {
    super(), this.params = [], this.setFadeIn(t.fade_in > 0 ? t.fade_in : qe.expressionFadingDuration), this.setFadeOut(t.fade_out > 0 ? t.fade_out : qe.expressionFadingDuration), Array.isArray(t.params) && t.params.forEach((e) => {
      const a = e.calc || "add";
      if (a === "add") {
        const n = e.def || 0;
        e.val -= n;
      } else if (a === "mult") {
        const n = e.def || 1;
        e.val /= n;
      }
      this.params.push({
        calc: a,
        val: e.val,
        id: e.id
      });
    });
  }
  updateParamExe(t, e, a, n) {
    this.params.forEach((s) => {
      t.setParamFloat(s.id, s.val * a);
    });
  }
}
class bb extends ul {
  constructor(t, e) {
    var a;
    super(t, e), this.queueManager = new MotionQueueManager(), this.definitions = (a = this.settings.expressions) != null ? a : [], this.init();
  }
  isFinished() {
    return this.queueManager.isFinished();
  }
  getExpressionIndex(t) {
    return this.definitions.findIndex((e) => e.name === t);
  }
  getExpressionFile(t) {
    return t.file;
  }
  createExpression(t, e) {
    return new yb(t);
  }
  _setExpression(t) {
    return this.queueManager.startMotion(t);
  }
  stopAllExpressions() {
    this.queueManager.stopAllMotions();
  }
  updateParameters(t, e) {
    return this.queueManager.updateParam(t);
  }
}
class xb extends ro {
  constructor(t, e) {
    super(t, e), this.groups = { idle: "idle" }, this.motionDataType = "arraybuffer", this.queueManager = new MotionQueueManager(), this.definitions = this.settings.motions, this.init(e);
  }
  init(t) {
    super.init(t), this.settings.expressions && (this.expressionManager = new bb(this.settings, t));
  }
  isFinished() {
    return this.queueManager.isFinished();
  }
  createMotion(t, e, a) {
    const n = Live2DMotion.loadMotion(t), s = e === this.groups.idle ? qe.idleMotionFadingDuration : qe.motionFadingDuration;
    return n.setFadeIn(a.fade_in > 0 ? a.fade_in : s), n.setFadeOut(a.fade_out > 0 ? a.fade_out : s), n;
  }
  getMotionFile(t) {
    return t.file;
  }
  getMotionName(t) {
    return t.file;
  }
  getSoundFile(t) {
    return t.sound;
  }
  _startMotion(t, e) {
    return t.onFinishHandler = e, this.queueManager.stopAllMotions(), this.queueManager.startMotion(t);
  }
  _stopAllMotions() {
    this.queueManager.stopAllMotions();
  }
  updateParameters(t, e) {
    return this.queueManager.updateParam(t);
  }
  destroy() {
    super.destroy(), this.queueManager = void 0;
  }
}
class Tb {
  constructor(t) {
    this.coreModel = t, this.blinkInterval = 4e3, this.closingDuration = 100, this.closedDuration = 50, this.openingDuration = 150, this.eyeState = 0, this.eyeParamValue = 1, this.closedTimer = 0, this.nextBlinkTimeLeft = this.blinkInterval, this.leftParam = t.getParamIndex("PARAM_EYE_L_OPEN"), this.rightParam = t.getParamIndex("PARAM_EYE_R_OPEN");
  }
  setEyeParams(t) {
    this.eyeParamValue = Us(t, 0, 1), this.coreModel.setParamFloat(this.leftParam, this.eyeParamValue), this.coreModel.setParamFloat(this.rightParam, this.eyeParamValue);
  }
  update(t) {
    switch (this.eyeState) {
      case 0:
        this.nextBlinkTimeLeft -= t, this.nextBlinkTimeLeft < 0 && (this.eyeState = 1, this.nextBlinkTimeLeft = this.blinkInterval + this.closingDuration + this.closedDuration + this.openingDuration + ib(0, 2e3));
        break;
      case 1:
        this.setEyeParams(this.eyeParamValue + t / this.closingDuration), this.eyeParamValue <= 0 && (this.eyeState = 2, this.closedTimer = 0);
        break;
      case 2:
        this.closedTimer += t, this.closedTimer >= this.closedDuration && (this.eyeState = 3);
        break;
      case 3:
        this.setEyeParams(this.eyeParamValue + t / this.openingDuration), this.eyeParamValue >= 1 && (this.eyeState = 0);
    }
  }
}
const ki = new Float32Array([
  1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  1
]);
class Ab extends gd {
  constructor(t, e, a) {
    super(), this.textureFlipY = !0, this.drawDataCount = 0, this.disableCulling = !1, this.coreModel = t, this.settings = e, this.motionManager = new xb(e, a), this.eyeBlink = new Tb(t), this.eyeballXParamIndex = t.getParamIndex("PARAM_EYE_BALL_X"), this.eyeballYParamIndex = t.getParamIndex("PARAM_EYE_BALL_Y"), this.angleXParamIndex = t.getParamIndex("PARAM_ANGLE_X"), this.angleYParamIndex = t.getParamIndex("PARAM_ANGLE_Y"), this.angleZParamIndex = t.getParamIndex("PARAM_ANGLE_Z"), this.bodyAngleXParamIndex = t.getParamIndex("PARAM_BODY_ANGLE_X"), this.breathParamIndex = t.getParamIndex("PARAM_BREATH"), this.init();
  }
  init() {
    super.init(), this.settings.initParams && this.settings.initParams.forEach(({ id: s, value: o }) => this.coreModel.setParamFloat(s, o)), this.settings.initOpacities && this.settings.initOpacities.forEach(({ id: s, value: o }) => this.coreModel.setPartsOpacity(s, o)), this.coreModel.saveParam();
    const t = this.coreModel.getModelContext()._$aS;
    t != null && t.length && (this.drawDataCount = t.length);
    let e = this.coreModel.drawParamWebGL.culling;
    Object.defineProperty(this.coreModel.drawParamWebGL, "culling", {
      set: (s) => e = s,
      get: () => this.disableCulling ? !1 : e
    });
    const a = this.coreModel.getModelContext().clipManager, n = a.setupClip;
    a.setupClip = (s, o) => {
      n.call(a, s, o), o.gl.viewport(...this.viewport);
    };
  }
  getSize() {
    return [this.coreModel.getCanvasWidth(), this.coreModel.getCanvasHeight()];
  }
  getLayout() {
    const t = {};
    if (this.settings.layout)
      for (const e of Object.keys(this.settings.layout)) {
        let a = e;
        e === "center_x" ? a = "centerX" : e === "center_y" && (a = "centerY"), t[a] = this.settings.layout[e];
      }
    return t;
  }
  updateWebGLContext(t, e) {
    const a = this.coreModel.drawParamWebGL;
    a.firstDraw = !0, a.setGL(t), a.glno = e;
    for (const o in a)
      a.hasOwnProperty(o) && a[o] instanceof WebGLBuffer && (a[o] = null);
    const n = this.coreModel.getModelContext().clipManager;
    n.curFrameNo = e;
    const s = t.getParameter(t.FRAMEBUFFER_BINDING);
    n.getMaskRenderTexture(), t.bindFramebuffer(t.FRAMEBUFFER, s);
  }
  bindTexture(t, e) {
    this.coreModel.setTexture(t, e);
  }
  getHitAreaDefs() {
    var t;
    return ((t = this.settings.hitAreas) == null ? void 0 : t.map((e) => ({
      id: e.id,
      name: e.name,
      index: this.coreModel.getDrawDataIndex(e.id)
    }))) || [];
  }
  getDrawableIDs() {
    const t = this.coreModel.getModelContext(), e = [];
    for (let a = 0; a < this.drawDataCount; a++) {
      const n = t.getDrawData(a);
      n && e.push(n.getDrawDataID().id);
    }
    return e;
  }
  getDrawableIndex(t) {
    return this.coreModel.getDrawDataIndex(t);
  }
  getDrawableVertices(t) {
    if (typeof t == "string" && (t = this.coreModel.getDrawDataIndex(t), t === -1))
      throw new TypeError("Unable to find drawable ID: " + t);
    return this.coreModel.getTransformedPoints(t).slice();
  }
  update(t, e) {
    var a, n, s, o;
    super.update(t, e);
    const u = this.coreModel;
    this.emit("beforeMotionUpdate");
    const m = this.motionManager.update(this.coreModel, e);
    this.emit("afterMotionUpdate"), u.saveParam(), (a = this.motionManager.expressionManager) == null || a.update(u, e), m || (n = this.eyeBlink) == null || n.update(t), this.updateFocus(), this.updateNaturalMovements(t, e), (s = this.physics) == null || s.update(e), (o = this.pose) == null || o.update(t), this.emit("beforeModelUpdate"), u.update(), u.loadParam();
  }
  updateFocus() {
    this.coreModel.addToParamFloat(this.eyeballXParamIndex, this.focusController.x), this.coreModel.addToParamFloat(this.eyeballYParamIndex, this.focusController.y), this.coreModel.addToParamFloat(this.angleXParamIndex, this.focusController.x * 30), this.coreModel.addToParamFloat(this.angleYParamIndex, this.focusController.y * 30), this.coreModel.addToParamFloat(this.angleZParamIndex, this.focusController.x * this.focusController.y * -30), this.coreModel.addToParamFloat(this.bodyAngleXParamIndex, this.focusController.x * 10);
  }
  updateNaturalMovements(t, e) {
    const a = e / 1e3 * 2 * Math.PI;
    this.coreModel.addToParamFloat(this.angleXParamIndex, 15 * Math.sin(a / 6.5345) * 0.5), this.coreModel.addToParamFloat(this.angleYParamIndex, 8 * Math.sin(a / 3.5345) * 0.5), this.coreModel.addToParamFloat(this.angleZParamIndex, 10 * Math.sin(a / 5.5345) * 0.5), this.coreModel.addToParamFloat(this.bodyAngleXParamIndex, 4 * Math.sin(a / 15.5345) * 0.5), this.coreModel.setParamFloat(this.breathParamIndex, 0.5 + 0.5 * Math.sin(a / 3.2345));
  }
  draw(t) {
    const e = this.disableCulling;
    t.getParameter(t.FRAMEBUFFER_BINDING) && (this.disableCulling = !0);
    const a = this.drawingMatrix;
    ki[0] = a.a, ki[1] = a.b, ki[4] = a.c, ki[5] = a.d, ki[12] = a.tx, ki[13] = a.ty, this.coreModel.setMatrix(ki), this.coreModel.draw(), this.disableCulling = e;
  }
  destroy() {
    super.destroy(), this.coreModel = void 0;
  }
}
class bn extends eo {
  constructor(t) {
    if (super(t), this.motions = {}, !bn.isValidJSON(t))
      throw new TypeError("Invalid JSON.");
    this.moc = t.model, en("string", t, this, "textures", "textures"), this.copy(t);
  }
  static isValidJSON(t) {
    var e;
    return !!t && typeof t.model == "string" && ((e = t.textures) == null ? void 0 : e.length) > 0 && t.textures.every((a) => typeof a == "string");
  }
  copy(t) {
    tn("string", t, this, "name", "name"), tn("string", t, this, "pose", "pose"), tn("string", t, this, "physics", "physics"), tn("object", t, this, "layout", "layout"), tn("object", t, this, "motions", "motions"), en("object", t, this, "hit_areas", "hitAreas"), en("object", t, this, "expressions", "expressions"), en("object", t, this, "init_params", "initParams"), en("object", t, this, "init_opacities", "initOpacities");
  }
  replaceFiles(t) {
    super.replaceFiles(t);
    for (const [e, a] of Object.entries(this.motions))
      for (let n = 0; n < a.length; n++)
        a[n].file = t(a[n].file, `motions.${e}[${n}].file`), a[n].sound !== void 0 && (a[n].sound = t(a[n].sound, `motions.${e}[${n}].sound`));
    if (this.expressions)
      for (let e = 0; e < this.expressions.length; e++)
        this.expressions[e].file = t(this.expressions[e].file, `expressions[${e}].file`);
  }
}
const Sb = {
  x: PhysicsHair.Src.SRC_TO_X,
  y: PhysicsHair.Src.SRC_TO_Y,
  angle: PhysicsHair.Src.SRC_TO_G_ANGLE
}, Eb = {
  x: PhysicsHair.Src.SRC_TO_X,
  y: PhysicsHair.Src.SRC_TO_Y,
  angle: PhysicsHair.Src.SRC_TO_G_ANGLE
};
class wb {
  constructor(t, e) {
    this.coreModel = t, this.physicsHairs = [], e.physics_hair && (this.physicsHairs = e.physics_hair.map((a) => {
      const n = new PhysicsHair();
      return n.setup(a.setup.length, a.setup.regist, a.setup.mass), a.src.forEach(({ id: s, ptype: o, scale: u, weight: m }) => {
        const g = Sb[o];
        g && n.addSrcParam(g, s, u, m);
      }), a.targets.forEach(({ id: s, ptype: o, scale: u, weight: m }) => {
        const g = Eb[o];
        g && n.addTargetParam(g, s, u, m);
      }), n;
    }));
  }
  update(t) {
    this.physicsHairs.forEach((e) => e.update(this.coreModel, t));
  }
}
class x0 {
  constructor(t) {
    this.id = t, this.paramIndex = -1, this.partsIndex = -1, this.link = [];
  }
  initIndex(t) {
    this.paramIndex = t.getParamIndex("VISIBLE:" + this.id), this.partsIndex = t.getPartsDataIndex(PartsDataID.getID(this.id)), t.setParamFloat(this.paramIndex, 1);
  }
}
class Ib {
  constructor(t, e) {
    this.coreModel = t, this.opacityAnimDuration = 500, this.partsGroups = [], e.parts_visible && (this.partsGroups = e.parts_visible.map(({ group: a }) => a.map(({ id: n, link: s }) => {
      const o = new x0(n);
      return s && (o.link = s.map((u) => new x0(u))), o;
    })), this.init());
  }
  init() {
    this.partsGroups.forEach((t) => {
      t.forEach((e) => {
        if (e.initIndex(this.coreModel), e.paramIndex >= 0) {
          const a = this.coreModel.getParamFloat(e.paramIndex) !== 0;
          this.coreModel.setPartsOpacity(e.partsIndex, a ? 1 : 0), this.coreModel.setParamFloat(e.paramIndex, a ? 1 : 0), e.link.length > 0 && e.link.forEach((n) => n.initIndex(this.coreModel));
        }
      });
    });
  }
  normalizePartsOpacityGroup(t, e) {
    const a = this.coreModel, n = 0.5, s = 0.15;
    let o = 1, u = t.findIndex(({ paramIndex: m, partsIndex: g }) => g >= 0 && a.getParamFloat(m) !== 0);
    if (u >= 0) {
      const m = a.getPartsOpacity(t[u].partsIndex);
      o = Us(m + e / this.opacityAnimDuration, 0, 1);
    } else
      u = 0, o = 1;
    t.forEach(({ partsIndex: m }, g) => {
      if (m >= 0)
        if (u == g)
          a.setPartsOpacity(m, o);
        else {
          let A = a.getPartsOpacity(m), x;
          o < n ? x = o * (n - 1) / n + 1 : x = (1 - o) * n / (1 - n), (1 - x) * (1 - o) > s && (x = 1 - s / (1 - o)), A > x && (A = x), a.setPartsOpacity(m, A);
        }
    });
  }
  copyOpacity(t) {
    const e = this.coreModel;
    t.forEach(({ partsIndex: a, link: n }) => {
      if (a >= 0 && n) {
        const s = e.getPartsOpacity(a);
        n.forEach(({ partsIndex: o }) => {
          o >= 0 && e.setPartsOpacity(o, s);
        });
      }
    });
  }
  update(t) {
    this.partsGroups.forEach((e) => {
      this.normalizePartsOpacityGroup(e, t), this.copyOpacity(e);
    });
  }
}
xe.registerRuntime({
  version: 2,
  test(i) {
    return i instanceof bn || bn.isValidJSON(i);
  },
  ready() {
    return Promise.resolve();
  },
  isValidMoc(i) {
    if (i.byteLength < 3)
      return !1;
    const t = new Int8Array(i, 0, 3);
    return String.fromCharCode(...t) === "moc";
  },
  createModelSettings(i) {
    return new bn(i);
  },
  createCoreModel(i) {
    const t = Live2DModelWebGL.loadModel(i), e = Live2D.getError();
    if (e)
      throw e;
    return t;
  },
  createInternalModel(i, t, e) {
    return new Ab(i, t, e);
  },
  createPose(i, t) {
    return new Ib(i, t);
  },
  createPhysics(i, t) {
    return new wb(i, t);
  }
});
if (!window.Live2DCubismCore)
  throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");
class Nt {
  constructor(t, e) {
    this.x = t || 0, this.y = e || 0;
  }
  add(t) {
    const e = new Nt(0, 0);
    return e.x = this.x + t.x, e.y = this.y + t.y, e;
  }
  substract(t) {
    const e = new Nt(0, 0);
    return e.x = this.x - t.x, e.y = this.y - t.y, e;
  }
  multiply(t) {
    const e = new Nt(0, 0);
    return e.x = this.x * t.x, e.y = this.y * t.y, e;
  }
  multiplyByScaler(t) {
    return this.multiply(new Nt(t, t));
  }
  division(t) {
    const e = new Nt(0, 0);
    return e.x = this.x / t.x, e.y = this.y / t.y, e;
  }
  divisionByScalar(t) {
    return this.division(new Nt(t, t));
  }
  getLength() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }
  getDistanceWith(t) {
    return Math.sqrt((this.x - t.x) * (this.x - t.x) + (this.y - t.y) * (this.y - t.y));
  }
  dot(t) {
    return this.x * t.x + this.y * t.y;
  }
  normalize() {
    const t = Math.pow(this.x * this.x + this.y * this.y, 0.5);
    this.x = this.x / t, this.y = this.y / t;
  }
  isEqual(t) {
    return this.x == t.x && this.y == t.y;
  }
  isNotEqual(t) {
    return !this.isEqual(t);
  }
}
const Is = class {
  static range(i, t, e) {
    return i < t ? i = t : i > e && (i = e), i;
  }
  static sin(i) {
    return Math.sin(i);
  }
  static cos(i) {
    return Math.cos(i);
  }
  static abs(i) {
    return Math.abs(i);
  }
  static sqrt(i) {
    return Math.sqrt(i);
  }
  static cbrt(i) {
    if (i === 0)
      return i;
    let t = i;
    const e = t < 0;
    e && (t = -t);
    let a;
    return t === 1 / 0 ? a = 1 / 0 : (a = Math.exp(Math.log(t) / 3), a = (t / (a * a) + 2 * a) / 3), e ? -a : a;
  }
  static getEasingSine(i) {
    return i < 0 ? 0 : i > 1 ? 1 : 0.5 - 0.5 * this.cos(i * Math.PI);
  }
  static max(i, t) {
    return i > t ? i : t;
  }
  static min(i, t) {
    return i > t ? t : i;
  }
  static degreesToRadian(i) {
    return i / 180 * Math.PI;
  }
  static radianToDegrees(i) {
    return i * 180 / Math.PI;
  }
  static directionToRadian(i, t) {
    const e = Math.atan2(t.y, t.x), a = Math.atan2(i.y, i.x);
    let n = e - a;
    for (; n < -Math.PI; )
      n += Math.PI * 2;
    for (; n > Math.PI; )
      n -= Math.PI * 2;
    return n;
  }
  static directionToDegrees(i, t) {
    const e = this.directionToRadian(i, t);
    let a = this.radianToDegrees(e);
    return t.x - i.x > 0 && (a = -a), a;
  }
  static radianToDirection(i) {
    const t = new Nt();
    return t.x = this.sin(i), t.y = this.cos(i), t;
  }
  static quadraticEquation(i, t, e) {
    return this.abs(i) < Is.Epsilon ? this.abs(t) < Is.Epsilon ? -e : -e / t : -(t + this.sqrt(t * t - 4 * i * e)) / (2 * i);
  }
  static cardanoAlgorithmForBezier(i, t, e, a) {
    if (this.sqrt(i) < Is.Epsilon)
      return this.range(this.quadraticEquation(t, e, a), 0, 1);
    const n = t / i, s = e / i, o = a / i, u = (3 * s - n * n) / 3, m = u / 3, g = (2 * n * n * n - 9 * n * s + 27 * o) / 27, A = g / 2, x = A * A + m * m * m, w = 0.5, C = w + 0.01;
    if (x < 0) {
      const k = -u / 3, G = k * k * k, z = this.sqrt(G), Y = -g / (2 * z), K = this.range(Y, -1, 1), J = Math.acos(K), q = 2 * this.cbrt(z), tt = q * this.cos(J / 3) - n / 3;
      if (this.abs(tt - w) < C)
        return this.range(tt, 0, 1);
      const lt = q * this.cos((J + 2 * Math.PI) / 3) - n / 3;
      if (this.abs(lt - w) < C)
        return this.range(lt, 0, 1);
      const bt = q * this.cos((J + 4 * Math.PI) / 3) - n / 3;
      return this.range(bt, 0, 1);
    }
    if (x == 0) {
      let k;
      A < 0 ? k = this.cbrt(-A) : k = -this.cbrt(A);
      const G = 2 * k - n / 3;
      if (this.abs(G - w) < C)
        return this.range(G, 0, 1);
      const z = -k - n / 3;
      return this.range(z, 0, 1);
    }
    const O = this.sqrt(x), L = this.cbrt(O - A), D = this.cbrt(O + A), H = L - D - n / 3;
    return this.range(H, 0, 1);
  }
  constructor() {
  }
};
let de = Is;
de.Epsilon = 1e-5;
class Ar {
  constructor() {
    this._tr = new Float32Array(16), this.loadIdentity();
  }
  static multiply(t, e, a) {
    const n = new Float32Array([
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ]), s = 4;
    for (let o = 0; o < s; ++o)
      for (let u = 0; u < s; ++u)
        for (let m = 0; m < s; ++m)
          n[u + o * 4] += t[m + o * 4] * e[u + m * 4];
    for (let o = 0; o < 16; ++o)
      a[o] = n[o];
  }
  loadIdentity() {
    const t = new Float32Array([
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ]);
    this.setMatrix(t);
  }
  setMatrix(t) {
    for (let e = 0; e < 16; ++e)
      this._tr[e] = t[e];
  }
  getArray() {
    return this._tr;
  }
  getScaleX() {
    return this._tr[0];
  }
  getScaleY() {
    return this._tr[5];
  }
  getTranslateX() {
    return this._tr[12];
  }
  getTranslateY() {
    return this._tr[13];
  }
  transformX(t) {
    return this._tr[0] * t + this._tr[12];
  }
  transformY(t) {
    return this._tr[5] * t + this._tr[13];
  }
  invertTransformX(t) {
    return (t - this._tr[12]) / this._tr[0];
  }
  invertTransformY(t) {
    return (t - this._tr[13]) / this._tr[5];
  }
  translateRelative(t, e) {
    const a = new Float32Array([
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      t,
      e,
      0,
      1
    ]);
    Ar.multiply(a, this._tr, this._tr);
  }
  translate(t, e) {
    this._tr[12] = t, this._tr[13] = e;
  }
  translateX(t) {
    this._tr[12] = t;
  }
  translateY(t) {
    this._tr[13] = t;
  }
  scaleRelative(t, e) {
    const a = new Float32Array([
      t,
      0,
      0,
      0,
      0,
      e,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ]);
    Ar.multiply(a, this._tr, this._tr);
  }
  scale(t, e) {
    this._tr[0] = t, this._tr[5] = e;
  }
  multiplyByMatrix(t) {
    Ar.multiply(t.getArray(), this._tr, this._tr);
  }
  clone() {
    const t = new Ar();
    for (let e = 0; e < this._tr.length; e++)
      t._tr[e] = this._tr[e];
    return t;
  }
}
class fl {
  initialize(t) {
    this._model = t;
  }
  drawModel() {
    this.getModel() != null && this.doDrawModel();
  }
  setMvpMatrix(t) {
    this._mvpMatrix4x4.setMatrix(t.getArray());
  }
  getMvpMatrix() {
    return this._mvpMatrix4x4;
  }
  setModelColor(t, e, a, n) {
    t < 0 ? t = 0 : t > 1 && (t = 1), e < 0 ? e = 0 : e > 1 && (e = 1), a < 0 ? a = 0 : a > 1 && (a = 1), n < 0 ? n = 0 : n > 1 && (n = 1), this._modelColor.R = t, this._modelColor.G = e, this._modelColor.B = a, this._modelColor.A = n;
  }
  getModelColor() {
    return Object.assign({}, this._modelColor);
  }
  setIsPremultipliedAlpha(t) {
    this._isPremultipliedAlpha = t;
  }
  isPremultipliedAlpha() {
    return this._isPremultipliedAlpha;
  }
  setIsCulling(t) {
    this._isCulling = t;
  }
  isCulling() {
    return this._isCulling;
  }
  setAnisotropy(t) {
    this._anisortopy = t;
  }
  getAnisotropy() {
    return this._anisortopy;
  }
  getModel() {
    return this._model;
  }
  constructor() {
    this._isCulling = !1, this._isPremultipliedAlpha = !1, this._anisortopy = 0, this._modelColor = new un(), this._mvpMatrix4x4 = new Ar(), this._mvpMatrix4x4.loadIdentity();
  }
}
var Mi = /* @__PURE__ */ ((i) => (i[i.CubismBlendMode_Normal = 0] = "CubismBlendMode_Normal", i[i.CubismBlendMode_Additive = 1] = "CubismBlendMode_Additive", i[i.CubismBlendMode_Multiplicative = 2] = "CubismBlendMode_Multiplicative", i))(Mi || {});
class un {
  constructor() {
    this.R = 1, this.G = 1, this.B = 1, this.A = 1;
  }
}
let zr = !1, ga = !1, ya;
const zo = {
  vertexOffset: 0,
  vertexStep: 2
};
class Ln {
  static startUp(t) {
    if (zr)
      return rn("CubismFramework.startUp() is already done."), zr;
    if (Live2DCubismCore._isStarted)
      return zr = !0, !0;
    if (Live2DCubismCore._isStarted = !0, ya = t, ya && Live2DCubismCore.Logging.csmSetLogFunction(ya.logFunction), zr = !0, zr) {
      const e = Live2DCubismCore.Version.csmGetVersion(), a = (e & 4278190080) >> 24, n = (e & 16711680) >> 16, s = e & 65535, o = e;
      rn("Live2D Cubism Core version: {0}.{1}.{2} ({3})", ("00" + a).slice(-2), ("00" + n).slice(-2), ("0000" + s).slice(-4), o);
    }
    return rn("CubismFramework.startUp() is complete."), zr;
  }
  static cleanUp() {
    zr = !1, ga = !1, ya = void 0;
  }
  static initialize() {
    if (!zr) {
      ln("CubismFramework is not started.");
      return;
    }
    if (ga) {
      ln("CubismFramework.initialize() skipped, already initialized.");
      return;
    }
    ga = !0, rn("CubismFramework.initialize() is complete.");
  }
  static dispose() {
    if (!zr) {
      ln("CubismFramework is not started.");
      return;
    }
    if (!ga) {
      ln("CubismFramework.dispose() skipped, not initialized.");
      return;
    }
    fl.staticRelease(), ga = !1, rn("CubismFramework.dispose() is complete.");
  }
  static isStarted() {
    return zr;
  }
  static isInitialized() {
    return ga;
  }
  static coreLogFunction(t) {
    Live2DCubismCore.Logging.csmGetLogFunction() && Live2DCubismCore.Logging.csmGetLogFunction()(t);
  }
  static getLoggingLevel() {
    return ya != null ? ya.loggingLevel : ua.LogLevel_Off;
  }
  constructor() {
  }
}
var ua = /* @__PURE__ */ ((i) => (i[i.LogLevel_Verbose = 0] = "LogLevel_Verbose", i[i.LogLevel_Debug = 1] = "LogLevel_Debug", i[i.LogLevel_Info = 2] = "LogLevel_Info", i[i.LogLevel_Warning = 3] = "LogLevel_Warning", i[i.LogLevel_Error = 4] = "LogLevel_Error", i[i.LogLevel_Off = 5] = "LogLevel_Off", i))(ua || {});
const us = () => {
};
function T0(i, ...t) {
  no.print(ua.LogLevel_Debug, "[CSM][D]" + i + `
`, t);
}
function rn(i, ...t) {
  no.print(ua.LogLevel_Info, "[CSM][I]" + i + `
`, t);
}
function ln(i, ...t) {
  no.print(ua.LogLevel_Warning, "[CSM][W]" + i + `
`, t);
}
function Aa(i, ...t) {
  no.print(ua.LogLevel_Error, "[CSM][E]" + i + `
`, t);
}
class no {
  static print(t, e, a) {
    if (t < Ln.getLoggingLevel())
      return;
    const n = Ln.coreLogFunction;
    if (!n)
      return;
    const s = e.replace(/{(\d+)}/g, (o, u) => a[u]);
    n(s);
  }
  static dumpBytes(t, e, a) {
    for (let n = 0; n < a; n++)
      n % 16 == 0 && n > 0 ? this.print(t, `
`) : n % 8 == 0 && n > 0 && this.print(t, "  "), this.print(t, "{0} ", [e[n] & 255]);
    this.print(t, `
`);
  }
  constructor() {
  }
}
class Id {
  constructor() {
    this._fadeInSeconds = -1, this._fadeOutSeconds = -1, this._weight = 1, this._offsetSeconds = 0, this._firedEventValues = [];
  }
  release() {
    this._weight = 0;
  }
  updateParameters(t, e, a) {
    if (!e.isAvailable() || e.isFinished())
      return;
    if (!e.isStarted()) {
      e.setIsStarted(!0), e.setStartTime(a - this._offsetSeconds), e.setFadeInStartTime(a);
      const u = this.getDuration();
      e.getEndTime() < 0 && e.setEndTime(u <= 0 ? -1 : e.getStartTime() + u);
    }
    let n = this._weight;
    const s = this._fadeInSeconds == 0 ? 1 : de.getEasingSine((a - e.getFadeInStartTime()) / this._fadeInSeconds), o = this._fadeOutSeconds == 0 || e.getEndTime() < 0 ? 1 : de.getEasingSine((e.getEndTime() - a) / this._fadeOutSeconds);
    n = n * s * o, e.setState(a, n), this.doUpdateParameters(t, a, n, e), e.getEndTime() > 0 && e.getEndTime() < a && e.setIsFinished(!0);
  }
  setFadeInTime(t) {
    this._fadeInSeconds = t;
  }
  setFadeOutTime(t) {
    this._fadeOutSeconds = t;
  }
  getFadeOutTime() {
    return this._fadeOutSeconds;
  }
  getFadeInTime() {
    return this._fadeInSeconds;
  }
  setWeight(t) {
    this._weight = t;
  }
  getWeight() {
    return this._weight;
  }
  getDuration() {
    return -1;
  }
  getLoopDuration() {
    return -1;
  }
  setOffsetTime(t) {
    this._offsetSeconds = t;
  }
  getFiredEvent(t, e) {
    return this._firedEventValues;
  }
  setFinishedMotionHandler(t) {
    this._onFinishedMotion = t;
  }
  getFinishedMotionHandler() {
    return this._onFinishedMotion;
  }
}
const A0 = 1;
class cl extends Id {
  constructor() {
    super(), this._parameters = [];
  }
  static create(t) {
    const e = new cl(), a = t.FadeInTime, n = t.FadeOutTime;
    e.setFadeInTime(a !== void 0 ? a : A0), e.setFadeOutTime(n !== void 0 ? n : A0);
    const s = t.Parameters || [];
    for (let o = 0; o < s.length; ++o) {
      const u = s[o], m = u.Id, g = u.Value;
      let A;
      switch (u.Blend) {
        case "Multiply":
          A = ji.ExpressionBlendType_Multiply;
          break;
        case "Overwrite":
          A = ji.ExpressionBlendType_Overwrite;
          break;
        case "Add":
        default:
          A = ji.ExpressionBlendType_Add;
          break;
      }
      const x = {
        parameterId: m,
        blendType: A,
        value: g
      };
      e._parameters.push(x);
    }
    return e;
  }
  doUpdateParameters(t, e, a, n) {
    for (let s = 0; s < this._parameters.length; ++s) {
      const o = this._parameters[s];
      switch (o.blendType) {
        case ji.ExpressionBlendType_Add: {
          t.addParameterValueById(o.parameterId, o.value, a);
          break;
        }
        case ji.ExpressionBlendType_Multiply: {
          t.multiplyParameterValueById(o.parameterId, o.value, a);
          break;
        }
        case ji.ExpressionBlendType_Overwrite: {
          t.setParameterValueById(o.parameterId, o.value, a);
          break;
        }
      }
    }
  }
}
var ji = /* @__PURE__ */ ((i) => (i[i.ExpressionBlendType_Add = 0] = "ExpressionBlendType_Add", i[i.ExpressionBlendType_Multiply = 1] = "ExpressionBlendType_Multiply", i[i.ExpressionBlendType_Overwrite = 2] = "ExpressionBlendType_Overwrite", i))(ji || {});
class Pb {
  constructor() {
    this._autoDelete = !1, this._available = !0, this._finished = !1, this._started = !1, this._startTimeSeconds = -1, this._fadeInStartTimeSeconds = 0, this._endTimeSeconds = -1, this._stateTimeSeconds = 0, this._stateWeight = 0, this._lastEventCheckSeconds = 0, this._motionQueueEntryHandle = this, this._fadeOutSeconds = 0, this._isTriggeredFadeOut = !1;
  }
  release() {
    this._autoDelete && this._motion && this._motion.release();
  }
  setFadeOut(t) {
    this._fadeOutSeconds = t, this._isTriggeredFadeOut = !0;
  }
  startFadeOut(t, e) {
    const a = e + t;
    this._isTriggeredFadeOut = !0, (this._endTimeSeconds < 0 || a < this._endTimeSeconds) && (this._endTimeSeconds = a);
  }
  isFinished() {
    return this._finished;
  }
  isStarted() {
    return this._started;
  }
  getStartTime() {
    return this._startTimeSeconds;
  }
  getFadeInStartTime() {
    return this._fadeInStartTimeSeconds;
  }
  getEndTime() {
    return this._endTimeSeconds;
  }
  setStartTime(t) {
    this._startTimeSeconds = t;
  }
  setFadeInStartTime(t) {
    this._fadeInStartTimeSeconds = t;
  }
  setEndTime(t) {
    this._endTimeSeconds = t;
  }
  setIsFinished(t) {
    this._finished = t;
  }
  setIsStarted(t) {
    this._started = t;
  }
  isAvailable() {
    return this._available;
  }
  setIsAvailable(t) {
    this._available = t;
  }
  setState(t, e) {
    this._stateTimeSeconds = t, this._stateWeight = e;
  }
  getStateTime() {
    return this._stateTimeSeconds;
  }
  getStateWeight() {
    return this._stateWeight;
  }
  getLastCheckEventSeconds() {
    return this._lastEventCheckSeconds;
  }
  setLastCheckEventSeconds(t) {
    this._lastEventCheckSeconds = t;
  }
  isTriggeredFadeOut() {
    return this._isTriggeredFadeOut;
  }
  getFadeOutSeconds() {
    return this._fadeOutSeconds;
  }
}
class Pd {
  constructor() {
    this._userTimeSeconds = 0, this._eventCustomData = null, this._motions = [];
  }
  release() {
    for (let t = 0; t < this._motions.length; ++t)
      this._motions[t] && this._motions[t].release();
    this._motions = void 0;
  }
  startMotion(t, e, a) {
    if (t == null)
      return Mb;
    let n;
    for (let s = 0; s < this._motions.length; ++s)
      n = this._motions[s], n != null && n.setFadeOut(n._motion.getFadeOutTime());
    return n = new Pb(), n._autoDelete = e, n._motion = t, this._motions.push(n), n._motionQueueEntryHandle;
  }
  isFinished() {
    let t = 0;
    for (; t < this._motions.length; ) {
      const e = this._motions[t];
      if (e == null) {
        this._motions.splice(t, 1);
        continue;
      }
      if (e._motion == null) {
        e.release(), this._motions.splice(t, 1);
        continue;
      }
      if (!e.isFinished())
        return !1;
      t++;
    }
    return !0;
  }
  isFinishedByHandle(t) {
    for (let e = 0; e < this._motions.length; e++) {
      const a = this._motions[e];
      if (a != null && a._motionQueueEntryHandle == t && !a.isFinished())
        return !1;
    }
    return !0;
  }
  stopAllMotions() {
    for (let t = 0; t < this._motions.length; t++) {
      const e = this._motions[t];
      e != null && e.release();
    }
    this._motions = [];
  }
  getCubismMotionQueueEntry(t) {
    return this._motions.find((e) => e != null && e._motionQueueEntryHandle == t);
  }
  setEventCallback(t, e = null) {
    this._eventCallBack = t, this._eventCustomData = e;
  }
  doUpdateMotion(t, e) {
    let a = !1, n = 0;
    for (; n < this._motions.length; ) {
      const s = this._motions[n];
      if (s == null) {
        this._motions.splice(n, 1);
        continue;
      }
      const o = s._motion;
      if (o == null) {
        s.release(), this._motions.splice(n, 1);
        continue;
      }
      o.updateParameters(t, s, e), a = !0;
      const u = o.getFiredEvent(s.getLastCheckEventSeconds() - s.getStartTime(), e - s.getStartTime());
      for (let m = 0; m < u.length; ++m)
        this._eventCallBack(this, u[m], this._eventCustomData);
      s.setLastCheckEventSeconds(e), s.isFinished() ? (s.release(), this._motions.splice(n, 1)) : (s.isTriggeredFadeOut() && s.startFadeOut(s.getFadeOutSeconds(), e), n++);
    }
    return a;
  }
}
const Mb = -1;
class Cb extends ul {
  constructor(t, e) {
    var a;
    super(t, e), this.queueManager = new Pd(), this.definitions = (a = t.expressions) != null ? a : [], this.init();
  }
  isFinished() {
    return this.queueManager.isFinished();
  }
  getExpressionIndex(t) {
    return this.definitions.findIndex((e) => e.Name === t);
  }
  getExpressionFile(t) {
    return t.File;
  }
  createExpression(t, e) {
    return cl.create(t);
  }
  _setExpression(t) {
    return this.queueManager.startMotion(t, !1, performance.now());
  }
  stopAllExpressions() {
    this.queueManager.stopAllMotions();
  }
  updateParameters(t, e) {
    return this.queueManager.doUpdateMotion(t, e);
  }
}
class Md {
  constructor(t) {
    this.groups = t.Groups, this.hitAreas = t.HitAreas, this.layout = t.Layout, this.moc = t.FileReferences.Moc, this.expressions = t.FileReferences.Expressions, this.motions = t.FileReferences.Motions, this.textures = t.FileReferences.Textures, this.physics = t.FileReferences.Physics, this.pose = t.FileReferences.Pose;
  }
  getEyeBlinkParameters() {
    var t, e;
    return (e = (t = this.groups) == null ? void 0 : t.find((a) => a.Name === "EyeBlink")) == null ? void 0 : e.Ids;
  }
  getLipSyncParameters() {
    var t, e;
    return (e = (t = this.groups) == null ? void 0 : t.find((a) => a.Name === "LipSync")) == null ? void 0 : e.Ids;
  }
}
class Pa extends eo {
  constructor(t) {
    if (super(t), !Pa.isValidJSON(t))
      throw new TypeError("Invalid JSON.");
    Object.assign(this, new Md(t));
  }
  static isValidJSON(t) {
    var e;
    return !!(t != null && t.FileReferences) && typeof t.FileReferences.Moc == "string" && ((e = t.FileReferences.Textures) == null ? void 0 : e.length) > 0 && t.FileReferences.Textures.every((a) => typeof a == "string");
  }
  replaceFiles(t) {
    if (super.replaceFiles(t), this.motions)
      for (const [e, a] of Object.entries(this.motions))
        for (let n = 0; n < a.length; n++)
          a[n].File = t(a[n].File, `motions.${e}[${n}].File`), a[n].Sound !== void 0 && (a[n].Sound = t(a[n].Sound, `motions.${e}[${n}].Sound`));
    if (this.expressions)
      for (let e = 0; e < this.expressions.length; e++)
        this.expressions[e].File = t(this.expressions[e].File, `expressions[${e}].File`);
  }
}
md(Pa, [Md]);
var Qi = /* @__PURE__ */ ((i) => (i[i.CubismMotionCurveTarget_Model = 0] = "CubismMotionCurveTarget_Model", i[i.CubismMotionCurveTarget_Parameter = 1] = "CubismMotionCurveTarget_Parameter", i[i.CubismMotionCurveTarget_PartOpacity = 2] = "CubismMotionCurveTarget_PartOpacity", i))(Qi || {}), Kr = /* @__PURE__ */ ((i) => (i[i.CubismMotionSegmentType_Linear = 0] = "CubismMotionSegmentType_Linear", i[i.CubismMotionSegmentType_Bezier = 1] = "CubismMotionSegmentType_Bezier", i[i.CubismMotionSegmentType_Stepped = 2] = "CubismMotionSegmentType_Stepped", i[i.CubismMotionSegmentType_InverseStepped = 3] = "CubismMotionSegmentType_InverseStepped", i))(Kr || {});
class Ti {
  constructor(t = 0, e = 0) {
    this.time = t, this.value = e;
  }
}
class Ob {
  constructor() {
    this.basePointIndex = 0, this.segmentType = 0;
  }
}
class $b {
  constructor() {
    this.id = "", this.type = 0, this.segmentCount = 0, this.baseSegmentIndex = 0, this.fadeInTime = 0, this.fadeOutTime = 0;
  }
}
class Rb {
  constructor() {
    this.fireTime = 0, this.value = "";
  }
}
class Lb {
  constructor() {
    this.duration = 0, this.loop = !1, this.curveCount = 0, this.eventCount = 0, this.fps = 0, this.curves = [], this.segments = [], this.points = [], this.events = [];
  }
}
class Cd {
  constructor(t) {
    this._json = t;
  }
  release() {
    this._json = void 0;
  }
  getMotionDuration() {
    return this._json.Meta.Duration;
  }
  isMotionLoop() {
    return this._json.Meta.Loop || !1;
  }
  getEvaluationOptionFlag(t) {
    return dl.EvaluationOptionFlag_AreBeziersRistricted == t ? !!this._json.Meta.AreBeziersRestricted : !1;
  }
  getMotionCurveCount() {
    return this._json.Meta.CurveCount;
  }
  getMotionFps() {
    return this._json.Meta.Fps;
  }
  getMotionTotalSegmentCount() {
    return this._json.Meta.TotalSegmentCount;
  }
  getMotionTotalPointCount() {
    return this._json.Meta.TotalPointCount;
  }
  getMotionFadeInTime() {
    return this._json.Meta.FadeInTime;
  }
  getMotionFadeOutTime() {
    return this._json.Meta.FadeOutTime;
  }
  getMotionCurveTarget(t) {
    return this._json.Curves[t].Target;
  }
  getMotionCurveId(t) {
    return this._json.Curves[t].Id;
  }
  getMotionCurveFadeInTime(t) {
    return this._json.Curves[t].FadeInTime;
  }
  getMotionCurveFadeOutTime(t) {
    return this._json.Curves[t].FadeOutTime;
  }
  getMotionCurveSegmentCount(t) {
    return this._json.Curves[t].Segments.length;
  }
  getMotionCurveSegment(t, e) {
    return this._json.Curves[t].Segments[e];
  }
  getEventCount() {
    return this._json.Meta.UserDataCount || 0;
  }
  getTotalEventValueSize() {
    return this._json.Meta.TotalUserDataSize;
  }
  getEventTime(t) {
    return this._json.UserData[t].Time;
  }
  getEventValue(t) {
    return this._json.UserData[t].Value;
  }
}
var dl = /* @__PURE__ */ ((i) => (i[i.EvaluationOptionFlag_AreBeziersRistricted = 0] = "EvaluationOptionFlag_AreBeziersRistricted", i))(dl || {});
const Db = "EyeBlink", Nb = "LipSync", Fb = "Model", Hb = "Parameter", Bb = "PartOpacity", kb = !1;
function br(i, t, e) {
  const a = new Ti();
  return a.time = i.time + (t.time - i.time) * e, a.value = i.value + (t.value - i.value) * e, a;
}
function Ub(i, t) {
  let e = (t - i[0].time) / (i[1].time - i[0].time);
  return e < 0 && (e = 0), i[0].value + (i[1].value - i[0].value) * e;
}
function Gb(i, t) {
  let e = (t - i[0].time) / (i[3].time - i[0].time);
  e < 0 && (e = 0);
  const a = br(i[0], i[1], e), n = br(i[1], i[2], e), s = br(i[2], i[3], e), o = br(a, n, e), u = br(n, s, e);
  return br(o, u, e).value;
}
function Xb(i, t) {
  const e = t, a = i[0].time, n = i[3].time, s = i[1].time, o = i[2].time, u = n - 3 * o + 3 * s - a, m = 3 * o - 6 * s + 3 * a, g = 3 * s - 3 * a, A = a - e, x = de.cardanoAlgorithmForBezier(u, m, g, A), w = br(i[0], i[1], x), C = br(i[1], i[2], x), O = br(i[2], i[3], x), L = br(w, C, x), D = br(C, O, x);
  return br(L, D, x).value;
}
function Vb(i, t) {
  return i[0].value;
}
function Yb(i, t) {
  return i[1].value;
}
function Ko(i, t, e) {
  const a = i.curves[t];
  let n = -1;
  const s = a.baseSegmentIndex + a.segmentCount;
  let o = 0;
  for (let m = a.baseSegmentIndex; m < s; ++m)
    if (o = i.segments[m].basePointIndex + (i.segments[m].segmentType == Kr.CubismMotionSegmentType_Bezier ? 3 : 1), i.points[o].time > e) {
      n = m;
      break;
    }
  if (n == -1)
    return i.points[o].value;
  const u = i.segments[n];
  return u.evaluate(i.points.slice(u.basePointIndex), e);
}
class pl extends Id {
  constructor() {
    super(), this._eyeBlinkParameterIds = [], this._lipSyncParameterIds = [], this._sourceFrameRate = 30, this._loopDurationSeconds = -1, this._isLoop = !1, this._isLoopFadeIn = !0, this._lastWeight = 0;
  }
  static create(t, e) {
    const a = new pl();
    return a.parse(t), a._sourceFrameRate = a._motionData.fps, a._loopDurationSeconds = a._motionData.duration, a._onFinishedMotion = e, a;
  }
  doUpdateParameters(t, e, a, n) {
    this._modelCurveIdEyeBlink == null && (this._modelCurveIdEyeBlink = Db), this._modelCurveIdLipSync == null && (this._modelCurveIdLipSync = Nb);
    let s = e - n.getStartTime();
    s < 0 && (s = 0);
    let o = Number.MAX_VALUE, u = Number.MAX_VALUE;
    const m = 64;
    let g = 0, A = 0;
    this._eyeBlinkParameterIds.length > m && T0("too many eye blink targets : {0}", this._eyeBlinkParameterIds.length), this._lipSyncParameterIds.length > m && T0("too many lip sync targets : {0}", this._lipSyncParameterIds.length);
    const x = this._fadeInSeconds <= 0 ? 1 : de.getEasingSine((e - n.getFadeInStartTime()) / this._fadeInSeconds), w = this._fadeOutSeconds <= 0 || n.getEndTime() < 0 ? 1 : de.getEasingSine((n.getEndTime() - e) / this._fadeOutSeconds);
    let C, O, L, D = s;
    if (this._isLoop)
      for (; D > this._motionData.duration; )
        D -= this._motionData.duration;
    const H = this._motionData.curves;
    for (O = 0; O < this._motionData.curveCount && H[O].type == Qi.CubismMotionCurveTarget_Model; ++O)
      C = Ko(this._motionData, O, D), H[O].id == this._modelCurveIdEyeBlink ? u = C : H[O].id == this._modelCurveIdLipSync && (o = C);
    for (; O < this._motionData.curveCount && H[O].type == Qi.CubismMotionCurveTarget_Parameter; ++O) {
      if (L = t.getParameterIndex(H[O].id), L == -1)
        continue;
      const k = t.getParameterValueByIndex(L);
      if (C = Ko(this._motionData, O, D), u != Number.MAX_VALUE) {
        for (let z = 0; z < this._eyeBlinkParameterIds.length && z < m; ++z)
          if (this._eyeBlinkParameterIds[z] == H[O].id) {
            C *= u, A |= 1 << z;
            break;
          }
      }
      if (o != Number.MAX_VALUE) {
        for (let z = 0; z < this._lipSyncParameterIds.length && z < m; ++z)
          if (this._lipSyncParameterIds[z] == H[O].id) {
            C += o, g |= 1 << z;
            break;
          }
      }
      let G;
      if (H[O].fadeInTime < 0 && H[O].fadeOutTime < 0)
        G = k + (C - k) * a;
      else {
        let z, Y;
        H[O].fadeInTime < 0 ? z = x : z = H[O].fadeInTime == 0 ? 1 : de.getEasingSine((e - n.getFadeInStartTime()) / H[O].fadeInTime), H[O].fadeOutTime < 0 ? Y = w : Y = H[O].fadeOutTime == 0 || n.getEndTime() < 0 ? 1 : de.getEasingSine((n.getEndTime() - e) / H[O].fadeOutTime);
        const K = this._weight * z * Y;
        G = k + (C - k) * K;
      }
      t.setParameterValueByIndex(L, G, 1);
    }
    {
      if (u != Number.MAX_VALUE)
        for (let k = 0; k < this._eyeBlinkParameterIds.length && k < m; ++k) {
          const G = t.getParameterValueById(this._eyeBlinkParameterIds[k]);
          if (A >> k & 1)
            continue;
          const z = G + (u - G) * a;
          t.setParameterValueById(this._eyeBlinkParameterIds[k], z);
        }
      if (o != Number.MAX_VALUE)
        for (let k = 0; k < this._lipSyncParameterIds.length && k < m; ++k) {
          const G = t.getParameterValueById(this._lipSyncParameterIds[k]);
          if (g >> k & 1)
            continue;
          const z = G + (o - G) * a;
          t.setParameterValueById(this._lipSyncParameterIds[k], z);
        }
    }
    for (; O < this._motionData.curveCount && H[O].type == Qi.CubismMotionCurveTarget_PartOpacity; ++O)
      if (C = Ko(this._motionData, O, D), Rn.setOpacityFromMotion)
        t.setPartOpacityById(H[O].id, C);
      else {
        if (L = t.getParameterIndex(H[O].id), L == -1)
          continue;
        t.setParameterValueByIndex(L, C);
      }
    s >= this._motionData.duration && (this._isLoop ? (n.setStartTime(e), this._isLoopFadeIn && n.setFadeInStartTime(e)) : (this._onFinishedMotion && this._onFinishedMotion(this), n.setIsFinished(!0))), this._lastWeight = a;
  }
  setIsLoop(t) {
    this._isLoop = t;
  }
  isLoop() {
    return this._isLoop;
  }
  setIsLoopFadeIn(t) {
    this._isLoopFadeIn = t;
  }
  isLoopFadeIn() {
    return this._isLoopFadeIn;
  }
  getDuration() {
    return this._isLoop ? -1 : this._loopDurationSeconds;
  }
  getLoopDuration() {
    return this._loopDurationSeconds;
  }
  setParameterFadeInTime(t, e) {
    const a = this._motionData.curves;
    for (let n = 0; n < this._motionData.curveCount; ++n)
      if (t == a[n].id) {
        a[n].fadeInTime = e;
        return;
      }
  }
  setParameterFadeOutTime(t, e) {
    const a = this._motionData.curves;
    for (let n = 0; n < this._motionData.curveCount; ++n)
      if (t == a[n].id) {
        a[n].fadeOutTime = e;
        return;
      }
  }
  getParameterFadeInTime(t) {
    const e = this._motionData.curves;
    for (let a = 0; a < this._motionData.curveCount; ++a)
      if (t == e[a].id)
        return e[a].fadeInTime;
    return -1;
  }
  getParameterFadeOutTime(t) {
    const e = this._motionData.curves;
    for (let a = 0; a < this._motionData.curveCount; ++a)
      if (t == e[a].id)
        return e[a].fadeOutTime;
    return -1;
  }
  setEffectIds(t, e) {
    this._eyeBlinkParameterIds = t, this._lipSyncParameterIds = e;
  }
  release() {
    this._motionData = void 0;
  }
  parse(t) {
    this._motionData = new Lb();
    let e = new Cd(t);
    this._motionData.duration = e.getMotionDuration(), this._motionData.loop = e.isMotionLoop(), this._motionData.curveCount = e.getMotionCurveCount(), this._motionData.fps = e.getMotionFps(), this._motionData.eventCount = e.getEventCount();
    const a = e.getEvaluationOptionFlag(dl.EvaluationOptionFlag_AreBeziersRistricted), n = e.getMotionFadeInTime(), s = e.getMotionFadeOutTime();
    n !== void 0 ? this._fadeInSeconds = n < 0 ? 1 : n : this._fadeInSeconds = 1, s !== void 0 ? this._fadeOutSeconds = s < 0 ? 1 : s : this._fadeOutSeconds = 1, this._motionData.curves = Array.from({ length: this._motionData.curveCount }).map(() => new $b()), this._motionData.segments = Array.from({ length: e.getMotionTotalSegmentCount() }).map(() => new Ob()), this._motionData.events = Array.from({ length: this._motionData.eventCount }).map(() => new Rb()), this._motionData.points = [];
    let o = 0, u = 0;
    for (let m = 0; m < this._motionData.curveCount; ++m) {
      const g = this._motionData.curves[m];
      switch (e.getMotionCurveTarget(m)) {
        case Fb:
          g.type = Qi.CubismMotionCurveTarget_Model;
          break;
        case Hb:
          g.type = Qi.CubismMotionCurveTarget_Parameter;
          break;
        case Bb:
          g.type = Qi.CubismMotionCurveTarget_PartOpacity;
          break;
        default:
          ln('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!');
      }
      g.id = e.getMotionCurveId(m), g.baseSegmentIndex = u;
      const A = e.getMotionCurveFadeInTime(m), x = e.getMotionCurveFadeOutTime(m);
      g.fadeInTime = A !== void 0 ? A : -1, g.fadeOutTime = x !== void 0 ? x : -1;
      for (let w = 0; w < e.getMotionCurveSegmentCount(m); ) {
        switch (w == 0 ? (this._motionData.segments[u].basePointIndex = o, this._motionData.points[o] = new Ti(e.getMotionCurveSegment(m, w), e.getMotionCurveSegment(m, w + 1)), o += 1, w += 2) : this._motionData.segments[u].basePointIndex = o - 1, e.getMotionCurveSegment(m, w)) {
          case Kr.CubismMotionSegmentType_Linear: {
            this._motionData.segments[u].segmentType = Kr.CubismMotionSegmentType_Linear, this._motionData.segments[u].evaluate = Ub, this._motionData.points[o] = new Ti(e.getMotionCurveSegment(m, w + 1), e.getMotionCurveSegment(m, w + 2)), o += 1, w += 3;
            break;
          }
          case Kr.CubismMotionSegmentType_Bezier: {
            this._motionData.segments[u].segmentType = Kr.CubismMotionSegmentType_Bezier, a || kb ? this._motionData.segments[u].evaluate = Gb : this._motionData.segments[u].evaluate = Xb, this._motionData.points[o] = new Ti(e.getMotionCurveSegment(m, w + 1), e.getMotionCurveSegment(m, w + 2)), this._motionData.points[o + 1] = new Ti(e.getMotionCurveSegment(m, w + 3), e.getMotionCurveSegment(m, w + 4)), this._motionData.points[o + 2] = new Ti(e.getMotionCurveSegment(m, w + 5), e.getMotionCurveSegment(m, w + 6)), o += 3, w += 7;
            break;
          }
          case Kr.CubismMotionSegmentType_Stepped: {
            this._motionData.segments[u].segmentType = Kr.CubismMotionSegmentType_Stepped, this._motionData.segments[u].evaluate = Vb, this._motionData.points[o] = new Ti(e.getMotionCurveSegment(m, w + 1), e.getMotionCurveSegment(m, w + 2)), o += 1, w += 3;
            break;
          }
          case Kr.CubismMotionSegmentType_InverseStepped: {
            this._motionData.segments[u].segmentType = Kr.CubismMotionSegmentType_InverseStepped, this._motionData.segments[u].evaluate = Yb, this._motionData.points[o] = new Ti(e.getMotionCurveSegment(m, w + 1), e.getMotionCurveSegment(m, w + 2)), o += 1, w += 3;
            break;
          }
        }
        ++g.segmentCount, ++u;
      }
      this._motionData.curves.push(g);
    }
    for (let m = 0; m < e.getEventCount(); ++m)
      this._motionData.events[m].fireTime = e.getEventTime(m), this._motionData.events[m].value = e.getEventValue(m);
    e.release();
  }
  getFiredEvent(t, e) {
    this._firedEventValues.length = 0;
    for (let a = 0; a < this._motionData.eventCount; ++a)
      this._motionData.events[a].fireTime > t && this._motionData.events[a].fireTime <= e && this._firedEventValues.push(this._motionData.events[a].value);
    return this._firedEventValues;
  }
}
class zb extends ro {
  constructor(t, e) {
    var a;
    super(t, e), this.groups = { idle: "Idle" }, this.motionDataType = "json", this.queueManager = new Pd(), this.definitions = (a = t.motions) != null ? a : {}, this.eyeBlinkIds = t.getEyeBlinkParameters() || [], this.lipSyncIds = t.getLipSyncParameters() || [], this.init(e);
  }
  init(t) {
    super.init(t), this.settings.expressions && (this.expressionManager = new Cb(this.settings, t)), this.queueManager.setEventCallback((e, a, n) => {
      this.emit("motion:" + a);
    });
  }
  isFinished() {
    return this.queueManager.isFinished();
  }
  _startMotion(t, e) {
    return t.setFinishedMotionHandler(e), this.queueManager.stopAllMotions(), this.queueManager.startMotion(t, !1, performance.now());
  }
  _stopAllMotions() {
    this.queueManager.stopAllMotions();
  }
  createMotion(t, e, a) {
    const n = pl.create(t), s = new Cd(t), o = (e === this.groups.idle ? qe.idleMotionFadingDuration : qe.motionFadingDuration) / 1e3;
    return s.getMotionFadeInTime() === void 0 && n.setFadeInTime(a.FadeInTime > 0 ? a.FadeInTime : o), s.getMotionFadeOutTime() === void 0 && n.setFadeOutTime(a.FadeOutTime > 0 ? a.FadeOutTime : o), n.setEffectIds(this.eyeBlinkIds, this.lipSyncIds), n;
  }
  getMotionFile(t) {
    return t.File;
  }
  getMotionName(t) {
    return t.File;
  }
  getSoundFile(t) {
    return t.Sound;
  }
  updateParameters(t, e) {
    return this.queueManager.doUpdateMotion(t, e);
  }
  destroy() {
    super.destroy(), this.queueManager.release(), this.queueManager = void 0;
  }
}
const Kb = "ParamAngleX", Wb = "ParamAngleY", jb = "ParamAngleZ", Qb = "ParamEyeBallX", Jb = "ParamEyeBallY", qb = "ParamBodyAngleX", Zb = "ParamBreath";
class _l {
  constructor() {
    this._breathParameters = [], this._currentTime = 0;
  }
  static create() {
    return new _l();
  }
  setParameters(t) {
    this._breathParameters = t;
  }
  getParameters() {
    return this._breathParameters;
  }
  updateParameters(t, e) {
    this._currentTime += e;
    const a = this._currentTime * 2 * 3.14159;
    for (let n = 0; n < this._breathParameters.length; ++n) {
      const s = this._breathParameters[n];
      t.addParameterValueById(s.parameterId, s.offset + s.peak * Math.sin(a / s.cycle), s.weight);
    }
  }
}
class an {
  constructor(t, e, a, n, s) {
    this.parameterId = t == null ? void 0 : t, this.offset = e == null ? 0 : e, this.peak = a == null ? 0 : a, this.cycle = n == null ? 0 : n, this.weight = s == null ? 0 : s;
  }
}
const Fh = class {
  static create(i) {
    return new Fh(i);
  }
  setBlinkingInterval(i) {
    this._blinkingIntervalSeconds = i;
  }
  setBlinkingSetting(i, t, e) {
    this._closingSeconds = i, this._closedSeconds = t, this._openingSeconds = e;
  }
  setParameterIds(i) {
    this._parameterIds = i;
  }
  getParameterIds() {
    return this._parameterIds;
  }
  updateParameters(i, t) {
    this._userTimeSeconds += t;
    let e, a = 0;
    switch (this._blinkingState) {
      case mr.EyeState_Closing:
        a = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closingSeconds, a >= 1 && (a = 1, this._blinkingState = mr.EyeState_Closed, this._stateStartTimeSeconds = this._userTimeSeconds), e = 1 - a;
        break;
      case mr.EyeState_Closed:
        a = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closedSeconds, a >= 1 && (this._blinkingState = mr.EyeState_Opening, this._stateStartTimeSeconds = this._userTimeSeconds), e = 0;
        break;
      case mr.EyeState_Opening:
        a = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._openingSeconds, a >= 1 && (a = 1, this._blinkingState = mr.EyeState_Interval, this._nextBlinkingTime = this.determinNextBlinkingTiming()), e = a;
        break;
      case mr.EyeState_Interval:
        this._nextBlinkingTime < this._userTimeSeconds && (this._blinkingState = mr.EyeState_Closing, this._stateStartTimeSeconds = this._userTimeSeconds), e = 1;
        break;
      case mr.EyeState_First:
      default:
        this._blinkingState = mr.EyeState_Interval, this._nextBlinkingTime = this.determinNextBlinkingTiming(), e = 1;
        break;
    }
    Fh.CloseIfZero || (e = -e);
    for (let n = 0; n < this._parameterIds.length; ++n)
      i.setParameterValueById(this._parameterIds[n], e);
  }
  constructor(i) {
    var t, e;
    this._blinkingState = mr.EyeState_First, this._nextBlinkingTime = 0, this._stateStartTimeSeconds = 0, this._blinkingIntervalSeconds = 4, this._closingSeconds = 0.1, this._closedSeconds = 0.05, this._openingSeconds = 0.15, this._userTimeSeconds = 0, this._parameterIds = [], i != null && (this._parameterIds = (e = (t = i.getEyeBlinkParameters()) == null ? void 0 : t.slice()) != null ? e : this._parameterIds);
  }
  determinNextBlinkingTiming() {
    const i = Math.random();
    return this._userTimeSeconds + i * (2 * this._blinkingIntervalSeconds - 1);
  }
};
let Od = Fh;
Od.CloseIfZero = !0;
var mr = /* @__PURE__ */ ((i) => (i[i.EyeState_First = 0] = "EyeState_First", i[i.EyeState_Interval = 1] = "EyeState_Interval", i[i.EyeState_Closing = 2] = "EyeState_Closing", i[i.EyeState_Closed = 3] = "EyeState_Closed", i[i.EyeState_Opening = 4] = "EyeState_Opening", i))(mr || {});
class Hh {
  constructor(t = 0, e = 0, a = 0, n = 0) {
    this.x = t, this.y = e, this.width = a, this.height = n;
  }
  getCenterX() {
    return this.x + 0.5 * this.width;
  }
  getCenterY() {
    return this.y + 0.5 * this.height;
  }
  getRight() {
    return this.x + this.width;
  }
  getBottom() {
    return this.y + this.height;
  }
  setRect(t) {
    this.x = t.x, this.y = t.y, this.width = t.width, this.height = t.height;
  }
  expand(t, e) {
    this.x -= t, this.y -= e, this.width += t * 2, this.height += e * 2;
  }
}
const Wo = 4, t4 = 10;
let Ui, fn, Bh;
class jo {
  getChannelFlagAsColor(t) {
    return this._channelColors[t];
  }
  getMaskRenderTexture() {
    let t = 0;
    if (this._maskTexture && this._maskTexture.texture != 0 && (this._maskTexture.frameNo = this._currentFrameNo, t = this._maskTexture.texture), t == 0) {
      const e = this._clippingMaskBufferSize;
      this._colorBuffer = this.gl.createTexture(), this.gl.bindTexture(this.gl.TEXTURE_2D, this._colorBuffer), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, e, e, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR), this.gl.bindTexture(this.gl.TEXTURE_2D, null), t = this.gl.createFramebuffer(), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, t), this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, this._colorBuffer, 0), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, Bh), this._maskTexture = new e4(this._currentFrameNo, t);
    }
    return t;
  }
  setGL(t) {
    this.gl = t;
  }
  calcClippedDrawTotalBounds(t, e) {
    let a = Number.MAX_VALUE, n = Number.MAX_VALUE, s = Number.MIN_VALUE, o = Number.MIN_VALUE;
    const u = e._clippedDrawableIndexList.length;
    for (let m = 0; m < u; m++) {
      const g = e._clippedDrawableIndexList[m], A = t.getDrawableVertexCount(g), x = t.getDrawableVertices(g);
      let w = Number.MAX_VALUE, C = Number.MAX_VALUE, O = Number.MIN_VALUE, L = Number.MIN_VALUE;
      const D = A * zo.vertexStep;
      for (let H = zo.vertexOffset; H < D; H += zo.vertexStep) {
        const k = x[H], G = x[H + 1];
        k < w && (w = k), k > O && (O = k), G < C && (C = G), G > L && (L = G);
      }
      if (w != Number.MAX_VALUE)
        if (w < a && (a = w), C < n && (n = C), O > s && (s = O), L > o && (o = L), a == Number.MAX_VALUE)
          e._allClippedDrawRect.x = 0, e._allClippedDrawRect.y = 0, e._allClippedDrawRect.width = 0, e._allClippedDrawRect.height = 0, e._isUsing = !1;
        else {
          e._isUsing = !0;
          const H = s - a, k = o - n;
          e._allClippedDrawRect.x = a, e._allClippedDrawRect.y = n, e._allClippedDrawRect.width = H, e._allClippedDrawRect.height = k;
        }
    }
  }
  constructor() {
    this._maskRenderTexture = null, this._colorBuffer = null, this._currentFrameNo = 0, this._clippingMaskBufferSize = 256, this._clippingContextListForMask = [], this._clippingContextListForDraw = [], this._channelColors = [], this._tmpBoundsOnModel = new Hh(), this._tmpMatrix = new Ar(), this._tmpMatrixForMask = new Ar(), this._tmpMatrixForDraw = new Ar();
    let t = new un();
    t.R = 1, t.G = 0, t.B = 0, t.A = 0, this._channelColors.push(t), t = new un(), t.R = 0, t.G = 1, t.B = 0, t.A = 0, this._channelColors.push(t), t = new un(), t.R = 0, t.G = 0, t.B = 1, t.A = 0, this._channelColors.push(t), t = new un(), t.R = 0, t.G = 0, t.B = 0, t.A = 1, this._channelColors.push(t);
  }
  release() {
    var t, e, a;
    const n = this;
    for (let s = 0; s < this._clippingContextListForMask.length; s++)
      this._clippingContextListForMask[s] && ((t = this._clippingContextListForMask[s]) == null || t.release());
    n._clippingContextListForMask = void 0, n._clippingContextListForDraw = void 0, this._maskTexture && ((e = this.gl) == null || e.deleteFramebuffer(this._maskTexture.texture), n._maskTexture = void 0), n._channelColors = void 0, (a = this.gl) == null || a.deleteTexture(this._colorBuffer), this._colorBuffer = null;
  }
  initialize(t, e, a, n) {
    for (let s = 0; s < e; s++) {
      if (n[s] <= 0) {
        this._clippingContextListForDraw.push(null);
        continue;
      }
      let o = this.findSameClip(a[s], n[s]);
      o == null && (o = new r4(this, a[s], n[s]), this._clippingContextListForMask.push(o)), o.addClippedDrawable(s), this._clippingContextListForDraw.push(o);
    }
  }
  setupClippingContext(t, e) {
    this._currentFrameNo++;
    let a = 0;
    for (let n = 0; n < this._clippingContextListForMask.length; n++) {
      const s = this._clippingContextListForMask[n];
      this.calcClippedDrawTotalBounds(t, s), s._isUsing && a++;
    }
    if (a > 0) {
      this.gl.viewport(0, 0, this._clippingMaskBufferSize, this._clippingMaskBufferSize), this._maskRenderTexture = this.getMaskRenderTexture(), e.getMvpMatrix(), e.preDraw(), this.setupLayoutBounds(a), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._maskRenderTexture), this.gl.clearColor(1, 1, 1, 1), this.gl.clear(this.gl.COLOR_BUFFER_BIT);
      for (let n = 0; n < this._clippingContextListForMask.length; n++) {
        const s = this._clippingContextListForMask[n], o = s._allClippedDrawRect, u = s._layoutBounds, m = 0.05;
        this._tmpBoundsOnModel.setRect(o), this._tmpBoundsOnModel.expand(o.width * m, o.height * m);
        const g = u.width / this._tmpBoundsOnModel.width, A = u.height / this._tmpBoundsOnModel.height;
        this._tmpMatrix.loadIdentity(), this._tmpMatrix.translateRelative(-1, -1), this._tmpMatrix.scaleRelative(2, 2), this._tmpMatrix.translateRelative(u.x, u.y), this._tmpMatrix.scaleRelative(g, A), this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y), this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()), this._tmpMatrix.loadIdentity(), this._tmpMatrix.translateRelative(u.x, u.y), this._tmpMatrix.scaleRelative(g, A), this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y), this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()), s._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()), s._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());
        const x = s._clippingIdCount;
        for (let w = 0; w < x; w++) {
          const C = s._clippingIdList[w];
          t.getDrawableDynamicFlagVertexPositionsDidChange(C) && (e.setIsCulling(t.getDrawableCulling(C) != !1), e.setClippingContextBufferForMask(s), e.drawMesh(t.getDrawableTextureIndices(C), t.getDrawableVertexIndexCount(C), t.getDrawableVertexCount(C), t.getDrawableVertexIndices(C), t.getDrawableVertices(C), t.getDrawableVertexUvs(C), t.getDrawableOpacity(C), Mi.CubismBlendMode_Normal, !1));
        }
      }
      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, Bh), e.setClippingContextBufferForMask(null), this.gl.viewport(fn[0], fn[1], fn[2], fn[3]);
    }
  }
  findSameClip(t, e) {
    for (let a = 0; a < this._clippingContextListForMask.length; a++) {
      const n = this._clippingContextListForMask[a], s = n._clippingIdCount;
      if (s != e)
        continue;
      let o = 0;
      for (let u = 0; u < s; u++) {
        const m = n._clippingIdList[u];
        for (let g = 0; g < s; g++)
          if (t[g] == m) {
            o++;
            break;
          }
      }
      if (o == s)
        return n;
    }
    return null;
  }
  setupLayoutBounds(t) {
    let e = t / Wo, a = t % Wo;
    e = ~~e, a = ~~a;
    let n = 0;
    for (let s = 0; s < Wo; s++) {
      const o = e + (s < a ? 1 : 0);
      if (o != 0)
        if (o == 1) {
          const u = this._clippingContextListForMask[n++];
          u._layoutChannelNo = s, u._layoutBounds.x = 0, u._layoutBounds.y = 0, u._layoutBounds.width = 1, u._layoutBounds.height = 1;
        } else if (o == 2)
          for (let u = 0; u < o; u++) {
            let m = u % 2;
            m = ~~m;
            const g = this._clippingContextListForMask[n++];
            g._layoutChannelNo = s, g._layoutBounds.x = m * 0.5, g._layoutBounds.y = 0, g._layoutBounds.width = 0.5, g._layoutBounds.height = 1;
          }
        else if (o <= 4)
          for (let u = 0; u < o; u++) {
            let m = u % 2, g = u / 2;
            m = ~~m, g = ~~g;
            const A = this._clippingContextListForMask[n++];
            A._layoutChannelNo = s, A._layoutBounds.x = m * 0.5, A._layoutBounds.y = g * 0.5, A._layoutBounds.width = 0.5, A._layoutBounds.height = 0.5;
          }
        else if (o <= 9)
          for (let u = 0; u < o; u++) {
            let m = u % 3, g = u / 3;
            m = ~~m, g = ~~g;
            const A = this._clippingContextListForMask[n++];
            A._layoutChannelNo = s, A._layoutBounds.x = m / 3, A._layoutBounds.y = g / 3, A._layoutBounds.width = 1 / 3, A._layoutBounds.height = 1 / 3;
          }
        else if (Rn.supportMoreMaskDivisions && o <= 16)
          for (let u = 0; u < o; u++) {
            let m = u % 4, g = u / 4;
            m = ~~m, g = ~~g;
            const A = this._clippingContextListForMask[n++];
            A._layoutChannelNo = s, A._layoutBounds.x = m / 4, A._layoutBounds.y = g / 4, A._layoutBounds.width = 1 / 4, A._layoutBounds.height = 1 / 4;
          }
        else
          Aa("not supported mask count : {0}", o);
    }
  }
  getColorBuffer() {
    return this._colorBuffer;
  }
  getClippingContextListForDraw() {
    return this._clippingContextListForDraw;
  }
  setClippingMaskBufferSize(t) {
    this._clippingMaskBufferSize = t;
  }
  getClippingMaskBufferSize() {
    return this._clippingMaskBufferSize;
  }
}
class e4 {
  constructor(t, e) {
    this.frameNo = t, this.texture = e;
  }
}
class r4 {
  constructor(t, e, a) {
    this._isUsing = !1, this._owner = t, this._clippingIdList = e, this._clippingIdCount = a, this._allClippedDrawRect = new Hh(), this._layoutBounds = new Hh(), this._clippedDrawableIndexList = [], this._matrixForMask = new Ar(), this._matrixForDraw = new Ar();
  }
  release() {
    const t = this;
    t._layoutBounds = void 0, t._allClippedDrawRect = void 0, t._clippedDrawableIndexList = void 0;
  }
  addClippedDrawable(t) {
    this._clippedDrawableIndexList.push(t);
  }
  getClippingManager() {
    return this._owner;
  }
  setGl(t) {
    this._owner.setGL(t);
  }
}
class Ma {
  static getInstance() {
    return Ui == null && (Ui = new Ma()), Ui;
  }
  static deleteInstance() {
    Ui && (Ui.release(), Ui = void 0);
  }
  constructor() {
    this._shaderSets = [];
  }
  release() {
    this.releaseShaderProgram();
  }
  setupShaderProgram(t, e, a, n, s, o, u, m, g, A, x, w, C) {
    x || Aa("NoPremultipliedAlpha is not allowed"), this._shaderSets.length == 0 && this.generateShaders();
    let O, L, D, H;
    const k = t.getClippingContextBufferForMask();
    if (k != null) {
      const G = this._shaderSets[cn.ShaderNames_SetupMask];
      this.gl.useProgram(G.shaderProgram), this.gl.activeTexture(this.gl.TEXTURE0), this.gl.bindTexture(this.gl.TEXTURE_2D, e), this.gl.uniform1i(G.samplerTexture0Location, 0), u.vertex == null && (u.vertex = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, u.vertex), this.gl.bufferData(this.gl.ARRAY_BUFFER, n, this.gl.DYNAMIC_DRAW), this.gl.enableVertexAttribArray(G.attributePositionLocation), this.gl.vertexAttribPointer(G.attributePositionLocation, 2, this.gl.FLOAT, !1, 0, 0), u.uv == null && (u.uv = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, u.uv), this.gl.bufferData(this.gl.ARRAY_BUFFER, o, this.gl.DYNAMIC_DRAW), this.gl.enableVertexAttribArray(G.attributeTexCoordLocation), this.gl.vertexAttribPointer(G.attributeTexCoordLocation, 2, this.gl.FLOAT, !1, 0, 0);
      const z = k._layoutChannelNo, Y = k.getClippingManager().getChannelFlagAsColor(z);
      this.gl.uniform4f(G.uniformChannelFlagLocation, Y.R, Y.G, Y.B, Y.A), this.gl.uniformMatrix4fv(G.uniformClipMatrixLocation, !1, k._matrixForMask.getArray());
      const K = k._layoutBounds;
      this.gl.uniform4f(G.uniformBaseColorLocation, K.x * 2 - 1, K.y * 2 - 1, K.getRight() * 2 - 1, K.getBottom() * 2 - 1), O = this.gl.ZERO, L = this.gl.ONE_MINUS_SRC_COLOR, D = this.gl.ZERO, H = this.gl.ONE_MINUS_SRC_ALPHA;
    } else {
      const G = t.getClippingContextBufferForDraw(), Y = G != null ? C ? 2 : 1 : 0;
      let K;
      switch (g) {
        case Mi.CubismBlendMode_Normal:
        default:
          K = this._shaderSets[cn.ShaderNames_NormalPremultipliedAlpha + Y], O = this.gl.ONE, L = this.gl.ONE_MINUS_SRC_ALPHA, D = this.gl.ONE, H = this.gl.ONE_MINUS_SRC_ALPHA;
          break;
        case Mi.CubismBlendMode_Additive:
          K = this._shaderSets[cn.ShaderNames_AddPremultipliedAlpha + Y], O = this.gl.ONE, L = this.gl.ONE, D = this.gl.ZERO, H = this.gl.ONE;
          break;
        case Mi.CubismBlendMode_Multiplicative:
          K = this._shaderSets[cn.ShaderNames_MultPremultipliedAlpha + Y], O = this.gl.DST_COLOR, L = this.gl.ONE_MINUS_SRC_ALPHA, D = this.gl.ZERO, H = this.gl.ONE;
          break;
      }
      if (this.gl.useProgram(K.shaderProgram), u.vertex == null && (u.vertex = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, u.vertex), this.gl.bufferData(this.gl.ARRAY_BUFFER, n, this.gl.DYNAMIC_DRAW), this.gl.enableVertexAttribArray(K.attributePositionLocation), this.gl.vertexAttribPointer(K.attributePositionLocation, 2, this.gl.FLOAT, !1, 0, 0), u.uv == null && (u.uv = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, u.uv), this.gl.bufferData(this.gl.ARRAY_BUFFER, o, this.gl.DYNAMIC_DRAW), this.gl.enableVertexAttribArray(K.attributeTexCoordLocation), this.gl.vertexAttribPointer(K.attributeTexCoordLocation, 2, this.gl.FLOAT, !1, 0, 0), G != null) {
        this.gl.activeTexture(this.gl.TEXTURE1);
        const J = G.getClippingManager().getColorBuffer();
        this.gl.bindTexture(this.gl.TEXTURE_2D, J), this.gl.uniform1i(K.samplerTexture1Location, 1), this.gl.uniformMatrix4fv(K.uniformClipMatrixLocation, !1, G._matrixForDraw.getArray());
        const nt = G._layoutChannelNo, q = G.getClippingManager().getChannelFlagAsColor(nt);
        this.gl.uniform4f(K.uniformChannelFlagLocation, q.R, q.G, q.B, q.A);
      }
      this.gl.activeTexture(this.gl.TEXTURE0), this.gl.bindTexture(this.gl.TEXTURE_2D, e), this.gl.uniform1i(K.samplerTexture0Location, 0), this.gl.uniformMatrix4fv(K.uniformMatrixLocation, !1, w.getArray()), this.gl.uniform4f(K.uniformBaseColorLocation, A.R, A.G, A.B, A.A);
    }
    u.index == null && (u.index = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, u.index), this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, s, this.gl.DYNAMIC_DRAW), this.gl.blendFuncSeparate(O, L, D, H);
  }
  releaseShaderProgram() {
    for (let t = 0; t < this._shaderSets.length; t++)
      this.gl.deleteProgram(this._shaderSets[t].shaderProgram), this._shaderSets[t].shaderProgram = 0;
    this._shaderSets = [];
  }
  generateShaders() {
    for (let t = 0; t < t4; t++)
      this._shaderSets.push({});
    this._shaderSets[0].shaderProgram = this.loadShaderProgram(i4, a4), this._shaderSets[1].shaderProgram = this.loadShaderProgram(n4, s4), this._shaderSets[2].shaderProgram = this.loadShaderProgram(S0, o4), this._shaderSets[3].shaderProgram = this.loadShaderProgram(S0, h4), this._shaderSets[4].shaderProgram = this._shaderSets[1].shaderProgram, this._shaderSets[5].shaderProgram = this._shaderSets[2].shaderProgram, this._shaderSets[6].shaderProgram = this._shaderSets[3].shaderProgram, this._shaderSets[7].shaderProgram = this._shaderSets[1].shaderProgram, this._shaderSets[8].shaderProgram = this._shaderSets[2].shaderProgram, this._shaderSets[9].shaderProgram = this._shaderSets[3].shaderProgram, this._shaderSets[0].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[0].shaderProgram, "a_position"), this._shaderSets[0].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[0].shaderProgram, "a_texCoord"), this._shaderSets[0].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, "s_texture0"), this._shaderSets[0].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, "u_clipMatrix"), this._shaderSets[0].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, "u_channelFlag"), this._shaderSets[0].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, "u_baseColor"), this._shaderSets[1].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[1].shaderProgram, "a_position"), this._shaderSets[1].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[1].shaderProgram, "a_texCoord"), this._shaderSets[1].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, "s_texture0"), this._shaderSets[1].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, "u_matrix"), this._shaderSets[1].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, "u_baseColor"), this._shaderSets[2].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[2].shaderProgram, "a_position"), this._shaderSets[2].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[2].shaderProgram, "a_texCoord"), this._shaderSets[2].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "s_texture0"), this._shaderSets[2].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "s_texture1"), this._shaderSets[2].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "u_matrix"), this._shaderSets[2].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "u_clipMatrix"), this._shaderSets[2].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "u_channelFlag"), this._shaderSets[2].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "u_baseColor"), this._shaderSets[3].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[3].shaderProgram, "a_position"), this._shaderSets[3].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[3].shaderProgram, "a_texCoord"), this._shaderSets[3].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "s_texture0"), this._shaderSets[3].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "s_texture1"), this._shaderSets[3].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "u_matrix"), this._shaderSets[3].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "u_clipMatrix"), this._shaderSets[3].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "u_channelFlag"), this._shaderSets[3].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "u_baseColor"), this._shaderSets[4].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[4].shaderProgram, "a_position"), this._shaderSets[4].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[4].shaderProgram, "a_texCoord"), this._shaderSets[4].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, "s_texture0"), this._shaderSets[4].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, "u_matrix"), this._shaderSets[4].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, "u_baseColor"), this._shaderSets[5].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[5].shaderProgram, "a_position"), this._shaderSets[5].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[5].shaderProgram, "a_texCoord"), this._shaderSets[5].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "s_texture0"), this._shaderSets[5].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "s_texture1"), this._shaderSets[5].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "u_matrix"), this._shaderSets[5].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "u_clipMatrix"), this._shaderSets[5].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "u_channelFlag"), this._shaderSets[5].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "u_baseColor"), this._shaderSets[6].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[6].shaderProgram, "a_position"), this._shaderSets[6].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[6].shaderProgram, "a_texCoord"), this._shaderSets[6].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "s_texture0"), this._shaderSets[6].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "s_texture1"), this._shaderSets[6].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "u_matrix"), this._shaderSets[6].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "u_clipMatrix"), this._shaderSets[6].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "u_channelFlag"), this._shaderSets[6].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "u_baseColor"), this._shaderSets[7].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[7].shaderProgram, "a_position"), this._shaderSets[7].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[7].shaderProgram, "a_texCoord"), this._shaderSets[7].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, "s_texture0"), this._shaderSets[7].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, "u_matrix"), this._shaderSets[7].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, "u_baseColor"), this._shaderSets[8].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[8].shaderProgram, "a_position"), this._shaderSets[8].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[8].shaderProgram, "a_texCoord"), this._shaderSets[8].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "s_texture0"), this._shaderSets[8].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "s_texture1"), this._shaderSets[8].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "u_matrix"), this._shaderSets[8].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "u_clipMatrix"), this._shaderSets[8].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "u_channelFlag"), this._shaderSets[8].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "u_baseColor"), this._shaderSets[9].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[9].shaderProgram, "a_position"), this._shaderSets[9].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[9].shaderProgram, "a_texCoord"), this._shaderSets[9].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "s_texture0"), this._shaderSets[9].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "s_texture1"), this._shaderSets[9].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "u_matrix"), this._shaderSets[9].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "u_clipMatrix"), this._shaderSets[9].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "u_channelFlag"), this._shaderSets[9].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "u_baseColor");
  }
  loadShaderProgram(t, e) {
    let a = this.gl.createProgram(), n = this.compileShaderSource(this.gl.VERTEX_SHADER, t);
    if (!n)
      return Aa("Vertex shader compile error!"), 0;
    let s = this.compileShaderSource(this.gl.FRAGMENT_SHADER, e);
    return s ? (this.gl.attachShader(a, n), this.gl.attachShader(a, s), this.gl.linkProgram(a), this.gl.getProgramParameter(a, this.gl.LINK_STATUS) ? (this.gl.deleteShader(n), this.gl.deleteShader(s), a) : (Aa("Failed to link program: {0}", a), this.gl.deleteShader(n), this.gl.deleteShader(s), a && this.gl.deleteProgram(a), 0)) : (Aa("Vertex shader compile error!"), 0);
  }
  compileShaderSource(t, e) {
    const a = e, n = this.gl.createShader(t);
    if (this.gl.shaderSource(n, a), this.gl.compileShader(n), !n) {
      const o = this.gl.getShaderInfoLog(n);
      Aa("Shader compile log: {0} ", o);
    }
    return this.gl.getShaderParameter(n, this.gl.COMPILE_STATUS) ? n : (this.gl.deleteShader(n), null);
  }
  setGl(t) {
    this.gl = t;
  }
}
var cn = /* @__PURE__ */ ((i) => (i[i.ShaderNames_SetupMask = 0] = "ShaderNames_SetupMask", i[i.ShaderNames_NormalPremultipliedAlpha = 1] = "ShaderNames_NormalPremultipliedAlpha", i[i.ShaderNames_NormalMaskedPremultipliedAlpha = 2] = "ShaderNames_NormalMaskedPremultipliedAlpha", i[i.ShaderNames_NomralMaskedInvertedPremultipliedAlpha = 3] = "ShaderNames_NomralMaskedInvertedPremultipliedAlpha", i[i.ShaderNames_AddPremultipliedAlpha = 4] = "ShaderNames_AddPremultipliedAlpha", i[i.ShaderNames_AddMaskedPremultipliedAlpha = 5] = "ShaderNames_AddMaskedPremultipliedAlpha", i[i.ShaderNames_AddMaskedPremultipliedAlphaInverted = 6] = "ShaderNames_AddMaskedPremultipliedAlphaInverted", i[i.ShaderNames_MultPremultipliedAlpha = 7] = "ShaderNames_MultPremultipliedAlpha", i[i.ShaderNames_MultMaskedPremultipliedAlpha = 8] = "ShaderNames_MultMaskedPremultipliedAlpha", i[i.ShaderNames_MultMaskedPremultipliedAlphaInverted = 9] = "ShaderNames_MultMaskedPremultipliedAlphaInverted", i))(cn || {});
const i4 = "attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}", a4 = "precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}", n4 = "attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}", S0 = "attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}", s4 = "precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}", o4 = "precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}", h4 = "precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";
class $d extends fl {
  constructor() {
    super(), this._clippingContextBufferForMask = null, this._clippingContextBufferForDraw = null, this._clippingManager = new jo(), this.firstDraw = !0, this._textures = {}, this._sortedDrawableIndexList = [], this._bufferData = {
      vertex: null,
      uv: null,
      index: null
    };
  }
  initialize(t) {
    t.isUsingMasking() && (this._clippingManager = new jo(), this._clippingManager.initialize(t, t.getDrawableCount(), t.getDrawableMasks(), t.getDrawableMaskCounts()));
    for (let e = t.getDrawableCount() - 1; e >= 0; e--)
      this._sortedDrawableIndexList[e] = 0;
    super.initialize(t);
  }
  bindTexture(t, e) {
    this._textures[t] = e;
  }
  getBindedTextures() {
    return this._textures;
  }
  setClippingMaskBufferSize(t) {
    this._clippingManager.release(), this._clippingManager = new jo(), this._clippingManager.setClippingMaskBufferSize(t), this._clippingManager.initialize(this.getModel(), this.getModel().getDrawableCount(), this.getModel().getDrawableMasks(), this.getModel().getDrawableMaskCounts());
  }
  getClippingMaskBufferSize() {
    return this._clippingManager.getClippingMaskBufferSize();
  }
  release() {
    var t, e, a;
    const n = this;
    this._clippingManager.release(), n._clippingManager = void 0, (t = this.gl) == null || t.deleteBuffer(this._bufferData.vertex), this._bufferData.vertex = null, (e = this.gl) == null || e.deleteBuffer(this._bufferData.uv), this._bufferData.uv = null, (a = this.gl) == null || a.deleteBuffer(this._bufferData.index), this._bufferData.index = null, n._bufferData = void 0, n._textures = void 0;
  }
  doDrawModel() {
    this.preDraw(), this._clippingManager != null && this._clippingManager.setupClippingContext(this.getModel(), this);
    const t = this.getModel().getDrawableCount(), e = this.getModel().getDrawableRenderOrders();
    for (let a = 0; a < t; ++a) {
      const n = e[a];
      this._sortedDrawableIndexList[n] = a;
    }
    for (let a = 0; a < t; ++a) {
      const n = this._sortedDrawableIndexList[a];
      this.getModel().getDrawableDynamicFlagIsVisible(n) && (this.setClippingContextBufferForDraw(this._clippingManager != null ? this._clippingManager.getClippingContextListForDraw()[n] : null), this.setIsCulling(this.getModel().getDrawableCulling(n)), this.drawMesh(this.getModel().getDrawableTextureIndices(n), this.getModel().getDrawableVertexIndexCount(n), this.getModel().getDrawableVertexCount(n), this.getModel().getDrawableVertexIndices(n), this.getModel().getDrawableVertices(n), this.getModel().getDrawableVertexUvs(n), this.getModel().getDrawableOpacity(n), this.getModel().getDrawableBlendMode(n), this.getModel().getDrawableInvertedMaskBit(n)));
    }
  }
  drawMesh(t, e, a, n, s, o, u, m, g) {
    this.isCulling() ? this.gl.enable(this.gl.CULL_FACE) : this.gl.disable(this.gl.CULL_FACE), this.gl.frontFace(this.gl.CCW);
    const A = this.getModelColor();
    this.getClippingContextBufferForMask() == null && (A.A *= u, this.isPremultipliedAlpha() && (A.R *= A.A, A.G *= A.A, A.B *= A.A));
    let x = null;
    this._textures[t] != null && (x = this._textures[t]), Ma.getInstance().setupShaderProgram(this, x, a, s, n, o, this._bufferData, u, m, A, this.isPremultipliedAlpha(), this.getMvpMatrix(), g), this.gl.drawElements(this.gl.TRIANGLES, e, this.gl.UNSIGNED_SHORT, 0), this.gl.useProgram(null), this.setClippingContextBufferForDraw(null), this.setClippingContextBufferForMask(null);
  }
  static doStaticRelease() {
    Ma.deleteInstance();
  }
  setRenderState(t, e) {
    Bh = t, fn = e;
  }
  preDraw() {
    this.firstDraw && (this.firstDraw = !1, this._anisortopy = this.gl.getExtension("EXT_texture_filter_anisotropic") || this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic") || this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")), this.gl.disable(this.gl.SCISSOR_TEST), this.gl.disable(this.gl.STENCIL_TEST), this.gl.disable(this.gl.DEPTH_TEST), this.gl.frontFace(this.gl.CW), this.gl.enable(this.gl.BLEND), this.gl.colorMask(!0, !0, !0, !0), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null), this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);
  }
  setClippingContextBufferForMask(t) {
    this._clippingContextBufferForMask = t;
  }
  getClippingContextBufferForMask() {
    return this._clippingContextBufferForMask;
  }
  setClippingContextBufferForDraw(t) {
    this._clippingContextBufferForDraw = t;
  }
  getClippingContextBufferForDraw() {
    return this._clippingContextBufferForDraw;
  }
  startUp(t) {
    this.gl = t, this._clippingManager.setGL(t), Ma.getInstance().setGl(t);
  }
}
fl.staticRelease = () => {
  $d.doStaticRelease();
};
const E0 = new Ar();
class u4 extends gd {
  constructor(t, e, a) {
    super(), this.lipSync = !0, this.breath = _l.create(), this.renderer = new $d(), this.idParamAngleX = Kb, this.idParamAngleY = Wb, this.idParamAngleZ = jb, this.idParamEyeBallX = Qb, this.idParamEyeBallY = Jb, this.idParamBodyAngleX = qb, this.idParamBreath = Zb, this.pixelsPerUnit = 1, this.centeringTransform = new be(), this.coreModel = t, this.settings = e, this.motionManager = new zb(e, a), this.init();
  }
  init() {
    var t;
    super.init(), ((t = this.settings.getEyeBlinkParameters()) == null ? void 0 : t.length) > 0 && (this.eyeBlink = Od.create(this.settings)), this.breath.setParameters([
      new an(this.idParamAngleX, 0, 15, 6.5345, 0.5),
      new an(this.idParamAngleY, 0, 8, 3.5345, 0.5),
      new an(this.idParamAngleZ, 0, 10, 5.5345, 0.5),
      new an(this.idParamBodyAngleX, 0, 4, 15.5345, 0.5),
      new an(this.idParamBreath, 0, 0.5, 3.2345, 0.5)
    ]), this.renderer.initialize(this.coreModel), this.renderer.setIsPremultipliedAlpha(!0);
  }
  getSize() {
    return [this.coreModel.getModel().canvasinfo.CanvasWidth, this.coreModel.getModel().canvasinfo.CanvasHeight];
  }
  getLayout() {
    const t = {};
    if (this.settings.layout)
      for (const e of Object.keys(this.settings.layout)) {
        const a = e.charAt(0).toLowerCase() + e.slice(1);
        t[a] = this.settings.layout[e];
      }
    return t;
  }
  setupLayout() {
    super.setupLayout(), this.pixelsPerUnit = this.coreModel.getModel().canvasinfo.PixelsPerUnit, this.centeringTransform.scale(this.pixelsPerUnit, this.pixelsPerUnit).translate(this.originalWidth / 2, this.originalHeight / 2);
  }
  updateWebGLContext(t, e) {
    this.renderer.firstDraw = !0, this.renderer._bufferData = {
      vertex: null,
      uv: null,
      index: null
    }, this.renderer.startUp(t), this.renderer._clippingManager._currentFrameNo = e, this.renderer._clippingManager._maskTexture = void 0, Ma.getInstance()._shaderSets = [];
  }
  bindTexture(t, e) {
    this.renderer.bindTexture(t, e);
  }
  getHitAreaDefs() {
    var t, e;
    return (e = (t = this.settings.hitAreas) == null ? void 0 : t.map((a) => ({
      id: a.Id,
      name: a.Name,
      index: this.coreModel.getDrawableIndex(a.Id)
    }))) != null ? e : [];
  }
  getDrawableIDs() {
    return this.coreModel.getDrawableIds();
  }
  getDrawableIndex(t) {
    return this.coreModel.getDrawableIndex(t);
  }
  getDrawableVertices(t) {
    if (typeof t == "string" && (t = this.coreModel.getDrawableIndex(t), t === -1))
      throw new TypeError("Unable to find drawable ID: " + t);
    const e = this.coreModel.getDrawableVertices(t).slice();
    for (let a = 0; a < e.length; a += 2)
      e[a] = e[a] * this.pixelsPerUnit + this.originalWidth / 2, e[a + 1] = -e[a + 1] * this.pixelsPerUnit + this.originalHeight / 2;
    return e;
  }
  updateTransform(t) {
    this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(t);
  }
  update(t, e) {
    var a, n, s, o;
    super.update(t, e), t /= 1e3, e /= 1e3;
    const u = this.coreModel;
    this.emit("beforeMotionUpdate");
    const m = this.motionManager.update(this.coreModel, e);
    this.emit("afterMotionUpdate"), u.saveParameters(), (a = this.motionManager.expressionManager) == null || a.update(u, e), m || (n = this.eyeBlink) == null || n.updateParameters(u, t), this.updateFocus(), this.updateNaturalMovements(t * 1e3, e * 1e3), (s = this.physics) == null || s.evaluate(u, t), (o = this.pose) == null || o.updateParameters(u, t), this.emit("beforeModelUpdate"), u.update(), u.loadParameters();
  }
  updateFocus() {
    this.coreModel.addParameterValueById(this.idParamEyeBallX, this.focusController.x), this.coreModel.addParameterValueById(this.idParamEyeBallY, this.focusController.y), this.coreModel.addParameterValueById(this.idParamAngleX, this.focusController.x * 30), this.coreModel.addParameterValueById(this.idParamAngleY, this.focusController.y * 30), this.coreModel.addParameterValueById(this.idParamAngleZ, this.focusController.x * this.focusController.y * -30), this.coreModel.addParameterValueById(this.idParamBodyAngleX, this.focusController.x * 10);
  }
  updateNaturalMovements(t, e) {
    var a;
    (a = this.breath) == null || a.updateParameters(this.coreModel, t / 1e3);
  }
  draw(t) {
    const e = this.drawingMatrix, a = E0.getArray();
    a[0] = e.a, a[1] = e.b, a[4] = -e.c, a[5] = -e.d, a[12] = e.tx, a[13] = e.ty, this.renderer.setMvpMatrix(E0), this.renderer.setRenderState(t.getParameter(t.FRAMEBUFFER_BINDING), this.viewport), this.renderer.drawModel();
  }
  destroy() {
    super.destroy(), this.renderer.release(), this.coreModel.release(), this.renderer = void 0, this.coreModel = void 0;
  }
}
let ls, w0 = 20;
function l4() {
  return Ln.isStarted() ? Promise.resolve() : (ls != null || (ls = new Promise((i, t) => {
    function e() {
      try {
        f4(), i();
      } catch (a) {
        if (w0--, w0 < 0) {
          const n = new Error("Failed to start up Cubism 4 framework.");
          n.cause = a, t(n);
          return;
        }
        ue.log("Cubism4", "Startup failed, retrying 10ms later..."), setTimeout(e, 10);
      }
    }
    e();
  })), ls);
}
function f4(i) {
  i = Object.assign({
    logFunction: console.log,
    loggingLevel: ua.LogLevel_Verbose
  }, i), Ln.startUp(i), Ln.initialize();
}
const c4 = 1e-3, I0 = 0.5;
class vl {
  static create(t) {
    const e = new vl();
    typeof t.FadeInTime == "number" && (e._fadeTimeSeconds = t.FadeInTime, e._fadeTimeSeconds <= 0 && (e._fadeTimeSeconds = I0));
    const a = t.Groups, n = a.length;
    for (let s = 0; s < n; ++s) {
      const o = a[s], u = o.length;
      let m = 0;
      for (let g = 0; g < u; ++g) {
        const A = o[g], x = new Gs();
        x.partId = A.Id;
        const w = A.Link;
        if (w) {
          const C = w.length;
          for (let O = 0; O < C; ++O) {
            const L = new Gs();
            L.partId = w[O], x.link.push(L);
          }
        }
        e._partGroups.push(x), ++m;
      }
      e._partGroupCounts.push(m);
    }
    return e;
  }
  updateParameters(t, e) {
    t != this._lastModel && this.reset(t), this._lastModel = t, e < 0 && (e = 0);
    let a = 0;
    for (let n = 0; n < this._partGroupCounts.length; n++) {
      const s = this._partGroupCounts[n];
      this.doFade(t, e, a, s), a += s;
    }
    this.copyPartOpacities(t);
  }
  reset(t) {
    let e = 0;
    for (let a = 0; a < this._partGroupCounts.length; ++a) {
      const n = this._partGroupCounts[a];
      for (let s = e; s < e + n; ++s) {
        this._partGroups[s].initialize(t);
        const o = this._partGroups[s].partIndex, u = this._partGroups[s].parameterIndex;
        if (!(o < 0)) {
          t.setPartOpacityByIndex(o, s == e ? 1 : 0), t.setParameterValueByIndex(u, s == e ? 1 : 0);
          for (let m = 0; m < this._partGroups[s].link.length; ++m)
            this._partGroups[s].link[m].initialize(t);
        }
      }
      e += n;
    }
  }
  copyPartOpacities(t) {
    for (let e = 0; e < this._partGroups.length; ++e) {
      const a = this._partGroups[e];
      if (a.link.length == 0)
        continue;
      const n = this._partGroups[e].partIndex, s = t.getPartOpacityByIndex(n);
      for (let o = 0; o < a.link.length; ++o) {
        const m = a.link[o].partIndex;
        m < 0 || t.setPartOpacityByIndex(m, s);
      }
    }
  }
  doFade(t, e, a, n) {
    let s = -1, o = 1;
    const u = 0.5, m = 0.15;
    for (let g = a; g < a + n; ++g) {
      const A = this._partGroups[g].partIndex, x = this._partGroups[g].parameterIndex;
      if (t.getParameterValueByIndex(x) > c4) {
        if (s >= 0)
          break;
        s = g, o = t.getPartOpacityByIndex(A), o += e / this._fadeTimeSeconds, o > 1 && (o = 1);
      }
    }
    s < 0 && (s = 0, o = 1);
    for (let g = a; g < a + n; ++g) {
      const A = this._partGroups[g].partIndex;
      if (s == g)
        t.setPartOpacityByIndex(A, o);
      else {
        let x = t.getPartOpacityByIndex(A), w;
        o < u ? w = o * (u - 1) / u + 1 : w = (1 - o) * u / (1 - u), (1 - w) * (1 - o) > m && (w = 1 - m / (1 - o)), x > w && (x = w), t.setPartOpacityByIndex(A, x);
      }
    }
  }
  constructor() {
    this._fadeTimeSeconds = I0, this._lastModel = void 0, this._partGroups = [], this._partGroupCounts = [];
  }
}
class Gs {
  constructor(t) {
    this.parameterIndex = 0, this.partIndex = 0, this.partId = "", this.link = [], t != null && this.assignment(t);
  }
  assignment(t) {
    return this.partId = t.partId, this.link = t.link.map((e) => e.clone()), this;
  }
  initialize(t) {
    this.parameterIndex = t.getParameterIndex(this.partId), this.partIndex = t.getPartIndex(this.partId), t.setParameterValueByIndex(this.parameterIndex, 1);
  }
  clone() {
    const t = new Gs();
    return t.partId = this.partId, t.parameterIndex = this.parameterIndex, t.partIndex = this.partIndex, t.link = this.link.map((e) => e.clone()), t;
  }
}
class d4 {
  update() {
    this._model.update(), this._model.drawables.resetDynamicFlags();
  }
  getCanvasWidth() {
    return this._model == null ? 0 : this._model.canvasinfo.CanvasWidth / this._model.canvasinfo.PixelsPerUnit;
  }
  getCanvasHeight() {
    return this._model == null ? 0 : this._model.canvasinfo.CanvasHeight / this._model.canvasinfo.PixelsPerUnit;
  }
  saveParameters() {
    const t = this._model.parameters.count, e = this._savedParameters.length;
    for (let a = 0; a < t; ++a)
      a < e ? this._savedParameters[a] = this._parameterValues[a] : this._savedParameters.push(this._parameterValues[a]);
  }
  getModel() {
    return this._model;
  }
  getPartIndex(t) {
    let e;
    const a = this._model.parts.count;
    for (e = 0; e < a; ++e)
      if (t == this._partIds[e])
        return e;
    return t in this._notExistPartId ? this._notExistPartId[t] : (e = a + this._notExistPartId.length, this._notExistPartId[t] = e, this._notExistPartOpacities[e] = 0, e);
  }
  getPartCount() {
    return this._model.parts.count;
  }
  setPartOpacityByIndex(t, e) {
    if (t in this._notExistPartOpacities) {
      this._notExistPartOpacities[t] = e;
      return;
    }
    us(0 <= t && t < this.getPartCount()), this._partOpacities[t] = e;
  }
  setPartOpacityById(t, e) {
    const a = this.getPartIndex(t);
    a < 0 || this.setPartOpacityByIndex(a, e);
  }
  getPartOpacityByIndex(t) {
    return t in this._notExistPartOpacities ? this._notExistPartOpacities[t] : (us(0 <= t && t < this.getPartCount()), this._partOpacities[t]);
  }
  getPartOpacityById(t) {
    const e = this.getPartIndex(t);
    return e < 0 ? 0 : this.getPartOpacityByIndex(e);
  }
  getParameterIndex(t) {
    let e;
    const a = this._model.parameters.count;
    for (e = 0; e < a; ++e)
      if (t == this._parameterIds[e])
        return e;
    return t in this._notExistParameterId ? this._notExistParameterId[t] : (e = this._model.parameters.count + Object.keys(this._notExistParameterId).length, this._notExistParameterId[t] = e, this._notExistParameterValues[e] = 0, e);
  }
  getParameterCount() {
    return this._model.parameters.count;
  }
  getParameterMaximumValue(t) {
    return this._model.parameters.maximumValues[t];
  }
  getParameterMinimumValue(t) {
    return this._model.parameters.minimumValues[t];
  }
  getParameterDefaultValue(t) {
    return this._model.parameters.defaultValues[t];
  }
  getParameterValueByIndex(t) {
    return t in this._notExistParameterValues ? this._notExistParameterValues[t] : (us(0 <= t && t < this.getParameterCount()), this._parameterValues[t]);
  }
  getParameterValueById(t) {
    const e = this.getParameterIndex(t);
    return this.getParameterValueByIndex(e);
  }
  setParameterValueByIndex(t, e, a = 1) {
    if (t in this._notExistParameterValues) {
      this._notExistParameterValues[t] = a == 1 ? e : this._notExistParameterValues[t] * (1 - a) + e * a;
      return;
    }
    us(0 <= t && t < this.getParameterCount()), this._model.parameters.maximumValues[t] < e && (e = this._model.parameters.maximumValues[t]), this._model.parameters.minimumValues[t] > e && (e = this._model.parameters.minimumValues[t]), this._parameterValues[t] = a == 1 ? e : this._parameterValues[t] = this._parameterValues[t] * (1 - a) + e * a;
  }
  setParameterValueById(t, e, a = 1) {
    const n = this.getParameterIndex(t);
    this.setParameterValueByIndex(n, e, a);
  }
  addParameterValueByIndex(t, e, a = 1) {
    this.setParameterValueByIndex(t, this.getParameterValueByIndex(t) + e * a);
  }
  addParameterValueById(t, e, a = 1) {
    const n = this.getParameterIndex(t);
    this.addParameterValueByIndex(n, e, a);
  }
  multiplyParameterValueById(t, e, a = 1) {
    const n = this.getParameterIndex(t);
    this.multiplyParameterValueByIndex(n, e, a);
  }
  multiplyParameterValueByIndex(t, e, a = 1) {
    this.setParameterValueByIndex(t, this.getParameterValueByIndex(t) * (1 + (e - 1) * a));
  }
  getDrawableIds() {
    return this._drawableIds.slice();
  }
  getDrawableIndex(t) {
    const e = this._model.drawables.count;
    for (let a = 0; a < e; ++a)
      if (this._drawableIds[a] == t)
        return a;
    return -1;
  }
  getDrawableCount() {
    return this._model.drawables.count;
  }
  getDrawableId(t) {
    return this._model.drawables.ids[t];
  }
  getDrawableRenderOrders() {
    return this._model.drawables.renderOrders;
  }
  getDrawableTextureIndices(t) {
    return this._model.drawables.textureIndices[t];
  }
  getDrawableDynamicFlagVertexPositionsDidChange(t) {
    const e = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(e[t]);
  }
  getDrawableVertexIndexCount(t) {
    return this._model.drawables.indexCounts[t];
  }
  getDrawableVertexCount(t) {
    return this._model.drawables.vertexCounts[t];
  }
  getDrawableVertices(t) {
    return this.getDrawableVertexPositions(t);
  }
  getDrawableVertexIndices(t) {
    return this._model.drawables.indices[t];
  }
  getDrawableVertexPositions(t) {
    return this._model.drawables.vertexPositions[t];
  }
  getDrawableVertexUvs(t) {
    return this._model.drawables.vertexUvs[t];
  }
  getDrawableOpacity(t) {
    return this._model.drawables.opacities[t];
  }
  getDrawableCulling(t) {
    const e = this._model.drawables.constantFlags;
    return !Live2DCubismCore.Utils.hasIsDoubleSidedBit(e[t]);
  }
  getDrawableBlendMode(t) {
    const e = this._model.drawables.constantFlags;
    return Live2DCubismCore.Utils.hasBlendAdditiveBit(e[t]) ? Mi.CubismBlendMode_Additive : Live2DCubismCore.Utils.hasBlendMultiplicativeBit(e[t]) ? Mi.CubismBlendMode_Multiplicative : Mi.CubismBlendMode_Normal;
  }
  getDrawableInvertedMaskBit(t) {
    const e = this._model.drawables.constantFlags;
    return Live2DCubismCore.Utils.hasIsInvertedMaskBit(e[t]);
  }
  getDrawableMasks() {
    return this._model.drawables.masks;
  }
  getDrawableMaskCounts() {
    return this._model.drawables.maskCounts;
  }
  isUsingMasking() {
    for (let t = 0; t < this._model.drawables.count; ++t)
      if (!(this._model.drawables.maskCounts[t] <= 0))
        return !0;
    return !1;
  }
  getDrawableDynamicFlagIsVisible(t) {
    const e = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasIsVisibleBit(e[t]);
  }
  getDrawableDynamicFlagVisibilityDidChange(t) {
    const e = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(e[t]);
  }
  getDrawableDynamicFlagOpacityDidChange(t) {
    const e = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasOpacityDidChangeBit(e[t]);
  }
  getDrawableDynamicFlagRenderOrderDidChange(t) {
    const e = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(e[t]);
  }
  loadParameters() {
    let t = this._model.parameters.count;
    const e = this._savedParameters.length;
    t > e && (t = e);
    for (let a = 0; a < t; ++a)
      this._parameterValues[a] = this._savedParameters[a];
  }
  initialize() {
    this._parameterValues = this._model.parameters.values, this._partOpacities = this._model.parts.opacities, this._parameterMaximumValues = this._model.parameters.maximumValues, this._parameterMinimumValues = this._model.parameters.minimumValues;
    {
      const t = this._model.parameters.ids, e = this._model.parameters.count;
      for (let a = 0; a < e; ++a)
        this._parameterIds.push(t[a]);
    }
    {
      const t = this._model.parts.ids, e = this._model.parts.count;
      for (let a = 0; a < e; ++a)
        this._partIds.push(t[a]);
    }
    {
      const t = this._model.drawables.ids, e = this._model.drawables.count;
      for (let a = 0; a < e; ++a)
        this._drawableIds.push(t[a]);
    }
  }
  constructor(t) {
    this._model = t, this._savedParameters = [], this._parameterIds = [], this._drawableIds = [], this._partIds = [], this._notExistPartId = {}, this._notExistParameterId = {}, this._notExistParameterValues = {}, this._notExistPartOpacities = {}, this.initialize();
  }
  release() {
    this._model.release(), this._model = void 0;
  }
}
class ml {
  static create(t) {
    const e = Live2DCubismCore.Moc.fromArrayBuffer(t);
    if (e)
      return new ml(e);
    throw new Error("Unknown error");
  }
  createModel() {
    let t;
    const e = Live2DCubismCore.Model.fromMoc(this._moc);
    if (e)
      return t = new d4(e), ++this._modelCount, t;
    throw new Error("Unknown error");
  }
  deleteModel(t) {
    t != null && --this._modelCount;
  }
  constructor(t) {
    this._moc = t, this._modelCount = 0;
  }
  release() {
    this._moc._release(), this._moc = void 0;
  }
}
var kh = /* @__PURE__ */ ((i) => (i[i.CubismPhysicsTargetType_Parameter = 0] = "CubismPhysicsTargetType_Parameter", i))(kh || {}), Ji = /* @__PURE__ */ ((i) => (i[i.CubismPhysicsSource_X = 0] = "CubismPhysicsSource_X", i[i.CubismPhysicsSource_Y = 1] = "CubismPhysicsSource_Y", i[i.CubismPhysicsSource_Angle = 2] = "CubismPhysicsSource_Angle", i))(Ji || {});
class p4 {
  constructor() {
    this.initialPosition = new Nt(0, 0), this.position = new Nt(0, 0), this.lastPosition = new Nt(0, 0), this.lastGravity = new Nt(0, 0), this.force = new Nt(0, 0), this.velocity = new Nt(0, 0);
  }
}
class _4 {
  constructor() {
    this.normalizationPosition = {}, this.normalizationAngle = {};
  }
}
class v4 {
  constructor() {
    this.source = {};
  }
}
class m4 {
  constructor() {
    this.destination = {}, this.translationScale = new Nt(0, 0);
  }
}
class g4 {
  constructor() {
    this.settings = [], this.inputs = [], this.outputs = [], this.particles = [], this.gravity = new Nt(0, 0), this.wind = new Nt(0, 0);
  }
}
class y4 {
  constructor(t) {
    this._json = t;
  }
  release() {
    this._json = void 0;
  }
  getGravity() {
    const t = new Nt(0, 0);
    return t.x = this._json.Meta.EffectiveForces.Gravity.X, t.y = this._json.Meta.EffectiveForces.Gravity.Y, t;
  }
  getWind() {
    const t = new Nt(0, 0);
    return t.x = this._json.Meta.EffectiveForces.Wind.X, t.y = this._json.Meta.EffectiveForces.Wind.Y, t;
  }
  getSubRigCount() {
    return this._json.Meta.PhysicsSettingCount;
  }
  getTotalInputCount() {
    return this._json.Meta.TotalInputCount;
  }
  getTotalOutputCount() {
    return this._json.Meta.TotalOutputCount;
  }
  getVertexCount() {
    return this._json.Meta.VertexCount;
  }
  getNormalizationPositionMinimumValue(t) {
    return this._json.PhysicsSettings[t].Normalization.Position.Minimum;
  }
  getNormalizationPositionMaximumValue(t) {
    return this._json.PhysicsSettings[t].Normalization.Position.Maximum;
  }
  getNormalizationPositionDefaultValue(t) {
    return this._json.PhysicsSettings[t].Normalization.Position.Default;
  }
  getNormalizationAngleMinimumValue(t) {
    return this._json.PhysicsSettings[t].Normalization.Angle.Minimum;
  }
  getNormalizationAngleMaximumValue(t) {
    return this._json.PhysicsSettings[t].Normalization.Angle.Maximum;
  }
  getNormalizationAngleDefaultValue(t) {
    return this._json.PhysicsSettings[t].Normalization.Angle.Default;
  }
  getInputCount(t) {
    return this._json.PhysicsSettings[t].Input.length;
  }
  getInputWeight(t, e) {
    return this._json.PhysicsSettings[t].Input[e].Weight;
  }
  getInputReflect(t, e) {
    return this._json.PhysicsSettings[t].Input[e].Reflect;
  }
  getInputType(t, e) {
    return this._json.PhysicsSettings[t].Input[e].Type;
  }
  getInputSourceId(t, e) {
    return this._json.PhysicsSettings[t].Input[e].Source.Id;
  }
  getOutputCount(t) {
    return this._json.PhysicsSettings[t].Output.length;
  }
  getOutputVertexIndex(t, e) {
    return this._json.PhysicsSettings[t].Output[e].VertexIndex;
  }
  getOutputAngleScale(t, e) {
    return this._json.PhysicsSettings[t].Output[e].Scale;
  }
  getOutputWeight(t, e) {
    return this._json.PhysicsSettings[t].Output[e].Weight;
  }
  getOutputDestinationId(t, e) {
    return this._json.PhysicsSettings[t].Output[e].Destination.Id;
  }
  getOutputType(t, e) {
    return this._json.PhysicsSettings[t].Output[e].Type;
  }
  getOutputReflect(t, e) {
    return this._json.PhysicsSettings[t].Output[e].Reflect;
  }
  getParticleCount(t) {
    return this._json.PhysicsSettings[t].Vertices.length;
  }
  getParticleMobility(t, e) {
    return this._json.PhysicsSettings[t].Vertices[e].Mobility;
  }
  getParticleDelay(t, e) {
    return this._json.PhysicsSettings[t].Vertices[e].Delay;
  }
  getParticleAcceleration(t, e) {
    return this._json.PhysicsSettings[t].Vertices[e].Acceleration;
  }
  getParticleRadius(t, e) {
    return this._json.PhysicsSettings[t].Vertices[e].Radius;
  }
  getParticlePosition(t, e) {
    const a = new Nt(0, 0);
    return a.x = this._json.PhysicsSettings[t].Vertices[e].Position.X, a.y = this._json.PhysicsSettings[t].Vertices[e].Position.Y, a;
  }
}
const P0 = "X", M0 = "Y", C0 = "Angle", b4 = 5, Rd = 100, x4 = 1e-3;
class gl {
  static create(t) {
    const e = new gl();
    return e.parse(t), e._physicsRig.gravity.y = 0, e;
  }
  evaluate(t, e) {
    let a, n, s, o;
    const u = new Nt();
    let m, g, A, x, w, C, O, L;
    w = t.getModel().parameters.values, C = t.getModel().parameters.maximumValues, O = t.getModel().parameters.minimumValues, L = t.getModel().parameters.defaultValues;
    for (let D = 0; D < this._physicsRig.subRigCount; ++D) {
      a = { angle: 0 }, u.x = 0, u.y = 0, m = this._physicsRig.settings[D], g = this._physicsRig.inputs.slice(m.baseInputIndex), A = this._physicsRig.outputs.slice(m.baseOutputIndex), x = this._physicsRig.particles.slice(m.baseParticleIndex);
      for (let H = 0; H < m.inputCount; ++H)
        n = g[H].weight / Rd, g[H].sourceParameterIndex == -1 && (g[H].sourceParameterIndex = t.getParameterIndex(g[H].source.id)), g[H].getNormalizedParameterValue(u, a, w[g[H].sourceParameterIndex], O[g[H].sourceParameterIndex], C[g[H].sourceParameterIndex], L[g[H].sourceParameterIndex], m.normalizationPosition, m.normalizationAngle, g[H].reflect, n);
      s = de.degreesToRadian(-a.angle), u.x = u.x * de.cos(s) - u.y * de.sin(s), u.y = u.x * de.sin(s) + u.y * de.cos(s), L4(x, m.particleCount, u, a.angle, this._options.wind, x4 * m.normalizationPosition.maximum, e, b4);
      for (let H = 0; H < m.outputCount; ++H) {
        const k = A[H].vertexIndex;
        if (k < 1 || k >= m.particleCount)
          break;
        A[H].destinationParameterIndex == -1 && (A[H].destinationParameterIndex = t.getParameterIndex(A[H].destination.id));
        const G = new Nt();
        G.x = x[k].position.x - x[k - 1].position.x, G.y = x[k].position.y - x[k - 1].position.y, o = A[H].getValue(G, x, k, A[H].reflect, this._options.gravity);
        const z = A[H].destinationParameterIndex, Y = !Float32Array.prototype.slice && "subarray" in Float32Array.prototype ? JSON.parse(JSON.stringify(w.subarray(z))) : w.slice(z);
        D4(Y, O[z], C[z], o, A[H]);
        for (let K = z, J = 0; K < w.length; K++, J++)
          w[K] = Y[J];
      }
    }
  }
  setOptions(t) {
    this._options = t;
  }
  getOption() {
    return this._options;
  }
  constructor() {
    this._options = new T4(), this._options.gravity.y = -1, this._options.gravity.x = 0, this._options.wind.x = 0, this._options.wind.y = 0;
  }
  release() {
    this._physicsRig = void 0;
  }
  parse(t) {
    this._physicsRig = new g4();
    let e = new y4(t);
    this._physicsRig.gravity = e.getGravity(), this._physicsRig.wind = e.getWind(), this._physicsRig.subRigCount = e.getSubRigCount();
    let a = 0, n = 0, s = 0;
    for (let o = 0; o < this._physicsRig.subRigCount; ++o) {
      const u = new _4();
      u.normalizationPosition.minimum = e.getNormalizationPositionMinimumValue(o), u.normalizationPosition.maximum = e.getNormalizationPositionMaximumValue(o), u.normalizationPosition.defalut = e.getNormalizationPositionDefaultValue(o), u.normalizationAngle.minimum = e.getNormalizationAngleMinimumValue(o), u.normalizationAngle.maximum = e.getNormalizationAngleMaximumValue(o), u.normalizationAngle.defalut = e.getNormalizationAngleDefaultValue(o), u.inputCount = e.getInputCount(o), u.baseInputIndex = a, a += u.inputCount;
      for (let m = 0; m < u.inputCount; ++m) {
        const g = new v4();
        switch (g.sourceParameterIndex = -1, g.weight = e.getInputWeight(o, m), g.reflect = e.getInputReflect(o, m), e.getInputType(o, m)) {
          case P0:
            g.type = Ji.CubismPhysicsSource_X, g.getNormalizedParameterValue = A4;
            break;
          case M0:
            g.type = Ji.CubismPhysicsSource_Y, g.getNormalizedParameterValue = S4;
            break;
          case C0:
            g.type = Ji.CubismPhysicsSource_Angle, g.getNormalizedParameterValue = E4;
            break;
        }
        g.source.targetType = kh.CubismPhysicsTargetType_Parameter, g.source.id = e.getInputSourceId(o, m), this._physicsRig.inputs.push(g);
      }
      u.outputCount = e.getOutputCount(o), u.baseOutputIndex = n, n += u.outputCount;
      for (let m = 0; m < u.outputCount; ++m) {
        const g = new m4();
        switch (g.destinationParameterIndex = -1, g.vertexIndex = e.getOutputVertexIndex(o, m), g.angleScale = e.getOutputAngleScale(o, m), g.weight = e.getOutputWeight(o, m), g.destination.targetType = kh.CubismPhysicsTargetType_Parameter, g.destination.id = e.getOutputDestinationId(o, m), e.getOutputType(o, m)) {
          case P0:
            g.type = Ji.CubismPhysicsSource_X, g.getValue = w4, g.getScale = O4;
            break;
          case M0:
            g.type = Ji.CubismPhysicsSource_Y, g.getValue = I4, g.getScale = $4;
            break;
          case C0:
            g.type = Ji.CubismPhysicsSource_Angle, g.getValue = P4, g.getScale = R4;
            break;
        }
        g.reflect = e.getOutputReflect(o, m), this._physicsRig.outputs.push(g);
      }
      u.particleCount = e.getParticleCount(o), u.baseParticleIndex = s, s += u.particleCount;
      for (let m = 0; m < u.particleCount; ++m) {
        const g = new p4();
        g.mobility = e.getParticleMobility(o, m), g.delay = e.getParticleDelay(o, m), g.acceleration = e.getParticleAcceleration(o, m), g.radius = e.getParticleRadius(o, m), g.position = e.getParticlePosition(o, m), this._physicsRig.particles.push(g);
      }
      this._physicsRig.settings.push(u);
    }
    this.initialize(), e.release();
  }
  initialize() {
    let t, e, a;
    for (let n = 0; n < this._physicsRig.subRigCount; ++n) {
      e = this._physicsRig.settings[n], t = this._physicsRig.particles.slice(e.baseParticleIndex), t[0].initialPosition = new Nt(0, 0), t[0].lastPosition = new Nt(t[0].initialPosition.x, t[0].initialPosition.y), t[0].lastGravity = new Nt(0, -1), t[0].lastGravity.y *= -1, t[0].velocity = new Nt(0, 0), t[0].force = new Nt(0, 0);
      for (let s = 1; s < e.particleCount; ++s)
        a = new Nt(0, 0), a.y = t[s].radius, t[s].initialPosition = new Nt(t[s - 1].initialPosition.x + a.x, t[s - 1].initialPosition.y + a.y), t[s].position = new Nt(t[s].initialPosition.x, t[s].initialPosition.y), t[s].lastPosition = new Nt(t[s].initialPosition.x, t[s].initialPosition.y), t[s].lastGravity = new Nt(0, -1), t[s].lastGravity.y *= -1, t[s].velocity = new Nt(0, 0), t[s].force = new Nt(0, 0);
    }
  }
}
class T4 {
  constructor() {
    this.gravity = new Nt(0, 0), this.wind = new Nt(0, 0);
  }
}
function A4(i, t, e, a, n, s, o, u, m, g) {
  i.x += yl(e, a, n, s, o.minimum, o.maximum, o.defalut, m) * g;
}
function S4(i, t, e, a, n, s, o, u, m, g) {
  i.y += yl(e, a, n, s, o.minimum, o.maximum, o.defalut, m) * g;
}
function E4(i, t, e, a, n, s, o, u, m, g) {
  t.angle += yl(e, a, n, s, u.minimum, u.maximum, u.defalut, m) * g;
}
function w4(i, t, e, a, n) {
  let s = i.x;
  return a && (s *= -1), s;
}
function I4(i, t, e, a, n) {
  let s = i.y;
  return a && (s *= -1), s;
}
function P4(i, t, e, a, n) {
  let s;
  return e >= 2 ? n = t[e - 1].position.substract(t[e - 2].position) : n = n.multiplyByScaler(-1), s = de.directionToRadian(n, i), a && (s *= -1), s;
}
function M4(i, t) {
  return Math.abs(Math.max(i, t) - Math.min(i, t));
}
function C4(i, t) {
  return Math.min(i, t) + M4(i, t) / 2;
}
function O4(i, t) {
  return i.x;
}
function $4(i, t) {
  return i.y;
}
function R4(i, t) {
  return t;
}
function L4(i, t, e, a, n, s, o, u) {
  let m, g, A, x, w = new Nt(0, 0), C = new Nt(0, 0), O = new Nt(0, 0), L = new Nt(0, 0);
  i[0].position = new Nt(e.x, e.y), m = de.degreesToRadian(a), x = de.radianToDirection(m), x.normalize();
  for (let D = 1; D < t; ++D)
    i[D].force = x.multiplyByScaler(i[D].acceleration).add(n), i[D].lastPosition = new Nt(i[D].position.x, i[D].position.y), g = i[D].delay * o * 30, w = i[D].position.substract(i[D - 1].position), A = de.directionToRadian(i[D].lastGravity, x) / u, w.x = de.cos(A) * w.x - w.y * de.sin(A), w.y = de.sin(A) * w.x + w.y * de.cos(A), i[D].position = i[D - 1].position.add(w), C = i[D].velocity.multiplyByScaler(g), O = i[D].force.multiplyByScaler(g).multiplyByScaler(g), i[D].position = i[D].position.add(C).add(O), L = i[D].position.substract(i[D - 1].position), L.normalize(), i[D].position = i[D - 1].position.add(L.multiplyByScaler(i[D].radius)), de.abs(i[D].position.x) < s && (i[D].position.x = 0), g != 0 && (i[D].velocity = i[D].position.substract(i[D].lastPosition), i[D].velocity = i[D].velocity.divisionByScalar(g), i[D].velocity = i[D].velocity.multiplyByScaler(i[D].mobility)), i[D].force = new Nt(0, 0), i[D].lastGravity = new Nt(x.x, x.y);
}
function D4(i, t, e, a, n) {
  let s, o, u;
  s = n.getScale(n.translationScale, n.angleScale), o = a * s, o < t ? (o < n.valueBelowMinimum && (n.valueBelowMinimum = o), o = t) : o > e && (o > n.valueExceededMaximum && (n.valueExceededMaximum = o), o = e), u = n.weight / Rd, u >= 1 || (o = i[0] * (1 - u) + o * u), i[0] = o;
}
function yl(i, t, e, a, n, s, o, u) {
  let m = 0;
  const g = de.max(e, t);
  g < i && (i = g);
  const A = de.min(e, t);
  A > i && (i = A);
  const x = de.min(n, s), w = de.max(n, s), C = o, O = C4(A, g), L = i - O;
  switch (Math.sign(L)) {
    case 1: {
      const D = w - C, H = g - O;
      H != 0 && (m = L * (D / H), m += C);
      break;
    }
    case -1: {
      const D = x - C, H = A - O;
      H != 0 && (m = L * (D / H), m += C);
      break;
    }
    case 0: {
      m = C;
      break;
    }
  }
  return u ? m : m * -1;
}
xe.registerRuntime({
  version: 4,
  ready: l4,
  test(i) {
    return i instanceof Pa || Pa.isValidJSON(i);
  },
  isValidMoc(i) {
    if (i.byteLength < 4)
      return !1;
    const t = new Int8Array(i, 0, 4);
    return String.fromCharCode(...t) === "MOC3";
  },
  createModelSettings(i) {
    return new Pa(i);
  },
  createCoreModel(i) {
    const t = ml.create(i);
    try {
      const e = t.createModel();
      return e.__moc = t, e;
    } catch (e) {
      try {
        t.release();
      } catch (a) {
      }
      throw e;
    }
  },
  createInternalModel(i, t, e) {
    const a = new u4(i, t, e), n = i;
    return n.__moc && (a.__moc = n.__moc, delete n.__moc, a.once("destroy", N4)), a;
  },
  createPhysics(i, t) {
    return gl.create(t);
  },
  createPose(i, t) {
    return vl.create(t);
  }
});
function N4() {
  var i;
  (i = this.__moc) == null || i.release();
}
/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Qr;
(function(i) {
  i.MITER = "miter", i.BEVEL = "bevel", i.ROUND = "round";
})(Qr || (Qr = {}));
var di;
(function(i) {
  i.BUTT = "butt", i.ROUND = "round", i.SQUARE = "square";
})(di || (di = {}));
var La = {
  adaptive: !0,
  maxLength: 10,
  minSegments: 8,
  maxSegments: 2048,
  epsilon: 1e-4,
  _segmentsCount: function(i, t) {
    if (t === void 0 && (t = 20), !this.adaptive || !i || isNaN(i))
      return t;
    var e = Math.ceil(i / this.maxLength);
    return e < this.minSegments ? e = this.minSegments : e > this.maxSegments && (e = this.maxSegments), e;
  }
}, bl = (
  /** @class */
  function() {
    function i() {
      this.color = 16777215, this.alpha = 1, this.texture = Ot.WHITE, this.matrix = null, this.visible = !1, this.reset();
    }
    return i.prototype.clone = function() {
      var t = new i();
      return t.color = this.color, t.alpha = this.alpha, t.texture = this.texture, t.matrix = this.matrix, t.visible = this.visible, t;
    }, i.prototype.reset = function() {
      this.color = 16777215, this.alpha = 1, this.texture = Ot.WHITE, this.matrix = null, this.visible = !1;
    }, i.prototype.destroy = function() {
      this.texture = null, this.matrix = null;
    }, i;
  }()
);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Uh = function(i, t) {
  return Uh = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, Uh(i, t);
};
function xl(i, t) {
  Uh(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
function O0(i, t) {
  var e, a;
  t === void 0 && (t = !1);
  var n = i.length;
  if (!(n < 6)) {
    for (var s = 0, o = 0, u = i[n - 2], m = i[n - 1]; o < n; o += 2) {
      var g = i[o], A = i[o + 1];
      s += (g - u) * (A + m), u = g, m = A;
    }
    if (!t && s > 0 || t && s <= 0)
      for (var x = n / 2, o = x + x % 2; o < n; o += 2) {
        var w = n - o - 2, C = n - o - 1, O = o, L = o + 1;
        e = [i[O], i[w]], i[w] = e[0], i[O] = e[1], a = [i[L], i[C]], i[C] = a[0], i[L] = a[1];
      }
  }
}
var Tl = {
  build: function(i) {
    i.points = i.shape.points.slice();
  },
  triangulate: function(i, t) {
    var e = i.points, a = i.holes, n = t.points, s = t.indices;
    if (e.length >= 6) {
      O0(e, !1);
      for (var o = [], u = 0; u < a.length; u++) {
        var m = a[u];
        O0(m.points, !0), o.push(e.length / 2), e = e.concat(m.points);
      }
      var g = bu(e, o, 2);
      if (!g)
        return;
      for (var A = n.length / 2, u = 0; u < g.length; u += 3)
        s.push(g[u] + A), s.push(g[u + 1] + A), s.push(g[u + 2] + A);
      for (var u = 0; u < e.length; u++)
        n.push(e[u]);
    }
  }
}, Dn = {
  build: function(i) {
    var t = i.points, e, a, n, s, o, u;
    if (i.type === Ve.CIRC) {
      var m = i.shape;
      e = m.x, a = m.y, o = u = m.radius, n = s = 0;
    } else if (i.type === Ve.ELIP) {
      var g = i.shape;
      e = g.x, a = g.y, o = g.width, u = g.height, n = s = 0;
    } else {
      var A = i.shape, x = A.width / 2, w = A.height / 2;
      e = A.x + x, a = A.y + w, o = u = Math.max(0, Math.min(A.radius, Math.min(x, w))), n = x - o, s = w - u;
    }
    if (!(o >= 0 && u >= 0 && n >= 0 && s >= 0)) {
      t.length = 0;
      return;
    }
    var C = Math.ceil(2.3 * Math.sqrt(o + u)), O = C * 8 + (n ? 4 : 0) + (s ? 4 : 0);
    if (t.length = O, O !== 0) {
      if (C === 0) {
        t.length = 8, t[0] = t[6] = e + n, t[1] = t[3] = a + s, t[2] = t[4] = e - n, t[5] = t[7] = a - s;
        return;
      }
      var L = 0, D = C * 4 + (n ? 2 : 0) + 2, H = D, k = O;
      {
        var G = n + o, z = s, Y = e + G, K = e - G, J = a + z;
        if (t[L++] = Y, t[L++] = J, t[--D] = J, t[--D] = K, s) {
          var nt = a - z;
          t[H++] = K, t[H++] = nt, t[--k] = nt, t[--k] = Y;
        }
      }
      for (var q = 1; q < C; q++) {
        var tt = Math.PI / 2 * (q / C), G = n + Math.cos(tt) * o, z = s + Math.sin(tt) * u, Y = e + G, K = e - G, J = a + z, nt = a - z;
        t[L++] = Y, t[L++] = J, t[--D] = J, t[--D] = K, t[H++] = K, t[H++] = nt, t[--k] = nt, t[--k] = Y;
      }
      {
        var G = n, z = s + u, Y = e + G, K = e - G, J = a + z, nt = a - z;
        t[L++] = Y, t[L++] = J, t[--k] = nt, t[--k] = Y, n && (t[L++] = K, t[L++] = J, t[--k] = nt, t[--k] = K);
      }
    }
  },
  triangulate: function(i, t) {
    var e = i.points, a = t.points, n = t.indices;
    if (e.length !== 0) {
      var s = a.length / 2, o = s, u, m;
      if (i.type !== Ve.RREC) {
        var g = i.shape;
        u = g.x, m = g.y;
      } else {
        var A = i.shape;
        u = A.x + A.width / 2, m = A.y + A.height / 2;
      }
      var x = i.matrix;
      a.push(i.matrix ? x.a * u + x.c * m + x.tx : u, i.matrix ? x.b * u + x.d * m + x.ty : m), s++, a.push(e[0], e[1]);
      for (var w = 2; w < e.length; w += 2)
        a.push(e[w], e[w + 1]), n.push(s++, o, s);
      n.push(o + 1, o, s);
    }
  }
}, Ld = {
  build: function(i) {
    var t = i.shape, e = t.x, a = t.y, n = t.width, s = t.height, o = i.points;
    o.length = 0, o.push(e, a, e + n, a, e + n, a + s, e, a + s);
  },
  triangulate: function(i, t) {
    var e = i.points, a = t.points, n = a.length / 2;
    a.push(e[0], e[1], e[2], e[3], e[6], e[7], e[4], e[5]), t.indices.push(n, n + 1, n + 2, n + 1, n + 2, n + 3);
  }
};
function ba(i, t, e) {
  var a = t - i;
  return i + a * e;
}
function fs(i, t, e, a, n, s, o) {
  o === void 0 && (o = []);
  for (var u = 20, m = o, g = 0, A = 0, x = 0, w = 0, C = 0, O = 0, L = 0, D = 0; L <= u; ++L)
    D = L / u, g = ba(i, e, D), A = ba(t, a, D), x = ba(e, n, D), w = ba(a, s, D), C = ba(g, x, D), O = ba(A, w, D), !(L === 0 && m[m.length - 2] === C && m[m.length - 1] === O) && m.push(C, O);
  return m;
}
var Dd = {
  build: function(i) {
    if (Da.nextRoundedRectBehavior) {
      Dn.build(i);
      return;
    }
    var t = i.shape, e = i.points, a = t.x, n = t.y, s = t.width, o = t.height, u = Math.max(0, Math.min(t.radius, Math.min(s, o) / 2));
    e.length = 0, u ? (fs(a, n + u, a, n, a + u, n, e), fs(a + s - u, n, a + s, n, a + s, n + u, e), fs(a + s, n + o - u, a + s, n + o, a + s - u, n + o, e), fs(a + u, n + o, a, n + o, a, n + o - u, e)) : e.push(a, n, a + s, n, a + s, n + o, a, n + o);
  },
  triangulate: function(i, t) {
    if (Da.nextRoundedRectBehavior) {
      Dn.triangulate(i, t);
      return;
    }
    for (var e = i.points, a = t.points, n = t.indices, s = a.length / 2, o = bu(e, null, 2), u = 0, m = o.length; u < m; u += 3)
      n.push(o[u] + s), n.push(o[u + 1] + s), n.push(o[u + 2] + s);
    for (var u = 0, m = e.length; u < m; u++)
      a.push(e[u], e[++u]);
  }
};
function $0(i, t, e, a, n, s, o, u) {
  var m = i - e * n, g = t - a * n, A = i + e * s, x = t + a * s, w, C;
  o ? (w = a, C = -e) : (w = -a, C = e);
  var O = m + w, L = g + C, D = A + w, H = x + C;
  return u.push(O, L), u.push(D, H), 2;
}
function Gi(i, t, e, a, n, s, o, u) {
  var m = e - i, g = a - t, A = Math.atan2(m, g), x = Math.atan2(n - i, s - t);
  u && A < x ? A += Math.PI * 2 : !u && A > x && (x += Math.PI * 2);
  var w = A, C = x - A, O = Math.abs(C), L = Math.sqrt(m * m + g * g), D = (15 * O * Math.sqrt(L) / Math.PI >> 0) + 1, H = C / D;
  if (w += H, u) {
    o.push(i, t), o.push(e, a);
    for (var k = 1, G = w; k < D; k++, G += H)
      o.push(i, t), o.push(i + Math.sin(G) * L, t + Math.cos(G) * L);
    o.push(i, t), o.push(n, s);
  } else {
    o.push(e, a), o.push(i, t);
    for (var k = 1, G = w; k < D; k++, G += H)
      o.push(i + Math.sin(G) * L, t + Math.cos(G) * L), o.push(i, t);
    o.push(n, s), o.push(i, t);
  }
  return D * 2;
}
function F4(i, t) {
  var e = i.shape, a = i.points || e.points.slice(), n = t.closePointEps;
  if (a.length !== 0) {
    var s = i.lineStyle, o = new le(a[0], a[1]), u = new le(a[a.length - 2], a[a.length - 1]), m = e.type !== Ve.POLY || e.closeStroke, g = Math.abs(o.x - u.x) < n && Math.abs(o.y - u.y) < n;
    if (m) {
      a = a.slice(), g && (a.pop(), a.pop(), u.set(a[a.length - 2], a[a.length - 1]));
      var A = (o.x + u.x) * 0.5, x = (u.y + o.y) * 0.5;
      a.unshift(A, x), a.push(A, x);
    }
    var w = t.points, C = a.length / 2, O = a.length, L = w.length / 2, D = s.width / 2, H = D * D, k = s.miterLimit * s.miterLimit, G = a[0], z = a[1], Y = a[2], K = a[3], J = 0, nt = 0, q = -(z - K), tt = G - Y, lt = 0, bt = 0, Et = Math.sqrt(q * q + tt * tt);
    q /= Et, tt /= Et, q *= D, tt *= D;
    var Bt = s.alignment, pt = (1 - Bt) * 2, dt = Bt * 2;
    m || (s.cap === di.ROUND ? O += Gi(G - q * (pt - dt) * 0.5, z - tt * (pt - dt) * 0.5, G - q * pt, z - tt * pt, G + q * dt, z + tt * dt, w, !0) + 2 : s.cap === di.SQUARE && (O += $0(G, z, q, tt, pt, dt, !0, w))), w.push(G - q * pt, z - tt * pt), w.push(G + q * dt, z + tt * dt);
    for (var $t = 1; $t < C - 1; ++$t) {
      G = a[($t - 1) * 2], z = a[($t - 1) * 2 + 1], Y = a[$t * 2], K = a[$t * 2 + 1], J = a[($t + 1) * 2], nt = a[($t + 1) * 2 + 1], q = -(z - K), tt = G - Y, Et = Math.sqrt(q * q + tt * tt), q /= Et, tt /= Et, q *= D, tt *= D, lt = -(K - nt), bt = Y - J, Et = Math.sqrt(lt * lt + bt * bt), lt /= Et, bt /= Et, lt *= D, bt *= D;
      var ve = Y - G, Kt = z - K, ft = Y - J, at = nt - K, kt = ve * ft + Kt * at, Wt = Kt * ft - at * ve, Jt = Wt < 0;
      if (Math.abs(Wt) < 1e-3 * Math.abs(kt)) {
        w.push(Y - q * pt, K - tt * pt), w.push(Y + q * dt, K + tt * dt), kt >= 0 && (s.join === Qr.ROUND ? O += Gi(Y, K, Y - q * pt, K - tt * pt, Y - lt * pt, K - bt * pt, w, !1) + 4 : O += 2, w.push(Y - lt * dt, K - bt * dt), w.push(Y + lt * pt, K + bt * pt));
        continue;
      }
      var fe = (-q + G) * (-tt + K) - (-q + Y) * (-tt + z), oe = (-lt + J) * (-bt + K) - (-lt + Y) * (-bt + nt), he = (ve * oe - ft * fe) / Wt, Pe = (at * fe - Kt * oe) / Wt, He = (he - Y) * (he - Y) + (Pe - K) * (Pe - K), me = Y + (he - Y) * pt, Xt = K + (Pe - K) * pt, ee = Y - (he - Y) * dt, re = K - (Pe - K) * dt, Gt = Math.min(ve * ve + Kt * Kt, ft * ft + at * at), Be = Jt ? pt : dt, W = Gt + Be * Be * H, qt = He <= W;
      qt ? s.join === Qr.BEVEL || He / H > k ? (Jt ? (w.push(me, Xt), w.push(Y + q * dt, K + tt * dt), w.push(me, Xt), w.push(Y + lt * dt, K + bt * dt)) : (w.push(Y - q * pt, K - tt * pt), w.push(ee, re), w.push(Y - lt * pt, K - bt * pt), w.push(ee, re)), O += 2) : s.join === Qr.ROUND ? Jt ? (w.push(me, Xt), w.push(Y + q * dt, K + tt * dt), O += Gi(Y, K, Y + q * dt, K + tt * dt, Y + lt * dt, K + bt * dt, w, !0) + 4, w.push(me, Xt), w.push(Y + lt * dt, K + bt * dt)) : (w.push(Y - q * pt, K - tt * pt), w.push(ee, re), O += Gi(Y, K, Y - q * pt, K - tt * pt, Y - lt * pt, K - bt * pt, w, !1) + 4, w.push(Y - lt * pt, K - bt * pt), w.push(ee, re)) : (w.push(me, Xt), w.push(ee, re)) : (w.push(Y - q * pt, K - tt * pt), w.push(Y + q * dt, K + tt * dt), s.join === Qr.ROUND ? Jt ? O += Gi(Y, K, Y + q * dt, K + tt * dt, Y + lt * dt, K + bt * dt, w, !0) + 2 : O += Gi(Y, K, Y - q * pt, K - tt * pt, Y - lt * pt, K - bt * pt, w, !1) + 2 : s.join === Qr.MITER && He / H <= k && (Jt ? (w.push(ee, re), w.push(ee, re)) : (w.push(me, Xt), w.push(me, Xt)), O += 2), w.push(Y - lt * pt, K - bt * pt), w.push(Y + lt * dt, K + bt * dt), O += 2);
    }
    G = a[(C - 2) * 2], z = a[(C - 2) * 2 + 1], Y = a[(C - 1) * 2], K = a[(C - 1) * 2 + 1], q = -(z - K), tt = G - Y, Et = Math.sqrt(q * q + tt * tt), q /= Et, tt /= Et, q *= D, tt *= D, w.push(Y - q * pt, K - tt * pt), w.push(Y + q * dt, K + tt * dt), m || (s.cap === di.ROUND ? O += Gi(Y - q * (pt - dt) * 0.5, K - tt * (pt - dt) * 0.5, Y - q * pt, K - tt * pt, Y + q * dt, K + tt * dt, w, !1) + 2 : s.cap === di.SQUARE && (O += $0(Y, K, q, tt, pt, dt, !1, w)));
    for (var dr = t.indices, ii = La.epsilon * La.epsilon, $t = L; $t < O + L - 2; ++$t)
      G = w[$t * 2], z = w[$t * 2 + 1], Y = w[($t + 1) * 2], K = w[($t + 1) * 2 + 1], J = w[($t + 2) * 2], nt = w[($t + 2) * 2 + 1], !(Math.abs(G * (K - nt) + Y * (nt - z) + J * (z - K)) < ii) && dr.push($t, $t + 1, $t + 2);
  }
}
function H4(i, t) {
  var e = 0, a = i.shape, n = i.points || a.points, s = a.type !== Ve.POLY || a.closeStroke;
  if (n.length !== 0) {
    var o = t.points, u = t.indices, m = n.length / 2, g = o.length / 2, A = g;
    for (o.push(n[0], n[1]), e = 1; e < m; e++)
      o.push(n[e * 2], n[e * 2 + 1]), u.push(A, A + 1), A++;
    s && u.push(A, g);
  }
}
function Gh(i, t) {
  i.lineStyle.native ? H4(i, t) : F4(i, t);
}
var Xh = (
  /** @class */
  function() {
    function i() {
    }
    return i.curveTo = function(t, e, a, n, s, o) {
      var u = o[o.length - 2], m = o[o.length - 1], g = m - e, A = u - t, x = n - e, w = a - t, C = Math.abs(g * w - A * x);
      if (C < 1e-8 || s === 0)
        return (o[o.length - 2] !== t || o[o.length - 1] !== e) && o.push(t, e), null;
      var O = g * g + A * A, L = x * x + w * w, D = g * x + A * w, H = s * Math.sqrt(O) / C, k = s * Math.sqrt(L) / C, G = H * D / O, z = k * D / L, Y = H * w + k * A, K = H * x + k * g, J = A * (k + G), nt = g * (k + G), q = w * (H + z), tt = x * (H + z), lt = Math.atan2(nt - K, J - Y), bt = Math.atan2(tt - K, q - Y);
      return {
        cx: Y + t,
        cy: K + e,
        radius: s,
        startAngle: lt,
        endAngle: bt,
        anticlockwise: A * x > w * g
      };
    }, i.arc = function(t, e, a, n, s, o, u, m, g) {
      for (var A = u - o, x = La._segmentsCount(Math.abs(A) * s, Math.ceil(Math.abs(A) / Cn) * 40), w = A / (x * 2), C = w * 2, O = Math.cos(w), L = Math.sin(w), D = x - 1, H = D % 1 / D, k = 0; k <= D; ++k) {
        var G = k + H * k, z = w + o + C * G, Y = Math.cos(z), K = -Math.sin(z);
        g.push((O * Y + L * K) * s + a, (O * -K + L * Y) * s + n);
      }
    }, i;
  }()
), Nd = (
  /** @class */
  function() {
    function i() {
    }
    return i.curveLength = function(t, e, a, n, s, o, u, m) {
      for (var g = 10, A = 0, x = 0, w = 0, C = 0, O = 0, L = 0, D = 0, H = 0, k = 0, G = 0, z = 0, Y = t, K = e, J = 1; J <= g; ++J)
        x = J / g, w = x * x, C = w * x, O = 1 - x, L = O * O, D = L * O, H = D * t + 3 * L * x * a + 3 * O * w * s + C * u, k = D * e + 3 * L * x * n + 3 * O * w * o + C * m, G = Y - H, z = K - k, Y = H, K = k, A += Math.sqrt(G * G + z * z);
      return A;
    }, i.curveTo = function(t, e, a, n, s, o, u) {
      var m = u[u.length - 2], g = u[u.length - 1];
      u.length -= 2;
      var A = La._segmentsCount(i.curveLength(m, g, t, e, a, n, s, o)), x = 0, w = 0, C = 0, O = 0, L = 0;
      u.push(m, g);
      for (var D = 1, H = 0; D <= A; ++D)
        H = D / A, x = 1 - H, w = x * x, C = w * x, O = H * H, L = O * H, u.push(C * m + 3 * w * H * t + 3 * x * O * a + L * s, C * g + 3 * w * H * e + 3 * x * O * n + L * o);
    }, i;
  }()
), Fd = (
  /** @class */
  function() {
    function i() {
    }
    return i.curveLength = function(t, e, a, n, s, o) {
      var u = t - 2 * a + s, m = e - 2 * n + o, g = 2 * a - 2 * t, A = 2 * n - 2 * e, x = 4 * (u * u + m * m), w = 4 * (u * g + m * A), C = g * g + A * A, O = 2 * Math.sqrt(x + w + C), L = Math.sqrt(x), D = 2 * x * L, H = 2 * Math.sqrt(C), k = w / L;
      return (D * O + L * w * (O - H) + (4 * C * x - w * w) * Math.log((2 * L + k + O) / (k + H))) / (4 * D);
    }, i.curveTo = function(t, e, a, n, s) {
      for (var o = s[s.length - 2], u = s[s.length - 1], m = La._segmentsCount(i.curveLength(o, u, t, e, a, n)), g = 0, A = 0, x = 1; x <= m; ++x) {
        var w = x / m;
        g = o + (t - o) * w, A = u + (e - u) * w, s.push(g + (t + (a - t) * w - g) * w, A + (e + (n - e) * w - A) * w);
      }
    }, i;
  }()
), Hd = (
  /** @class */
  function() {
    function i() {
      this.reset();
    }
    return i.prototype.begin = function(t, e, a) {
      this.reset(), this.style = t, this.start = e, this.attribStart = a;
    }, i.prototype.end = function(t, e) {
      this.attribSize = e - this.attribStart, this.size = t - this.start;
    }, i.prototype.reset = function() {
      this.style = null, this.size = 0, this.start = 0, this.attribStart = 0, this.attribSize = 0;
    }, i;
  }()
), Xi, Ps = (Xi = {}, Xi[Ve.POLY] = Tl, Xi[Ve.CIRC] = Dn, Xi[Ve.ELIP] = Dn, Xi[Ve.RECT] = Ld, Xi[Ve.RREC] = Dd, Xi), Vh = [], dn = [], Yh = (
  /** @class */
  function() {
    function i(t, e, a, n) {
      e === void 0 && (e = null), a === void 0 && (a = null), n === void 0 && (n = null), this.points = [], this.holes = [], this.shape = t, this.lineStyle = a, this.fillStyle = e, this.matrix = n, this.type = t.type;
    }
    return i.prototype.clone = function() {
      return new i(this.shape, this.fillStyle, this.lineStyle, this.matrix);
    }, i.prototype.destroy = function() {
      this.shape = null, this.holes.length = 0, this.holes = null, this.points.length = 0, this.points = null, this.lineStyle = null, this.fillStyle = null;
    }, i;
  }()
), xa = new le(), Bd = (
  /** @class */
  function(i) {
    xl(t, i);
    function t() {
      var e = i.call(this) || this;
      return e.closePointEps = 1e-4, e.boundsPadding = 0, e.uvsFloat32 = null, e.indicesUint16 = null, e.batchable = !1, e.points = [], e.colors = [], e.uvs = [], e.indices = [], e.textureIds = [], e.graphicsData = [], e.drawCalls = [], e.batchDirty = -1, e.batches = [], e.dirty = 0, e.cacheDirty = -1, e.clearDirty = 0, e.shapeIndex = 0, e._bounds = new $n(), e.boundsDirty = -1, e;
    }
    return Object.defineProperty(t.prototype, "bounds", {
      /**
       * Get the current bounds of the graphic geometry.
       * @readonly
       */
      get: function() {
        return this.updateBatches(), this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty, this.calculateBounds()), this._bounds;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.invalidate = function() {
      this.boundsDirty = -1, this.dirty++, this.batchDirty++, this.shapeIndex = 0, this.points.length = 0, this.colors.length = 0, this.uvs.length = 0, this.indices.length = 0, this.textureIds.length = 0;
      for (var e = 0; e < this.drawCalls.length; e++)
        this.drawCalls[e].texArray.clear(), dn.push(this.drawCalls[e]);
      this.drawCalls.length = 0;
      for (var e = 0; e < this.batches.length; e++) {
        var a = this.batches[e];
        a.reset(), Vh.push(a);
      }
      this.batches.length = 0;
    }, t.prototype.clear = function() {
      return this.graphicsData.length > 0 && (this.invalidate(), this.clearDirty++, this.graphicsData.length = 0), this;
    }, t.prototype.drawShape = function(e, a, n, s) {
      a === void 0 && (a = null), n === void 0 && (n = null), s === void 0 && (s = null);
      var o = new Yh(e, a, n, s);
      return this.graphicsData.push(o), this.dirty++, this;
    }, t.prototype.drawHole = function(e, a) {
      if (a === void 0 && (a = null), !this.graphicsData.length)
        return null;
      var n = new Yh(e, null, null, a), s = this.graphicsData[this.graphicsData.length - 1];
      return n.lineStyle = s.lineStyle, s.holes.push(n), this.dirty++, this;
    }, t.prototype.destroy = function() {
      i.prototype.destroy.call(this);
      for (var e = 0; e < this.graphicsData.length; ++e)
        this.graphicsData[e].destroy();
      this.points.length = 0, this.points = null, this.colors.length = 0, this.colors = null, this.uvs.length = 0, this.uvs = null, this.indices.length = 0, this.indices = null, this.indexBuffer.destroy(), this.indexBuffer = null, this.graphicsData.length = 0, this.graphicsData = null, this.drawCalls.length = 0, this.drawCalls = null, this.batches.length = 0, this.batches = null, this._bounds = null;
    }, t.prototype.containsPoint = function(e) {
      for (var a = this.graphicsData, n = 0; n < a.length; ++n) {
        var s = a[n];
        if (s.fillStyle.visible && s.shape && (s.matrix ? s.matrix.applyInverse(e, xa) : xa.copyFrom(e), s.shape.contains(xa.x, xa.y))) {
          var o = !1;
          if (s.holes)
            for (var u = 0; u < s.holes.length; u++) {
              var m = s.holes[u];
              if (m.shape.contains(xa.x, xa.y)) {
                o = !0;
                break;
              }
            }
          if (!o)
            return !0;
        }
      }
      return !1;
    }, t.prototype.updateBatches = function() {
      if (!this.graphicsData.length) {
        this.batchable = !0;
        return;
      }
      if (this.validateBatching()) {
        this.cacheDirty = this.dirty;
        var e = this.uvs, a = this.graphicsData, n = null, s = null;
        this.batches.length > 0 && (n = this.batches[this.batches.length - 1], s = n.style);
        for (var o = this.shapeIndex; o < a.length; o++) {
          this.shapeIndex++;
          var u = a[o], m = u.fillStyle, g = u.lineStyle, A = Ps[u.type];
          A.build(u), u.matrix && this.transformPoints(u.points, u.matrix), (m.visible || g.visible) && this.processHoles(u.holes);
          for (var x = 0; x < 2; x++) {
            var w = x === 0 ? m : g;
            if (w.visible) {
              var C = w.texture.baseTexture, O = this.indices.length, L = this.points.length / 2;
              C.wrapMode = Nr.REPEAT, x === 0 ? this.processFill(u) : this.processLine(u);
              var D = this.points.length / 2 - L;
              D !== 0 && (n && !this._compareStyles(s, w) && (n.end(O, L), n = null), n || (n = Vh.pop() || new Hd(), n.begin(w, O, L), this.batches.push(n), s = w), this.addUvs(this.points, e, w.texture, L, D, w.matrix));
            }
          }
        }
        var H = this.indices.length, k = this.points.length / 2;
        if (n && n.end(H, k), this.batches.length === 0) {
          this.batchable = !0;
          return;
        }
        var G = k > 65535;
        this.indicesUint16 && this.indices.length === this.indicesUint16.length && G === this.indicesUint16.BYTES_PER_ELEMENT > 2 ? this.indicesUint16.set(this.indices) : this.indicesUint16 = G ? new Uint32Array(this.indices) : new Uint16Array(this.indices), this.batchable = this.isBatchable(), this.batchable ? this.packBatches() : this.buildDrawCalls();
      }
    }, t.prototype._compareStyles = function(e, a) {
      return !(!e || !a || e.texture.baseTexture !== a.texture.baseTexture || e.color + e.alpha !== a.color + a.alpha || !!e.native != !!a.native);
    }, t.prototype.validateBatching = function() {
      if (this.dirty === this.cacheDirty || !this.graphicsData.length)
        return !1;
      for (var e = 0, a = this.graphicsData.length; e < a; e++) {
        var n = this.graphicsData[e], s = n.fillStyle, o = n.lineStyle;
        if (s && !s.texture.baseTexture.valid || o && !o.texture.baseTexture.valid)
          return !1;
      }
      return !0;
    }, t.prototype.packBatches = function() {
      this.batchDirty++, this.uvsFloat32 = new Float32Array(this.uvs);
      for (var e = this.batches, a = 0, n = e.length; a < n; a++)
        for (var s = e[a], o = 0; o < s.size; o++) {
          var u = s.start + o;
          this.indicesUint16[u] = this.indicesUint16[u] - s.attribStart;
        }
    }, t.prototype.isBatchable = function() {
      if (this.points.length > 65535 * 2)
        return !1;
      for (var e = this.batches, a = 0; a < e.length; a++)
        if (e[a].style.native)
          return !1;
      return this.points.length < t.BATCHABLE_SIZE * 2;
    }, t.prototype.buildDrawCalls = function() {
      for (var e = ++Qt._globalBatch, a = 0; a < this.drawCalls.length; a++)
        this.drawCalls[a].texArray.clear(), dn.push(this.drawCalls[a]);
      this.drawCalls.length = 0;
      var n = this.colors, s = this.textureIds, o = dn.pop();
      o || (o = new Hs(), o.texArray = new Bs()), o.texArray.count = 0, o.start = 0, o.size = 0, o.type = xr.TRIANGLES;
      var u = 0, m = null, g = 0, A = !1, x = xr.TRIANGLES, w = 0;
      this.drawCalls.push(o);
      for (var a = 0; a < this.batches.length; a++) {
        var C = this.batches[a], O = 8, L = C.style, D = L.texture.baseTexture;
        A !== !!L.native && (A = !!L.native, x = A ? xr.LINES : xr.TRIANGLES, m = null, u = O, e++), m !== D && (m = D, D._batchEnabled !== e && (u === O && (e++, u = 0, o.size > 0 && (o = dn.pop(), o || (o = new Hs(), o.texArray = new Bs()), this.drawCalls.push(o)), o.start = w, o.size = 0, o.texArray.count = 0, o.type = x), D.touched = 1, D._batchEnabled = e, D._batchLocation = u, D.wrapMode = Nr.REPEAT, o.texArray.elements[o.texArray.count++] = D, u++)), o.size += C.size, w += C.size, g = D._batchLocation, this.addColors(n, L.color, L.alpha, C.attribSize, C.attribStart), this.addTextureIds(s, g, C.attribSize, C.attribStart);
      }
      Qt._globalBatch = e, this.packAttributes();
    }, t.prototype.packAttributes = function() {
      for (var e = this.points, a = this.uvs, n = this.colors, s = this.textureIds, o = new ArrayBuffer(e.length * 3 * 4), u = new Float32Array(o), m = new Uint32Array(o), g = 0, A = 0; A < e.length / 2; A++)
        u[g++] = e[A * 2], u[g++] = e[A * 2 + 1], u[g++] = a[A * 2], u[g++] = a[A * 2 + 1], m[g++] = n[A], u[g++] = s[A];
      this._buffer.update(o), this._indexBuffer.update(this.indicesUint16);
    }, t.prototype.processFill = function(e) {
      if (e.holes.length)
        Tl.triangulate(e, this);
      else {
        var a = Ps[e.type];
        a.triangulate(e, this);
      }
    }, t.prototype.processLine = function(e) {
      Gh(e, this);
      for (var a = 0; a < e.holes.length; a++)
        Gh(e.holes[a], this);
    }, t.prototype.processHoles = function(e) {
      for (var a = 0; a < e.length; a++) {
        var n = e[a], s = Ps[n.type];
        s.build(n), n.matrix && this.transformPoints(n.points, n.matrix);
      }
    }, t.prototype.calculateBounds = function() {
      var e = this._bounds;
      e.clear(), e.addVertexData(this.points, 0, this.points.length), e.pad(this.boundsPadding, this.boundsPadding);
    }, t.prototype.transformPoints = function(e, a) {
      for (var n = 0; n < e.length / 2; n++) {
        var s = e[n * 2], o = e[n * 2 + 1];
        e[n * 2] = a.a * s + a.c * o + a.tx, e[n * 2 + 1] = a.b * s + a.d * o + a.ty;
      }
    }, t.prototype.addColors = function(e, a, n, s, o) {
      o === void 0 && (o = 0);
      var u = (a >> 16) + (a & 65280) + ((a & 255) << 16), m = Ws(u, n);
      e.length = Math.max(e.length, o + s);
      for (var g = 0; g < s; g++)
        e[o + g] = m;
    }, t.prototype.addTextureIds = function(e, a, n, s) {
      s === void 0 && (s = 0), e.length = Math.max(e.length, s + n);
      for (var o = 0; o < n; o++)
        e[s + o] = a;
    }, t.prototype.addUvs = function(e, a, n, s, o, u) {
      u === void 0 && (u = null);
      for (var m = 0, g = a.length, A = n.frame; m < o; ) {
        var x = e[(s + m) * 2], w = e[(s + m) * 2 + 1];
        if (u) {
          var C = u.a * x + u.c * w + u.tx;
          w = u.b * x + u.d * w + u.ty, x = C;
        }
        m++, a.push(x / A.width, w / A.height);
      }
      var O = n.baseTexture;
      (A.width < O.width || A.height < O.height) && this.adjustUvs(a, n, g, o);
    }, t.prototype.adjustUvs = function(e, a, n, s) {
      for (var o = a.baseTexture, u = 1e-6, m = n + s * 2, g = a.frame, A = g.width / o.width, x = g.height / o.height, w = g.x / g.width, C = g.y / g.height, O = Math.floor(e[n] + u), L = Math.floor(e[n + 1] + u), D = n + 2; D < m; D += 2)
        O = Math.min(O, Math.floor(e[D] + u)), L = Math.min(L, Math.floor(e[D + 1] + u));
      w -= O, C -= L;
      for (var D = n; D < m; D += 2)
        e[D] = (e[D] + w) * A, e[D + 1] = (e[D + 1] + C) * x;
    }, t.BATCHABLE_SIZE = 100, t;
  }(al)
), kd = (
  /** @class */
  function(i) {
    xl(t, i);
    function t() {
      var e = i !== null && i.apply(this, arguments) || this;
      return e.width = 0, e.alignment = 0.5, e.native = !1, e.cap = di.BUTT, e.join = Qr.MITER, e.miterLimit = 10, e;
    }
    return t.prototype.clone = function() {
      var e = new t();
      return e.color = this.color, e.alpha = this.alpha, e.texture = this.texture, e.matrix = this.matrix, e.visible = this.visible, e.width = this.width, e.alignment = this.alignment, e.native = this.native, e.cap = this.cap, e.join = this.join, e.miterLimit = this.miterLimit, e;
    }, t.prototype.reset = function() {
      i.prototype.reset.call(this), this.color = 0, this.alignment = 0.5, this.width = 0, this.native = !1;
    }, t;
  }(bl)
), B4 = new Float32Array(3), Qo = {}, Da = (
  /** @class */
  function(i) {
    xl(t, i);
    function t(e) {
      e === void 0 && (e = null);
      var a = i.call(this) || this;
      return a.shader = null, a.pluginName = "batch", a.currentPath = null, a.batches = [], a.batchTint = -1, a.batchDirty = -1, a.vertexData = null, a._fillStyle = new bl(), a._lineStyle = new kd(), a._matrix = null, a._holeMode = !1, a.state = Di.for2d(), a._geometry = e || new Bd(), a._geometry.refCount++, a._transformID = -1, a.tint = 16777215, a.blendMode = It.NORMAL, a;
    }
    return Object.defineProperty(t.prototype, "geometry", {
      /**
       * Includes vertex positions, face indices, normals, colors, UVs, and
       * custom attributes within buffers, reducing the cost of passing all
       * this data to the GPU. Can be shared between multiple Mesh or Graphics objects.
       * @readonly
       */
      get: function() {
        return this._geometry;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.clone = function() {
      return this.finishPoly(), new t(this._geometry);
    }, Object.defineProperty(t.prototype, "blendMode", {
      get: function() {
        return this.state.blendMode;
      },
      /**
       * The blend mode to be applied to the graphic shape. Apply a value of
       * `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.  Note that, since each
       * primitive in the GraphicsGeometry list is rendered sequentially, modes
       * such as `PIXI.BLEND_MODES.ADD` and `PIXI.BLEND_MODES.MULTIPLY` will
       * be applied per-primitive.
       * @default PIXI.BLEND_MODES.NORMAL
       */
      set: function(e) {
        this.state.blendMode = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "tint", {
      /**
       * The tint applied to each graphic shape. This is a hex value. A value of
       * 0xFFFFFF will remove any tint effect.
       * @default 0xFFFFFF
       */
      get: function() {
        return this._tint;
      },
      set: function(e) {
        this._tint = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fill", {
      /**
       * The current fill style.
       * @readonly
       */
      get: function() {
        return this._fillStyle;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "line", {
      /**
       * The current line style.
       * @readonly
       */
      get: function() {
        return this._lineStyle;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.lineStyle = function(e, a, n, s, o) {
      return e === void 0 && (e = null), a === void 0 && (a = 0), n === void 0 && (n = 1), s === void 0 && (s = 0.5), o === void 0 && (o = !1), typeof e == "number" && (e = { width: e, color: a, alpha: n, alignment: s, native: o }), this.lineTextureStyle(e);
    }, t.prototype.lineTextureStyle = function(e) {
      e = Object.assign({
        width: 0,
        texture: Ot.WHITE,
        color: e && e.texture ? 16777215 : 0,
        alpha: 1,
        matrix: null,
        alignment: 0.5,
        native: !1,
        cap: di.BUTT,
        join: Qr.MITER,
        miterLimit: 10
      }, e), this.currentPath && this.startPoly();
      var a = e.width > 0 && e.alpha > 0;
      return a ? (e.matrix && (e.matrix = e.matrix.clone(), e.matrix.invert()), Object.assign(this._lineStyle, { visible: a }, e)) : this._lineStyle.reset(), this;
    }, t.prototype.startPoly = function() {
      if (this.currentPath) {
        var e = this.currentPath.points, a = this.currentPath.points.length;
        a > 2 && (this.drawShape(this.currentPath), this.currentPath = new gn(), this.currentPath.closeStroke = !1, this.currentPath.points.push(e[a - 2], e[a - 1]));
      } else
        this.currentPath = new gn(), this.currentPath.closeStroke = !1;
    }, t.prototype.finishPoly = function() {
      this.currentPath && (this.currentPath.points.length > 2 ? (this.drawShape(this.currentPath), this.currentPath = null) : this.currentPath.points.length = 0);
    }, t.prototype.moveTo = function(e, a) {
      return this.startPoly(), this.currentPath.points[0] = e, this.currentPath.points[1] = a, this;
    }, t.prototype.lineTo = function(e, a) {
      this.currentPath || this.moveTo(0, 0);
      var n = this.currentPath.points, s = n[n.length - 2], o = n[n.length - 1];
      return (s !== e || o !== a) && n.push(e, a), this;
    }, t.prototype._initCurve = function(e, a) {
      e === void 0 && (e = 0), a === void 0 && (a = 0), this.currentPath ? this.currentPath.points.length === 0 && (this.currentPath.points = [e, a]) : this.moveTo(e, a);
    }, t.prototype.quadraticCurveTo = function(e, a, n, s) {
      this._initCurve();
      var o = this.currentPath.points;
      return o.length === 0 && this.moveTo(0, 0), Fd.curveTo(e, a, n, s, o), this;
    }, t.prototype.bezierCurveTo = function(e, a, n, s, o, u) {
      return this._initCurve(), Nd.curveTo(e, a, n, s, o, u, this.currentPath.points), this;
    }, t.prototype.arcTo = function(e, a, n, s, o) {
      this._initCurve(e, a);
      var u = this.currentPath.points, m = Xh.curveTo(e, a, n, s, o, u);
      if (m) {
        var g = m.cx, A = m.cy, x = m.radius, w = m.startAngle, C = m.endAngle, O = m.anticlockwise;
        this.arc(g, A, x, w, C, O);
      }
      return this;
    }, t.prototype.arc = function(e, a, n, s, o, u) {
      if (u === void 0 && (u = !1), s === o)
        return this;
      !u && o <= s ? o += Cn : u && s <= o && (s += Cn);
      var m = o - s;
      if (m === 0)
        return this;
      var g = e + Math.cos(s) * n, A = a + Math.sin(s) * n, x = this._geometry.closePointEps, w = this.currentPath ? this.currentPath.points : null;
      if (w) {
        var C = Math.abs(w[w.length - 2] - g), O = Math.abs(w[w.length - 1] - A);
        C < x && O < x || w.push(g, A);
      } else
        this.moveTo(g, A), w = this.currentPath.points;
      return Xh.arc(g, A, e, a, n, s, o, u, w), this;
    }, t.prototype.beginFill = function(e, a) {
      return e === void 0 && (e = 0), a === void 0 && (a = 1), this.beginTextureFill({ texture: Ot.WHITE, color: e, alpha: a });
    }, t.prototype.beginTextureFill = function(e) {
      e = Object.assign({
        texture: Ot.WHITE,
        color: 16777215,
        alpha: 1,
        matrix: null
      }, e), this.currentPath && this.startPoly();
      var a = e.alpha > 0;
      return a ? (e.matrix && (e.matrix = e.matrix.clone(), e.matrix.invert()), Object.assign(this._fillStyle, { visible: a }, e)) : this._fillStyle.reset(), this;
    }, t.prototype.endFill = function() {
      return this.finishPoly(), this._fillStyle.reset(), this;
    }, t.prototype.drawRect = function(e, a, n, s) {
      return this.drawShape(new zt(e, a, n, s));
    }, t.prototype.drawRoundedRect = function(e, a, n, s, o) {
      return this.drawShape(new Bc(e, a, n, s, o));
    }, t.prototype.drawCircle = function(e, a, n) {
      return this.drawShape(new Fc(e, a, n));
    }, t.prototype.drawEllipse = function(e, a, n, s) {
      return this.drawShape(new Hc(e, a, n, s));
    }, t.prototype.drawPolygon = function() {
      for (var e = arguments, a = [], n = 0; n < arguments.length; n++)
        a[n] = e[n];
      var s, o = !0, u = a[0];
      u.points ? (o = u.closeStroke, s = u.points) : Array.isArray(a[0]) ? s = a[0] : s = a;
      var m = new gn(s);
      return m.closeStroke = o, this.drawShape(m), this;
    }, t.prototype.drawShape = function(e) {
      return this._holeMode ? this._geometry.drawHole(e, this._matrix) : this._geometry.drawShape(e, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix), this;
    }, t.prototype.clear = function() {
      return this._geometry.clear(), this._lineStyle.reset(), this._fillStyle.reset(), this._boundsID++, this._matrix = null, this._holeMode = !1, this.currentPath = null, this;
    }, t.prototype.isFastRect = function() {
      var e = this._geometry.graphicsData;
      return e.length === 1 && e[0].shape.type === Ve.RECT && !e[0].matrix && !e[0].holes.length && !(e[0].lineStyle.visible && e[0].lineStyle.width);
    }, t.prototype._render = function(e) {
      this.finishPoly();
      var a = this._geometry;
      a.updateBatches(), a.batchable ? (this.batchDirty !== a.batchDirty && this._populateBatches(), this._renderBatched(e)) : (e.batch.flush(), this._renderDirect(e));
    }, t.prototype._populateBatches = function() {
      var e = this._geometry, a = this.blendMode, n = e.batches.length;
      this.batchTint = -1, this._transformID = -1, this.batchDirty = e.batchDirty, this.batches.length = n, this.vertexData = new Float32Array(e.points);
      for (var s = 0; s < n; s++) {
        var o = e.batches[s], u = o.style.color, m = new Float32Array(this.vertexData.buffer, o.attribStart * 4 * 2, o.attribSize * 2), g = new Float32Array(e.uvsFloat32.buffer, o.attribStart * 4 * 2, o.attribSize * 2), A = new Uint16Array(e.indicesUint16.buffer, o.start * 2, o.size), x = {
          vertexData: m,
          blendMode: a,
          indices: A,
          uvs: g,
          _batchRGB: sa(u),
          _tintRGB: u,
          _texture: o.style.texture,
          alpha: o.style.alpha,
          worldAlpha: 1
        };
        this.batches[s] = x;
      }
    }, t.prototype._renderBatched = function(e) {
      if (this.batches.length) {
        e.batch.setObjectRenderer(e.plugins[this.pluginName]), this.calculateVertices(), this.calculateTints();
        for (var a = 0, n = this.batches.length; a < n; a++) {
          var s = this.batches[a];
          s.worldAlpha = this.worldAlpha * s.alpha, e.plugins[this.pluginName].render(s);
        }
      }
    }, t.prototype._renderDirect = function(e) {
      var a = this._resolveDirectShader(e), n = this._geometry, s = this.tint, o = this.worldAlpha, u = a.uniforms, m = n.drawCalls;
      u.translationMatrix = this.transform.worldTransform, u.tint[0] = (s >> 16 & 255) / 255 * o, u.tint[1] = (s >> 8 & 255) / 255 * o, u.tint[2] = (s & 255) / 255 * o, u.tint[3] = o, e.shader.bind(a), e.geometry.bind(n, a), e.state.set(this.state);
      for (var g = 0, A = m.length; g < A; g++)
        this._renderDrawCallDirect(e, n.drawCalls[g]);
    }, t.prototype._renderDrawCallDirect = function(e, a) {
      for (var n = a.texArray, s = a.type, o = a.size, u = a.start, m = n.count, g = 0; g < m; g++)
        e.texture.bind(n.elements[g], g);
      e.geometry.draw(s, o, u);
    }, t.prototype._resolveDirectShader = function(e) {
      var a = this.shader, n = this.pluginName;
      if (!a) {
        if (!Qo[n]) {
          for (var s = e.plugins[n].MAX_TEXTURES, o = new Int32Array(s), u = 0; u < s; u++)
            o[u] = u;
          var m = {
            tint: new Float32Array([1, 1, 1, 1]),
            translationMatrix: new be(),
            default: Pi.from({ uSamplers: o }, !0)
          }, g = e.plugins[n]._shader.program;
          Qo[n] = new pi(g, m);
        }
        a = Qo[n];
      }
      return a;
    }, t.prototype._calculateBounds = function() {
      this.finishPoly();
      var e = this._geometry;
      if (e.graphicsData.length) {
        var a = e.bounds, n = a.minX, s = a.minY, o = a.maxX, u = a.maxY;
        this._bounds.addFrame(this.transform, n, s, o, u);
      }
    }, t.prototype.containsPoint = function(e) {
      return this.worldTransform.applyInverse(e, t._TEMP_POINT), this._geometry.containsPoint(t._TEMP_POINT);
    }, t.prototype.calculateTints = function() {
      if (this.batchTint !== this.tint) {
        this.batchTint = this.tint;
        for (var e = sa(this.tint, B4), a = 0; a < this.batches.length; a++) {
          var n = this.batches[a], s = n._batchRGB, o = e[0] * s[0] * 255, u = e[1] * s[1] * 255, m = e[2] * s[2] * 255, g = (o << 16) + (u << 8) + (m | 0);
          n._tintRGB = (g >> 16) + (g & 65280) + ((g & 255) << 16);
        }
      }
    }, t.prototype.calculateVertices = function() {
      var e = this.transform._worldID;
      if (this._transformID !== e) {
        this._transformID = e;
        for (var a = this.transform.worldTransform, n = a.a, s = a.b, o = a.c, u = a.d, m = a.tx, g = a.ty, A = this._geometry.points, x = this.vertexData, w = 0, C = 0; C < A.length; C += 2) {
          var O = A[C], L = A[C + 1];
          x[w++] = n * O + o * L + m, x[w++] = u * L + s * O + g;
        }
      }
    }, t.prototype.closePath = function() {
      var e = this.currentPath;
      return e && (e.closeStroke = !0, this.finishPoly()), this;
    }, t.prototype.setMatrix = function(e) {
      return this._matrix = e, this;
    }, t.prototype.beginHole = function() {
      return this.finishPoly(), this._holeMode = !0, this;
    }, t.prototype.endHole = function() {
      return this.finishPoly(), this._holeMode = !1, this;
    }, t.prototype.destroy = function(e) {
      this._geometry.refCount--, this._geometry.refCount === 0 && this._geometry.dispose(), this._matrix = null, this.currentPath = null, this._lineStyle.destroy(), this._lineStyle = null, this._fillStyle.destroy(), this._fillStyle = null, this._geometry = null, this.shader = null, this.vertexData = null, this.batches.length = 0, this.batches = null, i.prototype.destroy.call(this, e);
    }, t.nextRoundedRectBehavior = !1, t._TEMP_POINT = new le(), t;
  }(wr)
), k4 = {
  buildPoly: Tl,
  buildCircle: Dn,
  buildRectangle: Ld,
  buildRoundedRectangle: Dd,
  buildLine: Gh,
  ArcUtils: Xh,
  BezierUtils: Nd,
  QuadraticUtils: Fd,
  BatchPart: Hd,
  FILL_COMMANDS: Ps,
  BATCH_POOL: Vh,
  DRAW_CALL_POOL: dn
};
/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var zh = function(i, t) {
  return zh = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, zh(i, t);
};
function U4(i, t) {
  zh(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var nn = new le(), G4 = new Uint16Array([0, 1, 2, 0, 2, 3]), Va = (
  /** @class */
  function(i) {
    U4(t, i);
    function t(e) {
      var a = i.call(this) || this;
      return a._anchor = new wi(a._onAnchorUpdate, a, e ? e.defaultAnchor.x : 0, e ? e.defaultAnchor.y : 0), a._texture = null, a._width = 0, a._height = 0, a._tint = null, a._tintRGB = null, a.tint = 16777215, a.blendMode = It.NORMAL, a._cachedTint = 16777215, a.uvs = null, a.texture = e || Ot.EMPTY, a.vertexData = new Float32Array(8), a.vertexTrimmedData = null, a._transformID = -1, a._textureID = -1, a._transformTrimmedID = -1, a._textureTrimmedID = -1, a.indices = G4, a.pluginName = "batch", a.isSprite = !0, a._roundPixels = mt.ROUND_PIXELS, a;
    }
    return t.prototype._onTextureUpdate = function() {
      this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this._width && (this.scale.x = Zi(this.scale.x) * this._width / this._texture.orig.width), this._height && (this.scale.y = Zi(this.scale.y) * this._height / this._texture.orig.height);
    }, t.prototype._onAnchorUpdate = function() {
      this._transformID = -1, this._transformTrimmedID = -1;
    }, t.prototype.calculateVertices = function() {
      var e = this._texture;
      if (!(this._transformID === this.transform._worldID && this._textureID === e._updateID)) {
        this._textureID !== e._updateID && (this.uvs = this._texture._uvs.uvsFloat32), this._transformID = this.transform._worldID, this._textureID = e._updateID;
        var a = this.transform.worldTransform, n = a.a, s = a.b, o = a.c, u = a.d, m = a.tx, g = a.ty, A = this.vertexData, x = e.trim, w = e.orig, C = this._anchor, O = 0, L = 0, D = 0, H = 0;
        if (x ? (L = x.x - C._x * w.width, O = L + x.width, H = x.y - C._y * w.height, D = H + x.height) : (L = -C._x * w.width, O = L + w.width, H = -C._y * w.height, D = H + w.height), A[0] = n * L + o * H + m, A[1] = u * H + s * L + g, A[2] = n * O + o * H + m, A[3] = u * H + s * O + g, A[4] = n * O + o * D + m, A[5] = u * D + s * O + g, A[6] = n * L + o * D + m, A[7] = u * D + s * L + g, this._roundPixels)
          for (var k = mt.RESOLUTION, G = 0; G < A.length; ++G)
            A[G] = Math.round((A[G] * k | 0) / k);
      }
    }, t.prototype.calculateTrimmedVertices = function() {
      if (!this.vertexTrimmedData)
        this.vertexTrimmedData = new Float32Array(8);
      else if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID)
        return;
      this._transformTrimmedID = this.transform._worldID, this._textureTrimmedID = this._texture._updateID;
      var e = this._texture, a = this.vertexTrimmedData, n = e.orig, s = this._anchor, o = this.transform.worldTransform, u = o.a, m = o.b, g = o.c, A = o.d, x = o.tx, w = o.ty, C = -s._x * n.width, O = C + n.width, L = -s._y * n.height, D = L + n.height;
      a[0] = u * C + g * L + x, a[1] = A * L + m * C + w, a[2] = u * O + g * L + x, a[3] = A * L + m * O + w, a[4] = u * O + g * D + x, a[5] = A * D + m * O + w, a[6] = u * C + g * D + x, a[7] = A * D + m * C + w;
    }, t.prototype._render = function(e) {
      this.calculateVertices(), e.batch.setObjectRenderer(e.plugins[this.pluginName]), e.plugins[this.pluginName].render(this);
    }, t.prototype._calculateBounds = function() {
      var e = this._texture.trim, a = this._texture.orig;
      !e || e.width === a.width && e.height === a.height ? (this.calculateVertices(), this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(), this._bounds.addQuad(this.vertexTrimmedData));
    }, t.prototype.getLocalBounds = function(e) {
      return this.children.length === 0 ? (this._localBounds || (this._localBounds = new $n()), this._localBounds.minX = this._texture.orig.width * -this._anchor._x, this._localBounds.minY = this._texture.orig.height * -this._anchor._y, this._localBounds.maxX = this._texture.orig.width * (1 - this._anchor._x), this._localBounds.maxY = this._texture.orig.height * (1 - this._anchor._y), e || (this._localBoundsRect || (this._localBoundsRect = new zt()), e = this._localBoundsRect), this._localBounds.getRectangle(e)) : i.prototype.getLocalBounds.call(this, e);
    }, t.prototype.containsPoint = function(e) {
      this.worldTransform.applyInverse(e, nn);
      var a = this._texture.orig.width, n = this._texture.orig.height, s = -a * this.anchor.x, o = 0;
      return nn.x >= s && nn.x < s + a && (o = -n * this.anchor.y, nn.y >= o && nn.y < o + n);
    }, t.prototype.destroy = function(e) {
      i.prototype.destroy.call(this, e), this._texture.off("update", this._onTextureUpdate, this), this._anchor = null;
      var a = typeof e == "boolean" ? e : e && e.texture;
      if (a) {
        var n = typeof e == "boolean" ? e : e && e.baseTexture;
        this._texture.destroy(!!n);
      }
      this._texture = null;
    }, t.from = function(e, a) {
      var n = e instanceof Ot ? e : Ot.from(e, a);
      return new t(n);
    }, Object.defineProperty(t.prototype, "roundPixels", {
      get: function() {
        return this._roundPixels;
      },
      /**
       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
       *
       * Advantages can include sharper image quality (like text) and faster rendering on canvas.
       * The main disadvantage is movement of objects may appear less smooth.
       *
       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}.
       * @default false
       */
      set: function(e) {
        this._roundPixels !== e && (this._transformID = -1), this._roundPixels = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "width", {
      /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return Math.abs(this.scale.x) * this._texture.orig.width;
      },
      set: function(e) {
        var a = Zi(this.scale.x) || 1;
        this.scale.x = a * e / this._texture.orig.width, this._width = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return Math.abs(this.scale.y) * this._texture.orig.height;
      },
      set: function(e) {
        var a = Zi(this.scale.y) || 1;
        this.scale.y = a * e / this._texture.orig.height, this._height = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "anchor", {
      /**
       * The anchor sets the origin point of the sprite. The default value is taken from the {@link PIXI.Texture|Texture}
       * and passed to the constructor.
       *
       * The default is `(0,0)`, this means the sprite's origin is the top left.
       *
       * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.
       *
       * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.
       *
       * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.
       * @example
       * const sprite = new PIXI.Sprite(texture);
       * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).
       */
      get: function() {
        return this._anchor;
      },
      set: function(e) {
        this._anchor.copyFrom(e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "tint", {
      /**
       * The tint applied to the sprite. This is a hex value.
       *
       * A value of 0xFFFFFF will remove any tint effect.
       * @default 0xFFFFFF
       */
      get: function() {
        return this._tint;
      },
      set: function(e) {
        this._tint = e, this._tintRGB = (e >> 16) + (e & 65280) + ((e & 255) << 16);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "texture", {
      /** The texture that the sprite is using. */
      get: function() {
        return this._texture;
      },
      set: function(e) {
        this._texture !== e && (this._texture && this._texture.off("update", this._onTextureUpdate, this), this._texture = e || Ot.EMPTY, this._cachedTint = 16777215, this._textureID = -1, this._textureTrimmedID = -1, e && (e.baseTexture.valid ? this._onTextureUpdate() : e.once("update", this._onTextureUpdate, this)));
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(wr)
);
/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Kh = function(i, t) {
  return Kh = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, Kh(i, t);
};
function X4(i, t) {
  Kh(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Na;
(function(i) {
  i[i.LINEAR_VERTICAL = 0] = "LINEAR_VERTICAL", i[i.LINEAR_HORIZONTAL = 1] = "LINEAR_HORIZONTAL";
})(Na || (Na = {}));
var Jo = {
  align: "left",
  breakWords: !1,
  dropShadow: !1,
  dropShadowAlpha: 1,
  dropShadowAngle: Math.PI / 6,
  dropShadowBlur: 0,
  dropShadowColor: "black",
  dropShadowDistance: 5,
  fill: "black",
  fillGradientType: Na.LINEAR_VERTICAL,
  fillGradientStops: [],
  fontFamily: "Arial",
  fontSize: 26,
  fontStyle: "normal",
  fontVariant: "normal",
  fontWeight: "normal",
  letterSpacing: 0,
  lineHeight: 0,
  lineJoin: "miter",
  miterLimit: 10,
  padding: 0,
  stroke: "black",
  strokeThickness: 0,
  textBaseline: "alphabetic",
  trim: !1,
  whiteSpace: "pre",
  wordWrap: !1,
  wordWrapWidth: 100,
  leading: 0
}, V4 = [
  "serif",
  "sans-serif",
  "monospace",
  "cursive",
  "fantasy",
  "system-ui"
], Ri = (
  /** @class */
  function() {
    function i(t) {
      this.styleID = 0, this.reset(), Zo(this, t, t);
    }
    return i.prototype.clone = function() {
      var t = {};
      return Zo(t, this, Jo), new i(t);
    }, i.prototype.reset = function() {
      Zo(this, Jo, Jo);
    }, Object.defineProperty(i.prototype, "align", {
      /**
       * Alignment for multiline text ('left', 'center' or 'right'), does not affect single line text
       *
       * @member {string}
       */
      get: function() {
        return this._align;
      },
      set: function(t) {
        this._align !== t && (this._align = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "breakWords", {
      /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */
      get: function() {
        return this._breakWords;
      },
      set: function(t) {
        this._breakWords !== t && (this._breakWords = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "dropShadow", {
      /** Set a drop shadow for the text. */
      get: function() {
        return this._dropShadow;
      },
      set: function(t) {
        this._dropShadow !== t && (this._dropShadow = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "dropShadowAlpha", {
      /** Set alpha for the drop shadow. */
      get: function() {
        return this._dropShadowAlpha;
      },
      set: function(t) {
        this._dropShadowAlpha !== t && (this._dropShadowAlpha = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "dropShadowAngle", {
      /** Set a angle of the drop shadow. */
      get: function() {
        return this._dropShadowAngle;
      },
      set: function(t) {
        this._dropShadowAngle !== t && (this._dropShadowAngle = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "dropShadowBlur", {
      /** Set a shadow blur radius. */
      get: function() {
        return this._dropShadowBlur;
      },
      set: function(t) {
        this._dropShadowBlur !== t && (this._dropShadowBlur = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "dropShadowColor", {
      /** A fill style to be used on the dropshadow e.g 'red', '#00FF00'. */
      get: function() {
        return this._dropShadowColor;
      },
      set: function(t) {
        var e = qo(t);
        this._dropShadowColor !== e && (this._dropShadowColor = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "dropShadowDistance", {
      /** Set a distance of the drop shadow. */
      get: function() {
        return this._dropShadowDistance;
      },
      set: function(t) {
        this._dropShadowDistance !== t && (this._dropShadowDistance = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "fill", {
      /**
       * A canvas fillstyle that will be used on the text e.g 'red', '#00FF00'.
       *
       * Can be an array to create a gradient eg ['#000000','#FFFFFF']
       * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle|MDN}
       *
       * @member {string|string[]|number|number[]|CanvasGradient|CanvasPattern}
       */
      get: function() {
        return this._fill;
      },
      set: function(t) {
        var e = qo(t);
        this._fill !== e && (this._fill = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "fillGradientType", {
      /**
       * If fill is an array of colours to create a gradient, this can change the type/direction of the gradient.
       *
       * @see PIXI.TEXT_GRADIENT
       */
      get: function() {
        return this._fillGradientType;
      },
      set: function(t) {
        this._fillGradientType !== t && (this._fillGradientType = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "fillGradientStops", {
      /**
       * If fill is an array of colours to create a gradient, this array can set the stop points
       * (numbers between 0 and 1) for the color, overriding the default behaviour of evenly spacing them.
       */
      get: function() {
        return this._fillGradientStops;
      },
      set: function(t) {
        Y4(this._fillGradientStops, t) || (this._fillGradientStops = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "fontFamily", {
      /** The font family. */
      get: function() {
        return this._fontFamily;
      },
      set: function(t) {
        this.fontFamily !== t && (this._fontFamily = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "fontSize", {
      /**
       * The font size
       * (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em')
       */
      get: function() {
        return this._fontSize;
      },
      set: function(t) {
        this._fontSize !== t && (this._fontSize = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "fontStyle", {
      /**
       * The font style
       * ('normal', 'italic' or 'oblique')
       *
       * @member {string}
       */
      get: function() {
        return this._fontStyle;
      },
      set: function(t) {
        this._fontStyle !== t && (this._fontStyle = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "fontVariant", {
      /**
       * The font variant
       * ('normal' or 'small-caps')
       *
       * @member {string}
       */
      get: function() {
        return this._fontVariant;
      },
      set: function(t) {
        this._fontVariant !== t && (this._fontVariant = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "fontWeight", {
      /**
       * The font weight
       * ('normal', 'bold', 'bolder', 'lighter' and '100', '200', '300', '400', '500', '600', '700', 800' or '900')
       *
       * @member {string}
       */
      get: function() {
        return this._fontWeight;
      },
      set: function(t) {
        this._fontWeight !== t && (this._fontWeight = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "letterSpacing", {
      /** The amount of spacing between letters, default is 0. */
      get: function() {
        return this._letterSpacing;
      },
      set: function(t) {
        this._letterSpacing !== t && (this._letterSpacing = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "lineHeight", {
      /** The line height, a number that represents the vertical space that a letter uses. */
      get: function() {
        return this._lineHeight;
      },
      set: function(t) {
        this._lineHeight !== t && (this._lineHeight = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "leading", {
      /** The space between lines. */
      get: function() {
        return this._leading;
      },
      set: function(t) {
        this._leading !== t && (this._leading = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "lineJoin", {
      /**
       * The lineJoin property sets the type of corner created, it can resolve spiked text issues.
       * Default is 'miter' (creates a sharp corner).
       *
       * @member {string}
       */
      get: function() {
        return this._lineJoin;
      },
      set: function(t) {
        this._lineJoin !== t && (this._lineJoin = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "miterLimit", {
      /**
       * The miter limit to use when using the 'miter' lineJoin mode.
       *
       * This can reduce or increase the spikiness of rendered text.
       */
      get: function() {
        return this._miterLimit;
      },
      set: function(t) {
        this._miterLimit !== t && (this._miterLimit = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "padding", {
      /**
       * Occasionally some fonts are cropped. Adding some padding will prevent this from happening
       * by adding padding to all sides of the text.
       */
      get: function() {
        return this._padding;
      },
      set: function(t) {
        this._padding !== t && (this._padding = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "stroke", {
      /**
       * A canvas fillstyle that will be used on the text stroke
       * e.g 'blue', '#FCFF00'
       */
      get: function() {
        return this._stroke;
      },
      set: function(t) {
        var e = qo(t);
        this._stroke !== e && (this._stroke = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "strokeThickness", {
      /**
       * A number that represents the thickness of the stroke.
       *
       * @default 0
       */
      get: function() {
        return this._strokeThickness;
      },
      set: function(t) {
        this._strokeThickness !== t && (this._strokeThickness = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "textBaseline", {
      /**
       * The baseline of the text that is rendered.
       *
       * @member {string}
       */
      get: function() {
        return this._textBaseline;
      },
      set: function(t) {
        this._textBaseline !== t && (this._textBaseline = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "trim", {
      /** Trim transparent borders. */
      get: function() {
        return this._trim;
      },
      set: function(t) {
        this._trim !== t && (this._trim = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "whiteSpace", {
      /**
       * How newlines and spaces should be handled.
       * Default is 'pre' (preserve, preserve).
       *
       *  value       | New lines     |   Spaces
       *  ---         | ---           |   ---
       * 'normal'     | Collapse      |   Collapse
       * 'pre'        | Preserve      |   Preserve
       * 'pre-line'   | Preserve      |   Collapse
       *
       * @member {string}
       */
      get: function() {
        return this._whiteSpace;
      },
      set: function(t) {
        this._whiteSpace !== t && (this._whiteSpace = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "wordWrap", {
      /** Indicates if word wrap should be used. */
      get: function() {
        return this._wordWrap;
      },
      set: function(t) {
        this._wordWrap !== t && (this._wordWrap = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "wordWrapWidth", {
      /** The width at which text will wrap, it needs wordWrap to be set to true. */
      get: function() {
        return this._wordWrapWidth;
      },
      set: function(t) {
        this._wordWrapWidth !== t && (this._wordWrapWidth = t, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.toFontString = function() {
      var t = typeof this.fontSize == "number" ? this.fontSize + "px" : this.fontSize, e = this.fontFamily;
      Array.isArray(this.fontFamily) || (e = this.fontFamily.split(","));
      for (var a = e.length - 1; a >= 0; a--) {
        var n = e[a].trim();
        !/([\"\'])[^\'\"]+\1/.test(n) && V4.indexOf(n) < 0 && (n = '"' + n + '"'), e[a] = n;
      }
      return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + t + " " + e.join(",");
    }, i;
  }()
);
function R0(i) {
  return typeof i == "number" ? Pu(i) : (typeof i == "string" && i.indexOf("0x") === 0 && (i = i.replace("0x", "#")), i);
}
function qo(i) {
  if (Array.isArray(i)) {
    for (var t = 0; t < i.length; ++t)
      i[t] = R0(i[t]);
    return i;
  } else
    return R0(i);
}
function Y4(i, t) {
  if (!Array.isArray(i) || !Array.isArray(t) || i.length !== t.length)
    return !1;
  for (var e = 0; e < i.length; ++e)
    if (i[e] !== t[e])
      return !1;
  return !0;
}
function Zo(i, t, e) {
  for (var a in e)
    Array.isArray(t[a]) ? i[a] = t[a].slice() : i[a] = t[a];
}
var cs = {
  // TextMetrics requires getImageData readback for measuring fonts.
  willReadFrequently: !0
}, Br = (
  /** @class */
  function() {
    function i(t, e, a, n, s, o, u, m, g) {
      this.text = t, this.style = e, this.width = a, this.height = n, this.lines = s, this.lineWidths = o, this.lineHeight = u, this.maxLineWidth = m, this.fontProperties = g;
    }
    return i.measureText = function(t, e, a, n) {
      n === void 0 && (n = i._canvas), a = a == null ? e.wordWrap : a;
      var s = e.toFontString(), o = i.measureFont(s);
      o.fontSize === 0 && (o.fontSize = e.fontSize, o.ascent = e.fontSize);
      var u = n.getContext("2d", cs);
      u.font = s;
      for (var m = a ? i.wordWrap(t, e, n) : t, g = m.split(/(?:\r\n|\r|\n)/), A = new Array(g.length), x = 0, w = 0; w < g.length; w++) {
        var C = u.measureText(g[w]).width + (g[w].length - 1) * e.letterSpacing;
        A[w] = C, x = Math.max(x, C);
      }
      var O = x + e.strokeThickness;
      e.dropShadow && (O += e.dropShadowDistance);
      var L = e.lineHeight || o.fontSize + e.strokeThickness, D = Math.max(L, o.fontSize + e.strokeThickness) + (g.length - 1) * (L + e.leading);
      return e.dropShadow && (D += e.dropShadowDistance), new i(t, e, O, D, g, A, L + e.leading, x, o);
    }, i.wordWrap = function(t, e, a) {
      a === void 0 && (a = i._canvas);
      for (var n = a.getContext("2d", cs), s = 0, o = "", u = "", m = /* @__PURE__ */ Object.create(null), g = e.letterSpacing, A = e.whiteSpace, x = i.collapseSpaces(A), w = i.collapseNewlines(A), C = !x, O = e.wordWrapWidth + g, L = i.tokenize(t), D = 0; D < L.length; D++) {
        var H = L[D];
        if (i.isNewline(H)) {
          if (!w) {
            u += i.addLine(o), C = !x, o = "", s = 0;
            continue;
          }
          H = " ";
        }
        if (x) {
          var k = i.isBreakingSpace(H), G = i.isBreakingSpace(o[o.length - 1]);
          if (k && G)
            continue;
        }
        var z = i.getFromCache(H, g, m, n);
        if (z > O)
          if (o !== "" && (u += i.addLine(o), o = "", s = 0), i.canBreakWords(H, e.breakWords))
            for (var Y = i.wordWrapSplit(H), K = 0; K < Y.length; K++) {
              for (var J = Y[K], nt = 1; Y[K + nt]; ) {
                var q = Y[K + nt], tt = J[J.length - 1];
                if (!i.canBreakChars(tt, q, H, K, e.breakWords))
                  J += q;
                else
                  break;
                nt++;
              }
              K += J.length - 1;
              var lt = i.getFromCache(J, g, m, n);
              lt + s > O && (u += i.addLine(o), C = !1, o = "", s = 0), o += J, s += lt;
            }
          else {
            o.length > 0 && (u += i.addLine(o), o = "", s = 0);
            var bt = D === L.length - 1;
            u += i.addLine(H, !bt), C = !1, o = "", s = 0;
          }
        else
          z + s > O && (C = !1, u += i.addLine(o), o = "", s = 0), (o.length > 0 || !i.isBreakingSpace(H) || C) && (o += H, s += z);
      }
      return u += i.addLine(o, !1), u;
    }, i.addLine = function(t, e) {
      return e === void 0 && (e = !0), t = i.trimRight(t), t = e ? t + `
` : t, t;
    }, i.getFromCache = function(t, e, a, n) {
      var s = a[t];
      if (typeof s != "number") {
        var o = t.length * e;
        s = n.measureText(t).width + o, a[t] = s;
      }
      return s;
    }, i.collapseSpaces = function(t) {
      return t === "normal" || t === "pre-line";
    }, i.collapseNewlines = function(t) {
      return t === "normal";
    }, i.trimRight = function(t) {
      if (typeof t != "string")
        return "";
      for (var e = t.length - 1; e >= 0; e--) {
        var a = t[e];
        if (!i.isBreakingSpace(a))
          break;
        t = t.slice(0, -1);
      }
      return t;
    }, i.isNewline = function(t) {
      return typeof t != "string" ? !1 : i._newlines.indexOf(t.charCodeAt(0)) >= 0;
    }, i.isBreakingSpace = function(t, e) {
      return typeof t != "string" ? !1 : i._breakingSpaces.indexOf(t.charCodeAt(0)) >= 0;
    }, i.tokenize = function(t) {
      var e = [], a = "";
      if (typeof t != "string")
        return e;
      for (var n = 0; n < t.length; n++) {
        var s = t[n], o = t[n + 1];
        if (i.isBreakingSpace(s, o) || i.isNewline(s)) {
          a !== "" && (e.push(a), a = ""), e.push(s);
          continue;
        }
        a += s;
      }
      return a !== "" && e.push(a), e;
    }, i.canBreakWords = function(t, e) {
      return e;
    }, i.canBreakChars = function(t, e, a, n, s) {
      return !0;
    }, i.wordWrapSplit = function(t) {
      return t.split("");
    }, i.measureFont = function(t) {
      if (i._fonts[t])
        return i._fonts[t];
      var e = {
        ascent: 0,
        descent: 0,
        fontSize: 0
      }, a = i._canvas, n = i._context;
      n.font = t;
      var s = i.METRICS_STRING + i.BASELINE_SYMBOL, o = Math.ceil(n.measureText(s).width), u = Math.ceil(n.measureText(i.BASELINE_SYMBOL).width), m = Math.ceil(i.HEIGHT_MULTIPLIER * u);
      u = u * i.BASELINE_MULTIPLIER | 0, a.width = o, a.height = m, n.fillStyle = "#f00", n.fillRect(0, 0, o, m), n.font = t, n.textBaseline = "alphabetic", n.fillStyle = "#000", n.fillText(s, 0, u);
      var g = n.getImageData(0, 0, o, m).data, A = g.length, x = o * 4, w = 0, C = 0, O = !1;
      for (w = 0; w < u; ++w) {
        for (var L = 0; L < x; L += 4)
          if (g[C + L] !== 255) {
            O = !0;
            break;
          }
        if (!O)
          C += x;
        else
          break;
      }
      for (e.ascent = u - w, C = A - x, O = !1, w = m; w > u; --w) {
        for (var L = 0; L < x; L += 4)
          if (g[C + L] !== 255) {
            O = !0;
            break;
          }
        if (!O)
          C -= x;
        else
          break;
      }
      return e.descent = w - u, e.fontSize = e.ascent + e.descent, i._fonts[t] = e, e;
    }, i.clearMetrics = function(t) {
      t === void 0 && (t = ""), t ? delete i._fonts[t] : i._fonts = {};
    }, Object.defineProperty(i, "_canvas", {
      /**
       * Cached canvas element for measuring text
       * TODO: this should be private, but isn't because of backward compat, will fix later.
       * @ignore
       */
      get: function() {
        if (!i.__canvas) {
          var t = void 0;
          try {
            var e = new OffscreenCanvas(0, 0), a = e.getContext("2d", cs);
            if (a && a.measureText)
              return i.__canvas = e, e;
            t = mt.ADAPTER.createCanvas();
          } catch (n) {
            t = mt.ADAPTER.createCanvas();
          }
          t.width = t.height = 10, i.__canvas = t;
        }
        return i.__canvas;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i, "_context", {
      /**
       * TODO: this should be private, but isn't because of backward compat, will fix later.
       * @ignore
       */
      get: function() {
        return i.__context || (i.__context = i._canvas.getContext("2d", cs)), i.__context;
      },
      enumerable: !1,
      configurable: !0
    }), i;
  }()
);
Br._fonts = {};
Br.METRICS_STRING = "|q";
Br.BASELINE_SYMBOL = "M";
Br.BASELINE_MULTIPLIER = 1.4;
Br.HEIGHT_MULTIPLIER = 2;
Br._newlines = [
  10,
  13
];
Br._breakingSpaces = [
  9,
  32,
  8192,
  8193,
  8194,
  8195,
  8196,
  8197,
  8198,
  8200,
  8201,
  8202,
  8287,
  12288
];
var z4 = {
  texture: !0,
  children: !1,
  baseTexture: !0
}, so = (
  /** @class */
  function(i) {
    X4(t, i);
    function t(e, a, n) {
      var s = this, o = !1;
      n || (n = mt.ADAPTER.createCanvas(), o = !0), n.width = 3, n.height = 3;
      var u = Ot.from(n);
      return u.orig = new zt(), u.trim = new zt(), s = i.call(this, u) || this, s._ownCanvas = o, s.canvas = n, s.context = n.getContext("2d", {
        // required for trimming to work without warnings
        willReadFrequently: !0
      }), s._resolution = mt.RESOLUTION, s._autoResolution = !0, s._text = null, s._style = null, s._styleListener = null, s._font = "", s.text = e, s.style = a, s.localStyleID = -1, s;
    }
    return t.prototype.updateText = function(e) {
      var a = this._style;
      if (this.localStyleID !== a.styleID && (this.dirty = !0, this.localStyleID = a.styleID), !(!this.dirty && e)) {
        this._font = this._style.toFontString();
        var n = this.context, s = Br.measureText(this._text || " ", this._style, this._style.wordWrap, this.canvas), o = s.width, u = s.height, m = s.lines, g = s.lineHeight, A = s.lineWidths, x = s.maxLineWidth, w = s.fontProperties;
        this.canvas.width = Math.ceil(Math.ceil(Math.max(1, o) + a.padding * 2) * this._resolution), this.canvas.height = Math.ceil(Math.ceil(Math.max(1, u) + a.padding * 2) * this._resolution), n.scale(this._resolution, this._resolution), n.clearRect(0, 0, this.canvas.width, this.canvas.height), n.font = this._font, n.lineWidth = a.strokeThickness, n.textBaseline = a.textBaseline, n.lineJoin = a.lineJoin, n.miterLimit = a.miterLimit;
        for (var C, O, L = a.dropShadow ? 2 : 1, D = 0; D < L; ++D) {
          var H = a.dropShadow && D === 0, k = H ? Math.ceil(Math.max(1, u) + a.padding * 2) : 0, G = k * this._resolution;
          if (H) {
            n.fillStyle = "black", n.strokeStyle = "black";
            var z = a.dropShadowColor, Y = sa(typeof z == "number" ? z : Mu(z)), K = a.dropShadowBlur * this._resolution, J = a.dropShadowDistance * this._resolution;
            n.shadowColor = "rgba(" + Y[0] * 255 + "," + Y[1] * 255 + "," + Y[2] * 255 + "," + a.dropShadowAlpha + ")", n.shadowBlur = K, n.shadowOffsetX = Math.cos(a.dropShadowAngle) * J, n.shadowOffsetY = Math.sin(a.dropShadowAngle) * J + G;
          } else
            n.fillStyle = this._generateFillStyle(a, m, s), n.strokeStyle = a.stroke, n.shadowColor = "black", n.shadowBlur = 0, n.shadowOffsetX = 0, n.shadowOffsetY = 0;
          var nt = (g - w.fontSize) / 2;
          (!t.nextLineHeightBehavior || g - w.fontSize < 0) && (nt = 0);
          for (var q = 0; q < m.length; q++)
            C = a.strokeThickness / 2, O = a.strokeThickness / 2 + q * g + w.ascent + nt, a.align === "right" ? C += x - A[q] : a.align === "center" && (C += (x - A[q]) / 2), a.stroke && a.strokeThickness && this.drawLetterSpacing(m[q], C + a.padding, O + a.padding - k, !0), a.fill && this.drawLetterSpacing(m[q], C + a.padding, O + a.padding - k);
        }
        this.updateTexture();
      }
    }, t.prototype.drawLetterSpacing = function(e, a, n, s) {
      s === void 0 && (s = !1);
      var o = this._style, u = o.letterSpacing, m = t.experimentalLetterSpacing && ("letterSpacing" in CanvasRenderingContext2D.prototype || "textLetterSpacing" in CanvasRenderingContext2D.prototype);
      if (u === 0 || m) {
        m && (this.context.letterSpacing = u, this.context.textLetterSpacing = u), s ? this.context.strokeText(e, a, n) : this.context.fillText(e, a, n);
        return;
      }
      for (var g = a, A = Array.from ? Array.from(e) : e.split(""), x = this.context.measureText(e).width, w = 0, C = 0; C < A.length; ++C) {
        var O = A[C];
        s ? this.context.strokeText(O, g, n) : this.context.fillText(O, g, n);
        for (var L = "", D = C + 1; D < A.length; ++D)
          L += A[D];
        w = this.context.measureText(L).width, g += x - w + u, x = w;
      }
    }, t.prototype.updateTexture = function() {
      var e = this.canvas;
      if (this._style.trim) {
        var a = $c(e);
        a.data && (e.width = a.width, e.height = a.height, this.context.putImageData(a.data, 0, 0));
      }
      var n = this._texture, s = this._style, o = s.trim ? 0 : s.padding, u = n.baseTexture;
      n.trim.width = n._frame.width = e.width / this._resolution, n.trim.height = n._frame.height = e.height / this._resolution, n.trim.x = -o, n.trim.y = -o, n.orig.width = n._frame.width - o * 2, n.orig.height = n._frame.height - o * 2, this._onTextureUpdate(), u.setRealSize(e.width, e.height, this._resolution), n.updateUvs(), this.dirty = !1;
    }, t.prototype._render = function(e) {
      this._autoResolution && this._resolution !== e.resolution && (this._resolution = e.resolution, this.dirty = !0), this.updateText(!0), i.prototype._render.call(this, e);
    }, t.prototype.updateTransform = function() {
      this.updateText(!0), i.prototype.updateTransform.call(this);
    }, t.prototype.getBounds = function(e, a) {
      return this.updateText(!0), this._textureID === -1 && (e = !1), i.prototype.getBounds.call(this, e, a);
    }, t.prototype.getLocalBounds = function(e) {
      return this.updateText(!0), i.prototype.getLocalBounds.call(this, e);
    }, t.prototype._calculateBounds = function() {
      this.calculateVertices(), this._bounds.addQuad(this.vertexData);
    }, t.prototype._generateFillStyle = function(e, a, n) {
      var s = e.fill;
      if (Array.isArray(s)) {
        if (s.length === 1)
          return s[0];
      } else
        return s;
      var o, u = e.dropShadow ? e.dropShadowDistance : 0, m = e.padding || 0, g = this.canvas.width / this._resolution - u - m * 2, A = this.canvas.height / this._resolution - u - m * 2, x = s.slice(), w = e.fillGradientStops.slice();
      if (!w.length)
        for (var C = x.length + 1, O = 1; O < C; ++O)
          w.push(O / C);
      if (x.unshift(s[0]), w.unshift(0), x.push(s[s.length - 1]), w.push(1), e.fillGradientType === Na.LINEAR_VERTICAL) {
        o = this.context.createLinearGradient(g / 2, m, g / 2, A + m);
        for (var L = n.fontProperties.fontSize + e.strokeThickness, O = 0; O < a.length; O++) {
          var D = n.lineHeight * (O - 1) + L, H = n.lineHeight * O, k = H;
          O > 0 && D > H && (k = (H + D) / 2);
          var G = H + L, z = n.lineHeight * (O + 1), Y = G;
          O + 1 < a.length && z < G && (Y = (G + z) / 2);
          for (var K = (Y - k) / A, J = 0; J < x.length; J++) {
            var nt = 0;
            typeof w[J] == "number" ? nt = w[J] : nt = J / x.length;
            var q = Math.min(1, Math.max(0, k / A + nt * K));
            q = Number(q.toFixed(5)), o.addColorStop(q, x[J]);
          }
        }
      } else {
        o = this.context.createLinearGradient(m, A / 2, g + m, A / 2);
        for (var tt = x.length + 1, lt = 1, O = 0; O < x.length; O++) {
          var bt = void 0;
          typeof w[O] == "number" ? bt = w[O] : bt = lt / tt, o.addColorStop(bt, x[O]), lt++;
        }
      }
      return o;
    }, t.prototype.destroy = function(e) {
      typeof e == "boolean" && (e = { children: e }), e = Object.assign({}, z4, e), i.prototype.destroy.call(this, e), this._ownCanvas && (this.canvas.height = this.canvas.width = 0), this.context = null, this.canvas = null, this._style = null;
    }, Object.defineProperty(t.prototype, "width", {
      /** The width of the Text, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this.updateText(!0), Math.abs(this.scale.x) * this._texture.orig.width;
      },
      set: function(e) {
        this.updateText(!0);
        var a = Zi(this.scale.x) || 1;
        this.scale.x = a * e / this._texture.orig.width, this._width = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      /** The height of the Text, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this.updateText(!0), Math.abs(this.scale.y) * this._texture.orig.height;
      },
      set: function(e) {
        this.updateText(!0);
        var a = Zi(this.scale.y) || 1;
        this.scale.y = a * e / this._texture.orig.height, this._height = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "style", {
      /**
       * Set the style of the text.
       *
       * Set up an event listener to listen for changes on the style object and mark the text as dirty.
       */
      get: function() {
        return this._style;
      },
      set: function(e) {
        e = e || {}, e instanceof Ri ? this._style = e : this._style = new Ri(e), this.localStyleID = -1, this.dirty = !0;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "text", {
      /** Set the copy for the text object. To split a line you can use '\n'. */
      get: function() {
        return this._text;
      },
      set: function(e) {
        e = String(e == null ? "" : e), this._text !== e && (this._text = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "resolution", {
      /**
       * The resolution / device pixel ratio of the canvas.
       *
       * This is set to automatically match the renderer resolution by default, but can be overridden by setting manually.
       * @default 1
       */
      get: function() {
        return this._resolution;
      },
      set: function(e) {
        this._autoResolution = !1, this._resolution !== e && (this._resolution = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), t.nextLineHeightBehavior = !1, t.experimentalLetterSpacing = !1, t;
  }(Va)
), L0 = Math.pow;
const K4 = new zt();
class W4 extends Da {
  constructor() {
    super(), this.initialized = !1, this.texts = [], this.strokeWidth = 4, this.normalColor = 14883354, this.activeColor = 2017330, this.interactive = !0, this.on("added", this.init).on("pointermove", this.onPointerMove);
  }
  init() {
    const t = this.parent.internalModel, e = new Ri({
      fontSize: 24,
      fill: "#ffffff",
      stroke: "#000000",
      strokeThickness: 4
    });
    this.texts = Object.keys(t.hitAreas).map((a) => {
      const n = new so(a, e);
      return n.visible = !1, this.addChild(n), n;
    });
  }
  onPointerMove(t) {
    const e = this.parent.hitTest(t.data.global.x, t.data.global.y);
    this.texts.forEach((a) => {
      a.visible = e.includes(a.text);
    });
  }
  _render(t) {
    const e = this.parent.internalModel, a = 1 / Math.sqrt(L0(this.transform.worldTransform.a, 2) + L0(this.transform.worldTransform.b, 2));
    this.texts.forEach((n) => {
      this.lineStyle({
        width: this.strokeWidth * a,
        color: n.visible ? this.activeColor : this.normalColor
      });
      const s = e.getDrawableBounds(e.hitAreas[n.text].index, K4), o = e.localTransform;
      s.x = s.x * o.a + o.tx, s.y = s.y * o.d + o.ty, s.width = s.width * o.a, s.height = s.height * o.d, this.drawRect(s.x, s.y, s.width, s.height), n.x = s.x + this.strokeWidth * a, n.y = s.y + this.strokeWidth * a, n.scale.set(a);
    }), super._render(t), this.clear();
  }
}
class j4 {
  constructor(t, e) {
    Dt(this, "model");
    // 
    Dt(this, "currentModelIndex", 0);
    Dt(this, "currentClothesIndex", 0);
    Dt(this, "hitAreaFrames");
    this.options = t, this.events = e, this.hitAreaFrames = new W4();
  }
  get modelIndex() {
    return this.currentModelIndex;
  }
  set modelIndex(t) {
    this.currentModelIndex = t;
  }
  get modelClothesIndex() {
    return this.currentClothesIndex;
  }
  set modelClothesIndex(t) {
    this.currentClothesIndex = t;
  }
  get currentModelOptions() {
    return this.options.models[this.modelIndex];
  }
  create() {
    return new Promise((t, e) => {
      this.events.emit("load", "loading");
      let a = this.currentModelOptions.path;
      Array.isArray(a) && (a = this.currentModelOptions.path[this.modelClothesIndex]), this.model = wd.fromSync(a, {
        motionPreload: this.currentModelOptions.motionPreloadStrategy || ec.IDLE,
        onError: () => {
          this.events.emit("load", "fail"), e();
        }
      }), this.model.on("load", () => {
        this.events.emit("load", "success"), t();
      }), this.model.on("hit", (n) => {
        this.events.emit("hit", n), this.playRandomMotion(n);
      });
    });
  }
  // 
  settingModel() {
    switch (Ba()) {
      case rr.mobile:
        this.setPosition(...this.currentModelOptions.mobilePosition || []), this.setScale(this.currentModelOptions.mobileScale);
        break;
      case rr.pc:
        this.setPosition(...this.currentModelOptions.position || []), this.setScale(this.currentModelOptions.scale);
        break;
    }
    this.currentModelOptions.showHitAreaFrames && this.addHitAreaFrames(), Os(this.currentModelOptions.volume) && (Si.volume = this.currentModelOptions.volume), this.setAnchor(...this.currentModelOptions.anchor || []), this.setRotation(this.currentModelOptions.rotation);
  }
  /**
   * 
   */
  addHitAreaFrames() {
    var t;
    (t = this.model) == null || t.addChild(this.hitAreaFrames);
  }
  /**
   * 
   */
  removeHitAreaFrames() {
    var t;
    (t = this.model) == null || t.removeChildren(0);
  }
  // 
  get modelSize() {
    var t, e;
    return {
      width: ((t = this.model) == null ? void 0 : t.width) || 0,
      height: ((e = this.model) == null ? void 0 : e.height) || 0
    };
  }
  /**
   * 
   * @param x
   * @param y
   */
  setScale(t = 0.1) {
    var e;
    (e = this.model) == null || e.scale.set(t, t);
  }
  /**
   * 
   * @param x
   * @param y
   */
  setPosition(t = 0, e = 0) {
    this.model.x = t, this.model.y = e;
  }
  /**
   * 
   */
  setRotation(t = 0) {
    this.model.rotation = Math.PI * t / 180;
  }
  /**
   * 
   */
  setAnchor(t = 0, e = 0) {
    this.model.anchor.set(t, e);
  }
  /**
   * 
   */
  playMotion(t, e) {
    var a;
    (a = this.model) == null || a.motion(t, e);
  }
  /**
   * 
   */
  playRandomMotion(t) {
    var n;
    const e = Object.keys(((n = this.model) == null ? void 0 : n.internalModel.motionManager.motionGroups) || {});
    let a = e.find((s) => t[0].includes(s.toLowerCase()) || s.toLowerCase().includes(t[0]));
    a || (a = fh(e)), this.playMotion(a || "");
  }
}
function Q4(i) {
  var t = this.constructor;
  return this.then(
    function(e) {
      return t.resolve(i()).then(function() {
        return e;
      });
    },
    function(e) {
      return t.resolve(i()).then(function() {
        return t.reject(e);
      });
    }
  );
}
function J4(i) {
  var t = this;
  return new t(function(e, a) {
    if (!(i && typeof i.length != "undefined"))
      return a(
        new TypeError(
          typeof i + " " + i + " is not iterable(cannot read property Symbol(Symbol.iterator))"
        )
      );
    var n = Array.prototype.slice.call(i);
    if (n.length === 0)
      return e([]);
    var s = n.length;
    function o(m, g) {
      if (g && (typeof g == "object" || typeof g == "function")) {
        var A = g.then;
        if (typeof A == "function") {
          A.call(
            g,
            function(x) {
              o(m, x);
            },
            function(x) {
              n[m] = { status: "rejected", reason: x }, --s === 0 && e(n);
            }
          );
          return;
        }
      }
      n[m] = { status: "fulfilled", value: g }, --s === 0 && e(n);
    }
    for (var u = 0; u < n.length; u++)
      o(u, n[u]);
  });
}
function Ud(i, t) {
  this.name = "AggregateError", this.errors = i, this.message = t || "";
}
Ud.prototype = Error.prototype;
function q4(i) {
  var t = this;
  return new t(function(e, a) {
    if (!(i && typeof i.length != "undefined"))
      return a(new TypeError("Promise.any accepts an array"));
    var n = Array.prototype.slice.call(i);
    if (n.length === 0)
      return a();
    for (var s = [], o = 0; o < n.length; o++)
      try {
        t.resolve(n[o]).then(e).catch(function(u) {
          s.push(u), s.length === n.length && a(
            new Ud(
              s,
              "All promises were rejected"
            )
          );
        });
      } catch (u) {
        a(u);
      }
  });
}
var Z4 = setTimeout;
function Gd(i) {
  return !!(i && typeof i.length != "undefined");
}
function tx() {
}
function ex(i, t) {
  return function() {
    i.apply(t, arguments);
  };
}
function Ee(i) {
  if (!(this instanceof Ee))
    throw new TypeError("Promises must be constructed via new");
  if (typeof i != "function")
    throw new TypeError("not a function");
  this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], Vd(i, this);
}
function Xd(i, t) {
  for (; i._state === 3; )
    i = i._value;
  if (i._state === 0) {
    i._deferreds.push(t);
    return;
  }
  i._handled = !0, Ee._immediateFn(function() {
    var e = i._state === 1 ? t.onFulfilled : t.onRejected;
    if (e === null) {
      (i._state === 1 ? Wh : Nn)(t.promise, i._value);
      return;
    }
    var a;
    try {
      a = e(i._value);
    } catch (n) {
      Nn(t.promise, n);
      return;
    }
    Wh(t.promise, a);
  });
}
function Wh(i, t) {
  try {
    if (t === i)
      throw new TypeError("A promise cannot be resolved with itself.");
    if (t && (typeof t == "object" || typeof t == "function")) {
      var e = t.then;
      if (t instanceof Ee) {
        i._state = 3, i._value = t, jh(i);
        return;
      } else if (typeof e == "function") {
        Vd(ex(e, t), i);
        return;
      }
    }
    i._state = 1, i._value = t, jh(i);
  } catch (a) {
    Nn(i, a);
  }
}
function Nn(i, t) {
  i._state = 2, i._value = t, jh(i);
}
function jh(i) {
  i._state === 2 && i._deferreds.length === 0 && Ee._immediateFn(function() {
    i._handled || Ee._unhandledRejectionFn(i._value);
  });
  for (var t = 0, e = i._deferreds.length; t < e; t++)
    Xd(i, i._deferreds[t]);
  i._deferreds = null;
}
function rx(i, t, e) {
  this.onFulfilled = typeof i == "function" ? i : null, this.onRejected = typeof t == "function" ? t : null, this.promise = e;
}
function Vd(i, t) {
  var e = !1;
  try {
    i(
      function(a) {
        e || (e = !0, Wh(t, a));
      },
      function(a) {
        e || (e = !0, Nn(t, a));
      }
    );
  } catch (a) {
    if (e)
      return;
    e = !0, Nn(t, a);
  }
}
Ee.prototype.catch = function(i) {
  return this.then(null, i);
};
Ee.prototype.then = function(i, t) {
  var e = new this.constructor(tx);
  return Xd(this, new rx(i, t, e)), e;
};
Ee.prototype.finally = Q4;
Ee.all = function(i) {
  return new Ee(function(t, e) {
    if (!Gd(i))
      return e(new TypeError("Promise.all accepts an array"));
    var a = Array.prototype.slice.call(i);
    if (a.length === 0)
      return t([]);
    var n = a.length;
    function s(u, m) {
      try {
        if (m && (typeof m == "object" || typeof m == "function")) {
          var g = m.then;
          if (typeof g == "function") {
            g.call(
              m,
              function(A) {
                s(u, A);
              },
              e
            );
            return;
          }
        }
        a[u] = m, --n === 0 && t(a);
      } catch (A) {
        e(A);
      }
    }
    for (var o = 0; o < a.length; o++)
      s(o, a[o]);
  });
};
Ee.any = q4;
Ee.allSettled = J4;
Ee.resolve = function(i) {
  return i && typeof i == "object" && i.constructor === Ee ? i : new Ee(function(t) {
    t(i);
  });
};
Ee.reject = function(i) {
  return new Ee(function(t, e) {
    e(i);
  });
};
Ee.race = function(i) {
  return new Ee(function(t, e) {
    if (!Gd(i))
      return e(new TypeError("Promise.race accepts an array"));
    for (var a = 0, n = i.length; a < n; a++)
      Ee.resolve(i[a]).then(t, e);
  });
};
Ee._immediateFn = // @ts-ignore
typeof setImmediate == "function" && function(i) {
  setImmediate(i);
} || function(i) {
  Z4(i, 0);
};
Ee._unhandledRejectionFn = function(t) {
  typeof console != "undefined" && console && console.warn("Possible Unhandled Promise Rejection:", t);
};
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var D0 = Object.getOwnPropertySymbols, ix = Object.prototype.hasOwnProperty, ax = Object.prototype.propertyIsEnumerable;
function nx(i) {
  if (i == null)
    throw new TypeError("Object.assign cannot be called with null or undefined");
  return Object(i);
}
function sx() {
  try {
    if (!Object.assign)
      return !1;
    var i = new String("abc");
    if (i[5] = "de", Object.getOwnPropertyNames(i)[0] === "5")
      return !1;
    for (var t = {}, e = 0; e < 10; e++)
      t["_" + String.fromCharCode(e)] = e;
    var a = Object.getOwnPropertyNames(t).map(function(s) {
      return t[s];
    });
    if (a.join("") !== "0123456789")
      return !1;
    var n = {};
    return "abcdefghijklmnopqrst".split("").forEach(function(s) {
      n[s] = s;
    }), Object.keys(Object.assign({}, n)).join("") === "abcdefghijklmnopqrst";
  } catch (s) {
    return !1;
  }
}
var ox = sx() ? Object.assign : function(i, t) {
  for (var e, a = nx(i), n, s = 1; s < arguments.length; s++) {
    e = Object(arguments[s]);
    for (var o in e)
      ix.call(e, o) && (a[o] = e[o]);
    if (D0) {
      n = D0(e);
      for (var u = 0; u < n.length; u++)
        ax.call(e, n[u]) && (a[n[u]] = e[n[u]]);
    }
  }
  return a;
};
const hx = /* @__PURE__ */ gu(ox);
/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
typeof globalThis == "undefined" && (typeof self != "undefined" ? self.globalThis = self : typeof global != "undefined" && (global.globalThis = global));
globalThis.Promise || (globalThis.Promise = Ee);
Object.assign || (Object.assign = hx);
var ux = 16;
Date.now && Date.prototype.getTime || (Date.now = function() {
  return (/* @__PURE__ */ new Date()).getTime();
});
if (!(globalThis.performance && globalThis.performance.now)) {
  var lx = Date.now();
  globalThis.performance || (globalThis.performance = {}), globalThis.performance.now = function() {
    return Date.now() - lx;
  };
}
var th = Date.now(), N0 = ["ms", "moz", "webkit", "o"];
for (var eh = 0; eh < N0.length && !globalThis.requestAnimationFrame; ++eh) {
  var rh = N0[eh];
  globalThis.requestAnimationFrame = globalThis[rh + "RequestAnimationFrame"], globalThis.cancelAnimationFrame = globalThis[rh + "CancelAnimationFrame"] || globalThis[rh + "CancelRequestAnimationFrame"];
}
globalThis.requestAnimationFrame || (globalThis.requestAnimationFrame = function(i) {
  if (typeof i != "function")
    throw new TypeError(i + "is not a function");
  var t = Date.now(), e = ux + th - t;
  return e < 0 && (e = 0), th = t, globalThis.self.setTimeout(function() {
    th = Date.now(), i(performance.now());
  }, e);
});
globalThis.cancelAnimationFrame || (globalThis.cancelAnimationFrame = function(i) {
  return clearTimeout(i);
});
Math.sign || (Math.sign = function(t) {
  return t = Number(t), t === 0 || isNaN(t) ? t : t > 0 ? 1 : -1;
});
Number.isInteger || (Number.isInteger = function(t) {
  return typeof t == "number" && isFinite(t) && Math.floor(t) === t;
});
globalThis.ArrayBuffer || (globalThis.ArrayBuffer = Array);
globalThis.Float32Array || (globalThis.Float32Array = Array);
globalThis.Uint32Array || (globalThis.Uint32Array = Array);
globalThis.Uint16Array || (globalThis.Uint16Array = Array);
globalThis.Uint8Array || (globalThis.Uint8Array = Array);
globalThis.Int32Array || (globalThis.Int32Array = Array);
/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Yd = {
  /**
   *  Flag for if the object is accessible. If true AccessibilityManager will overlay a
   *   shadow div with attributes set
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  accessible: !1,
  /**
   * Sets the title attribute of the shadow div
   * If accessibleTitle AND accessibleHint has not been this will default to 'displayObject [tabIndex]'
   * @member {?string}
   * @memberof PIXI.DisplayObject#
   */
  accessibleTitle: null,
  /**
   * Sets the aria-label attribute of the shadow div
   * @member {string}
   * @memberof PIXI.DisplayObject#
   */
  accessibleHint: null,
  /**
   * @member {number}
   * @memberof PIXI.DisplayObject#
   * @private
   * @todo Needs docs.
   */
  tabIndex: 0,
  /**
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   * @todo Needs docs.
   */
  _accessibleActive: !1,
  /**
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   * @todo Needs docs.
   */
  _accessibleDiv: null,
  /**
   * Specify the type of div the accessible layer is. Screen readers treat the element differently
   * depending on this type. Defaults to button.
   * @member {string}
   * @memberof PIXI.DisplayObject#
   * @default 'button'
   */
  accessibleType: "button",
  /**
   * Specify the pointer-events the accessible div will use
   * Defaults to auto.
   * @member {string}
   * @memberof PIXI.DisplayObject#
   * @default 'auto'
   */
  accessiblePointerEvents: "auto",
  /**
   * Setting to false will prevent any children inside this container to
   * be accessible. Defaults to true.
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   * @default true
   */
  accessibleChildren: !0,
  renderId: -1
};
Ie.mixin(Yd);
var fx = 9, ds = 100, cx = 0, dx = 0, F0 = 2, H0 = 1, px = -1e3, _x = -1e3, vx = 2, zd = (
  /** @class */
  function() {
    function i(t) {
      this.debug = !1, this._isActive = !1, this._isMobileAccessibility = !1, this.pool = [], this.renderId = 0, this.children = [], this.androidUpdateCount = 0, this.androidUpdateFrequency = 500, this._hookDiv = null, (Tr.tablet || Tr.phone) && this.createTouchHook();
      var e = document.createElement("div");
      e.style.width = ds + "px", e.style.height = ds + "px", e.style.position = "absolute", e.style.top = cx + "px", e.style.left = dx + "px", e.style.zIndex = F0.toString(), this.div = e, this.renderer = t, this._onKeyDown = this._onKeyDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), globalThis.addEventListener("keydown", this._onKeyDown, !1);
    }
    return Object.defineProperty(i.prototype, "isActive", {
      /**
       * Value of `true` if accessibility is currently active and accessibility layers are showing.
       * @member {boolean}
       * @readonly
       */
      get: function() {
        return this._isActive;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "isMobileAccessibility", {
      /**
       * Value of `true` if accessibility is enabled for touch devices.
       * @member {boolean}
       * @readonly
       */
      get: function() {
        return this._isMobileAccessibility;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.createTouchHook = function() {
      var t = this, e = document.createElement("button");
      e.style.width = H0 + "px", e.style.height = H0 + "px", e.style.position = "absolute", e.style.top = px + "px", e.style.left = _x + "px", e.style.zIndex = vx.toString(), e.style.backgroundColor = "#FF0000", e.title = "select to enable accessibility for this content", e.addEventListener("focus", function() {
        t._isMobileAccessibility = !0, t.activate(), t.destroyTouchHook();
      }), document.body.appendChild(e), this._hookDiv = e;
    }, i.prototype.destroyTouchHook = function() {
      this._hookDiv && (document.body.removeChild(this._hookDiv), this._hookDiv = null);
    }, i.prototype.activate = function() {
      var t;
      this._isActive || (this._isActive = !0, globalThis.document.addEventListener("mousemove", this._onMouseMove, !0), globalThis.removeEventListener("keydown", this._onKeyDown, !1), this.renderer.on("postrender", this.update, this), (t = this.renderer.view.parentNode) === null || t === void 0 || t.appendChild(this.div));
    }, i.prototype.deactivate = function() {
      var t;
      !this._isActive || this._isMobileAccessibility || (this._isActive = !1, globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0), globalThis.addEventListener("keydown", this._onKeyDown, !1), this.renderer.off("postrender", this.update), (t = this.div.parentNode) === null || t === void 0 || t.removeChild(this.div));
    }, i.prototype.updateAccessibleObjects = function(t) {
      if (!(!t.visible || !t.accessibleChildren)) {
        t.accessible && t.interactive && (t._accessibleActive || this.addChild(t), t.renderId = this.renderId);
        var e = t.children;
        if (e)
          for (var a = 0; a < e.length; a++)
            this.updateAccessibleObjects(e[a]);
      }
    }, i.prototype.update = function() {
      var t = performance.now();
      if (!(Tr.android.device && t < this.androidUpdateCount) && (this.androidUpdateCount = t + this.androidUpdateFrequency, !!this.renderer.renderingToScreen)) {
        this.renderer._lastObjectRendered && this.updateAccessibleObjects(this.renderer._lastObjectRendered);
        var e = this.renderer.view.getBoundingClientRect(), a = e.left, n = e.top, s = e.width, o = e.height, u = this.renderer, m = u.width, g = u.height, A = u.resolution, x = s / m * A, w = o / g * A, C = this.div;
        C.style.left = a + "px", C.style.top = n + "px", C.style.width = m + "px", C.style.height = g + "px";
        for (var O = 0; O < this.children.length; O++) {
          var L = this.children[O];
          if (L.renderId !== this.renderId)
            L._accessibleActive = !1, ra(this.children, O, 1), this.div.removeChild(L._accessibleDiv), this.pool.push(L._accessibleDiv), L._accessibleDiv = null, O--;
          else {
            C = L._accessibleDiv;
            var D = L.hitArea, H = L.worldTransform;
            L.hitArea ? (C.style.left = (H.tx + D.x * H.a) * x + "px", C.style.top = (H.ty + D.y * H.d) * w + "px", C.style.width = D.width * H.a * x + "px", C.style.height = D.height * H.d * w + "px") : (D = L.getBounds(), this.capHitArea(D), C.style.left = D.x * x + "px", C.style.top = D.y * w + "px", C.style.width = D.width * x + "px", C.style.height = D.height * w + "px", C.title !== L.accessibleTitle && L.accessibleTitle !== null && (C.title = L.accessibleTitle), C.getAttribute("aria-label") !== L.accessibleHint && L.accessibleHint !== null && C.setAttribute("aria-label", L.accessibleHint)), (L.accessibleTitle !== C.title || L.tabIndex !== C.tabIndex) && (C.title = L.accessibleTitle, C.tabIndex = L.tabIndex, this.debug && this.updateDebugHTML(C));
          }
        }
        this.renderId++;
      }
    }, i.prototype.updateDebugHTML = function(t) {
      t.innerHTML = "type: " + t.type + "</br> title : " + t.title + "</br> tabIndex: " + t.tabIndex;
    }, i.prototype.capHitArea = function(t) {
      t.x < 0 && (t.width += t.x, t.x = 0), t.y < 0 && (t.height += t.y, t.y = 0);
      var e = this.renderer, a = e.width, n = e.height;
      t.x + t.width > a && (t.width = a - t.x), t.y + t.height > n && (t.height = n - t.y);
    }, i.prototype.addChild = function(t) {
      var e = this.pool.pop();
      e || (e = document.createElement("button"), e.style.width = ds + "px", e.style.height = ds + "px", e.style.backgroundColor = this.debug ? "rgba(255,255,255,0.5)" : "transparent", e.style.position = "absolute", e.style.zIndex = F0.toString(), e.style.borderStyle = "none", navigator.userAgent.toLowerCase().indexOf("chrome") > -1 ? e.setAttribute("aria-live", "off") : e.setAttribute("aria-live", "polite"), navigator.userAgent.match(/rv:.*Gecko\//) ? e.setAttribute("aria-relevant", "additions") : e.setAttribute("aria-relevant", "text"), e.addEventListener("click", this._onClick.bind(this)), e.addEventListener("focus", this._onFocus.bind(this)), e.addEventListener("focusout", this._onFocusOut.bind(this))), e.style.pointerEvents = t.accessiblePointerEvents, e.type = t.accessibleType, t.accessibleTitle && t.accessibleTitle !== null ? e.title = t.accessibleTitle : (!t.accessibleHint || t.accessibleHint === null) && (e.title = "displayObject " + t.tabIndex), t.accessibleHint && t.accessibleHint !== null && e.setAttribute("aria-label", t.accessibleHint), this.debug && this.updateDebugHTML(e), t._accessibleActive = !0, t._accessibleDiv = e, e.displayObject = t, this.children.push(t), this.div.appendChild(t._accessibleDiv), t._accessibleDiv.tabIndex = t.tabIndex;
    }, i.prototype._onClick = function(t) {
      var e = this.renderer.plugins.interaction, a = t.target.displayObject, n = e.eventData;
      e.dispatchEvent(a, "click", n), e.dispatchEvent(a, "pointertap", n), e.dispatchEvent(a, "tap", n);
    }, i.prototype._onFocus = function(t) {
      t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "assertive");
      var e = this.renderer.plugins.interaction, a = t.target.displayObject, n = e.eventData;
      e.dispatchEvent(a, "mouseover", n);
    }, i.prototype._onFocusOut = function(t) {
      t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "polite");
      var e = this.renderer.plugins.interaction, a = t.target.displayObject, n = e.eventData;
      e.dispatchEvent(a, "mouseout", n);
    }, i.prototype._onKeyDown = function(t) {
      t.keyCode === fx && this.activate();
    }, i.prototype._onMouseMove = function(t) {
      t.movementX === 0 && t.movementY === 0 || this.deactivate();
    }, i.prototype.destroy = function() {
      this.destroyTouchHook(), this.div = null, globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0), globalThis.removeEventListener("keydown", this._onKeyDown), this.pool = null, this.children = null, this.renderer = null;
    }, i.extension = {
      name: "accessibility",
      type: [
        se.RendererPlugin,
        se.CanvasRendererPlugin
      ]
    }, i;
  }()
);
/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Qh = (
  /** @class */
  function() {
    function i() {
      this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0, this.global = new le(), this.target = null, this.originalEvent = null, this.identifier = null, this.isPrimary = !1, this.button = 0, this.buttons = 0, this.width = 0, this.height = 0, this.tiltX = 0, this.tiltY = 0, this.pointerType = null, this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0;
    }
    return Object.defineProperty(i.prototype, "pointerId", {
      /**
       * The unique identifier of the pointer. It will be the same as `identifier`.
       * @readonly
       * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerId
       */
      get: function() {
        return this.identifier;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.getLocalPosition = function(t, e, a) {
      return t.worldTransform.applyInverse(a || this.global, e);
    }, i.prototype.copyEvent = function(t) {
      "isPrimary" in t && t.isPrimary && (this.isPrimary = !0), this.button = "button" in t && t.button;
      var e = "buttons" in t && t.buttons;
      this.buttons = Number.isInteger(e) ? e : "which" in t && t.which, this.width = "width" in t && t.width, this.height = "height" in t && t.height, this.tiltX = "tiltX" in t && t.tiltX, this.tiltY = "tiltY" in t && t.tiltY, this.pointerType = "pointerType" in t && t.pointerType, this.pressure = "pressure" in t && t.pressure, this.rotationAngle = "rotationAngle" in t && t.rotationAngle, this.twist = "twist" in t && t.twist || 0, this.tangentialPressure = "tangentialPressure" in t && t.tangentialPressure || 0;
    }, i.prototype.reset = function() {
      this.isPrimary = !1;
    }, i;
  }()
);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Jh = function(i, t) {
  return Jh = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, Jh(i, t);
};
function mx(i, t) {
  Jh(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Kd = (
  /** @class */
  function() {
    function i() {
      this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.target = null, this.currentTarget = null, this.type = null, this.data = null;
    }
    return i.prototype.stopPropagation = function() {
      this.stopped = !0, this.stopPropagationHint = !0, this.stopsPropagatingAt = this.currentTarget;
    }, i.prototype.reset = function() {
      this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.currentTarget = null, this.target = null;
    }, i;
  }()
), Ms = (
  /** @class */
  function() {
    function i(t) {
      this._pointerId = t, this._flags = i.FLAGS.NONE;
    }
    return i.prototype._doSet = function(t, e) {
      e ? this._flags = this._flags | t : this._flags = this._flags & ~t;
    }, Object.defineProperty(i.prototype, "pointerId", {
      /**
       * Unique pointer id of the event
       * @readonly
       * @private
       * @member {number}
       */
      get: function() {
        return this._pointerId;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "flags", {
      /**
       * State of the tracking data, expressed as bit flags
       * @private
       * @member {number}
       */
      get: function() {
        return this._flags;
      },
      set: function(t) {
        this._flags = t;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "none", {
      /**
       * Is the tracked event inactive (not over or down)?
       * @private
       * @member {number}
       */
      get: function() {
        return this._flags === i.FLAGS.NONE;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "over", {
      /**
       * Is the tracked event over the DisplayObject?
       * @private
       * @member {boolean}
       */
      get: function() {
        return (this._flags & i.FLAGS.OVER) !== 0;
      },
      set: function(t) {
        this._doSet(i.FLAGS.OVER, t);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "rightDown", {
      /**
       * Did the right mouse button come down in the DisplayObject?
       * @private
       * @member {boolean}
       */
      get: function() {
        return (this._flags & i.FLAGS.RIGHT_DOWN) !== 0;
      },
      set: function(t) {
        this._doSet(i.FLAGS.RIGHT_DOWN, t);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "leftDown", {
      /**
       * Did the left mouse button come down in the DisplayObject?
       * @private
       * @member {boolean}
       */
      get: function() {
        return (this._flags & i.FLAGS.LEFT_DOWN) !== 0;
      },
      set: function(t) {
        this._doSet(i.FLAGS.LEFT_DOWN, t);
      },
      enumerable: !1,
      configurable: !0
    }), i.FLAGS = Object.freeze({
      NONE: 0,
      OVER: 1,
      LEFT_DOWN: 2,
      RIGHT_DOWN: 4
    }), i;
  }()
), gx = (
  /** @class */
  function() {
    function i() {
      this._tempPoint = new le();
    }
    return i.prototype.recursiveFindHit = function(t, e, a, n, s) {
      var o;
      if (!e || !e.visible)
        return !1;
      var u = t.data.global;
      s = e.interactive || s;
      var m = !1, g = s, A = !0;
      if (e.hitArea)
        n && (e.worldTransform.applyInverse(u, this._tempPoint), e.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? m = !0 : (n = !1, A = !1)), g = !1;
      else if (e._mask && n) {
        var x = e._mask.isMaskData ? e._mask.maskObject : e._mask;
        x && !(!((o = x.containsPoint) === null || o === void 0) && o.call(x, u)) && (n = !1);
      }
      if (A && e.interactiveChildren && e.children)
        for (var w = e.children, C = w.length - 1; C >= 0; C--) {
          var O = w[C], L = this.recursiveFindHit(t, O, a, n, g);
          if (L) {
            if (!O.parent)
              continue;
            g = !1, L && (t.target && (n = !1), m = !0);
          }
        }
      return s && (n && !t.target && !e.hitArea && e.containsPoint && e.containsPoint(u) && (m = !0), e.interactive && (m && !t.target && (t.target = e), a && a(t, e, !!m))), m;
    }, i.prototype.findHit = function(t, e, a, n) {
      this.recursiveFindHit(t, e, a, n, !1);
    }, i;
  }()
), Wd = {
  interactive: !1,
  interactiveChildren: !0,
  hitArea: null,
  /**
   * If enabled, the mouse cursor use the pointer behavior when hovered over the displayObject if it is interactive
   * Setting this changes the 'cursor' property to `'pointer'`.
   * @example
   * const sprite = new PIXI.Sprite(texture);
   * sprite.interactive = true;
   * sprite.buttonMode = true;
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  get buttonMode() {
    return this.cursor === "pointer";
  },
  set buttonMode(i) {
    i ? this.cursor = "pointer" : this.cursor === "pointer" && (this.cursor = null);
  },
  /**
   * This defines what cursor mode is used when the mouse cursor
   * is hovered over the displayObject.
   * @example
   * const sprite = new PIXI.Sprite(texture);
   * sprite.interactive = true;
   * sprite.cursor = 'wait';
   * @see https://developer.mozilla.org/en/docs/Web/CSS/cursor
   * @member {string}
   * @memberof PIXI.DisplayObject#
   */
  cursor: null,
  /**
   * Internal set of all active pointers, by identifier
   * @member {Map<number, InteractionTrackingData>}
   * @memberof PIXI.DisplayObject#
   * @private
   */
  get trackedPointers() {
    return this._trackedPointers === void 0 && (this._trackedPointers = {}), this._trackedPointers;
  },
  /**
   * Map of all tracked pointers, by identifier. Use trackedPointers to access.
   * @private
   * @type {Map<number, InteractionTrackingData>}
   */
  _trackedPointers: void 0
};
Ie.mixin(Wd);
var ps = 1, _s = {
  target: null,
  data: {
    global: null
  }
}, jd = (
  /** @class */
  function(i) {
    mx(t, i);
    function t(e, a) {
      var n = i.call(this) || this;
      return a = a || {}, n.renderer = e, n.autoPreventDefault = a.autoPreventDefault !== void 0 ? a.autoPreventDefault : !0, n.interactionFrequency = a.interactionFrequency || 10, n.mouse = new Qh(), n.mouse.identifier = ps, n.mouse.global.set(-999999), n.activeInteractionData = {}, n.activeInteractionData[ps] = n.mouse, n.interactionDataPool = [], n.eventData = new Kd(), n.interactionDOMElement = null, n.moveWhenInside = !1, n.eventsAdded = !1, n.tickerAdded = !1, n.mouseOverRenderer = !("PointerEvent" in globalThis), n.supportsTouchEvents = "ontouchstart" in globalThis, n.supportsPointerEvents = !!globalThis.PointerEvent, n.onPointerUp = n.onPointerUp.bind(n), n.processPointerUp = n.processPointerUp.bind(n), n.onPointerCancel = n.onPointerCancel.bind(n), n.processPointerCancel = n.processPointerCancel.bind(n), n.onPointerDown = n.onPointerDown.bind(n), n.processPointerDown = n.processPointerDown.bind(n), n.onPointerMove = n.onPointerMove.bind(n), n.processPointerMove = n.processPointerMove.bind(n), n.onPointerOut = n.onPointerOut.bind(n), n.processPointerOverOut = n.processPointerOverOut.bind(n), n.onPointerOver = n.onPointerOver.bind(n), n.cursorStyles = {
        default: "inherit",
        pointer: "pointer"
      }, n.currentCursorMode = null, n.cursor = null, n.resolution = 1, n.delayedEvents = [], n.search = new gx(), n._tempDisplayObject = new hl(), n._eventListenerOptions = { capture: !0, passive: !1 }, n._useSystemTicker = a.useSystemTicker !== void 0 ? a.useSystemTicker : !0, n.setTargetElement(n.renderer.view, n.renderer.resolution), n;
    }
    return Object.defineProperty(t.prototype, "useSystemTicker", {
      /**
       * Should the InteractionManager automatically add {@link tickerUpdate} to {@link PIXI.Ticker.system}.
       * @default true
       */
      get: function() {
        return this._useSystemTicker;
      },
      set: function(e) {
        this._useSystemTicker = e, e ? this.addTickerListener() : this.removeTickerListener();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "lastObjectRendered", {
      /**
       * Last rendered object or temp object.
       * @readonly
       * @protected
       */
      get: function() {
        return this.renderer._lastObjectRendered || this._tempDisplayObject;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.hitTest = function(e, a) {
      return _s.target = null, _s.data.global = e, a || (a = this.lastObjectRendered), this.processInteractive(_s, a, null, !0), _s.target;
    }, t.prototype.setTargetElement = function(e, a) {
      a === void 0 && (a = 1), this.removeTickerListener(), this.removeEvents(), this.interactionDOMElement = e, this.resolution = a, this.addEvents(), this.addTickerListener();
    }, t.prototype.addTickerListener = function() {
      this.tickerAdded || !this.interactionDOMElement || !this._useSystemTicker || (We.system.add(this.tickerUpdate, this, ti.INTERACTION), this.tickerAdded = !0);
    }, t.prototype.removeTickerListener = function() {
      this.tickerAdded && (We.system.remove(this.tickerUpdate, this), this.tickerAdded = !1);
    }, t.prototype.addEvents = function() {
      if (!(this.eventsAdded || !this.interactionDOMElement)) {
        var e = this.interactionDOMElement.style;
        globalThis.navigator.msPointerEnabled ? (e.msContentZooming = "none", e.msTouchAction = "none") : this.supportsPointerEvents && (e.touchAction = "none"), this.supportsPointerEvents ? (globalThis.document.addEventListener("pointermove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, this._eventListenerOptions), globalThis.addEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions), globalThis.addEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.addEventListener("mousemove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, this._eventListenerOptions), globalThis.addEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)), this.supportsTouchEvents && (this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions), this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, this._eventListenerOptions), this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)), this.eventsAdded = !0;
      }
    }, t.prototype.removeEvents = function() {
      if (!(!this.eventsAdded || !this.interactionDOMElement)) {
        var e = this.interactionDOMElement.style;
        globalThis.navigator.msPointerEnabled ? (e.msContentZooming = "", e.msTouchAction = "") : this.supportsPointerEvents && (e.touchAction = ""), this.supportsPointerEvents ? (globalThis.document.removeEventListener("pointermove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, this._eventListenerOptions), globalThis.removeEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions), globalThis.removeEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.removeEventListener("mousemove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, this._eventListenerOptions), globalThis.removeEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)), this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)), this.interactionDOMElement = null, this.eventsAdded = !1;
      }
    }, t.prototype.tickerUpdate = function(e) {
      this._deltaTime += e, !(this._deltaTime < this.interactionFrequency) && (this._deltaTime = 0, this.update());
    }, t.prototype.update = function() {
      if (this.interactionDOMElement) {
        if (this._didMove) {
          this._didMove = !1;
          return;
        }
        this.cursor = null;
        for (var e in this.activeInteractionData)
          if (this.activeInteractionData.hasOwnProperty(e)) {
            var a = this.activeInteractionData[e];
            if (a.originalEvent && a.pointerType !== "touch") {
              var n = this.configureInteractionEventForDOMEvent(this.eventData, a.originalEvent, a);
              this.processInteractive(n, this.lastObjectRendered, this.processPointerOverOut, !0);
            }
          }
        this.setCursorMode(this.cursor);
      }
    }, t.prototype.setCursorMode = function(e) {
      e = e || "default";
      var a = !0;
      if (globalThis.OffscreenCanvas && this.interactionDOMElement instanceof OffscreenCanvas && (a = !1), this.currentCursorMode !== e) {
        this.currentCursorMode = e;
        var n = this.cursorStyles[e];
        if (n)
          switch (typeof n) {
            case "string":
              a && (this.interactionDOMElement.style.cursor = n);
              break;
            case "function":
              n(e);
              break;
            case "object":
              a && Object.assign(this.interactionDOMElement.style, n);
              break;
          }
        else
          a && typeof e == "string" && !Object.prototype.hasOwnProperty.call(this.cursorStyles, e) && (this.interactionDOMElement.style.cursor = e);
      }
    }, t.prototype.dispatchEvent = function(e, a, n) {
      (!n.stopPropagationHint || e === n.stopsPropagatingAt) && (n.currentTarget = e, n.type = a, e.emit(a, n), e[a] && e[a](n));
    }, t.prototype.delayDispatchEvent = function(e, a, n) {
      this.delayedEvents.push({ displayObject: e, eventString: a, eventData: n });
    }, t.prototype.mapPositionToPoint = function(e, a, n) {
      var s;
      this.interactionDOMElement.parentElement ? s = this.interactionDOMElement.getBoundingClientRect() : s = {
        x: 0,
        y: 0,
        width: this.interactionDOMElement.width,
        height: this.interactionDOMElement.height,
        left: 0,
        top: 0
      };
      var o = 1 / this.resolution;
      e.x = (a - s.left) * (this.interactionDOMElement.width / s.width) * o, e.y = (n - s.top) * (this.interactionDOMElement.height / s.height) * o;
    }, t.prototype.processInteractive = function(e, a, n, s) {
      var o = this.search.findHit(e, a, n, s), u = this.delayedEvents;
      if (!u.length)
        return o;
      e.stopPropagationHint = !1;
      var m = u.length;
      this.delayedEvents = [];
      for (var g = 0; g < m; g++) {
        var A = u[g], x = A.displayObject, w = A.eventString, C = A.eventData;
        C.stopsPropagatingAt === x && (C.stopPropagationHint = !0), this.dispatchEvent(x, w, C);
      }
      return o;
    }, t.prototype.onPointerDown = function(e) {
      if (!(this.supportsTouchEvents && e.pointerType === "touch")) {
        var a = this.normalizeToPointerData(e);
        if (this.autoPreventDefault && a[0].isNormalized) {
          var n = e.cancelable || !("cancelable" in e);
          n && e.preventDefault();
        }
        for (var s = a.length, o = 0; o < s; o++) {
          var u = a[o], m = this.getInteractionDataForPointerId(u), g = this.configureInteractionEventForDOMEvent(this.eventData, u, m);
          if (g.data.originalEvent = e, this.processInteractive(g, this.lastObjectRendered, this.processPointerDown, !0), this.emit("pointerdown", g), u.pointerType === "touch")
            this.emit("touchstart", g);
          else if (u.pointerType === "mouse" || u.pointerType === "pen") {
            var A = u.button === 2;
            this.emit(A ? "rightdown" : "mousedown", this.eventData);
          }
        }
      }
    }, t.prototype.processPointerDown = function(e, a, n) {
      var s = e.data, o = e.data.identifier;
      if (n) {
        if (a.trackedPointers[o] || (a.trackedPointers[o] = new Ms(o)), this.dispatchEvent(a, "pointerdown", e), s.pointerType === "touch")
          this.dispatchEvent(a, "touchstart", e);
        else if (s.pointerType === "mouse" || s.pointerType === "pen") {
          var u = s.button === 2;
          u ? a.trackedPointers[o].rightDown = !0 : a.trackedPointers[o].leftDown = !0, this.dispatchEvent(a, u ? "rightdown" : "mousedown", e);
        }
      }
    }, t.prototype.onPointerComplete = function(e, a, n) {
      var s = this.normalizeToPointerData(e), o = s.length, u = e.target;
      e.composedPath && e.composedPath().length > 0 && (u = e.composedPath()[0]);
      for (var m = u !== this.interactionDOMElement ? "outside" : "", g = 0; g < o; g++) {
        var A = s[g], x = this.getInteractionDataForPointerId(A), w = this.configureInteractionEventForDOMEvent(this.eventData, A, x);
        if (w.data.originalEvent = e, this.processInteractive(w, this.lastObjectRendered, n, a || !m), this.emit(a ? "pointercancel" : "pointerup" + m, w), A.pointerType === "mouse" || A.pointerType === "pen") {
          var C = A.button === 2;
          this.emit(C ? "rightup" + m : "mouseup" + m, w);
        } else
          A.pointerType === "touch" && (this.emit(a ? "touchcancel" : "touchend" + m, w), this.releaseInteractionDataForPointerId(A.pointerId));
      }
    }, t.prototype.onPointerCancel = function(e) {
      this.supportsTouchEvents && e.pointerType === "touch" || this.onPointerComplete(e, !0, this.processPointerCancel);
    }, t.prototype.processPointerCancel = function(e, a) {
      var n = e.data, s = e.data.identifier;
      a.trackedPointers[s] !== void 0 && (delete a.trackedPointers[s], this.dispatchEvent(a, "pointercancel", e), n.pointerType === "touch" && this.dispatchEvent(a, "touchcancel", e));
    }, t.prototype.onPointerUp = function(e) {
      this.supportsTouchEvents && e.pointerType === "touch" || this.onPointerComplete(e, !1, this.processPointerUp);
    }, t.prototype.processPointerUp = function(e, a, n) {
      var s = e.data, o = e.data.identifier, u = a.trackedPointers[o], m = s.pointerType === "touch", g = s.pointerType === "mouse" || s.pointerType === "pen", A = !1;
      if (g) {
        var x = s.button === 2, w = Ms.FLAGS, C = x ? w.RIGHT_DOWN : w.LEFT_DOWN, O = u !== void 0 && u.flags & C;
        n ? (this.dispatchEvent(a, x ? "rightup" : "mouseup", e), O && (this.dispatchEvent(a, x ? "rightclick" : "click", e), A = !0)) : O && this.dispatchEvent(a, x ? "rightupoutside" : "mouseupoutside", e), u && (x ? u.rightDown = !1 : u.leftDown = !1);
      }
      n ? (this.dispatchEvent(a, "pointerup", e), m && this.dispatchEvent(a, "touchend", e), u && ((!g || A) && this.dispatchEvent(a, "pointertap", e), m && (this.dispatchEvent(a, "tap", e), u.over = !1))) : u && (this.dispatchEvent(a, "pointerupoutside", e), m && this.dispatchEvent(a, "touchendoutside", e)), u && u.none && delete a.trackedPointers[o];
    }, t.prototype.onPointerMove = function(e) {
      if (!(this.supportsTouchEvents && e.pointerType === "touch")) {
        var a = this.normalizeToPointerData(e);
        (a[0].pointerType === "mouse" || a[0].pointerType === "pen") && (this._didMove = !0, this.cursor = null);
        for (var n = a.length, s = 0; s < n; s++) {
          var o = a[s], u = this.getInteractionDataForPointerId(o), m = this.configureInteractionEventForDOMEvent(this.eventData, o, u);
          m.data.originalEvent = e, this.processInteractive(m, this.lastObjectRendered, this.processPointerMove, !0), this.emit("pointermove", m), o.pointerType === "touch" && this.emit("touchmove", m), (o.pointerType === "mouse" || o.pointerType === "pen") && this.emit("mousemove", m);
        }
        a[0].pointerType === "mouse" && this.setCursorMode(this.cursor);
      }
    }, t.prototype.processPointerMove = function(e, a, n) {
      var s = e.data, o = s.pointerType === "touch", u = s.pointerType === "mouse" || s.pointerType === "pen";
      u && this.processPointerOverOut(e, a, n), (!this.moveWhenInside || n) && (this.dispatchEvent(a, "pointermove", e), o && this.dispatchEvent(a, "touchmove", e), u && this.dispatchEvent(a, "mousemove", e));
    }, t.prototype.onPointerOut = function(e) {
      if (!(this.supportsTouchEvents && e.pointerType === "touch")) {
        var a = this.normalizeToPointerData(e), n = a[0];
        n.pointerType === "mouse" && (this.mouseOverRenderer = !1, this.setCursorMode(null));
        var s = this.getInteractionDataForPointerId(n), o = this.configureInteractionEventForDOMEvent(this.eventData, n, s);
        o.data.originalEvent = n, this.processInteractive(o, this.lastObjectRendered, this.processPointerOverOut, !1), this.emit("pointerout", o), n.pointerType === "mouse" || n.pointerType === "pen" ? this.emit("mouseout", o) : this.releaseInteractionDataForPointerId(s.identifier);
      }
    }, t.prototype.processPointerOverOut = function(e, a, n) {
      var s = e.data, o = e.data.identifier, u = s.pointerType === "mouse" || s.pointerType === "pen", m = a.trackedPointers[o];
      n && !m && (m = a.trackedPointers[o] = new Ms(o)), m !== void 0 && (n && this.mouseOverRenderer ? (m.over || (m.over = !0, this.delayDispatchEvent(a, "pointerover", e), u && this.delayDispatchEvent(a, "mouseover", e)), u && this.cursor === null && (this.cursor = a.cursor)) : m.over && (m.over = !1, this.dispatchEvent(a, "pointerout", this.eventData), u && this.dispatchEvent(a, "mouseout", e), m.none && delete a.trackedPointers[o]));
    }, t.prototype.onPointerOver = function(e) {
      if (!(this.supportsTouchEvents && e.pointerType === "touch")) {
        var a = this.normalizeToPointerData(e), n = a[0], s = this.getInteractionDataForPointerId(n), o = this.configureInteractionEventForDOMEvent(this.eventData, n, s);
        o.data.originalEvent = n, n.pointerType === "mouse" && (this.mouseOverRenderer = !0), this.emit("pointerover", o), (n.pointerType === "mouse" || n.pointerType === "pen") && this.emit("mouseover", o);
      }
    }, t.prototype.getInteractionDataForPointerId = function(e) {
      var a = e.pointerId, n;
      return a === ps || e.pointerType === "mouse" ? n = this.mouse : this.activeInteractionData[a] ? n = this.activeInteractionData[a] : (n = this.interactionDataPool.pop() || new Qh(), n.identifier = a, this.activeInteractionData[a] = n), n.copyEvent(e), n;
    }, t.prototype.releaseInteractionDataForPointerId = function(e) {
      var a = this.activeInteractionData[e];
      a && (delete this.activeInteractionData[e], a.reset(), this.interactionDataPool.push(a));
    }, t.prototype.configureInteractionEventForDOMEvent = function(e, a, n) {
      return e.data = n, this.mapPositionToPoint(n.global, a.clientX, a.clientY), a.pointerType === "touch" && (a.globalX = n.global.x, a.globalY = n.global.y), n.originalEvent = a, e.reset(), e;
    }, t.prototype.normalizeToPointerData = function(e) {
      var a = [];
      if (this.supportsTouchEvents && e instanceof TouchEvent)
        for (var n = 0, s = e.changedTouches.length; n < s; n++) {
          var o = e.changedTouches[n];
          typeof o.button == "undefined" && (o.button = e.touches.length ? 1 : 0), typeof o.buttons == "undefined" && (o.buttons = e.touches.length ? 1 : 0), typeof o.isPrimary == "undefined" && (o.isPrimary = e.touches.length === 1 && e.type === "touchstart"), typeof o.width == "undefined" && (o.width = o.radiusX || 1), typeof o.height == "undefined" && (o.height = o.radiusY || 1), typeof o.tiltX == "undefined" && (o.tiltX = 0), typeof o.tiltY == "undefined" && (o.tiltY = 0), typeof o.pointerType == "undefined" && (o.pointerType = "touch"), typeof o.pointerId == "undefined" && (o.pointerId = o.identifier || 0), typeof o.pressure == "undefined" && (o.pressure = o.force || 0.5), typeof o.twist == "undefined" && (o.twist = 0), typeof o.tangentialPressure == "undefined" && (o.tangentialPressure = 0), typeof o.layerX == "undefined" && (o.layerX = o.offsetX = o.clientX), typeof o.layerY == "undefined" && (o.layerY = o.offsetY = o.clientY), o.isNormalized = !0, a.push(o);
        }
      else if (!globalThis.MouseEvent || e instanceof MouseEvent && (!this.supportsPointerEvents || !(e instanceof globalThis.PointerEvent))) {
        var u = e;
        typeof u.isPrimary == "undefined" && (u.isPrimary = !0), typeof u.width == "undefined" && (u.width = 1), typeof u.height == "undefined" && (u.height = 1), typeof u.tiltX == "undefined" && (u.tiltX = 0), typeof u.tiltY == "undefined" && (u.tiltY = 0), typeof u.pointerType == "undefined" && (u.pointerType = "mouse"), typeof u.pointerId == "undefined" && (u.pointerId = ps), typeof u.pressure == "undefined" && (u.pressure = 0.5), typeof u.twist == "undefined" && (u.twist = 0), typeof u.tangentialPressure == "undefined" && (u.tangentialPressure = 0), u.isNormalized = !0, a.push(u);
      } else
        a.push(e);
      return a;
    }, t.prototype.destroy = function() {
      this.removeEvents(), this.removeTickerListener(), this.removeAllListeners(), this.renderer = null, this.mouse = null, this.eventData = null, this.interactionDOMElement = null, this.onPointerDown = null, this.processPointerDown = null, this.onPointerUp = null, this.processPointerUp = null, this.onPointerCancel = null, this.processPointerCancel = null, this.onPointerMove = null, this.processPointerMove = null, this.onPointerOut = null, this.processPointerOverOut = null, this.onPointerOver = null, this.search = null;
    }, t.extension = {
      name: "interaction",
      type: [
        se.RendererPlugin,
        se.CanvasRendererPlugin
      ]
    }, t;
  }(mi)
);
/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var yx = new zt(), bx = 4, Qd = (
  /** @class */
  function() {
    function i(t) {
      this.renderer = t;
    }
    return i.prototype.image = function(t, e, a) {
      var n = new Image();
      return n.src = this.base64(t, e, a), n;
    }, i.prototype.base64 = function(t, e, a) {
      return this.canvas(t).toDataURL(e, a);
    }, i.prototype.canvas = function(t, e) {
      var a = this._rawPixels(t, e), n = a.pixels, s = a.width, o = a.height, u = a.flipY, m = new Ch(s, o, 1), g = m.context.getImageData(0, 0, s, o);
      if (i.arrayPostDivide(n, g.data), m.context.putImageData(g, 0, 0), u) {
        var A = new Ch(m.width, m.height, 1);
        A.context.scale(1, -1), A.context.drawImage(m.canvas, 0, -o), m.destroy(), m = A;
      }
      return m.canvas;
    }, i.prototype.pixels = function(t, e) {
      var a = this._rawPixels(t, e).pixels;
      return i.arrayPostDivide(a, a), a;
    }, i.prototype._rawPixels = function(t, e) {
      var a = this.renderer, n, s = !1, o, u = !1;
      if (t)
        if (t instanceof Oi)
          o = t;
        else {
          var m = a.context.webGLVersion >= 2 ? a.multisample : _e.NONE;
          if (o = this.renderer.generateTexture(t, { multisample: m }), m !== _e.NONE) {
            var g = Oi.create({
              width: o.width,
              height: o.height
            });
            a.framebuffer.bind(o.framebuffer), a.framebuffer.blit(g.framebuffer), a.framebuffer.bind(null), o.destroy(!0), o = g;
          }
          u = !0;
        }
      o ? (n = o.baseTexture.resolution, e = e != null ? e : o.frame, s = !1, a.renderTexture.bind(o)) : (n = a.resolution, e || (e = yx, e.width = a.width, e.height = a.height), s = !0, a.renderTexture.bind(null));
      var A = Math.round(e.width * n), x = Math.round(e.height * n), w = new Uint8Array(bx * A * x), C = a.gl;
      return C.readPixels(Math.round(e.x * n), Math.round(e.y * n), A, x, C.RGBA, C.UNSIGNED_BYTE, w), u && o.destroy(!0), { pixels: w, width: A, height: x, flipY: s };
    }, i.prototype.destroy = function() {
      this.renderer = null;
    }, i.arrayPostDivide = function(t, e) {
      for (var a = 0; a < t.length; a += 4) {
        var n = e[a + 3] = t[a + 3];
        n !== 0 ? (e[a] = Math.round(Math.min(t[a] * 255 / n, 255)), e[a + 1] = Math.round(Math.min(t[a + 1] * 255 / n, 255)), e[a + 2] = Math.round(Math.min(t[a + 2] * 255 / n, 255))) : (e[a] = t[a], e[a + 1] = t[a + 1], e[a + 2] = t[a + 2]);
      }
    }, i.extension = {
      name: "extract",
      type: se.RendererPlugin
    }, i;
  }()
);
/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var vs = (
  /** @class */
  function() {
    function i(t, e, a) {
      e === void 0 && (e = !1), this._fn = t, this._once = e, this._thisArg = a, this._next = this._prev = this._owner = null;
    }
    return i.prototype.detach = function() {
      return this._owner === null ? !1 : (this._owner.detach(this), !0);
    }, i;
  }()
);
function B0(i, t) {
  return i._head ? (i._tail._next = t, t._prev = i._tail, i._tail = t) : (i._head = t, i._tail = t), t._owner = i, t;
}
var ci = (
  /** @class */
  function() {
    function i() {
      this._head = this._tail = void 0;
    }
    return i.prototype.handlers = function(t) {
      t === void 0 && (t = !1);
      var e = this._head;
      if (t)
        return !!e;
      for (var a = []; e; )
        a.push(e), e = e._next;
      return a;
    }, i.prototype.has = function(t) {
      if (!(t instanceof vs))
        throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");
      return t._owner === this;
    }, i.prototype.dispatch = function() {
      for (var t = arguments, e = [], a = 0; a < arguments.length; a++)
        e[a] = t[a];
      var n = this._head;
      if (!n)
        return !1;
      for (; n; )
        n._once && this.detach(n), n._fn.apply(n._thisArg, e), n = n._next;
      return !0;
    }, i.prototype.add = function(t, e) {
      if (e === void 0 && (e = null), typeof t != "function")
        throw new Error("MiniSignal#add(): First arg must be a Function.");
      return B0(this, new vs(t, !1, e));
    }, i.prototype.once = function(t, e) {
      if (e === void 0 && (e = null), typeof t != "function")
        throw new Error("MiniSignal#once(): First arg must be a Function.");
      return B0(this, new vs(t, !0, e));
    }, i.prototype.detach = function(t) {
      if (!(t instanceof vs))
        throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");
      return t._owner !== this ? this : (t._prev && (t._prev._next = t._next), t._next && (t._next._prev = t._prev), t === this._head ? (this._head = t._next, t._next === null && (this._tail = null)) : t === this._tail && (this._tail = t._prev, this._tail._next = null), t._owner = null, this);
    }, i.prototype.detachAll = function() {
      var t = this._head;
      if (!t)
        return this;
      for (this._head = this._tail = null; t; )
        t._owner = null, t = t._next;
      return this;
    }, i;
  }()
);
function Jd(i, t) {
  t = t || {};
  for (var e = {
    // eslint-disable-next-line max-len
    key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
    q: {
      name: "queryKey",
      parser: /(?:^|&)([^&=]*)=?([^&]*)/g
    },
    parser: {
      // eslint-disable-next-line max-len
      strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
      // eslint-disable-next-line max-len
      loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
    }
  }, a = e.parser[t.strictMode ? "strict" : "loose"].exec(i), n = {}, s = 14; s--; )
    n[e.key[s]] = a[s] || "";
  return n[e.q.name] = {}, n[e.key[12]].replace(e.q.parser, function(o, u, m) {
    u && (n[e.q.name][u] = m);
  }), n;
}
var ih, ms = null, xx = 0, k0 = 200, Tx = 204, Ax = 1223, Sx = 2;
function U0() {
}
function G0(i, t, e) {
  t && t.indexOf(".") === 0 && (t = t.substring(1)), t && (i[t] = e);
}
function ah(i) {
  return i.toString().replace("object ", "");
}
var Se = (
  /** @class */
  function() {
    function i(t, e, a) {
      if (this._dequeue = U0, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = null, this._boundOnError = null, this._boundOnProgress = null, this._boundOnTimeout = null, this._boundXhrOnError = null, this._boundXhrOnTimeout = null, this._boundXhrOnAbort = null, this._boundXhrOnLoad = null, typeof t != "string" || typeof e != "string")
        throw new Error("Both name and url are required for constructing a resource.");
      a = a || {}, this._flags = 0, this._setFlag(i.STATUS_FLAGS.DATA_URL, e.indexOf("data:") === 0), this.name = t, this.url = e, this.extension = this._getExtension(), this.data = null, this.crossOrigin = a.crossOrigin === !0 ? "anonymous" : a.crossOrigin, this.timeout = a.timeout || 0, this.loadType = a.loadType || this._determineLoadType(), this.xhrType = a.xhrType, this.metadata = a.metadata || {}, this.error = null, this.xhr = null, this.children = [], this.type = i.TYPE.UNKNOWN, this.progressChunk = 0, this._dequeue = U0, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = this.complete.bind(this), this._boundOnError = this._onError.bind(this), this._boundOnProgress = this._onProgress.bind(this), this._boundOnTimeout = this._onTimeout.bind(this), this._boundXhrOnError = this._xhrOnError.bind(this), this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this), this._boundXhrOnAbort = this._xhrOnAbort.bind(this), this._boundXhrOnLoad = this._xhrOnLoad.bind(this), this.onStart = new ci(), this.onProgress = new ci(), this.onComplete = new ci(), this.onAfterMiddleware = new ci();
    }
    return i.setExtensionLoadType = function(t, e) {
      G0(i._loadTypeMap, t, e);
    }, i.setExtensionXhrType = function(t, e) {
      G0(i._xhrTypeMap, t, e);
    }, Object.defineProperty(i.prototype, "isDataUrl", {
      /**
       * When the resource starts to load.
       * @memberof PIXI.LoaderResource
       * @callback OnStartSignal
       * @param {PIXI.Resource} resource - The resource that the event happened on.
       */
      /**
       * When the resource reports loading progress.
       * @memberof PIXI.LoaderResource
       * @callback OnProgressSignal
       * @param {PIXI.Resource} resource - The resource that the event happened on.
       * @param {number} percentage - The progress of the load in the range [0, 1].
       */
      /**
       * When the resource finishes loading.
       * @memberof PIXI.LoaderResource
       * @callback OnCompleteSignal
       * @param {PIXI.Resource} resource - The resource that the event happened on.
       */
      /**
       * @memberof PIXI.LoaderResource
       * @typedef {object} IMetadata
       * @property {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [loadElement=null] - The
       *      element to use for loading, instead of creating one.
       * @property {boolean} [skipSource=false] - Skips adding source(s) to the load element. This
       *      is useful if you want to pass in a `loadElement` that you already added load sources to.
       * @property {string|string[]} [mimeType] - The mime type to use for the source element
       *      of a video/audio elment. If the urls are an array, you can pass this as an array as well
       *      where each index is the mime type to use for the corresponding url index.
       */
      /**
       * Stores whether or not this url is a data url.
       * @readonly
       * @member {boolean}
       */
      get: function() {
        return this._hasFlag(i.STATUS_FLAGS.DATA_URL);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "isComplete", {
      /**
       * Describes if this resource has finished loading. Is true when the resource has completely
       * loaded.
       * @readonly
       * @member {boolean}
       */
      get: function() {
        return this._hasFlag(i.STATUS_FLAGS.COMPLETE);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "isLoading", {
      /**
       * Describes if this resource is currently loading. Is true when the resource starts loading,
       * and is false again when complete.
       * @readonly
       * @member {boolean}
       */
      get: function() {
        return this._hasFlag(i.STATUS_FLAGS.LOADING);
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.complete = function() {
      this._clearEvents(), this._finish();
    }, i.prototype.abort = function(t) {
      if (!this.error) {
        if (this.error = new Error(t), this._clearEvents(), this.xhr)
          this.xhr.abort();
        else if (this.xdr)
          this.xdr.abort();
        else if (this.data)
          if (this.data.src)
            this.data.src = i.EMPTY_GIF;
          else
            for (; this.data.firstChild; )
              this.data.removeChild(this.data.firstChild);
        this._finish();
      }
    }, i.prototype.load = function(t) {
      var e = this;
      if (!this.isLoading) {
        if (this.isComplete) {
          t && setTimeout(function() {
            return t(e);
          }, 1);
          return;
        } else
          t && this.onComplete.once(t);
        switch (this._setFlag(i.STATUS_FLAGS.LOADING, !0), this.onStart.dispatch(this), (this.crossOrigin === !1 || typeof this.crossOrigin != "string") && (this.crossOrigin = this._determineCrossOrigin(this.url)), this.loadType) {
          case i.LOAD_TYPE.IMAGE:
            this.type = i.TYPE.IMAGE, this._loadElement("image");
            break;
          case i.LOAD_TYPE.AUDIO:
            this.type = i.TYPE.AUDIO, this._loadSourceElement("audio");
            break;
          case i.LOAD_TYPE.VIDEO:
            this.type = i.TYPE.VIDEO, this._loadSourceElement("video");
            break;
          case i.LOAD_TYPE.XHR:
          default:
            typeof ih == "undefined" && (ih = !!(globalThis.XDomainRequest && !("withCredentials" in new XMLHttpRequest()))), ih && this.crossOrigin ? this._loadXdr() : this._loadXhr();
            break;
        }
      }
    }, i.prototype._hasFlag = function(t) {
      return (this._flags & t) !== 0;
    }, i.prototype._setFlag = function(t, e) {
      this._flags = e ? this._flags | t : this._flags & ~t;
    }, i.prototype._clearEvents = function() {
      clearTimeout(this._elementTimer), this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError, !1), this.data.removeEventListener("load", this._boundComplete, !1), this.data.removeEventListener("progress", this._boundOnProgress, !1), this.data.removeEventListener("canplaythrough", this._boundComplete, !1)), this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError, !1), this.xhr.removeEventListener("timeout", this._boundXhrOnTimeout, !1), this.xhr.removeEventListener("abort", this._boundXhrOnAbort, !1), this.xhr.removeEventListener("progress", this._boundOnProgress, !1), this.xhr.removeEventListener("load", this._boundXhrOnLoad, !1)) : (this.xhr.onerror = null, this.xhr.ontimeout = null, this.xhr.onprogress = null, this.xhr.onload = null));
    }, i.prototype._finish = function() {
      if (this.isComplete)
        throw new Error("Complete called again for an already completed resource.");
      this._setFlag(i.STATUS_FLAGS.COMPLETE, !0), this._setFlag(i.STATUS_FLAGS.LOADING, !1), this.onComplete.dispatch(this);
    }, i.prototype._loadElement = function(t) {
      this.metadata.loadElement ? this.data = this.metadata.loadElement : t === "image" && typeof globalThis.Image != "undefined" ? this.data = new Image() : this.data = document.createElement(t), this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), this.metadata.skipSource || (this.data.src = this.url), this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));
    }, i.prototype._loadSourceElement = function(t) {
      if (this.metadata.loadElement ? this.data = this.metadata.loadElement : t === "audio" && typeof globalThis.Audio != "undefined" ? this.data = new Audio() : this.data = document.createElement(t), this.data === null) {
        this.abort("Unsupported element: " + t);
        return;
      }
      if (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), !this.metadata.skipSource)
        if (navigator.isCocoonJS)
          this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;
        else if (Array.isArray(this.url))
          for (var e = this.metadata.mimeType, a = 0; a < this.url.length; ++a)
            this.data.appendChild(this._createSource(t, this.url[a], Array.isArray(e) ? e[a] : e));
        else {
          var e = this.metadata.mimeType;
          this.data.appendChild(this._createSource(t, this.url, Array.isArray(e) ? e[0] : e));
        }
      this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.data.addEventListener("canplaythrough", this._boundComplete, !1), this.data.load(), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));
    }, i.prototype._loadXhr = function() {
      typeof this.xhrType != "string" && (this.xhrType = this._determineXhrType());
      var t = this.xhr = new XMLHttpRequest();
      this.crossOrigin === "use-credentials" && (t.withCredentials = !0), t.open("GET", this.url, !0), t.timeout = this.timeout, this.xhrType === i.XHR_RESPONSE_TYPE.JSON || this.xhrType === i.XHR_RESPONSE_TYPE.DOCUMENT ? t.responseType = i.XHR_RESPONSE_TYPE.TEXT : t.responseType = this.xhrType, t.addEventListener("error", this._boundXhrOnError, !1), t.addEventListener("timeout", this._boundXhrOnTimeout, !1), t.addEventListener("abort", this._boundXhrOnAbort, !1), t.addEventListener("progress", this._boundOnProgress, !1), t.addEventListener("load", this._boundXhrOnLoad, !1), t.send();
    }, i.prototype._loadXdr = function() {
      typeof this.xhrType != "string" && (this.xhrType = this._determineXhrType());
      var t = this.xhr = new globalThis.XDomainRequest();
      t.timeout = this.timeout || 5e3, t.onerror = this._boundXhrOnError, t.ontimeout = this._boundXhrOnTimeout, t.onprogress = this._boundOnProgress, t.onload = this._boundXhrOnLoad, t.open("GET", this.url, !0), setTimeout(function() {
        return t.send();
      }, 1);
    }, i.prototype._createSource = function(t, e, a) {
      a || (a = t + "/" + this._getExtension(e));
      var n = document.createElement("source");
      return n.src = e, n.type = a, n;
    }, i.prototype._onError = function(t) {
      this.abort("Failed to load element using: " + t.target.nodeName);
    }, i.prototype._onProgress = function(t) {
      t && t.lengthComputable && this.onProgress.dispatch(this, t.loaded / t.total);
    }, i.prototype._onTimeout = function() {
      this.abort("Load timed out.");
    }, i.prototype._xhrOnError = function() {
      var t = this.xhr;
      this.abort(ah(t) + " Request failed. Status: " + t.status + ', text: "' + t.statusText + '"');
    }, i.prototype._xhrOnTimeout = function() {
      var t = this.xhr;
      this.abort(ah(t) + " Request timed out.");
    }, i.prototype._xhrOnAbort = function() {
      var t = this.xhr;
      this.abort(ah(t) + " Request was aborted by the user.");
    }, i.prototype._xhrOnLoad = function() {
      var t = this.xhr, e = "", a = typeof t.status == "undefined" ? k0 : t.status;
      (t.responseType === "" || t.responseType === "text" || typeof t.responseType == "undefined") && (e = t.responseText), a === xx && (e.length > 0 || t.responseType === i.XHR_RESPONSE_TYPE.BUFFER) ? a = k0 : a === Ax && (a = Tx);
      var n = a / 100 | 0;
      if (n === Sx)
        if (this.xhrType === i.XHR_RESPONSE_TYPE.TEXT)
          this.data = e, this.type = i.TYPE.TEXT;
        else if (this.xhrType === i.XHR_RESPONSE_TYPE.JSON)
          try {
            this.data = JSON.parse(e), this.type = i.TYPE.JSON;
          } catch (u) {
            this.abort("Error trying to parse loaded json: " + u);
            return;
          }
        else if (this.xhrType === i.XHR_RESPONSE_TYPE.DOCUMENT)
          try {
            if (globalThis.DOMParser) {
              var s = new DOMParser();
              this.data = s.parseFromString(e, "text/xml");
            } else {
              var o = document.createElement("div");
              o.innerHTML = e, this.data = o;
            }
            this.type = i.TYPE.XML;
          } catch (u) {
            this.abort("Error trying to parse loaded xml: " + u);
            return;
          }
        else
          this.data = t.response || e;
      else {
        this.abort("[" + t.status + "] " + t.statusText + ": " + t.responseURL);
        return;
      }
      this.complete();
    }, i.prototype._determineCrossOrigin = function(t, e) {
      if (t.indexOf("data:") === 0)
        return "";
      if (globalThis.origin !== globalThis.location.origin)
        return "anonymous";
      e = e || globalThis.location, ms || (ms = document.createElement("a")), ms.href = t;
      var a = Jd(ms.href, { strictMode: !0 }), n = !a.port && e.port === "" || a.port === e.port, s = a.protocol ? a.protocol + ":" : "";
      return a.host !== e.hostname || !n || s !== e.protocol ? "anonymous" : "";
    }, i.prototype._determineXhrType = function() {
      return i._xhrTypeMap[this.extension] || i.XHR_RESPONSE_TYPE.TEXT;
    }, i.prototype._determineLoadType = function() {
      return i._loadTypeMap[this.extension] || i.LOAD_TYPE.XHR;
    }, i.prototype._getExtension = function(t) {
      t === void 0 && (t = this.url);
      var e = "";
      if (this.isDataUrl) {
        var a = t.indexOf("/");
        e = t.substring(a + 1, t.indexOf(";", a));
      } else {
        var n = t.indexOf("?"), s = t.indexOf("#"), o = Math.min(n > -1 ? n : t.length, s > -1 ? s : t.length);
        t = t.substring(0, o), e = t.substring(t.lastIndexOf(".") + 1);
      }
      return e.toLowerCase();
    }, i.prototype._getMimeFromXhrType = function(t) {
      switch (t) {
        case i.XHR_RESPONSE_TYPE.BUFFER:
          return "application/octet-binary";
        case i.XHR_RESPONSE_TYPE.BLOB:
          return "application/blob";
        case i.XHR_RESPONSE_TYPE.DOCUMENT:
          return "application/xml";
        case i.XHR_RESPONSE_TYPE.JSON:
          return "application/json";
        case i.XHR_RESPONSE_TYPE.DEFAULT:
        case i.XHR_RESPONSE_TYPE.TEXT:
        default:
          return "text/plain";
      }
    }, i;
  }()
);
(function(i) {
  (function(t) {
    t[t.NONE = 0] = "NONE", t[t.DATA_URL = 1] = "DATA_URL", t[t.COMPLETE = 2] = "COMPLETE", t[t.LOADING = 4] = "LOADING";
  })(i.STATUS_FLAGS || (i.STATUS_FLAGS = {})), function(t) {
    t[t.UNKNOWN = 0] = "UNKNOWN", t[t.JSON = 1] = "JSON", t[t.XML = 2] = "XML", t[t.IMAGE = 3] = "IMAGE", t[t.AUDIO = 4] = "AUDIO", t[t.VIDEO = 5] = "VIDEO", t[t.TEXT = 6] = "TEXT";
  }(i.TYPE || (i.TYPE = {})), function(t) {
    t[t.XHR = 1] = "XHR", t[t.IMAGE = 2] = "IMAGE", t[t.AUDIO = 3] = "AUDIO", t[t.VIDEO = 4] = "VIDEO";
  }(i.LOAD_TYPE || (i.LOAD_TYPE = {})), function(t) {
    t.DEFAULT = "text", t.BUFFER = "arraybuffer", t.BLOB = "blob", t.DOCUMENT = "document", t.JSON = "json", t.TEXT = "text";
  }(i.XHR_RESPONSE_TYPE || (i.XHR_RESPONSE_TYPE = {})), i._loadTypeMap = {
    // images
    gif: i.LOAD_TYPE.IMAGE,
    png: i.LOAD_TYPE.IMAGE,
    bmp: i.LOAD_TYPE.IMAGE,
    jpg: i.LOAD_TYPE.IMAGE,
    jpeg: i.LOAD_TYPE.IMAGE,
    tif: i.LOAD_TYPE.IMAGE,
    tiff: i.LOAD_TYPE.IMAGE,
    webp: i.LOAD_TYPE.IMAGE,
    tga: i.LOAD_TYPE.IMAGE,
    avif: i.LOAD_TYPE.IMAGE,
    svg: i.LOAD_TYPE.IMAGE,
    "svg+xml": i.LOAD_TYPE.IMAGE,
    // audio
    mp3: i.LOAD_TYPE.AUDIO,
    ogg: i.LOAD_TYPE.AUDIO,
    wav: i.LOAD_TYPE.AUDIO,
    // videos
    mp4: i.LOAD_TYPE.VIDEO,
    webm: i.LOAD_TYPE.VIDEO
  }, i._xhrTypeMap = {
    // xml
    xhtml: i.XHR_RESPONSE_TYPE.DOCUMENT,
    html: i.XHR_RESPONSE_TYPE.DOCUMENT,
    htm: i.XHR_RESPONSE_TYPE.DOCUMENT,
    xml: i.XHR_RESPONSE_TYPE.DOCUMENT,
    tmx: i.XHR_RESPONSE_TYPE.DOCUMENT,
    svg: i.XHR_RESPONSE_TYPE.DOCUMENT,
    // This was added to handle Tiled Tileset XML, but .tsx is also a TypeScript React Component.
    // Since it is way less likely for people to be loading TypeScript files instead of Tiled files,
    // this should probably be fine.
    tsx: i.XHR_RESPONSE_TYPE.DOCUMENT,
    // images
    gif: i.XHR_RESPONSE_TYPE.BLOB,
    png: i.XHR_RESPONSE_TYPE.BLOB,
    bmp: i.XHR_RESPONSE_TYPE.BLOB,
    jpg: i.XHR_RESPONSE_TYPE.BLOB,
    jpeg: i.XHR_RESPONSE_TYPE.BLOB,
    tif: i.XHR_RESPONSE_TYPE.BLOB,
    tiff: i.XHR_RESPONSE_TYPE.BLOB,
    webp: i.XHR_RESPONSE_TYPE.BLOB,
    tga: i.XHR_RESPONSE_TYPE.BLOB,
    avif: i.XHR_RESPONSE_TYPE.BLOB,
    // json
    json: i.XHR_RESPONSE_TYPE.JSON,
    // text
    text: i.XHR_RESPONSE_TYPE.TEXT,
    txt: i.XHR_RESPONSE_TYPE.TEXT,
    // fonts
    ttf: i.XHR_RESPONSE_TYPE.BUFFER,
    otf: i.XHR_RESPONSE_TYPE.BUFFER
  }, i.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
})(Se || (Se = {}));
function Vi() {
}
function Ex(i) {
  return function() {
    for (var e = arguments, a = [], n = 0; n < arguments.length; n++)
      a[n] = e[n];
    if (i === null)
      throw new Error("Callback was already called.");
    var s = i;
    i = null, s.apply(this, a);
  };
}
var wx = (
  /** @class */
  /* @__PURE__ */ function() {
    function i(t, e) {
      this.data = t, this.callback = e;
    }
    return i;
  }()
), nh = (
  /** @class */
  function() {
    function i(t, e) {
      var a = this;
      if (e === void 0 && (e = 1), this.workers = 0, this.saturated = Vi, this.unsaturated = Vi, this.empty = Vi, this.drain = Vi, this.error = Vi, this.started = !1, this.paused = !1, this._tasks = [], this._insert = function(n, s, o) {
        if (o && typeof o != "function")
          throw new Error("task callback must be a function");
        if (a.started = !0, n == null && a.idle()) {
          setTimeout(function() {
            return a.drain();
          }, 1);
          return;
        }
        var u = new wx(n, typeof o == "function" ? o : Vi);
        s ? a._tasks.unshift(u) : a._tasks.push(u), setTimeout(a.process, 1);
      }, this.process = function() {
        for (; !a.paused && a.workers < a.concurrency && a._tasks.length; ) {
          var n = a._tasks.shift();
          a._tasks.length === 0 && a.empty(), a.workers += 1, a.workers === a.concurrency && a.saturated(), a._worker(n.data, Ex(a._next(n)));
        }
      }, this._worker = t, e === 0)
        throw new Error("Concurrency must not be zero");
      this.concurrency = e, this.buffer = e / 4;
    }
    return i.prototype._next = function(t) {
      var e = this;
      return function() {
        for (var a = arguments, n = [], s = 0; s < arguments.length; s++)
          n[s] = a[s];
        e.workers -= 1, t.callback.apply(t, n), n[0] != null && e.error(n[0], t.data), e.workers <= e.concurrency - e.buffer && e.unsaturated(), e.idle() && e.drain(), e.process();
      };
    }, i.prototype.push = function(t, e) {
      this._insert(t, !1, e);
    }, i.prototype.kill = function() {
      this.workers = 0, this.drain = Vi, this.started = !1, this._tasks = [];
    }, i.prototype.unshift = function(t, e) {
      this._insert(t, !0, e);
    }, i.prototype.length = function() {
      return this._tasks.length;
    }, i.prototype.running = function() {
      return this.workers;
    }, i.prototype.idle = function() {
      return this._tasks.length + this.workers === 0;
    }, i.prototype.pause = function() {
      this.paused !== !0 && (this.paused = !0);
    }, i.prototype.resume = function() {
      if (this.paused !== !1) {
        this.paused = !1;
        for (var t = 1; t <= this.concurrency; t++)
          this.process();
      }
    }, i.eachSeries = function(t, e, a, n) {
      var s = 0, o = t.length;
      function u(m) {
        if (m || s === o) {
          a && a(m);
          return;
        }
        n ? setTimeout(function() {
          e(t[s++], u);
        }, 1) : e(t[s++], u);
      }
      u();
    }, i.queue = function(t, e) {
      return new i(t, e);
    }, i;
  }()
), sh = 100, Ix = /(#[\w-]+)?$/, Fn = (
  /** @class */
  function() {
    function i(t, e) {
      var a = this;
      t === void 0 && (t = ""), e === void 0 && (e = 10), this.progress = 0, this.loading = !1, this.defaultQueryString = "", this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(m, g) {
        return a._loadResource(m, g);
      }, this.resources = {}, this.baseUrl = t, this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(m, g) {
        return a._loadResource(m, g);
      }, this._queue = nh.queue(this._boundLoadResource, e), this._queue.pause(), this.resources = {}, this.onProgress = new ci(), this.onError = new ci(), this.onLoad = new ci(), this.onStart = new ci(), this.onComplete = new ci();
      for (var n = 0; n < i._plugins.length; ++n) {
        var s = i._plugins[n], o = s.pre, u = s.use;
        o && this.pre(o), u && this.use(u);
      }
      this._protected = !1;
    }
    return i.prototype._add = function(t, e, a, n) {
      if (this.loading && (!a || !a.parentResource))
        throw new Error("Cannot add resources while the loader is running.");
      if (this.resources[t])
        throw new Error('Resource named "' + t + '" already exists.');
      if (e = this._prepareUrl(e), this.resources[t] = new Se(t, e, a), typeof n == "function" && this.resources[t].onAfterMiddleware.once(n), this.loading) {
        for (var s = a.parentResource, o = [], u = 0; u < s.children.length; ++u)
          s.children[u].isComplete || o.push(s.children[u]);
        var m = s.progressChunk * (o.length + 1), g = m / (o.length + 2);
        s.children.push(this.resources[t]), s.progressChunk = g;
        for (var u = 0; u < o.length; ++u)
          o[u].progressChunk = g;
        this.resources[t].progressChunk = g;
      }
      return this._queue.push(this.resources[t]), this;
    }, i.prototype.pre = function(t) {
      return this._beforeMiddleware.push(t), this;
    }, i.prototype.use = function(t) {
      return this._afterMiddleware.push(t), this;
    }, i.prototype.reset = function() {
      this.progress = 0, this.loading = !1, this._queue.kill(), this._queue.pause();
      for (var t in this.resources) {
        var e = this.resources[t];
        e._onLoadBinding && e._onLoadBinding.detach(), e.isLoading && e.abort("loader reset");
      }
      return this.resources = {}, this;
    }, i.prototype.load = function(t) {
      if (sr("6.5.0", "@pixi/loaders is being replaced with @pixi/assets in the next major release."), typeof t == "function" && this.onComplete.once(t), this.loading)
        return this;
      if (this._queue.idle())
        this._onStart(), this._onComplete();
      else {
        for (var e = this._queue._tasks.length, a = sh / e, n = 0; n < this._queue._tasks.length; ++n)
          this._queue._tasks[n].data.progressChunk = a;
        this._onStart(), this._queue.resume();
      }
      return this;
    }, Object.defineProperty(i.prototype, "concurrency", {
      /**
       * The number of resources to load concurrently.
       * @default 10
       */
      get: function() {
        return this._queue.concurrency;
      },
      set: function(t) {
        this._queue.concurrency = t;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype._prepareUrl = function(t) {
      var e = Jd(t, { strictMode: !0 }), a;
      if (e.protocol || !e.path || t.indexOf("//") === 0 ? a = t : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && t.charAt(0) !== "/" ? a = this.baseUrl + "/" + t : a = this.baseUrl + t, this.defaultQueryString) {
        var n = Ix.exec(a)[0];
        a = a.slice(0, a.length - n.length), a.indexOf("?") !== -1 ? a += "&" + this.defaultQueryString : a += "?" + this.defaultQueryString, a += n;
      }
      return a;
    }, i.prototype._loadResource = function(t, e) {
      var a = this;
      t._dequeue = e, nh.eachSeries(this._beforeMiddleware, function(n, s) {
        n.call(a, t, function() {
          s(t.isComplete ? {} : null);
        });
      }, function() {
        t.isComplete ? a._onLoad(t) : (t._onLoadBinding = t.onComplete.once(a._onLoad, a), t.load());
      }, !0);
    }, i.prototype._onStart = function() {
      this.progress = 0, this.loading = !0, this.onStart.dispatch(this);
    }, i.prototype._onComplete = function() {
      this.progress = sh, this.loading = !1, this.onComplete.dispatch(this, this.resources);
    }, i.prototype._onLoad = function(t) {
      var e = this;
      t._onLoadBinding = null, this._resourcesParsing.push(t), t._dequeue(), nh.eachSeries(this._afterMiddleware, function(a, n) {
        a.call(e, t, n);
      }, function() {
        t.onAfterMiddleware.dispatch(t), e.progress = Math.min(sh, e.progress + t.progressChunk), e.onProgress.dispatch(e, t), t.error ? e.onError.dispatch(t.error, e, t) : e.onLoad.dispatch(e, t), e._resourcesParsing.splice(e._resourcesParsing.indexOf(t), 1), e._queue.idle() && e._resourcesParsing.length === 0 && e._onComplete();
      }, !0);
    }, i.prototype.destroy = function() {
      this._protected || this.reset();
    }, Object.defineProperty(i, "shared", {
      /** A premade instance of the loader that can be used to load resources. */
      get: function() {
        var t = i._shared;
        return t || (t = new i(), t._protected = !0, i._shared = t), t;
      },
      enumerable: !1,
      configurable: !0
    }), i.registerPlugin = function(t) {
      return sr("6.5.0", "Loader.registerPlugin() is deprecated, use extensions.add() instead."), ri.add({
        type: se.Loader,
        ref: t
      }), i;
    }, i._plugins = [], i;
  }()
);
ri.handleByList(se.Loader, Fn._plugins);
Fn.prototype.add = function(t, e, a, n) {
  if (Array.isArray(t)) {
    for (var s = 0; s < t.length; ++s)
      this.add(t[s]);
    return this;
  }
  if (typeof t == "object" && (a = t, n = e || a.callback || a.onComplete, e = a.url, t = a.name || a.key || a.url), typeof e != "string" && (n = a, a = e, e = t), typeof e != "string")
    throw new Error("No url passed to add resource to loader.");
  return typeof a == "function" && (n = a, a = null), this._add(t, e, a, n);
};
var qd = (
  /** @class */
  function() {
    function i() {
    }
    return i.init = function(t) {
      t = Object.assign({
        sharedLoader: !1
      }, t), this.loader = t.sharedLoader ? Fn.shared : new Fn();
    }, i.destroy = function() {
      this.loader && (this.loader.destroy(), this.loader = null);
    }, i.extension = se.Application, i;
  }()
), Zd = (
  /** @class */
  function() {
    function i() {
    }
    return i.add = function() {
      Se.setExtensionLoadType("svg", Se.LOAD_TYPE.XHR), Se.setExtensionXhrType("svg", Se.XHR_RESPONSE_TYPE.TEXT);
    }, i.use = function(t, e) {
      if (t.data && (t.type === Se.TYPE.IMAGE || t.extension === "svg")) {
        var a = t.data, n = t.url, s = t.name, o = t.metadata;
        Ot.fromLoader(a, n, s, o).then(function(u) {
          t.texture = u, e();
        }).catch(e);
      } else
        e();
    }, i.extension = se.Loader, i;
  }()
), Px = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function Mx(i) {
  for (var t = "", e = 0; e < i.length; ) {
    for (var a = [0, 0, 0], n = [0, 0, 0, 0], s = 0; s < a.length; ++s)
      e < i.length ? a[s] = i.charCodeAt(e++) & 255 : a[s] = 0;
    n[0] = a[0] >> 2, n[1] = (a[0] & 3) << 4 | a[1] >> 4, n[2] = (a[1] & 15) << 2 | a[2] >> 6, n[3] = a[2] & 63;
    var o = e - (i.length - 1);
    switch (o) {
      case 2:
        n[3] = 64, n[2] = 64;
        break;
      case 1:
        n[3] = 64;
        break;
    }
    for (var s = 0; s < n.length; ++s)
      t += Px.charAt(n[s]);
  }
  return t;
}
function Cx(i, t) {
  if (!i.data) {
    t();
    return;
  }
  if (i.xhr && i.xhrType === Se.XHR_RESPONSE_TYPE.BLOB) {
    if (!self.Blob || typeof i.data == "string") {
      var e = i.xhr.getResponseHeader("content-type");
      if (e && e.indexOf("image") === 0) {
        i.data = new Image(), i.data.src = "data:" + e + ";base64," + Mx(i.xhr.responseText), i.type = Se.TYPE.IMAGE, i.data.onload = function() {
          i.data.onload = null, t();
        };
        return;
      }
    } else if (i.data.type.indexOf("image") === 0) {
      var a = globalThis.URL || globalThis.webkitURL, n = a.createObjectURL(i.data);
      i.blob = i.data, i.data = new Image(), i.data.src = n, i.type = Se.TYPE.IMAGE, i.data.onload = function() {
        a.revokeObjectURL(n), i.data.onload = null, t();
      };
      return;
    }
  }
  t();
}
var Ox = (
  /** @class */
  function() {
    function i() {
    }
    return i.extension = se.Loader, i.use = Cx, i;
  }()
);
ri.add(Zd, Ox);
/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ne, Ht;
(function(i) {
  i[i.COMPRESSED_RGB_S3TC_DXT1_EXT = 33776] = "COMPRESSED_RGB_S3TC_DXT1_EXT", i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT = 33777] = "COMPRESSED_RGBA_S3TC_DXT1_EXT", i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT = 33778] = "COMPRESSED_RGBA_S3TC_DXT3_EXT", i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT = 33779] = "COMPRESSED_RGBA_S3TC_DXT5_EXT", i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT", i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT", i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT", i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916] = "COMPRESSED_SRGB_S3TC_DXT1_EXT", i[i.COMPRESSED_R11_EAC = 37488] = "COMPRESSED_R11_EAC", i[i.COMPRESSED_SIGNED_R11_EAC = 37489] = "COMPRESSED_SIGNED_R11_EAC", i[i.COMPRESSED_RG11_EAC = 37490] = "COMPRESSED_RG11_EAC", i[i.COMPRESSED_SIGNED_RG11_EAC = 37491] = "COMPRESSED_SIGNED_RG11_EAC", i[i.COMPRESSED_RGB8_ETC2 = 37492] = "COMPRESSED_RGB8_ETC2", i[i.COMPRESSED_RGBA8_ETC2_EAC = 37496] = "COMPRESSED_RGBA8_ETC2_EAC", i[i.COMPRESSED_SRGB8_ETC2 = 37493] = "COMPRESSED_SRGB8_ETC2", i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 37497] = "COMPRESSED_SRGB8_ALPHA8_ETC2_EAC", i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37494] = "COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2", i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37495] = "COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2", i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 35840] = "COMPRESSED_RGB_PVRTC_4BPPV1_IMG", i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 35842] = "COMPRESSED_RGBA_PVRTC_4BPPV1_IMG", i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 35841] = "COMPRESSED_RGB_PVRTC_2BPPV1_IMG", i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 35843] = "COMPRESSED_RGBA_PVRTC_2BPPV1_IMG", i[i.COMPRESSED_RGB_ETC1_WEBGL = 36196] = "COMPRESSED_RGB_ETC1_WEBGL", i[i.COMPRESSED_RGB_ATC_WEBGL = 35986] = "COMPRESSED_RGB_ATC_WEBGL", i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 35986] = "COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL", i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 34798] = "COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL", i[i.COMPRESSED_RGBA_ASTC_4x4_KHR = 37808] = "COMPRESSED_RGBA_ASTC_4x4_KHR";
})(Ht || (Ht = {}));
var Hn = (ne = {}, // WEBGL_compressed_texture_s3tc
ne[Ht.COMPRESSED_RGB_S3TC_DXT1_EXT] = 0.5, ne[Ht.COMPRESSED_RGBA_S3TC_DXT1_EXT] = 0.5, ne[Ht.COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1, ne[Ht.COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1, // WEBGL_compressed_texture_s3tc
ne[Ht.COMPRESSED_SRGB_S3TC_DXT1_EXT] = 0.5, ne[Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT] = 0.5, ne[Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT] = 1, ne[Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT] = 1, // WEBGL_compressed_texture_etc
ne[Ht.COMPRESSED_R11_EAC] = 0.5, ne[Ht.COMPRESSED_SIGNED_R11_EAC] = 0.5, ne[Ht.COMPRESSED_RG11_EAC] = 1, ne[Ht.COMPRESSED_SIGNED_RG11_EAC] = 1, ne[Ht.COMPRESSED_RGB8_ETC2] = 0.5, ne[Ht.COMPRESSED_RGBA8_ETC2_EAC] = 1, ne[Ht.COMPRESSED_SRGB8_ETC2] = 0.5, ne[Ht.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC] = 1, ne[Ht.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5, ne[Ht.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5, // WEBGL_compressed_texture_pvrtc
ne[Ht.COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = 0.5, ne[Ht.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = 0.5, ne[Ht.COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = 0.25, ne[Ht.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = 0.25, // WEBGL_compressed_texture_etc1
ne[Ht.COMPRESSED_RGB_ETC1_WEBGL] = 0.5, // @see https://www.khronos.org/registry/OpenGL/extensions/AMD/AMD_compressed_ATC_texture.txt
// WEBGL_compressed_texture_atc
ne[Ht.COMPRESSED_RGB_ATC_WEBGL] = 0.5, ne[Ht.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1, ne[Ht.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1, // @see https://registry.khronos.org/OpenGL/extensions/KHR/KHR_texture_compression_astc_hdr.txt
// WEBGL_compressed_texture_astc
/* eslint-disable-next-line camelcase */
ne[Ht.COMPRESSED_RGBA_ASTC_4x4_KHR] = 1, ne);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var qh = function(i, t) {
  return qh = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, qh(i, t);
};
function t2(i, t) {
  qh(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
function $x(i, t, e, a) {
  function n(s) {
    return s instanceof e ? s : new e(function(o) {
      o(s);
    });
  }
  return new (e || (e = Promise))(function(s, o) {
    function u(A) {
      try {
        g(a.next(A));
      } catch (x) {
        o(x);
      }
    }
    function m(A) {
      try {
        g(a.throw(A));
      } catch (x) {
        o(x);
      }
    }
    function g(A) {
      A.done ? s(A.value) : n(A.value).then(u, m);
    }
    g((a = a.apply(i, [])).next());
  });
}
function Rx(i, t) {
  var e = { label: 0, sent: function() {
    if (s[0] & 1)
      throw s[1];
    return s[1];
  }, trys: [], ops: [] }, a, n, s, o;
  return o = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (o[Symbol.iterator] = function() {
    return this;
  }), o;
  function u(g) {
    return function(A) {
      return m([g, A]);
    };
  }
  function m(g) {
    if (a)
      throw new TypeError("Generator is already executing.");
    for (; e; )
      try {
        if (a = 1, n && (s = g[0] & 2 ? n.return : g[0] ? n.throw || ((s = n.return) && s.call(n), 0) : n.next) && !(s = s.call(n, g[1])).done)
          return s;
        switch (n = 0, s && (g = [g[0] & 2, s.value]), g[0]) {
          case 0:
          case 1:
            s = g;
            break;
          case 4:
            return e.label++, { value: g[1], done: !1 };
          case 5:
            e.label++, n = g[1], g = [0];
            continue;
          case 7:
            g = e.ops.pop(), e.trys.pop();
            continue;
          default:
            if (s = e.trys, !(s = s.length > 0 && s[s.length - 1]) && (g[0] === 6 || g[0] === 2)) {
              e = 0;
              continue;
            }
            if (g[0] === 3 && (!s || g[1] > s[0] && g[1] < s[3])) {
              e.label = g[1];
              break;
            }
            if (g[0] === 6 && e.label < s[1]) {
              e.label = s[1], s = g;
              break;
            }
            if (s && e.label < s[2]) {
              e.label = s[2], e.ops.push(g);
              break;
            }
            s[2] && e.ops.pop(), e.trys.pop();
            continue;
        }
        g = t.call(i, e);
      } catch (A) {
        g = [6, A], n = 0;
      } finally {
        a = s = 0;
      }
    if (g[0] & 5)
      throw g[1];
    return { value: g[0] ? g[1] : void 0, done: !0 };
  }
}
var e2 = (
  /** @class */
  function(i) {
    t2(t, i);
    function t(e, a) {
      a === void 0 && (a = { width: 1, height: 1, autoLoad: !0 });
      var n = this, s, o;
      return typeof e == "string" ? (s = e, o = new Uint8Array()) : (s = null, o = e), n = i.call(this, o, a) || this, n.origin = s, n.buffer = o ? new ks(o) : null, n.origin && a.autoLoad !== !1 && n.load(), o && o.length && (n.loaded = !0, n.onBlobLoaded(n.buffer.rawBinaryData)), n;
    }
    return t.prototype.onBlobLoaded = function(e) {
    }, t.prototype.load = function() {
      return $x(this, void 0, Promise, function() {
        var e, a, n;
        return Rx(this, function(s) {
          switch (s.label) {
            case 0:
              return [4, fetch(this.origin)];
            case 1:
              return e = s.sent(), [4, e.blob()];
            case 2:
              return a = s.sent(), [4, a.arrayBuffer()];
            case 3:
              return n = s.sent(), this.data = new Uint32Array(n), this.buffer = new ks(n), this.loaded = !0, this.onBlobLoaded(n), this.update(), [2, this];
          }
        });
      });
    }, t;
  }(ha)
), Xs = (
  /** @class */
  function(i) {
    t2(t, i);
    function t(e, a) {
      var n = i.call(this, e, a) || this;
      return n.format = a.format, n.levels = a.levels || 1, n._width = a.width, n._height = a.height, n._extension = t._formatToExtension(n.format), (a.levelBuffers || n.buffer) && (n._levelBuffers = a.levelBuffers || t._createLevelBuffers(
        e instanceof Uint8Array ? e : n.buffer.uint8View,
        n.format,
        n.levels,
        4,
        4,
        // PVRTC has 8x4 blocks in 2bpp mode
        n.width,
        n.height
      )), n;
    }
    return t.prototype.upload = function(e, a, n) {
      var s = e.gl, o = e.context.extensions[this._extension];
      if (!o)
        throw new Error(this._extension + " textures are not supported on the current machine");
      if (!this._levelBuffers)
        return !1;
      for (var u = 0, m = this.levels; u < m; u++) {
        var g = this._levelBuffers[u], A = g.levelID, x = g.levelWidth, w = g.levelHeight, C = g.levelBuffer;
        s.compressedTexImage2D(s.TEXTURE_2D, A, this.format, x, w, 0, C);
      }
      return !0;
    }, t.prototype.onBlobLoaded = function() {
      this._levelBuffers = t._createLevelBuffers(
        this.buffer.uint8View,
        this.format,
        this.levels,
        4,
        4,
        // PVRTC has 8x4 blocks in 2bpp mode
        this.width,
        this.height
      );
    }, t._formatToExtension = function(e) {
      if (e >= 33776 && e <= 33779)
        return "s3tc";
      if (e >= 37488 && e <= 37497)
        return "etc";
      if (e >= 35840 && e <= 35843)
        return "pvrtc";
      if (e >= 36196)
        return "etc1";
      if (e >= 35986 && e <= 34798)
        return "atc";
      throw new Error("Invalid (compressed) texture format given!");
    }, t._createLevelBuffers = function(e, a, n, s, o, u, m) {
      for (var g = new Array(n), A = e.byteOffset, x = u, w = m, C = x + s - 1 & ~(s - 1), O = w + o - 1 & ~(o - 1), L = C * O * Hn[a], D = 0; D < n; D++)
        g[D] = {
          levelID: D,
          levelWidth: n > 1 ? x : C,
          levelHeight: n > 1 ? w : O,
          levelBuffer: new Uint8Array(e.buffer, A, L)
        }, A += L, x = x >> 1 || 1, w = w >> 1 || 1, C = x + s - 1 & ~(s - 1), O = w + o - 1 & ~(o - 1), L = C * O * Hn[a];
      return g;
    }, t;
  }(e2)
), r2 = (
  /** @class */
  function() {
    function i() {
    }
    return i.use = function(t, e) {
      var a = t.data, n = this;
      if (t.type === Se.TYPE.JSON && a && a.cacheID && a.textures) {
        for (var s = a.textures, o = void 0, u = void 0, m = 0, g = s.length; m < g; m++) {
          var A = s[m], x = A.src, w = A.format;
          if (w || (u = x), i.textureFormats[w]) {
            o = x;
            break;
          }
        }
        if (o = o || u, !o) {
          e(new Error("Cannot load compressed-textures in " + t.url + ", make sure you provide a fallback"));
          return;
        }
        if (o === t.url) {
          e(new Error("URL of compressed texture cannot be the same as the manifest's URL"));
          return;
        }
        var C = {
          crossOrigin: t.crossOrigin,
          metadata: t.metadata.imageMetadata,
          parentResource: t
        }, O = qr.resolve(t.url.replace(n.baseUrl, ""), o), L = a.cacheID;
        n.add(L, O, C, function(D) {
          if (D.error) {
            e(D.error);
            return;
          }
          var H = D.texture, k = H === void 0 ? null : H, G = D.textures, z = G === void 0 ? {} : G;
          Object.assign(t, { texture: k, textures: z }), e();
        });
      } else
        e();
    }, Object.defineProperty(i, "textureExtensions", {
      /**  Map of available texture extensions. */
      get: function() {
        if (!i._textureExtensions) {
          var t = mt.ADAPTER.createCanvas(), e = t.getContext("webgl");
          if (!e)
            return console.warn("WebGL not available for compressed textures. Silently failing."), {};
          var a = {
            s3tc: e.getExtension("WEBGL_compressed_texture_s3tc"),
            s3tc_sRGB: e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
            etc: e.getExtension("WEBGL_compressed_texture_etc"),
            etc1: e.getExtension("WEBGL_compressed_texture_etc1"),
            pvrtc: e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
            atc: e.getExtension("WEBGL_compressed_texture_atc"),
            astc: e.getExtension("WEBGL_compressed_texture_astc")
          };
          i._textureExtensions = a;
        }
        return i._textureExtensions;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i, "textureFormats", {
      /** Map of available texture formats. */
      get: function() {
        if (!i._textureFormats) {
          var t = i.textureExtensions;
          i._textureFormats = {};
          for (var e in t) {
            var a = t[e];
            a && Object.assign(i._textureFormats, Object.getPrototypeOf(a));
          }
        }
        return i._textureFormats;
      },
      enumerable: !1,
      configurable: !0
    }), i.extension = se.Loader, i;
  }()
);
function i2(i, t, e) {
  var a = {
    textures: {},
    texture: null
  };
  if (!t)
    return a;
  var n = t.map(function(s) {
    return new Ot(new Qt(s, Object.assign({
      mipmap: Sr.OFF,
      alphaMode: Er.NO_PREMULTIPLIED_ALPHA
    }, e)));
  });
  return n.forEach(function(s, o) {
    var u = s.baseTexture, m = i + "-" + (o + 1);
    Qt.addToCache(u, m), Ot.addToCache(s, m), o === 0 && (Qt.addToCache(u, i), Ot.addToCache(s, i), a.texture = s), a.textures[m] = s;
  }), a;
}
var sn, $r, oh = 4, gs = 124, Lx = 32, X0 = 20, Dx = 542327876, ys = {
  SIZE: 1,
  FLAGS: 2,
  HEIGHT: 3,
  WIDTH: 4,
  MIPMAP_COUNT: 7,
  PIXEL_FORMAT: 19
}, Nx = {
  SIZE: 0,
  FLAGS: 1,
  FOURCC: 2,
  RGB_BITCOUNT: 3,
  R_BIT_MASK: 4,
  G_BIT_MASK: 5,
  B_BIT_MASK: 6,
  A_BIT_MASK: 7
}, bs = {
  DXGI_FORMAT: 0,
  RESOURCE_DIMENSION: 1,
  MISC_FLAG: 2,
  ARRAY_SIZE: 3,
  MISC_FLAGS2: 4
}, Lr;
(function(i) {
  i[i.DXGI_FORMAT_UNKNOWN = 0] = "DXGI_FORMAT_UNKNOWN", i[i.DXGI_FORMAT_R32G32B32A32_TYPELESS = 1] = "DXGI_FORMAT_R32G32B32A32_TYPELESS", i[i.DXGI_FORMAT_R32G32B32A32_FLOAT = 2] = "DXGI_FORMAT_R32G32B32A32_FLOAT", i[i.DXGI_FORMAT_R32G32B32A32_UINT = 3] = "DXGI_FORMAT_R32G32B32A32_UINT", i[i.DXGI_FORMAT_R32G32B32A32_SINT = 4] = "DXGI_FORMAT_R32G32B32A32_SINT", i[i.DXGI_FORMAT_R32G32B32_TYPELESS = 5] = "DXGI_FORMAT_R32G32B32_TYPELESS", i[i.DXGI_FORMAT_R32G32B32_FLOAT = 6] = "DXGI_FORMAT_R32G32B32_FLOAT", i[i.DXGI_FORMAT_R32G32B32_UINT = 7] = "DXGI_FORMAT_R32G32B32_UINT", i[i.DXGI_FORMAT_R32G32B32_SINT = 8] = "DXGI_FORMAT_R32G32B32_SINT", i[i.DXGI_FORMAT_R16G16B16A16_TYPELESS = 9] = "DXGI_FORMAT_R16G16B16A16_TYPELESS", i[i.DXGI_FORMAT_R16G16B16A16_FLOAT = 10] = "DXGI_FORMAT_R16G16B16A16_FLOAT", i[i.DXGI_FORMAT_R16G16B16A16_UNORM = 11] = "DXGI_FORMAT_R16G16B16A16_UNORM", i[i.DXGI_FORMAT_R16G16B16A16_UINT = 12] = "DXGI_FORMAT_R16G16B16A16_UINT", i[i.DXGI_FORMAT_R16G16B16A16_SNORM = 13] = "DXGI_FORMAT_R16G16B16A16_SNORM", i[i.DXGI_FORMAT_R16G16B16A16_SINT = 14] = "DXGI_FORMAT_R16G16B16A16_SINT", i[i.DXGI_FORMAT_R32G32_TYPELESS = 15] = "DXGI_FORMAT_R32G32_TYPELESS", i[i.DXGI_FORMAT_R32G32_FLOAT = 16] = "DXGI_FORMAT_R32G32_FLOAT", i[i.DXGI_FORMAT_R32G32_UINT = 17] = "DXGI_FORMAT_R32G32_UINT", i[i.DXGI_FORMAT_R32G32_SINT = 18] = "DXGI_FORMAT_R32G32_SINT", i[i.DXGI_FORMAT_R32G8X24_TYPELESS = 19] = "DXGI_FORMAT_R32G8X24_TYPELESS", i[i.DXGI_FORMAT_D32_FLOAT_S8X24_UINT = 20] = "DXGI_FORMAT_D32_FLOAT_S8X24_UINT", i[i.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS = 21] = "DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS", i[i.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT = 22] = "DXGI_FORMAT_X32_TYPELESS_G8X24_UINT", i[i.DXGI_FORMAT_R10G10B10A2_TYPELESS = 23] = "DXGI_FORMAT_R10G10B10A2_TYPELESS", i[i.DXGI_FORMAT_R10G10B10A2_UNORM = 24] = "DXGI_FORMAT_R10G10B10A2_UNORM", i[i.DXGI_FORMAT_R10G10B10A2_UINT = 25] = "DXGI_FORMAT_R10G10B10A2_UINT", i[i.DXGI_FORMAT_R11G11B10_FLOAT = 26] = "DXGI_FORMAT_R11G11B10_FLOAT", i[i.DXGI_FORMAT_R8G8B8A8_TYPELESS = 27] = "DXGI_FORMAT_R8G8B8A8_TYPELESS", i[i.DXGI_FORMAT_R8G8B8A8_UNORM = 28] = "DXGI_FORMAT_R8G8B8A8_UNORM", i[i.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB = 29] = "DXGI_FORMAT_R8G8B8A8_UNORM_SRGB", i[i.DXGI_FORMAT_R8G8B8A8_UINT = 30] = "DXGI_FORMAT_R8G8B8A8_UINT", i[i.DXGI_FORMAT_R8G8B8A8_SNORM = 31] = "DXGI_FORMAT_R8G8B8A8_SNORM", i[i.DXGI_FORMAT_R8G8B8A8_SINT = 32] = "DXGI_FORMAT_R8G8B8A8_SINT", i[i.DXGI_FORMAT_R16G16_TYPELESS = 33] = "DXGI_FORMAT_R16G16_TYPELESS", i[i.DXGI_FORMAT_R16G16_FLOAT = 34] = "DXGI_FORMAT_R16G16_FLOAT", i[i.DXGI_FORMAT_R16G16_UNORM = 35] = "DXGI_FORMAT_R16G16_UNORM", i[i.DXGI_FORMAT_R16G16_UINT = 36] = "DXGI_FORMAT_R16G16_UINT", i[i.DXGI_FORMAT_R16G16_SNORM = 37] = "DXGI_FORMAT_R16G16_SNORM", i[i.DXGI_FORMAT_R16G16_SINT = 38] = "DXGI_FORMAT_R16G16_SINT", i[i.DXGI_FORMAT_R32_TYPELESS = 39] = "DXGI_FORMAT_R32_TYPELESS", i[i.DXGI_FORMAT_D32_FLOAT = 40] = "DXGI_FORMAT_D32_FLOAT", i[i.DXGI_FORMAT_R32_FLOAT = 41] = "DXGI_FORMAT_R32_FLOAT", i[i.DXGI_FORMAT_R32_UINT = 42] = "DXGI_FORMAT_R32_UINT", i[i.DXGI_FORMAT_R32_SINT = 43] = "DXGI_FORMAT_R32_SINT", i[i.DXGI_FORMAT_R24G8_TYPELESS = 44] = "DXGI_FORMAT_R24G8_TYPELESS", i[i.DXGI_FORMAT_D24_UNORM_S8_UINT = 45] = "DXGI_FORMAT_D24_UNORM_S8_UINT", i[i.DXGI_FORMAT_R24_UNORM_X8_TYPELESS = 46] = "DXGI_FORMAT_R24_UNORM_X8_TYPELESS", i[i.DXGI_FORMAT_X24_TYPELESS_G8_UINT = 47] = "DXGI_FORMAT_X24_TYPELESS_G8_UINT", i[i.DXGI_FORMAT_R8G8_TYPELESS = 48] = "DXGI_FORMAT_R8G8_TYPELESS", i[i.DXGI_FORMAT_R8G8_UNORM = 49] = "DXGI_FORMAT_R8G8_UNORM", i[i.DXGI_FORMAT_R8G8_UINT = 50] = "DXGI_FORMAT_R8G8_UINT", i[i.DXGI_FORMAT_R8G8_SNORM = 51] = "DXGI_FORMAT_R8G8_SNORM", i[i.DXGI_FORMAT_R8G8_SINT = 52] = "DXGI_FORMAT_R8G8_SINT", i[i.DXGI_FORMAT_R16_TYPELESS = 53] = "DXGI_FORMAT_R16_TYPELESS", i[i.DXGI_FORMAT_R16_FLOAT = 54] = "DXGI_FORMAT_R16_FLOAT", i[i.DXGI_FORMAT_D16_UNORM = 55] = "DXGI_FORMAT_D16_UNORM", i[i.DXGI_FORMAT_R16_UNORM = 56] = "DXGI_FORMAT_R16_UNORM", i[i.DXGI_FORMAT_R16_UINT = 57] = "DXGI_FORMAT_R16_UINT", i[i.DXGI_FORMAT_R16_SNORM = 58] = "DXGI_FORMAT_R16_SNORM", i[i.DXGI_FORMAT_R16_SINT = 59] = "DXGI_FORMAT_R16_SINT", i[i.DXGI_FORMAT_R8_TYPELESS = 60] = "DXGI_FORMAT_R8_TYPELESS", i[i.DXGI_FORMAT_R8_UNORM = 61] = "DXGI_FORMAT_R8_UNORM", i[i.DXGI_FORMAT_R8_UINT = 62] = "DXGI_FORMAT_R8_UINT", i[i.DXGI_FORMAT_R8_SNORM = 63] = "DXGI_FORMAT_R8_SNORM", i[i.DXGI_FORMAT_R8_SINT = 64] = "DXGI_FORMAT_R8_SINT", i[i.DXGI_FORMAT_A8_UNORM = 65] = "DXGI_FORMAT_A8_UNORM", i[i.DXGI_FORMAT_R1_UNORM = 66] = "DXGI_FORMAT_R1_UNORM", i[i.DXGI_FORMAT_R9G9B9E5_SHAREDEXP = 67] = "DXGI_FORMAT_R9G9B9E5_SHAREDEXP", i[i.DXGI_FORMAT_R8G8_B8G8_UNORM = 68] = "DXGI_FORMAT_R8G8_B8G8_UNORM", i[i.DXGI_FORMAT_G8R8_G8B8_UNORM = 69] = "DXGI_FORMAT_G8R8_G8B8_UNORM", i[i.DXGI_FORMAT_BC1_TYPELESS = 70] = "DXGI_FORMAT_BC1_TYPELESS", i[i.DXGI_FORMAT_BC1_UNORM = 71] = "DXGI_FORMAT_BC1_UNORM", i[i.DXGI_FORMAT_BC1_UNORM_SRGB = 72] = "DXGI_FORMAT_BC1_UNORM_SRGB", i[i.DXGI_FORMAT_BC2_TYPELESS = 73] = "DXGI_FORMAT_BC2_TYPELESS", i[i.DXGI_FORMAT_BC2_UNORM = 74] = "DXGI_FORMAT_BC2_UNORM", i[i.DXGI_FORMAT_BC2_UNORM_SRGB = 75] = "DXGI_FORMAT_BC2_UNORM_SRGB", i[i.DXGI_FORMAT_BC3_TYPELESS = 76] = "DXGI_FORMAT_BC3_TYPELESS", i[i.DXGI_FORMAT_BC3_UNORM = 77] = "DXGI_FORMAT_BC3_UNORM", i[i.DXGI_FORMAT_BC3_UNORM_SRGB = 78] = "DXGI_FORMAT_BC3_UNORM_SRGB", i[i.DXGI_FORMAT_BC4_TYPELESS = 79] = "DXGI_FORMAT_BC4_TYPELESS", i[i.DXGI_FORMAT_BC4_UNORM = 80] = "DXGI_FORMAT_BC4_UNORM", i[i.DXGI_FORMAT_BC4_SNORM = 81] = "DXGI_FORMAT_BC4_SNORM", i[i.DXGI_FORMAT_BC5_TYPELESS = 82] = "DXGI_FORMAT_BC5_TYPELESS", i[i.DXGI_FORMAT_BC5_UNORM = 83] = "DXGI_FORMAT_BC5_UNORM", i[i.DXGI_FORMAT_BC5_SNORM = 84] = "DXGI_FORMAT_BC5_SNORM", i[i.DXGI_FORMAT_B5G6R5_UNORM = 85] = "DXGI_FORMAT_B5G6R5_UNORM", i[i.DXGI_FORMAT_B5G5R5A1_UNORM = 86] = "DXGI_FORMAT_B5G5R5A1_UNORM", i[i.DXGI_FORMAT_B8G8R8A8_UNORM = 87] = "DXGI_FORMAT_B8G8R8A8_UNORM", i[i.DXGI_FORMAT_B8G8R8X8_UNORM = 88] = "DXGI_FORMAT_B8G8R8X8_UNORM", i[i.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM = 89] = "DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM", i[i.DXGI_FORMAT_B8G8R8A8_TYPELESS = 90] = "DXGI_FORMAT_B8G8R8A8_TYPELESS", i[i.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB = 91] = "DXGI_FORMAT_B8G8R8A8_UNORM_SRGB", i[i.DXGI_FORMAT_B8G8R8X8_TYPELESS = 92] = "DXGI_FORMAT_B8G8R8X8_TYPELESS", i[i.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB = 93] = "DXGI_FORMAT_B8G8R8X8_UNORM_SRGB", i[i.DXGI_FORMAT_BC6H_TYPELESS = 94] = "DXGI_FORMAT_BC6H_TYPELESS", i[i.DXGI_FORMAT_BC6H_UF16 = 95] = "DXGI_FORMAT_BC6H_UF16", i[i.DXGI_FORMAT_BC6H_SF16 = 96] = "DXGI_FORMAT_BC6H_SF16", i[i.DXGI_FORMAT_BC7_TYPELESS = 97] = "DXGI_FORMAT_BC7_TYPELESS", i[i.DXGI_FORMAT_BC7_UNORM = 98] = "DXGI_FORMAT_BC7_UNORM", i[i.DXGI_FORMAT_BC7_UNORM_SRGB = 99] = "DXGI_FORMAT_BC7_UNORM_SRGB", i[i.DXGI_FORMAT_AYUV = 100] = "DXGI_FORMAT_AYUV", i[i.DXGI_FORMAT_Y410 = 101] = "DXGI_FORMAT_Y410", i[i.DXGI_FORMAT_Y416 = 102] = "DXGI_FORMAT_Y416", i[i.DXGI_FORMAT_NV12 = 103] = "DXGI_FORMAT_NV12", i[i.DXGI_FORMAT_P010 = 104] = "DXGI_FORMAT_P010", i[i.DXGI_FORMAT_P016 = 105] = "DXGI_FORMAT_P016", i[i.DXGI_FORMAT_420_OPAQUE = 106] = "DXGI_FORMAT_420_OPAQUE", i[i.DXGI_FORMAT_YUY2 = 107] = "DXGI_FORMAT_YUY2", i[i.DXGI_FORMAT_Y210 = 108] = "DXGI_FORMAT_Y210", i[i.DXGI_FORMAT_Y216 = 109] = "DXGI_FORMAT_Y216", i[i.DXGI_FORMAT_NV11 = 110] = "DXGI_FORMAT_NV11", i[i.DXGI_FORMAT_AI44 = 111] = "DXGI_FORMAT_AI44", i[i.DXGI_FORMAT_IA44 = 112] = "DXGI_FORMAT_IA44", i[i.DXGI_FORMAT_P8 = 113] = "DXGI_FORMAT_P8", i[i.DXGI_FORMAT_A8P8 = 114] = "DXGI_FORMAT_A8P8", i[i.DXGI_FORMAT_B4G4R4A4_UNORM = 115] = "DXGI_FORMAT_B4G4R4A4_UNORM", i[i.DXGI_FORMAT_P208 = 116] = "DXGI_FORMAT_P208", i[i.DXGI_FORMAT_V208 = 117] = "DXGI_FORMAT_V208", i[i.DXGI_FORMAT_V408 = 118] = "DXGI_FORMAT_V408", i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE = 119] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE", i[i.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE = 120] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE", i[i.DXGI_FORMAT_FORCE_UINT = 121] = "DXGI_FORMAT_FORCE_UINT";
})(Lr || (Lr = {}));
var Zh;
(function(i) {
  i[i.DDS_DIMENSION_TEXTURE1D = 2] = "DDS_DIMENSION_TEXTURE1D", i[i.DDS_DIMENSION_TEXTURE2D = 3] = "DDS_DIMENSION_TEXTURE2D", i[i.DDS_DIMENSION_TEXTURE3D = 6] = "DDS_DIMENSION_TEXTURE3D";
})(Zh || (Zh = {}));
var Fx = 1, Hx = 2, Bx = 4, kx = 64, Ux = 512, Gx = 131072, Xx = 827611204, Vx = 861165636, Yx = 894720068, zx = 808540228, Kx = 4, Wx = (sn = {}, sn[Xx] = Ht.COMPRESSED_RGBA_S3TC_DXT1_EXT, sn[Vx] = Ht.COMPRESSED_RGBA_S3TC_DXT3_EXT, sn[Yx] = Ht.COMPRESSED_RGBA_S3TC_DXT5_EXT, sn), jx = ($r = {}, // WEBGL_compressed_texture_s3tc
$r[Lr.DXGI_FORMAT_BC1_TYPELESS] = Ht.COMPRESSED_RGBA_S3TC_DXT1_EXT, $r[Lr.DXGI_FORMAT_BC1_UNORM] = Ht.COMPRESSED_RGBA_S3TC_DXT1_EXT, $r[Lr.DXGI_FORMAT_BC2_TYPELESS] = Ht.COMPRESSED_RGBA_S3TC_DXT3_EXT, $r[Lr.DXGI_FORMAT_BC2_UNORM] = Ht.COMPRESSED_RGBA_S3TC_DXT3_EXT, $r[Lr.DXGI_FORMAT_BC3_TYPELESS] = Ht.COMPRESSED_RGBA_S3TC_DXT5_EXT, $r[Lr.DXGI_FORMAT_BC3_UNORM] = Ht.COMPRESSED_RGBA_S3TC_DXT5_EXT, // WEBGL_compressed_texture_s3tc_srgb
$r[Lr.DXGI_FORMAT_BC1_UNORM_SRGB] = Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT, $r[Lr.DXGI_FORMAT_BC2_UNORM_SRGB] = Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT, $r[Lr.DXGI_FORMAT_BC3_UNORM_SRGB] = Ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT, $r);
function a2(i) {
  var t = new Uint32Array(i), e = t[0];
  if (e !== Dx)
    throw new Error("Invalid DDS file magic word");
  var a = new Uint32Array(i, 0, gs / Uint32Array.BYTES_PER_ELEMENT), n = a[ys.HEIGHT], s = a[ys.WIDTH], o = a[ys.MIPMAP_COUNT], u = new Uint32Array(i, ys.PIXEL_FORMAT * Uint32Array.BYTES_PER_ELEMENT, Lx / Uint32Array.BYTES_PER_ELEMENT), m = u[Fx];
  if (m & Bx) {
    var g = u[Nx.FOURCC];
    if (g !== zx) {
      var A = Wx[g], x = oh + gs, w = new Uint8Array(i, x), C = new Xs(w, {
        format: A,
        width: s,
        height: n,
        levels: o
        // CompressedTextureResource will separate the levelBuffers for us!
      });
      return [C];
    }
    var O = oh + gs, L = new Uint32Array(t.buffer, O, X0 / Uint32Array.BYTES_PER_ELEMENT), D = L[bs.DXGI_FORMAT], H = L[bs.RESOURCE_DIMENSION], k = L[bs.MISC_FLAG], G = L[bs.ARRAY_SIZE], z = jx[D];
    if (z === void 0)
      throw new Error("DDSParser cannot parse texture data with DXGI format " + D);
    if (k === Kx)
      throw new Error("DDSParser does not support cubemap textures");
    if (H === Zh.DDS_DIMENSION_TEXTURE3D)
      throw new Error("DDSParser does not supported 3D texture data");
    var Y = new Array(), K = oh + gs + X0;
    if (G === 1)
      Y.push(new Uint8Array(i, K));
    else {
      for (var J = Hn[z], nt = 0, q = s, tt = n, lt = 0; lt < o; lt++) {
        var bt = Math.max(1, q + 3 & -4), Et = Math.max(1, tt + 3 & -4), Bt = bt * Et * J;
        nt += Bt, q = q >>> 1, tt = tt >>> 1;
      }
      for (var pt = K, lt = 0; lt < G; lt++)
        Y.push(new Uint8Array(i, pt, nt)), pt += nt;
    }
    return Y.map(function(dt) {
      return new Xs(dt, {
        format: z,
        width: s,
        height: n,
        levels: o
      });
    });
  }
  throw m & kx ? new Error("DDSParser does not support uncompressed texture data.") : m & Ux ? new Error("DDSParser does not supported YUV uncompressed texture data.") : m & Gx ? new Error("DDSParser does not support single-channel (lumninance) texture data!") : m & Hx ? new Error("DDSParser does not support single-channel (alpha) texture data!") : new Error("DDSParser failed to load a texture file due to an unknown reason!");
}
var xi, ui, on, V0 = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10], Qx = 67305985, Rr = {
  FILE_IDENTIFIER: 0,
  ENDIANNESS: 12,
  GL_TYPE: 16,
  GL_TYPE_SIZE: 20,
  GL_FORMAT: 24,
  GL_INTERNAL_FORMAT: 28,
  GL_BASE_INTERNAL_FORMAT: 32,
  PIXEL_WIDTH: 36,
  PIXEL_HEIGHT: 40,
  PIXEL_DEPTH: 44,
  NUMBER_OF_ARRAY_ELEMENTS: 48,
  NUMBER_OF_FACES: 52,
  NUMBER_OF_MIPMAP_LEVELS: 56,
  BYTES_OF_KEY_VALUE_DATA: 60
}, tu = 64, eu = (xi = {}, xi[wt.UNSIGNED_BYTE] = 1, xi[wt.UNSIGNED_SHORT] = 2, xi[wt.INT] = 4, xi[wt.UNSIGNED_INT] = 4, xi[wt.FLOAT] = 4, xi[wt.HALF_FLOAT] = 8, xi), n2 = (ui = {}, ui[ot.RGBA] = 4, ui[ot.RGB] = 3, ui[ot.RG] = 2, ui[ot.RED] = 1, ui[ot.LUMINANCE] = 1, ui[ot.LUMINANCE_ALPHA] = 2, ui[ot.ALPHA] = 1, ui), s2 = (on = {}, on[wt.UNSIGNED_SHORT_4_4_4_4] = 2, on[wt.UNSIGNED_SHORT_5_5_5_1] = 2, on[wt.UNSIGNED_SHORT_5_6_5] = 2, on);
function o2(i, t, e) {
  e === void 0 && (e = !1);
  var a = new DataView(t);
  if (!Jx(i, a))
    return null;
  var n = a.getUint32(Rr.ENDIANNESS, !0) === Qx, s = a.getUint32(Rr.GL_TYPE, n), o = a.getUint32(Rr.GL_FORMAT, n), u = a.getUint32(Rr.GL_INTERNAL_FORMAT, n), m = a.getUint32(Rr.PIXEL_WIDTH, n), g = a.getUint32(Rr.PIXEL_HEIGHT, n) || 1, A = a.getUint32(Rr.PIXEL_DEPTH, n) || 1, x = a.getUint32(Rr.NUMBER_OF_ARRAY_ELEMENTS, n) || 1, w = a.getUint32(Rr.NUMBER_OF_FACES, n), C = a.getUint32(Rr.NUMBER_OF_MIPMAP_LEVELS, n), O = a.getUint32(Rr.BYTES_OF_KEY_VALUE_DATA, n);
  if (g === 0 || A !== 1)
    throw new Error("Only 2D textures are supported");
  if (w !== 1)
    throw new Error("CubeTextures are not supported by KTXLoader yet!");
  if (x !== 1)
    throw new Error("WebGL does not support array textures");
  var L = 4, D = 4, H = m + 3 & -4, k = g + 3 & -4, G = new Array(x), z = m * g;
  s === 0 && (z = H * k);
  var Y;
  if (s !== 0 ? eu[s] ? Y = eu[s] * n2[o] : Y = s2[s] : Y = Hn[u], Y === void 0)
    throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");
  for (var K = e ? Zx(a, O, n) : null, J = z * Y, nt = J, q = m, tt = g, lt = H, bt = k, Et = tu + O, Bt = 0; Bt < C; Bt++) {
    for (var pt = a.getUint32(Et, n), dt = Et + 4, $t = 0; $t < x; $t++) {
      var ve = G[$t];
      ve || (ve = G[$t] = new Array(C)), ve[Bt] = {
        levelID: Bt,
        // don't align mipWidth when texture not compressed! (glType not zero)
        levelWidth: C > 1 || s !== 0 ? q : lt,
        levelHeight: C > 1 || s !== 0 ? tt : bt,
        levelBuffer: new Uint8Array(t, dt, nt)
      }, dt += nt;
    }
    Et += pt + 4, Et = Et % 4 !== 0 ? Et + 4 - Et % 4 : Et, q = q >> 1 || 1, tt = tt >> 1 || 1, lt = q + L - 1 & ~(L - 1), bt = tt + D - 1 & ~(D - 1), nt = lt * bt * Y;
  }
  return s !== 0 ? {
    uncompressed: G.map(function(Kt) {
      var ft = Kt[0].levelBuffer, at = !1;
      return s === wt.FLOAT ? ft = new Float32Array(Kt[0].levelBuffer.buffer, Kt[0].levelBuffer.byteOffset, Kt[0].levelBuffer.byteLength / 4) : s === wt.UNSIGNED_INT ? (at = !0, ft = new Uint32Array(Kt[0].levelBuffer.buffer, Kt[0].levelBuffer.byteOffset, Kt[0].levelBuffer.byteLength / 4)) : s === wt.INT && (at = !0, ft = new Int32Array(Kt[0].levelBuffer.buffer, Kt[0].levelBuffer.byteOffset, Kt[0].levelBuffer.byteLength / 4)), {
        resource: new ha(ft, {
          width: Kt[0].levelWidth,
          height: Kt[0].levelHeight
        }),
        type: s,
        format: at ? qx(o) : o
      };
    }),
    kvData: K
  } : {
    compressed: G.map(function(Kt) {
      return new Xs(null, {
        format: u,
        width: m,
        height: g,
        levels: C,
        levelBuffers: Kt
      });
    }),
    kvData: K
  };
}
function Jx(i, t) {
  for (var e = 0; e < V0.length; e++)
    if (t.getUint8(e) !== V0[e])
      return console.error(i + " is not a valid *.ktx file!"), !1;
  return !0;
}
function qx(i) {
  switch (i) {
    case ot.RGBA:
      return ot.RGBA_INTEGER;
    case ot.RGB:
      return ot.RGB_INTEGER;
    case ot.RG:
      return ot.RG_INTEGER;
    case ot.RED:
      return ot.RED_INTEGER;
    default:
      return i;
  }
}
function Zx(i, t, e) {
  for (var a = /* @__PURE__ */ new Map(), n = 0; n < t; ) {
    var s = i.getUint32(tu + n, e), o = tu + n + 4, u = 3 - (s + 3) % 4;
    if (s === 0 || s > t - n) {
      console.error("KTXLoader: keyAndValueByteSize out of bounds");
      break;
    }
    for (var m = 0; m < s && i.getUint8(o + m) !== 0; m++)
      ;
    if (m === -1) {
      console.error("KTXLoader: Failed to find null byte terminating kvData key");
      break;
    }
    var g = new TextDecoder().decode(new Uint8Array(i.buffer, o, m)), A = new DataView(i.buffer, o + m + 1, s - m - 1);
    a.set(g, A), n += 4 + s + u;
  }
  return a;
}
Se.setExtensionXhrType("dds", Se.XHR_RESPONSE_TYPE.BUFFER);
var h2 = (
  /** @class */
  function() {
    function i() {
    }
    return i.use = function(t, e) {
      if (t.extension === "dds" && t.data)
        try {
          Object.assign(t, i2(t.name || t.url, a2(t.data), t.metadata));
        } catch (a) {
          e(a);
          return;
        }
      e();
    }, i.extension = se.Loader, i;
  }()
);
Se.setExtensionXhrType("ktx", Se.XHR_RESPONSE_TYPE.BUFFER);
var u2 = (
  /** @class */
  function() {
    function i() {
    }
    return i.use = function(t, e) {
      if (t.extension === "ktx" && t.data)
        try {
          var a = t.name || t.url, n = o2(a, t.data, this.loadKeyValueData), s = n.compressed, o = n.uncompressed, u = n.kvData;
          if (s) {
            var m = i2(a, s, t.metadata);
            if (u && m.textures)
              for (var g in m.textures)
                m.textures[g].baseTexture.ktxKeyValueData = u;
            Object.assign(t, m);
          } else if (o) {
            var A = {};
            o.forEach(function(x, w) {
              var C = new Ot(new Qt(x.resource, {
                mipmap: Sr.OFF,
                alphaMode: Er.NO_PREMULTIPLIED_ALPHA,
                type: x.type,
                format: x.format
              })), O = a + "-" + (w + 1);
              u && (C.baseTexture.ktxKeyValueData = u), Qt.addToCache(C.baseTexture, O), Ot.addToCache(C, O), w === 0 && (A[a] = C, Qt.addToCache(C.baseTexture, a), Ot.addToCache(C, a)), A[O] = C;
            }), Object.assign(t, { textures: A });
          }
        } catch (x) {
          e(x);
          return;
        }
      e();
    }, i.extension = se.Loader, i.loadKeyValueData = !1, i;
  }()
);
/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var ru = function(i, t) {
  return ru = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, ru(i, t);
};
function l2(i, t) {
  ru(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var tT = (
  /** @class */
  function(i) {
    l2(t, i);
    function t(e, a, n, s) {
      e === void 0 && (e = 1500), n === void 0 && (n = 16384), s === void 0 && (s = !1);
      var o = i.call(this) || this, u = 16384;
      return n > u && (n = u), o._properties = [!1, !0, !1, !1, !1], o._maxSize = e, o._batchSize = n, o._buffers = null, o._bufferUpdateIDs = [], o._updateID = 0, o.interactiveChildren = !1, o.blendMode = It.NORMAL, o.autoResize = s, o.roundPixels = !0, o.baseTexture = null, o.setProperties(a), o._tint = 0, o.tintRgb = new Float32Array(4), o.tint = 16777215, o;
    }
    return t.prototype.setProperties = function(e) {
      e && (this._properties[0] = "vertices" in e || "scale" in e ? !!e.vertices || !!e.scale : this._properties[0], this._properties[1] = "position" in e ? !!e.position : this._properties[1], this._properties[2] = "rotation" in e ? !!e.rotation : this._properties[2], this._properties[3] = "uvs" in e ? !!e.uvs : this._properties[3], this._properties[4] = "tint" in e || "alpha" in e ? !!e.tint || !!e.alpha : this._properties[4]);
    }, t.prototype.updateTransform = function() {
      this.displayObjectUpdateTransform();
    }, Object.defineProperty(t.prototype, "tint", {
      /**
       * The tint applied to the container. This is a hex value.
       * A value of 0xFFFFFF will remove any tint effect.
       * IMPORTANT: This is a WebGL only feature and will be ignored by the canvas renderer.
       * @default 0xFFFFFF
       */
      get: function() {
        return this._tint;
      },
      set: function(e) {
        this._tint = e, sa(e, this.tintRgb);
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.render = function(e) {
      var a = this;
      !this.visible || this.worldAlpha <= 0 || !this.children.length || !this.renderable || (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture, this.baseTexture.valid || this.baseTexture.once("update", function() {
        return a.onChildrenChange(0);
      })), e.batch.setObjectRenderer(e.plugins.particle), e.plugins.particle.render(this));
    }, t.prototype.onChildrenChange = function(e) {
      for (var a = Math.floor(e / this._batchSize); this._bufferUpdateIDs.length < a; )
        this._bufferUpdateIDs.push(0);
      this._bufferUpdateIDs[a] = ++this._updateID;
    }, t.prototype.dispose = function() {
      if (this._buffers) {
        for (var e = 0; e < this._buffers.length; ++e)
          this._buffers[e].destroy();
        this._buffers = null;
      }
    }, t.prototype.destroy = function(e) {
      i.prototype.destroy.call(this, e), this.dispose(), this._properties = null, this._buffers = null, this._bufferUpdateIDs = null;
    }, t;
  }(wr)
), Y0 = (
  /** @class */
  function() {
    function i(t, e, a) {
      this.geometry = new Ga(), this.indexBuffer = null, this.size = a, this.dynamicProperties = [], this.staticProperties = [];
      for (var n = 0; n < t.length; ++n) {
        var s = t[n];
        s = {
          attributeName: s.attributeName,
          size: s.size,
          uploadFunction: s.uploadFunction,
          type: s.type || wt.FLOAT,
          offset: s.offset
        }, e[n] ? this.dynamicProperties.push(s) : this.staticProperties.push(s);
      }
      this.staticStride = 0, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.dynamicStride = 0, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this._updateID = 0, this.initBuffers();
    }
    return i.prototype.initBuffers = function() {
      var t = this.geometry, e = 0;
      this.indexBuffer = new Fe(Oc(this.size), !0, !0), t.addIndex(this.indexBuffer), this.dynamicStride = 0;
      for (var a = 0; a < this.dynamicProperties.length; ++a) {
        var n = this.dynamicProperties[a];
        n.offset = e, e += n.size, this.dynamicStride += n.size;
      }
      var s = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
      this.dynamicData = new Float32Array(s), this.dynamicDataUint32 = new Uint32Array(s), this.dynamicBuffer = new Fe(this.dynamicData, !1, !1);
      var o = 0;
      this.staticStride = 0;
      for (var a = 0; a < this.staticProperties.length; ++a) {
        var n = this.staticProperties[a];
        n.offset = o, o += n.size, this.staticStride += n.size;
      }
      var u = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
      this.staticData = new Float32Array(u), this.staticDataUint32 = new Uint32Array(u), this.staticBuffer = new Fe(this.staticData, !0, !1);
      for (var a = 0; a < this.dynamicProperties.length; ++a) {
        var n = this.dynamicProperties[a];
        t.addAttribute(n.attributeName, this.dynamicBuffer, 0, n.type === wt.UNSIGNED_BYTE, n.type, this.dynamicStride * 4, n.offset * 4);
      }
      for (var a = 0; a < this.staticProperties.length; ++a) {
        var n = this.staticProperties[a];
        t.addAttribute(n.attributeName, this.staticBuffer, 0, n.type === wt.UNSIGNED_BYTE, n.type, this.staticStride * 4, n.offset * 4);
      }
    }, i.prototype.uploadDynamic = function(t, e, a) {
      for (var n = 0; n < this.dynamicProperties.length; n++) {
        var s = this.dynamicProperties[n];
        s.uploadFunction(t, e, a, s.type === wt.UNSIGNED_BYTE ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, s.offset);
      }
      this.dynamicBuffer._updateID++;
    }, i.prototype.uploadStatic = function(t, e, a) {
      for (var n = 0; n < this.staticProperties.length; n++) {
        var s = this.staticProperties[n];
        s.uploadFunction(t, e, a, s.type === wt.UNSIGNED_BYTE ? this.staticDataUint32 : this.staticData, this.staticStride, s.offset);
      }
      this.staticBuffer._updateID++;
    }, i.prototype.destroy = function() {
      this.indexBuffer = null, this.dynamicProperties = null, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this.staticProperties = null, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.geometry.destroy();
    }, i;
  }()
), eT = `varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`, rT = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`, f2 = (
  /** @class */
  function(i) {
    l2(t, i);
    function t(e) {
      var a = i.call(this, e) || this;
      return a.shader = null, a.properties = null, a.tempMatrix = new be(), a.properties = [
        // verticesData
        {
          attributeName: "aVertexPosition",
          size: 2,
          uploadFunction: a.uploadVertices,
          offset: 0
        },
        // positionData
        {
          attributeName: "aPositionCoord",
          size: 2,
          uploadFunction: a.uploadPosition,
          offset: 0
        },
        // rotationData
        {
          attributeName: "aRotation",
          size: 1,
          uploadFunction: a.uploadRotation,
          offset: 0
        },
        // uvsData
        {
          attributeName: "aTextureCoord",
          size: 2,
          uploadFunction: a.uploadUvs,
          offset: 0
        },
        // tintData
        {
          attributeName: "aColor",
          size: 1,
          type: wt.UNSIGNED_BYTE,
          uploadFunction: a.uploadTint,
          offset: 0
        }
      ], a.shader = pi.from(rT, eT, {}), a.state = Di.for2d(), a;
    }
    return t.prototype.render = function(e) {
      var a = e.children, n = e._maxSize, s = e._batchSize, o = this.renderer, u = a.length;
      if (u !== 0) {
        u > n && !e.autoResize && (u = n);
        var m = e._buffers;
        m || (m = e._buffers = this.generateBuffers(e));
        var g = a[0]._texture.baseTexture, A = g.alphaMode > 0;
        this.state.blendMode = Ou(e.blendMode, A), o.state.set(this.state);
        var x = o.gl, w = e.worldTransform.copyTo(this.tempMatrix);
        w.prepend(o.globalUniforms.uniforms.projectionMatrix), this.shader.uniforms.translationMatrix = w.toArray(!0), this.shader.uniforms.uColor = Cc(e.tintRgb, e.worldAlpha, this.shader.uniforms.uColor, A), this.shader.uniforms.uSampler = g, this.renderer.shader.bind(this.shader);
        for (var C = !1, O = 0, L = 0; O < u; O += s, L += 1) {
          var D = u - O;
          D > s && (D = s), L >= m.length && m.push(this._generateOneMoreBuffer(e));
          var H = m[L];
          H.uploadDynamic(a, O, D);
          var k = e._bufferUpdateIDs[L] || 0;
          C = C || H._updateID < k, C && (H._updateID = e._updateID, H.uploadStatic(a, O, D)), o.geometry.bind(H.geometry), x.drawElements(x.TRIANGLES, D * 6, x.UNSIGNED_SHORT, 0);
        }
      }
    }, t.prototype.generateBuffers = function(e) {
      for (var a = [], n = e._maxSize, s = e._batchSize, o = e._properties, u = 0; u < n; u += s)
        a.push(new Y0(this.properties, o, s));
      return a;
    }, t.prototype._generateOneMoreBuffer = function(e) {
      var a = e._batchSize, n = e._properties;
      return new Y0(this.properties, n, a);
    }, t.prototype.uploadVertices = function(e, a, n, s, o, u) {
      for (var m = 0, g = 0, A = 0, x = 0, w = 0; w < n; ++w) {
        var C = e[a + w], O = C._texture, L = C.scale.x, D = C.scale.y, H = O.trim, k = O.orig;
        H ? (g = H.x - C.anchor.x * k.width, m = g + H.width, x = H.y - C.anchor.y * k.height, A = x + H.height) : (m = k.width * (1 - C.anchor.x), g = k.width * -C.anchor.x, A = k.height * (1 - C.anchor.y), x = k.height * -C.anchor.y), s[u] = g * L, s[u + 1] = x * D, s[u + o] = m * L, s[u + o + 1] = x * D, s[u + o * 2] = m * L, s[u + o * 2 + 1] = A * D, s[u + o * 3] = g * L, s[u + o * 3 + 1] = A * D, u += o * 4;
      }
    }, t.prototype.uploadPosition = function(e, a, n, s, o, u) {
      for (var m = 0; m < n; m++) {
        var g = e[a + m].position;
        s[u] = g.x, s[u + 1] = g.y, s[u + o] = g.x, s[u + o + 1] = g.y, s[u + o * 2] = g.x, s[u + o * 2 + 1] = g.y, s[u + o * 3] = g.x, s[u + o * 3 + 1] = g.y, u += o * 4;
      }
    }, t.prototype.uploadRotation = function(e, a, n, s, o, u) {
      for (var m = 0; m < n; m++) {
        var g = e[a + m].rotation;
        s[u] = g, s[u + o] = g, s[u + o * 2] = g, s[u + o * 3] = g, u += o * 4;
      }
    }, t.prototype.uploadUvs = function(e, a, n, s, o, u) {
      for (var m = 0; m < n; ++m) {
        var g = e[a + m]._texture._uvs;
        g ? (s[u] = g.x0, s[u + 1] = g.y0, s[u + o] = g.x1, s[u + o + 1] = g.y1, s[u + o * 2] = g.x2, s[u + o * 2 + 1] = g.y2, s[u + o * 3] = g.x3, s[u + o * 3 + 1] = g.y3, u += o * 4) : (s[u] = 0, s[u + 1] = 0, s[u + o] = 0, s[u + o + 1] = 0, s[u + o * 2] = 0, s[u + o * 2 + 1] = 0, s[u + o * 3] = 0, s[u + o * 3 + 1] = 0, u += o * 4);
      }
    }, t.prototype.uploadTint = function(e, a, n, s, o, u) {
      for (var m = 0; m < n; ++m) {
        var g = e[a + m], A = g._texture.baseTexture.alphaMode > 0, x = g.alpha, w = x < 1 && A ? Ws(g._tintRGB, x) : g._tintRGB + (x * 255 << 24);
        s[u] = w, s[u + o] = w, s[u + o * 2] = w, s[u + o * 3] = w, u += o * 4;
      }
    }, t.prototype.destroy = function() {
      i.prototype.destroy.call(this), this.shader && (this.shader.destroy(), this.shader = null), this.tempMatrix = null;
    }, t.extension = {
      name: "particle",
      type: se.RendererPlugin
    }, t;
  }(Gn)
);
/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
mt.UPLOADS_PER_FRAME = 4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var iu = function(i, t) {
  return iu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, iu(i, t);
};
function iT(i, t) {
  iu(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var c2 = (
  /** @class */
  function() {
    function i(t) {
      this.maxItemsPerFrame = t, this.itemsLeft = 0;
    }
    return i.prototype.beginFrame = function() {
      this.itemsLeft = this.maxItemsPerFrame;
    }, i.prototype.allowedToUpload = function() {
      return this.itemsLeft-- > 0;
    }, i;
  }()
);
function aT(i, t) {
  var e = !1;
  if (i && i._textures && i._textures.length) {
    for (var a = 0; a < i._textures.length; a++)
      if (i._textures[a] instanceof Ot) {
        var n = i._textures[a].baseTexture;
        t.indexOf(n) === -1 && (t.push(n), e = !0);
      }
  }
  return e;
}
function nT(i, t) {
  if (i.baseTexture instanceof Qt) {
    var e = i.baseTexture;
    return t.indexOf(e) === -1 && t.push(e), !0;
  }
  return !1;
}
function sT(i, t) {
  if (i._texture && i._texture instanceof Ot) {
    var e = i._texture.baseTexture;
    return t.indexOf(e) === -1 && t.push(e), !0;
  }
  return !1;
}
function oT(i, t) {
  return t instanceof so ? (t.updateText(!0), !0) : !1;
}
function hT(i, t) {
  if (t instanceof Ri) {
    var e = t.toFontString();
    return Br.measureFont(e), !0;
  }
  return !1;
}
function uT(i, t) {
  if (i instanceof so) {
    t.indexOf(i.style) === -1 && t.push(i.style), t.indexOf(i) === -1 && t.push(i);
    var e = i._texture.baseTexture;
    return t.indexOf(e) === -1 && t.push(e), !0;
  }
  return !1;
}
function lT(i, t) {
  return i instanceof Ri ? (t.indexOf(i) === -1 && t.push(i), !0) : !1;
}
var d2 = (
  /** @class */
  function() {
    function i(t) {
      var e = this;
      this.limiter = new c2(mt.UPLOADS_PER_FRAME), this.renderer = t, this.uploadHookHelper = null, this.queue = [], this.addHooks = [], this.uploadHooks = [], this.completes = [], this.ticking = !1, this.delayedTick = function() {
        e.queue && e.prepareItems();
      }, this.registerFindHook(uT), this.registerFindHook(lT), this.registerFindHook(aT), this.registerFindHook(nT), this.registerFindHook(sT), this.registerUploadHook(oT), this.registerUploadHook(hT);
    }
    return i.prototype.upload = function(t, e) {
      var a = this;
      return typeof t == "function" && (e = t, t = null), e && sr("6.5.0", "BasePrepare.upload callback is deprecated, use the return Promise instead."), new Promise(function(n) {
        t && a.add(t);
        var s = function() {
          e == null || e(), n();
        };
        a.queue.length ? (a.completes.push(s), a.ticking || (a.ticking = !0, We.system.addOnce(a.tick, a, ti.UTILITY))) : s();
      });
    }, i.prototype.tick = function() {
      setTimeout(this.delayedTick, 0);
    }, i.prototype.prepareItems = function() {
      for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload(); ) {
        var t = this.queue[0], e = !1;
        if (t && !t._destroyed) {
          for (var a = 0, n = this.uploadHooks.length; a < n; a++)
            if (this.uploadHooks[a](this.uploadHookHelper, t)) {
              this.queue.shift(), e = !0;
              break;
            }
        }
        e || this.queue.shift();
      }
      if (this.queue.length)
        We.system.addOnce(this.tick, this, ti.UTILITY);
      else {
        this.ticking = !1;
        var s = this.completes.slice(0);
        this.completes.length = 0;
        for (var a = 0, n = s.length; a < n; a++)
          s[a]();
      }
    }, i.prototype.registerFindHook = function(t) {
      return t && this.addHooks.push(t), this;
    }, i.prototype.registerUploadHook = function(t) {
      return t && this.uploadHooks.push(t), this;
    }, i.prototype.add = function(t) {
      for (var e = 0, a = this.addHooks.length; e < a && !this.addHooks[e](t, this.queue); e++)
        ;
      if (t instanceof wr)
        for (var e = t.children.length - 1; e >= 0; e--)
          this.add(t.children[e]);
      return this;
    }, i.prototype.destroy = function() {
      this.ticking && We.system.remove(this.tick, this), this.ticking = !1, this.addHooks = null, this.uploadHooks = null, this.renderer = null, this.completes = null, this.queue = null, this.limiter = null, this.uploadHookHelper = null;
    }, i;
  }()
);
function p2(i, t) {
  return t instanceof Qt ? (t._glTextures[i.CONTEXT_UID] || i.texture.bind(t), !0) : !1;
}
function fT(i, t) {
  if (!(t instanceof Da))
    return !1;
  var e = t.geometry;
  t.finishPoly(), e.updateBatches();
  for (var a = e.batches, n = 0; n < a.length; n++) {
    var s = a[n].style.texture;
    s && p2(i, s.baseTexture);
  }
  return e.batchable || i.geometry.bind(e, t._resolveDirectShader(i)), !0;
}
function cT(i, t) {
  return i instanceof Da ? (t.push(i), !0) : !1;
}
var _2 = (
  /** @class */
  function(i) {
    iT(t, i);
    function t(e) {
      var a = i.call(this, e) || this;
      return a.uploadHookHelper = a.renderer, a.registerFindHook(cT), a.registerUploadHook(p2), a.registerUploadHook(fT), a;
    }
    return t.extension = {
      name: "prepare",
      type: se.RendererPlugin
    }, t;
  }(d2)
), dT = (
  /** @class */
  function() {
    function i(t) {
      this.maxMilliseconds = t, this.frameStart = 0;
    }
    return i.prototype.beginFrame = function() {
      this.frameStart = Date.now();
    }, i.prototype.allowedToUpload = function() {
      return Date.now() - this.frameStart < this.maxMilliseconds;
    }, i;
  }()
);
/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var v2 = (
  /** @class */
  function() {
    function i(t, e, a) {
      a === void 0 && (a = null), this.linkedSheets = [], this._texture = t instanceof Ot ? t : null, this.baseTexture = t instanceof Qt ? t : this._texture.baseTexture, this.textures = {}, this.animations = {}, this.data = e;
      var n = this.baseTexture.resource;
      this.resolution = this._updateResolution(a || (n ? n.url : null)), this._frames = this.data.frames, this._frameKeys = Object.keys(this._frames), this._batchIndex = 0, this._callback = null;
    }
    return i.prototype._updateResolution = function(t) {
      t === void 0 && (t = null);
      var e = this.data.meta.scale, a = Mn(t, null);
      return a === null && (a = e !== void 0 ? parseFloat(e) : 1), a !== 1 && this.baseTexture.setResolution(a), a;
    }, i.prototype.parse = function(t) {
      var e = this;
      return t && sr("6.5.0", "Spritesheet.parse callback is deprecated, use the return Promise instead."), new Promise(function(a) {
        e._callback = function(n) {
          t == null || t(n), a(n);
        }, e._batchIndex = 0, e._frameKeys.length <= i.BATCH_SIZE ? (e._processFrames(0), e._processAnimations(), e._parseComplete()) : e._nextBatch();
      });
    }, i.prototype._processFrames = function(t) {
      for (var e = t, a = i.BATCH_SIZE; e - t < a && e < this._frameKeys.length; ) {
        var n = this._frameKeys[e], s = this._frames[n], o = s.frame;
        if (o) {
          var u = null, m = null, g = s.trimmed !== !1 && s.sourceSize ? s.sourceSize : s.frame, A = new zt(0, 0, Math.floor(g.w) / this.resolution, Math.floor(g.h) / this.resolution);
          s.rotated ? u = new zt(Math.floor(o.x) / this.resolution, Math.floor(o.y) / this.resolution, Math.floor(o.h) / this.resolution, Math.floor(o.w) / this.resolution) : u = new zt(Math.floor(o.x) / this.resolution, Math.floor(o.y) / this.resolution, Math.floor(o.w) / this.resolution, Math.floor(o.h) / this.resolution), s.trimmed !== !1 && s.spriteSourceSize && (m = new zt(Math.floor(s.spriteSourceSize.x) / this.resolution, Math.floor(s.spriteSourceSize.y) / this.resolution, Math.floor(o.w) / this.resolution, Math.floor(o.h) / this.resolution)), this.textures[n] = new Ot(this.baseTexture, u, A, m, s.rotated ? 2 : 0, s.anchor), Ot.addToCache(this.textures[n], n);
        }
        e++;
      }
    }, i.prototype._processAnimations = function() {
      var t = this.data.animations || {};
      for (var e in t) {
        this.animations[e] = [];
        for (var a = 0; a < t[e].length; a++) {
          var n = t[e][a];
          this.animations[e].push(this.textures[n]);
        }
      }
    }, i.prototype._parseComplete = function() {
      var t = this._callback;
      this._callback = null, this._batchIndex = 0, t.call(this, this.textures);
    }, i.prototype._nextBatch = function() {
      var t = this;
      this._processFrames(this._batchIndex * i.BATCH_SIZE), this._batchIndex++, setTimeout(function() {
        t._batchIndex * i.BATCH_SIZE < t._frameKeys.length ? t._nextBatch() : (t._processAnimations(), t._parseComplete());
      }, 0);
    }, i.prototype.destroy = function(t) {
      var e;
      t === void 0 && (t = !1);
      for (var a in this.textures)
        this.textures[a].destroy();
      this._frames = null, this._frameKeys = null, this.data = null, this.textures = null, t && ((e = this._texture) === null || e === void 0 || e.destroy(), this.baseTexture.destroy()), this._texture = null, this.baseTexture = null, this.linkedSheets = [];
    }, i.BATCH_SIZE = 1e3, i;
  }()
), m2 = (
  /** @class */
  function() {
    function i() {
    }
    return i.use = function(t, e) {
      var a, n, s = this, o = t.name + "_image";
      if (!t.data || t.type !== Se.TYPE.JSON || !t.data.frames || s.resources[o]) {
        e();
        return;
      }
      var u = (n = (a = t.data) === null || a === void 0 ? void 0 : a.meta) === null || n === void 0 ? void 0 : n.related_multi_packs;
      if (Array.isArray(u))
        for (var m = function(O) {
          if (typeof O != "string")
            return "continue";
          var L = O.replace(".json", ""), D = qr.resolve(t.url.replace(s.baseUrl, ""), O);
          if (s.resources[L] || Object.values(s.resources).some(function(k) {
            return qr.format(qr.parse(k.url)) === D;
          }))
            return "continue";
          var H = {
            crossOrigin: t.crossOrigin,
            loadType: Se.LOAD_TYPE.XHR,
            xhrType: Se.XHR_RESPONSE_TYPE.JSON,
            parentResource: t,
            metadata: t.metadata
          };
          s.add(L, D, H);
        }, g = 0, A = u; g < A.length; g++) {
          var x = A[g];
          m(x);
        }
      var w = {
        crossOrigin: t.crossOrigin,
        metadata: t.metadata.imageMetadata,
        parentResource: t
      }, C = i.getResourcePath(t, s.baseUrl);
      s.add(o, C, w, function(L) {
        if (L.error) {
          e(L.error);
          return;
        }
        var D = new v2(L.texture, t.data, t.url);
        D.parse().then(function() {
          t.spritesheet = D, t.textures = D.textures, e();
        });
      });
    }, i.getResourcePath = function(t, e) {
      return t.isDataUrl ? t.data.meta.image : qr.resolve(t.url.replace(e, ""), t.data.meta.image);
    }, i.extension = se.Loader, i;
  }()
);
/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var au = function(i, t) {
  return au = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, au(i, t);
};
function g2(i, t) {
  au(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var hn = new le(), pT = (
  /** @class */
  function(i) {
    g2(t, i);
    function t(e, a, n) {
      a === void 0 && (a = 100), n === void 0 && (n = 100);
      var s = i.call(this, e) || this;
      return s.tileTransform = new Qs(), s._width = a, s._height = n, s.uvMatrix = s.texture.uvMatrix || new to(e), s.pluginName = "tilingSprite", s.uvRespectAnchor = !1, s;
    }
    return Object.defineProperty(t.prototype, "clampMargin", {
      /**
       * Changes frame clamping in corresponding textureTransform, shortcut
       * Change to -0.5 to add a pixel to the edge, recommended for transparent trimmed textures in atlas
       * @default 0.5
       * @member {number}
       */
      get: function() {
        return this.uvMatrix.clampMargin;
      },
      set: function(e) {
        this.uvMatrix.clampMargin = e, this.uvMatrix.update(!0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "tileScale", {
      /** The scaling of the image that is being tiled. */
      get: function() {
        return this.tileTransform.scale;
      },
      set: function(e) {
        this.tileTransform.scale.copyFrom(e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "tilePosition", {
      /** The offset of the image that is being tiled. */
      get: function() {
        return this.tileTransform.position;
      },
      set: function(e) {
        this.tileTransform.position.copyFrom(e);
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._onTextureUpdate = function() {
      this.uvMatrix && (this.uvMatrix.texture = this._texture), this._cachedTint = 16777215;
    }, t.prototype._render = function(e) {
      var a = this._texture;
      !a || !a.valid || (this.tileTransform.updateLocalTransform(), this.uvMatrix.update(), e.batch.setObjectRenderer(e.plugins[this.pluginName]), e.plugins[this.pluginName].render(this));
    }, t.prototype._calculateBounds = function() {
      var e = this._width * -this._anchor._x, a = this._height * -this._anchor._y, n = this._width * (1 - this._anchor._x), s = this._height * (1 - this._anchor._y);
      this._bounds.addFrame(this.transform, e, a, n, s);
    }, t.prototype.getLocalBounds = function(e) {
      return this.children.length === 0 ? (this._bounds.minX = this._width * -this._anchor._x, this._bounds.minY = this._height * -this._anchor._y, this._bounds.maxX = this._width * (1 - this._anchor._x), this._bounds.maxY = this._height * (1 - this._anchor._y), e || (this._localBoundsRect || (this._localBoundsRect = new zt()), e = this._localBoundsRect), this._bounds.getRectangle(e)) : i.prototype.getLocalBounds.call(this, e);
    }, t.prototype.containsPoint = function(e) {
      this.worldTransform.applyInverse(e, hn);
      var a = this._width, n = this._height, s = -a * this.anchor._x;
      if (hn.x >= s && hn.x < s + a) {
        var o = -n * this.anchor._y;
        if (hn.y >= o && hn.y < o + n)
          return !0;
      }
      return !1;
    }, t.prototype.destroy = function(e) {
      i.prototype.destroy.call(this, e), this.tileTransform = null, this.uvMatrix = null;
    }, t.from = function(e, a) {
      var n = e instanceof Ot ? e : Ot.from(e, a);
      return new t(n, a.width, a.height);
    }, Object.defineProperty(t.prototype, "width", {
      /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this._width;
      },
      set: function(e) {
        this._width = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      /** The height of the TilingSprite, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this._height;
      },
      set: function(e) {
        this._height = e;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(Va)
), _T = `#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`, z0 = `#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`, vT = `#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`, mT = `#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`, gT = `#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`, xs = new be(), y2 = (
  /** @class */
  function(i) {
    g2(t, i);
    function t(e) {
      var a = i.call(this, e) || this;
      return e.runners.contextChange.add(a), a.quad = new Uu(), a.state = Di.for2d(), a;
    }
    return t.prototype.contextChange = function() {
      var e = this.renderer, a = { globals: e.globalUniforms };
      this.simpleShader = pi.from(z0, _T, a), this.shader = e.context.webGLVersion > 1 ? pi.from(mT, gT, a) : pi.from(z0, vT, a);
    }, t.prototype.render = function(e) {
      var a = this.renderer, n = this.quad, s = n.vertices;
      s[0] = s[6] = e._width * -e.anchor.x, s[1] = s[3] = e._height * -e.anchor.y, s[2] = s[4] = e._width * (1 - e.anchor.x), s[5] = s[7] = e._height * (1 - e.anchor.y);
      var o = e.uvRespectAnchor ? e.anchor.x : 0, u = e.uvRespectAnchor ? e.anchor.y : 0;
      s = n.uvs, s[0] = s[6] = -o, s[1] = s[3] = -u, s[2] = s[4] = 1 - o, s[5] = s[7] = 1 - u, n.invalidate();
      var m = e._texture, g = m.baseTexture, A = g.alphaMode > 0, x = e.tileTransform.localTransform, w = e.uvMatrix, C = g.isPowerOfTwo && m.frame.width === g.width && m.frame.height === g.height;
      C && (g._glTextures[a.CONTEXT_UID] ? C = g.wrapMode !== Nr.CLAMP : g.wrapMode === Nr.CLAMP && (g.wrapMode = Nr.REPEAT));
      var O = C ? this.simpleShader : this.shader, L = m.width, D = m.height, H = e._width, k = e._height;
      xs.set(x.a * L / H, x.b * L / k, x.c * D / H, x.d * D / k, x.tx / H, x.ty / k), xs.invert(), C ? xs.prepend(w.mapCoord) : (O.uniforms.uMapCoord = w.mapCoord.toArray(!0), O.uniforms.uClampFrame = w.uClampFrame, O.uniforms.uClampOffset = w.uClampOffset), O.uniforms.uTransform = xs.toArray(!0), O.uniforms.uColor = $u(e.tint, e.worldAlpha, O.uniforms.uColor, A), O.uniforms.translationMatrix = e.transform.worldTransform.toArray(!0), O.uniforms.uSampler = m, a.shader.bind(O), a.geometry.bind(n), this.state.blendMode = Ou(e.blendMode, A), a.state.set(this.state), a.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0);
    }, t.extension = {
      name: "tilingSprite",
      type: se.RendererPlugin
    }, t;
  }(Gn)
);
/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var nu = function(i, t) {
  return nu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, nu(i, t);
};
function Al(i, t) {
  nu(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var b2 = (
  /** @class */
  function() {
    function i(t, e) {
      this.uvBuffer = t, this.uvMatrix = e, this.data = null, this._bufferUpdateId = -1, this._textureUpdateId = -1, this._updateID = 0;
    }
    return i.prototype.update = function(t) {
      if (!(!t && this._bufferUpdateId === this.uvBuffer._updateID && this._textureUpdateId === this.uvMatrix._updateID)) {
        this._bufferUpdateId = this.uvBuffer._updateID, this._textureUpdateId = this.uvMatrix._updateID;
        var e = this.uvBuffer.data;
        (!this.data || this.data.length !== e.length) && (this.data = new Float32Array(e.length)), this.uvMatrix.multiplyUvs(e, this.data), this._updateID++;
      }
    }, i;
  }()
), hh = new le(), K0 = new gn(), Fa = (
  /** @class */
  function(i) {
    Al(t, i);
    function t(e, a, n, s) {
      s === void 0 && (s = xr.TRIANGLES);
      var o = i.call(this) || this;
      return o.geometry = e, o.shader = a, o.state = n || Di.for2d(), o.drawMode = s, o.start = 0, o.size = 0, o.uvs = null, o.indices = null, o.vertexData = new Float32Array(1), o.vertexDirty = -1, o._transformID = -1, o._roundPixels = mt.ROUND_PIXELS, o.batchUvs = null, o;
    }
    return Object.defineProperty(t.prototype, "geometry", {
      /**
       * Includes vertex positions, face indices, normals, colors, UVs, and
       * custom attributes within buffers, reducing the cost of passing all
       * this data to the GPU. Can be shared between multiple Mesh objects.
       */
      get: function() {
        return this._geometry;
      },
      set: function(e) {
        this._geometry !== e && (this._geometry && (this._geometry.refCount--, this._geometry.refCount === 0 && this._geometry.dispose()), this._geometry = e, this._geometry && this._geometry.refCount++, this.vertexDirty = -1);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "uvBuffer", {
      /**
       * To change mesh uv's, change its uvBuffer data and increment its _updateID.
       * @readonly
       */
      get: function() {
        return this.geometry.buffers[1];
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "verticesBuffer", {
      /**
       * To change mesh vertices, change its uvBuffer data and increment its _updateID.
       * Incrementing _updateID is optional because most of Mesh objects do it anyway.
       * @readonly
       */
      get: function() {
        return this.geometry.buffers[0];
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "material", {
      get: function() {
        return this.shader;
      },
      /** Alias for {@link PIXI.Mesh#shader}. */
      set: function(e) {
        this.shader = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "blendMode", {
      get: function() {
        return this.state.blendMode;
      },
      /**
       * The blend mode to be applied to the Mesh. Apply a value of
       * `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.
       * @default PIXI.BLEND_MODES.NORMAL;
       */
      set: function(e) {
        this.state.blendMode = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "roundPixels", {
      get: function() {
        return this._roundPixels;
      },
      /**
       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
       * Advantages can include sharper image quality (like text) and faster rendering on canvas.
       * The main disadvantage is movement of objects may appear less smooth.
       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}
       * @default false
       */
      set: function(e) {
        this._roundPixels !== e && (this._transformID = -1), this._roundPixels = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "tint", {
      /**
       * The multiply tint applied to the Mesh. This is a hex value. A value of
       * `0xFFFFFF` will remove any tint effect.
       *
       * Null for non-MeshMaterial shaders
       * @default 0xFFFFFF
       */
      get: function() {
        return "tint" in this.shader ? this.shader.tint : null;
      },
      set: function(e) {
        this.shader.tint = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "texture", {
      /** The texture that the Mesh uses. Null for non-MeshMaterial shaders */
      get: function() {
        return "texture" in this.shader ? this.shader.texture : null;
      },
      set: function(e) {
        this.shader.texture = e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._render = function(e) {
      var a = this.geometry.buffers[0].data, n = this.shader;
      n.batchable && this.drawMode === xr.TRIANGLES && a.length < t.BATCHABLE_SIZE * 2 ? this._renderToBatch(e) : this._renderDefault(e);
    }, t.prototype._renderDefault = function(e) {
      var a = this.shader;
      a.alpha = this.worldAlpha, a.update && a.update(), e.batch.flush(), a.uniforms.translationMatrix = this.transform.worldTransform.toArray(!0), e.shader.bind(a), e.state.set(this.state), e.geometry.bind(this.geometry, a), e.geometry.draw(this.drawMode, this.size, this.start, this.geometry.instanceCount);
    }, t.prototype._renderToBatch = function(e) {
      var a = this.geometry, n = this.shader;
      n.uvMatrix && (n.uvMatrix.update(), this.calculateUvs()), this.calculateVertices(), this.indices = a.indexBuffer.data, this._tintRGB = n._tintRGB, this._texture = n.texture;
      var s = this.material.pluginName;
      e.batch.setObjectRenderer(e.plugins[s]), e.plugins[s].render(this);
    }, t.prototype.calculateVertices = function() {
      var e = this.geometry, a = e.buffers[0], n = a.data, s = a._updateID;
      if (!(s === this.vertexDirty && this._transformID === this.transform._worldID)) {
        this._transformID = this.transform._worldID, this.vertexData.length !== n.length && (this.vertexData = new Float32Array(n.length));
        for (var o = this.transform.worldTransform, u = o.a, m = o.b, g = o.c, A = o.d, x = o.tx, w = o.ty, C = this.vertexData, O = 0; O < C.length / 2; O++) {
          var L = n[O * 2], D = n[O * 2 + 1];
          C[O * 2] = u * L + g * D + x, C[O * 2 + 1] = m * L + A * D + w;
        }
        if (this._roundPixels)
          for (var H = mt.RESOLUTION, O = 0; O < C.length; ++O)
            C[O] = Math.round((C[O] * H | 0) / H);
        this.vertexDirty = s;
      }
    }, t.prototype.calculateUvs = function() {
      var e = this.geometry.buffers[1], a = this.shader;
      a.uvMatrix.isSimple ? this.uvs = e.data : (this.batchUvs || (this.batchUvs = new b2(e, a.uvMatrix)), this.batchUvs.update(), this.uvs = this.batchUvs.data);
    }, t.prototype._calculateBounds = function() {
      this.calculateVertices(), this._bounds.addVertexData(this.vertexData, 0, this.vertexData.length);
    }, t.prototype.containsPoint = function(e) {
      if (!this.getBounds().contains(e.x, e.y))
        return !1;
      this.worldTransform.applyInverse(e, hh);
      for (var a = this.geometry.getBuffer("aVertexPosition").data, n = K0.points, s = this.geometry.getIndex().data, o = s.length, u = this.drawMode === 4 ? 3 : 1, m = 0; m + 2 < o; m += u) {
        var g = s[m] * 2, A = s[m + 1] * 2, x = s[m + 2] * 2;
        if (n[0] = a[g], n[1] = a[g + 1], n[2] = a[A], n[3] = a[A + 1], n[4] = a[x], n[5] = a[x + 1], K0.contains(hh.x, hh.y))
          return !0;
      }
      return !1;
    }, t.prototype.destroy = function(e) {
      i.prototype.destroy.call(this, e), this._cachedTexture && (this._cachedTexture.destroy(), this._cachedTexture = null), this.geometry = null, this.shader = null, this.state = null, this.uvs = null, this.indices = null, this.vertexData = null;
    }, t.BATCHABLE_SIZE = 100, t;
  }(wr)
), yT = `varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`, bT = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`, Ha = (
  /** @class */
  function(i) {
    Al(t, i);
    function t(e, a) {
      var n = this, s = {
        uSampler: e,
        alpha: 1,
        uTextureMatrix: be.IDENTITY,
        uColor: new Float32Array([1, 1, 1, 1])
      };
      return a = Object.assign({
        tint: 16777215,
        alpha: 1,
        pluginName: "batch"
      }, a), a.uniforms && Object.assign(s, a.uniforms), n = i.call(this, a.program || Xa.from(bT, yT), s) || this, n._colorDirty = !1, n.uvMatrix = new to(e), n.batchable = a.program === void 0, n.pluginName = a.pluginName, n.tint = a.tint, n.alpha = a.alpha, n;
    }
    return Object.defineProperty(t.prototype, "texture", {
      /** Reference to the texture being rendered. */
      get: function() {
        return this.uniforms.uSampler;
      },
      set: function(e) {
        this.uniforms.uSampler !== e && (!this.uniforms.uSampler.baseTexture.alphaMode != !e.baseTexture.alphaMode && (this._colorDirty = !0), this.uniforms.uSampler = e, this.uvMatrix.texture = e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "alpha", {
      get: function() {
        return this._alpha;
      },
      /**
       * This gets automatically set by the object using this.
       * @default 1
       */
      set: function(e) {
        e !== this._alpha && (this._alpha = e, this._colorDirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "tint", {
      get: function() {
        return this._tint;
      },
      /**
       * Multiply tint for the material.
       * @default 0xFFFFFF
       */
      set: function(e) {
        e !== this._tint && (this._tint = e, this._tintRGB = (e >> 16) + (e & 65280) + ((e & 255) << 16), this._colorDirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.update = function() {
      if (this._colorDirty) {
        this._colorDirty = !1;
        var e = this.texture.baseTexture;
        $u(this._tint, this._alpha, this.uniforms.uColor, e.alphaMode);
      }
      this.uvMatrix.update() && (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord);
    }, t;
  }(pi)
), Xn = (
  /** @class */
  function(i) {
    Al(t, i);
    function t(e, a, n) {
      var s = i.call(this) || this, o = new Fe(e), u = new Fe(a, !0), m = new Fe(n, !0, !0);
      return s.addAttribute("aVertexPosition", o, 2, !1, wt.FLOAT).addAttribute("aTextureCoord", u, 2, !1, wt.FLOAT).addIndex(m), s._updateId = -1, s;
    }
    return Object.defineProperty(t.prototype, "vertexDirtyId", {
      /**
       * If the vertex position is updated.
       * @readonly
       * @private
       */
      get: function() {
        return this.buffers[0]._updateID;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(Ga)
);
/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var su = function(i, t) {
  return su = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, su(i, t);
};
function xT(i, t) {
  su(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var Bn = (
  /** @class */
  /* @__PURE__ */ function() {
    function i() {
      this.info = [], this.common = [], this.page = [], this.char = [], this.kerning = [], this.distanceField = [];
    }
    return i;
  }()
), x2 = (
  /** @class */
  function() {
    function i() {
    }
    return i.test = function(t) {
      return typeof t == "string" && t.indexOf("info face=") === 0;
    }, i.parse = function(t) {
      var e = t.match(/^[a-z]+\s+.+$/gm), a = {
        info: [],
        common: [],
        page: [],
        char: [],
        chars: [],
        kerning: [],
        kernings: [],
        distanceField: []
      };
      for (var n in e) {
        var s = e[n].match(/^[a-z]+/gm)[0], o = e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm), u = {};
        for (var m in o) {
          var g = o[m].split("="), A = g[0], x = g[1].replace(/"/gm, ""), w = parseFloat(x), C = isNaN(w) ? x : w;
          u[A] = C;
        }
        a[s].push(u);
      }
      var O = new Bn();
      return a.info.forEach(function(L) {
        return O.info.push({
          face: L.face,
          size: parseInt(L.size, 10)
        });
      }), a.common.forEach(function(L) {
        return O.common.push({
          lineHeight: parseInt(L.lineHeight, 10)
        });
      }), a.page.forEach(function(L) {
        return O.page.push({
          id: parseInt(L.id, 10),
          file: L.file
        });
      }), a.char.forEach(function(L) {
        return O.char.push({
          id: parseInt(L.id, 10),
          page: parseInt(L.page, 10),
          x: parseInt(L.x, 10),
          y: parseInt(L.y, 10),
          width: parseInt(L.width, 10),
          height: parseInt(L.height, 10),
          xoffset: parseInt(L.xoffset, 10),
          yoffset: parseInt(L.yoffset, 10),
          xadvance: parseInt(L.xadvance, 10)
        });
      }), a.kerning.forEach(function(L) {
        return O.kerning.push({
          first: parseInt(L.first, 10),
          second: parseInt(L.second, 10),
          amount: parseInt(L.amount, 10)
        });
      }), a.distanceField.forEach(function(L) {
        return O.distanceField.push({
          distanceRange: parseInt(L.distanceRange, 10),
          fieldType: L.fieldType
        });
      }), O;
    }, i;
  }()
), Vs = (
  /** @class */
  function() {
    function i() {
    }
    return i.test = function(t) {
      return t instanceof XMLDocument && t.getElementsByTagName("page").length && t.getElementsByTagName("info")[0].getAttribute("face") !== null;
    }, i.parse = function(t) {
      for (var e = new Bn(), a = t.getElementsByTagName("info"), n = t.getElementsByTagName("common"), s = t.getElementsByTagName("page"), o = t.getElementsByTagName("char"), u = t.getElementsByTagName("kerning"), m = t.getElementsByTagName("distanceField"), g = 0; g < a.length; g++)
        e.info.push({
          face: a[g].getAttribute("face"),
          size: parseInt(a[g].getAttribute("size"), 10)
        });
      for (var g = 0; g < n.length; g++)
        e.common.push({
          lineHeight: parseInt(n[g].getAttribute("lineHeight"), 10)
        });
      for (var g = 0; g < s.length; g++)
        e.page.push({
          id: parseInt(s[g].getAttribute("id"), 10) || 0,
          file: s[g].getAttribute("file")
        });
      for (var g = 0; g < o.length; g++) {
        var A = o[g];
        e.char.push({
          id: parseInt(A.getAttribute("id"), 10),
          page: parseInt(A.getAttribute("page"), 10) || 0,
          x: parseInt(A.getAttribute("x"), 10),
          y: parseInt(A.getAttribute("y"), 10),
          width: parseInt(A.getAttribute("width"), 10),
          height: parseInt(A.getAttribute("height"), 10),
          xoffset: parseInt(A.getAttribute("xoffset"), 10),
          yoffset: parseInt(A.getAttribute("yoffset"), 10),
          xadvance: parseInt(A.getAttribute("xadvance"), 10)
        });
      }
      for (var g = 0; g < u.length; g++)
        e.kerning.push({
          first: parseInt(u[g].getAttribute("first"), 10),
          second: parseInt(u[g].getAttribute("second"), 10),
          amount: parseInt(u[g].getAttribute("amount"), 10)
        });
      for (var g = 0; g < m.length; g++)
        e.distanceField.push({
          fieldType: m[g].getAttribute("fieldType"),
          distanceRange: parseInt(m[g].getAttribute("distanceRange"), 10)
        });
      return e;
    }, i;
  }()
), T2 = (
  /** @class */
  function() {
    function i() {
    }
    return i.test = function(t) {
      if (typeof t == "string" && t.indexOf("<font>") > -1) {
        var e = new globalThis.DOMParser().parseFromString(t, "text/xml");
        return Vs.test(e);
      }
      return !1;
    }, i.parse = function(t) {
      var e = new globalThis.DOMParser().parseFromString(t, "text/xml");
      return Vs.parse(e);
    }, i;
  }()
), uh = [
  x2,
  Vs,
  T2
];
function Sl(i) {
  for (var t = 0; t < uh.length; t++)
    if (uh[t].test(i))
      return uh[t];
  return null;
}
function TT(i, t, e, a, n, s) {
  var o = e.fill;
  if (Array.isArray(o)) {
    if (o.length === 1)
      return o[0];
  } else
    return o;
  var u, m = e.dropShadow ? e.dropShadowDistance : 0, g = e.padding || 0, A = i.width / a - m - g * 2, x = i.height / a - m - g * 2, w = o.slice(), C = e.fillGradientStops.slice();
  if (!C.length)
    for (var O = w.length + 1, L = 1; L < O; ++L)
      C.push(L / O);
  if (w.unshift(o[0]), C.unshift(0), w.push(o[o.length - 1]), C.push(1), e.fillGradientType === Na.LINEAR_VERTICAL) {
    u = t.createLinearGradient(A / 2, g, A / 2, x + g);
    for (var D = 0, H = s.fontProperties.fontSize + e.strokeThickness, k = H / x, L = 0; L < n.length; L++)
      for (var G = s.lineHeight * L, z = 0; z < w.length; z++) {
        var Y = 0;
        typeof C[z] == "number" ? Y = C[z] : Y = z / w.length;
        var K = G / x + Y * k, J = Math.max(D, K);
        J = Math.min(J, 1), u.addColorStop(J, w[z]), D = J;
      }
  } else {
    u = t.createLinearGradient(g, x / 2, A + g, x / 2);
    for (var nt = w.length + 1, q = 1, L = 0; L < w.length; L++) {
      var tt = void 0;
      typeof C[L] == "number" ? tt = C[L] : tt = q / nt, u.addColorStop(tt, w[L]), q++;
    }
  }
  return u;
}
function AT(i, t, e, a, n, s, o) {
  var u = e.text, m = e.fontProperties;
  t.translate(a, n), t.scale(s, s);
  var g = o.strokeThickness / 2, A = -(o.strokeThickness / 2);
  if (t.font = o.toFontString(), t.lineWidth = o.strokeThickness, t.textBaseline = o.textBaseline, t.lineJoin = o.lineJoin, t.miterLimit = o.miterLimit, t.fillStyle = TT(i, t, o, s, [u], e), t.strokeStyle = o.stroke, o.dropShadow) {
    var x = o.dropShadowColor, w = sa(typeof x == "number" ? x : Mu(x)), C = o.dropShadowBlur * s, O = o.dropShadowDistance * s;
    t.shadowColor = "rgba(" + w[0] * 255 + "," + w[1] * 255 + "," + w[2] * 255 + "," + o.dropShadowAlpha + ")", t.shadowBlur = C, t.shadowOffsetX = Math.cos(o.dropShadowAngle) * O, t.shadowOffsetY = Math.sin(o.dropShadowAngle) * O;
  } else
    t.shadowColor = "black", t.shadowBlur = 0, t.shadowOffsetX = 0, t.shadowOffsetY = 0;
  o.stroke && o.strokeThickness && t.strokeText(u, g, A + e.lineHeight - m.descent), o.fill && t.fillText(u, g, A + e.lineHeight - m.descent), t.setTransform(1, 0, 0, 1, 0, 0), t.fillStyle = "rgba(0, 0, 0, 0)";
}
function A2(i) {
  return Array.from ? Array.from(i) : i.split("");
}
function ST(i) {
  typeof i == "string" && (i = [i]);
  for (var t = [], e = 0, a = i.length; e < a; e++) {
    var n = i[e];
    if (Array.isArray(n)) {
      if (n.length !== 2)
        throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got " + n.length + ".");
      var s = n[0].charCodeAt(0), o = n[1].charCodeAt(0);
      if (o < s)
        throw new Error("[BitmapFont]: Invalid character range.");
      for (var u = s, m = o; u <= m; u++)
        t.push(String.fromCharCode(u));
    } else
      t.push.apply(t, A2(n));
  }
  if (t.length === 0)
    throw new Error("[BitmapFont]: Empty set when resolving characters.");
  return t;
}
function Cs(i) {
  return i.codePointAt ? i.codePointAt(0) : i.charCodeAt(0);
}
var li = (
  /** @class */
  function() {
    function i(t, e, a) {
      var n, s, o = t.info[0], u = t.common[0], m = t.page[0], g = t.distanceField[0], A = Mn(m.file), x = {};
      this._ownsTextures = a, this.font = o.face, this.size = o.size, this.lineHeight = u.lineHeight / A, this.chars = {}, this.pageTextures = x;
      for (var w = 0; w < t.page.length; w++) {
        var C = t.page[w], O = C.id, L = C.file;
        x[O] = e instanceof Array ? e[w] : e[L], g != null && g.fieldType && g.fieldType !== "none" && (x[O].baseTexture.alphaMode = Er.NO_PREMULTIPLIED_ALPHA, x[O].baseTexture.mipmap = Sr.OFF);
      }
      for (var w = 0; w < t.char.length; w++) {
        var D = t.char[w], O = D.id, H = D.page, k = t.char[w], G = k.x, z = k.y, Y = k.width, K = k.height, J = k.xoffset, nt = k.yoffset, q = k.xadvance;
        G /= A, z /= A, Y /= A, K /= A, J /= A, nt /= A, q /= A;
        var tt = new zt(G + x[H].frame.x / A, z + x[H].frame.y / A, Y, K);
        this.chars[O] = {
          xOffset: J,
          yOffset: nt,
          xAdvance: q,
          kerning: {},
          texture: new Ot(x[H].baseTexture, tt),
          page: H
        };
      }
      for (var w = 0; w < t.kerning.length; w++) {
        var lt = t.kerning[w], bt = lt.first, Et = lt.second, Bt = lt.amount;
        bt /= A, Et /= A, Bt /= A, this.chars[Et] && (this.chars[Et].kerning[bt] = Bt);
      }
      this.distanceFieldRange = g == null ? void 0 : g.distanceRange, this.distanceFieldType = (s = (n = g == null ? void 0 : g.fieldType) === null || n === void 0 ? void 0 : n.toLowerCase()) !== null && s !== void 0 ? s : "none";
    }
    return i.prototype.destroy = function() {
      for (var t in this.chars)
        this.chars[t].texture.destroy(), this.chars[t].texture = null;
      for (var t in this.pageTextures)
        this._ownsTextures && this.pageTextures[t].destroy(!0), this.pageTextures[t] = null;
      this.chars = null, this.pageTextures = null;
    }, i.install = function(t, e, a) {
      var n;
      if (t instanceof Bn)
        n = t;
      else {
        var s = Sl(t);
        if (!s)
          throw new Error("Unrecognized data format for font.");
        n = s.parse(t);
      }
      e instanceof Ot && (e = [e]);
      var o = new i(n, e, a);
      return i.available[o.font] = o, o;
    }, i.uninstall = function(t) {
      var e = i.available[t];
      if (!e)
        throw new Error("No font found named '" + t + "'");
      e.destroy(), delete i.available[t];
    }, i.from = function(t, e, a) {
      if (!t)
        throw new Error("[BitmapFont] Property `name` is required.");
      var n = Object.assign({}, i.defaultOptions, a), s = n.chars, o = n.padding, u = n.resolution, m = n.textureWidth, g = n.textureHeight, A = ST(s), x = e instanceof Ri ? e : new Ri(e), w = m, C = new Bn();
      C.info[0] = {
        face: x.fontFamily,
        size: x.fontSize
      }, C.common[0] = {
        lineHeight: x.fontSize
      };
      for (var O = 0, L = 0, D, H, k, G = 0, z = [], Y = 0; Y < A.length; Y++) {
        D || (D = mt.ADAPTER.createCanvas(), D.width = m, D.height = g, H = D.getContext("2d"), k = new Qt(D, { resolution: u }), z.push(new Ot(k)), C.page.push({
          id: z.length - 1,
          file: ""
        }));
        var K = A[Y], J = Br.measureText(K, x, !1, D), nt = J.width, q = Math.ceil(J.height), tt = Math.ceil((x.fontStyle === "italic" ? 2 : 1) * nt);
        if (L >= g - q * u) {
          if (L === 0)
            throw new Error("[BitmapFont] textureHeight " + g + "px is too small " + ("(fontFamily: '" + x.fontFamily + "', fontSize: " + x.fontSize + "px, char: '" + K + "')"));
          --Y, D = null, H = null, k = null, L = 0, O = 0, G = 0;
          continue;
        }
        if (G = Math.max(q + J.fontProperties.descent, G), tt * u + O >= w) {
          if (O === 0)
            throw new Error("[BitmapFont] textureWidth " + m + "px is too small " + ("(fontFamily: '" + x.fontFamily + "', fontSize: " + x.fontSize + "px, char: '" + K + "')"));
          --Y, L += G * u, L = Math.ceil(L), O = 0, G = 0;
          continue;
        }
        AT(D, H, J, O, L, u, x);
        var lt = Cs(J.text);
        C.char.push({
          id: lt,
          page: z.length - 1,
          x: O / u,
          y: L / u,
          width: tt,
          height: q,
          xoffset: 0,
          yoffset: 0,
          xadvance: Math.ceil(nt - (x.dropShadow ? x.dropShadowDistance : 0) - (x.stroke ? x.strokeThickness : 0))
        }), O += (tt + 2 * o) * u, O = Math.ceil(O);
      }
      if (!(a != null && a.skipKerning))
        for (var Y = 0, bt = A.length; Y < bt; Y++)
          for (var Et = A[Y], Bt = 0; Bt < bt; Bt++) {
            var pt = A[Bt], dt = H.measureText(Et).width, $t = H.measureText(pt).width, ve = H.measureText(Et + pt).width, Kt = ve - (dt + $t);
            Kt && C.kerning.push({
              first: Cs(Et),
              second: Cs(pt),
              amount: Kt
            });
          }
      var ft = new i(C, z, !0);
      return i.available[t] !== void 0 && i.uninstall(t), i.available[t] = ft, ft;
    }, i.ALPHA = [["a", "z"], ["A", "Z"], " "], i.NUMERIC = [["0", "9"]], i.ALPHANUMERIC = [["a", "z"], ["A", "Z"], ["0", "9"], " "], i.ASCII = [[" ", "~"]], i.defaultOptions = {
      resolution: 1,
      textureWidth: 512,
      textureHeight: 512,
      padding: 4,
      chars: i.ALPHANUMERIC
    }, i.available = {}, i;
  }()
), ET = `// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`, wT = `// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`, W0 = [], j0 = [], Q0 = [], IT = (
  /** @class */
  function(i) {
    xT(t, i);
    function t(e, a) {
      a === void 0 && (a = {});
      var n = i.call(this) || this;
      n._tint = 16777215;
      var s = Object.assign({}, t.styleDefaults, a), o = s.align, u = s.tint, m = s.maxWidth, g = s.letterSpacing, A = s.fontName, x = s.fontSize;
      if (!li.available[A])
        throw new Error('Missing BitmapFont "' + A + '"');
      return n._activePagesMeshData = [], n._textWidth = 0, n._textHeight = 0, n._align = o, n._tint = u, n._font = void 0, n._fontName = A, n._fontSize = x, n.text = e, n._maxWidth = m, n._maxLineHeight = 0, n._letterSpacing = g, n._anchor = new wi(function() {
        n.dirty = !0;
      }, n, 0, 0), n._roundPixels = mt.ROUND_PIXELS, n.dirty = !0, n._resolution = mt.RESOLUTION, n._autoResolution = !0, n._textureCache = {}, n;
    }
    return t.prototype.updateText = function() {
      for (var e, a = li.available[this._fontName], n = this.fontSize, s = n / a.size, o = new le(), u = [], m = [], g = [], A = this._text.replace(/(?:\r\n|\r)/g, `
`) || " ", x = A2(A), w = this._maxWidth * a.size / n, C = a.distanceFieldType === "none" ? W0 : j0, O = null, L = 0, D = 0, H = 0, k = -1, G = 0, z = 0, Y = 0, K = 0, J = 0; J < x.length; J++) {
        var nt = x[J], q = Cs(nt);
        if (/(?:\s)/.test(nt) && (k = J, G = L, K++), nt === "\r" || nt === `
`) {
          m.push(L), g.push(-1), D = Math.max(D, L), ++H, ++z, o.x = 0, o.y += a.lineHeight, O = null, K = 0;
          continue;
        }
        var tt = a.chars[q];
        if (tt) {
          O && tt.kerning[O] && (o.x += tt.kerning[O]);
          var lt = Q0.pop() || {
            texture: Ot.EMPTY,
            line: 0,
            charCode: 0,
            prevSpaces: 0,
            position: new le()
          };
          lt.texture = tt.texture, lt.line = H, lt.charCode = q, lt.position.x = o.x + tt.xOffset + this._letterSpacing / 2, lt.position.y = o.y + tt.yOffset, lt.prevSpaces = K, u.push(lt), L = lt.position.x + Math.max(tt.xAdvance - tt.xOffset, tt.texture.orig.width), o.x += tt.xAdvance + this._letterSpacing, Y = Math.max(Y, tt.yOffset + tt.texture.height), O = q, k !== -1 && w > 0 && o.x > w && (++z, ra(u, 1 + k - z, 1 + J - k), J = k, k = -1, m.push(G), g.push(u.length > 0 ? u[u.length - 1].prevSpaces : 0), D = Math.max(D, G), H++, o.x = 0, o.y += a.lineHeight, O = null, K = 0);
        }
      }
      var bt = x[x.length - 1];
      bt !== "\r" && bt !== `
` && (/(?:\s)/.test(bt) && (L = G), m.push(L), D = Math.max(D, L), g.push(-1));
      for (var Et = [], J = 0; J <= H; J++) {
        var Bt = 0;
        this._align === "right" ? Bt = D - m[J] : this._align === "center" ? Bt = (D - m[J]) / 2 : this._align === "justify" && (Bt = g[J] < 0 ? 0 : (D - m[J]) / g[J]), Et.push(Bt);
      }
      var pt = u.length, dt = {}, $t = [], ve = this._activePagesMeshData;
      C.push.apply(C, ve);
      for (var J = 0; J < pt; J++) {
        var Kt = u[J].texture, ft = Kt.baseTexture.uid;
        if (!dt[ft]) {
          var at = C.pop();
          if (!at) {
            var kt = new Xn(), Wt = void 0, Jt = void 0;
            a.distanceFieldType === "none" ? (Wt = new Ha(Ot.EMPTY), Jt = It.NORMAL) : (Wt = new Ha(Ot.EMPTY, { program: Xa.from(wT, ET), uniforms: { uFWidth: 0 } }), Jt = It.NORMAL_NPM);
            var fe = new Fa(kt, Wt);
            fe.blendMode = Jt, at = {
              index: 0,
              indexCount: 0,
              vertexCount: 0,
              uvsCount: 0,
              total: 0,
              mesh: fe,
              vertices: null,
              uvs: null,
              indices: null
            };
          }
          at.index = 0, at.indexCount = 0, at.vertexCount = 0, at.uvsCount = 0, at.total = 0;
          var oe = this._textureCache;
          oe[ft] = oe[ft] || new Ot(Kt.baseTexture), at.mesh.texture = oe[ft], at.mesh.tint = this._tint, $t.push(at), dt[ft] = at;
        }
        dt[ft].total++;
      }
      for (var J = 0; J < ve.length; J++)
        $t.indexOf(ve[J]) === -1 && this.removeChild(ve[J].mesh);
      for (var J = 0; J < $t.length; J++)
        $t[J].mesh.parent !== this && this.addChild($t[J].mesh);
      this._activePagesMeshData = $t;
      for (var J in dt) {
        var at = dt[J], he = at.total;
        if (!(((e = at.indices) === null || e === void 0 ? void 0 : e.length) > 6 * he) || at.vertices.length < Fa.BATCHABLE_SIZE * 2)
          at.vertices = new Float32Array(4 * 2 * he), at.uvs = new Float32Array(4 * 2 * he), at.indices = new Uint16Array(6 * he);
        else
          for (var Pe = at.total, He = at.vertices, me = Pe * 4 * 2; me < He.length; me++)
            He[me] = 0;
        at.mesh.size = 6 * he;
      }
      for (var J = 0; J < pt; J++) {
        var nt = u[J], Xt = nt.position.x + Et[nt.line] * (this._align === "justify" ? nt.prevSpaces : 1);
        this._roundPixels && (Xt = Math.round(Xt));
        var ee = Xt * s, re = nt.position.y * s, Kt = nt.texture, Gt = dt[Kt.baseTexture.uid], Be = Kt.frame, W = Kt._uvs, qt = Gt.index++;
        Gt.indices[qt * 6 + 0] = 0 + qt * 4, Gt.indices[qt * 6 + 1] = 1 + qt * 4, Gt.indices[qt * 6 + 2] = 2 + qt * 4, Gt.indices[qt * 6 + 3] = 0 + qt * 4, Gt.indices[qt * 6 + 4] = 2 + qt * 4, Gt.indices[qt * 6 + 5] = 3 + qt * 4, Gt.vertices[qt * 8 + 0] = ee, Gt.vertices[qt * 8 + 1] = re, Gt.vertices[qt * 8 + 2] = ee + Be.width * s, Gt.vertices[qt * 8 + 3] = re, Gt.vertices[qt * 8 + 4] = ee + Be.width * s, Gt.vertices[qt * 8 + 5] = re + Be.height * s, Gt.vertices[qt * 8 + 6] = ee, Gt.vertices[qt * 8 + 7] = re + Be.height * s, Gt.uvs[qt * 8 + 0] = W.x0, Gt.uvs[qt * 8 + 1] = W.y0, Gt.uvs[qt * 8 + 2] = W.x1, Gt.uvs[qt * 8 + 3] = W.y1, Gt.uvs[qt * 8 + 4] = W.x2, Gt.uvs[qt * 8 + 5] = W.y2, Gt.uvs[qt * 8 + 6] = W.x3, Gt.uvs[qt * 8 + 7] = W.y3;
      }
      this._textWidth = D * s, this._textHeight = (o.y + a.lineHeight) * s;
      for (var J in dt) {
        var at = dt[J];
        if (this.anchor.x !== 0 || this.anchor.y !== 0)
          for (var dr = 0, ii = this._textWidth * this.anchor.x, la = this._textHeight * this.anchor.y, ai = 0; ai < at.total; ai++)
            at.vertices[dr++] -= ii, at.vertices[dr++] -= la, at.vertices[dr++] -= ii, at.vertices[dr++] -= la, at.vertices[dr++] -= ii, at.vertices[dr++] -= la, at.vertices[dr++] -= ii, at.vertices[dr++] -= la;
        this._maxLineHeight = Y * s;
        var yi = at.mesh.geometry.getBuffer("aVertexPosition"), fa = at.mesh.geometry.getBuffer("aTextureCoord"), Ze = at.mesh.geometry.getIndex();
        yi.data = at.vertices, fa.data = at.uvs, Ze.data = at.indices, yi.update(), fa.update(), Ze.update();
      }
      for (var J = 0; J < u.length; J++)
        Q0.push(u[J]);
      this._font = a, this.dirty = !1;
    }, t.prototype.updateTransform = function() {
      this.validate(), this.containerUpdateTransform();
    }, t.prototype._render = function(e) {
      this._autoResolution && this._resolution !== e.resolution && (this._resolution = e.resolution, this.dirty = !0);
      var a = li.available[this._fontName], n = a.distanceFieldRange, s = a.distanceFieldType, o = a.size;
      if (s !== "none")
        for (var u = this.worldTransform, m = u.a, g = u.b, A = u.c, x = u.d, w = Math.sqrt(m * m + g * g), C = Math.sqrt(A * A + x * x), O = (Math.abs(w) + Math.abs(C)) / 2, L = this.fontSize / o, D = 0, H = this._activePagesMeshData; D < H.length; D++) {
          var k = H[D];
          k.mesh.shader.uniforms.uFWidth = O * n * L * this._resolution;
        }
      i.prototype._render.call(this, e);
    }, t.prototype.getLocalBounds = function() {
      return this.validate(), i.prototype.getLocalBounds.call(this);
    }, t.prototype.validate = function() {
      var e = li.available[this._fontName];
      if (!e)
        throw new Error('Missing BitmapFont "' + this._fontName + '"');
      this._font !== e && (this.dirty = !0), this.dirty && this.updateText();
    }, Object.defineProperty(t.prototype, "tint", {
      /**
       * The tint of the BitmapText object.
       * @default 0xffffff
       */
      get: function() {
        return this._tint;
      },
      set: function(e) {
        if (this._tint !== e) {
          this._tint = e;
          for (var a = 0; a < this._activePagesMeshData.length; a++)
            this._activePagesMeshData[a].mesh.tint = e;
        }
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "align", {
      /**
       * The alignment of the BitmapText object.
       * @member {string}
       * @default 'left'
       */
      get: function() {
        return this._align;
      },
      set: function(e) {
        this._align !== e && (this._align = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fontName", {
      /** The name of the BitmapFont. */
      get: function() {
        return this._fontName;
      },
      set: function(e) {
        if (!li.available[e])
          throw new Error('Missing BitmapFont "' + e + '"');
        this._fontName !== e && (this._fontName = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fontSize", {
      /** The size of the font to display. */
      get: function() {
        var e;
        return (e = this._fontSize) !== null && e !== void 0 ? e : li.available[this._fontName].size;
      },
      set: function(e) {
        this._fontSize !== e && (this._fontSize = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "anchor", {
      /**
       * The anchor sets the origin point of the text.
       *
       * The default is `(0,0)`, this means the text's origin is the top left.
       *
       * Setting the anchor to `(0.5,0.5)` means the text's origin is centered.
       *
       * Setting the anchor to `(1,1)` would mean the text's origin point will be the bottom right corner.
       */
      get: function() {
        return this._anchor;
      },
      set: function(e) {
        typeof e == "number" ? this._anchor.set(e) : this._anchor.copyFrom(e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "text", {
      /** The text of the BitmapText object. */
      get: function() {
        return this._text;
      },
      set: function(e) {
        e = String(e == null ? "" : e), this._text !== e && (this._text = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "maxWidth", {
      /**
       * The max width of this bitmap text in pixels. If the text provided is longer than the
       * value provided, line breaks will be automatically inserted in the last whitespace.
       * Disable by setting the value to 0.
       */
      get: function() {
        return this._maxWidth;
      },
      set: function(e) {
        this._maxWidth !== e && (this._maxWidth = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "maxLineHeight", {
      /**
       * The max line height. This is useful when trying to use the total height of the Text,
       * i.e. when trying to vertically align.
       * @readonly
       */
      get: function() {
        return this.validate(), this._maxLineHeight;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "textWidth", {
      /**
       * The width of the overall text, different from fontSize,
       * which is defined in the style object.
       * @readonly
       */
      get: function() {
        return this.validate(), this._textWidth;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "letterSpacing", {
      /** Additional space between characters. */
      get: function() {
        return this._letterSpacing;
      },
      set: function(e) {
        this._letterSpacing !== e && (this._letterSpacing = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "roundPixels", {
      /**
       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
       * Advantages can include sharper image quality (like text) and faster rendering on canvas.
       * The main disadvantage is movement of objects may appear less smooth.
       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}
       * @default PIXI.settings.ROUND_PIXELS
       */
      get: function() {
        return this._roundPixels;
      },
      set: function(e) {
        e !== this._roundPixels && (this._roundPixels = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "textHeight", {
      /**
       * The height of the overall text, different from fontSize,
       * which is defined in the style object.
       * @readonly
       */
      get: function() {
        return this.validate(), this._textHeight;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "resolution", {
      /**
       * The resolution / device pixel ratio of the canvas.
       *
       * This is set to automatically match the renderer resolution by default, but can be overridden by setting manually.
       * @default 1
       */
      get: function() {
        return this._resolution;
      },
      set: function(e) {
        this._autoResolution = !1, this._resolution !== e && (this._resolution = e, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.destroy = function(e) {
      var a = this._textureCache, n = li.available[this._fontName], s = n.distanceFieldType === "none" ? W0 : j0;
      s.push.apply(s, this._activePagesMeshData);
      for (var o = 0, u = this._activePagesMeshData; o < u.length; o++) {
        var m = u[o];
        this.removeChild(m.mesh);
      }
      this._activePagesMeshData = [], s.filter(function(x) {
        return a[x.mesh.texture.baseTexture.uid];
      }).forEach(function(x) {
        x.mesh.texture = Ot.EMPTY;
      });
      for (var g in a) {
        var A = a[g];
        A.destroy(), delete a[g];
      }
      this._font = null, this._textureCache = null, i.prototype.destroy.call(this, e);
    }, t.styleDefaults = {
      align: "left",
      tint: 16777215,
      maxWidth: 0,
      letterSpacing: 0
    }, t;
  }(wr)
), S2 = (
  /** @class */
  function() {
    function i() {
    }
    return i.add = function() {
      Se.setExtensionXhrType("fnt", Se.XHR_RESPONSE_TYPE.TEXT);
    }, i.use = function(t, e) {
      var a = Sl(t.data);
      if (!a) {
        e();
        return;
      }
      for (var n = i.getBaseUrl(this, t), s = a.parse(t.data), o = {}, u = function(L) {
        o[L.metadata.pageFile] = L.texture, Object.keys(o).length === s.page.length && (t.bitmapFont = li.install(s, o, !0), e());
      }, m = 0; m < s.page.length; ++m) {
        var g = s.page[m].file, A = n + g, x = !1;
        for (var w in this.resources) {
          var C = this.resources[w];
          if (C.url === A) {
            C.metadata.pageFile = g, C.texture ? u(C) : C.onAfterMiddleware.add(u), x = !0;
            break;
          }
        }
        if (!x) {
          var O = {
            crossOrigin: t.crossOrigin,
            loadType: Se.LOAD_TYPE.IMAGE,
            metadata: Object.assign({ pageFile: g }, t.metadata.imageMetadata),
            parentResource: t
          };
          this.add(A, O, u);
        }
      }
    }, i.getBaseUrl = function(t, e) {
      var a = e.isDataUrl ? "" : i.dirname(e.url);
      return e.isDataUrl && (a === "." && (a = ""), t.baseUrl && a && t.baseUrl.charAt(t.baseUrl.length - 1) === "/" && (a += "/")), a = a.replace(t.baseUrl, ""), a && a.charAt(a.length - 1) !== "/" && (a += "/"), a;
    }, i.dirname = function(t) {
      var e = t.replace(/\\/g, "/").replace(/\/$/, "").replace(/\/[^\/]*$/, "");
      return e === t ? "." : e === "" ? "/" : e;
    }, i.extension = se.Loader, i;
  }()
);
/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var ou = function(i, t) {
  return ou = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, ou(i, t);
};
function PT(i, t) {
  ou(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var MT = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`, CT = (
  /** @class */
  function(i) {
    PT(t, i);
    function t(e) {
      e === void 0 && (e = 1);
      var a = i.call(this, fd, MT, { uAlpha: 1 }) || this;
      return a.alpha = e, a;
    }
    return Object.defineProperty(t.prototype, "alpha", {
      /**
       * Coefficient for alpha multiplication
       * @default 1
       */
      get: function() {
        return this.uniforms.uAlpha;
      },
      set: function(e) {
        this.uniforms.uAlpha = e;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(gi)
);
/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var hu = function(i, t) {
  return hu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, hu(i, t);
};
function E2(i, t) {
  hu(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var OT = `
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;
function $T(i, t) {
  var e = Math.ceil(i / 2), a = OT, n = "", s;
  t ? s = "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);" : s = "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";
  for (var o = 0; o < i; o++) {
    var u = s.replace("%index%", o.toString());
    u = u.replace("%sampleIndex%", o - (e - 1) + ".0"), n += u, n += `
`;
  }
  return a = a.replace("%blur%", n), a = a.replace("%size%", i.toString()), a;
}
var RT = {
  5: [0.153388, 0.221461, 0.250301],
  7: [0.071303, 0.131514, 0.189879, 0.214607],
  9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],
  11: [93e-4, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],
  13: [2406e-6, 9255e-6, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],
  15: [489e-6, 2403e-6, 9246e-6, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448]
}, LT = [
  "varying vec2 vBlurTexCoords[%size%];",
  "uniform sampler2D uSampler;",
  "void main(void)",
  "{",
  "    gl_FragColor = vec4(0.0);",
  "    %blur%",
  "}"
].join(`
`);
function DT(i) {
  for (var t = RT[i], e = t.length, a = LT, n = "", s = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;", o, u = 0; u < i; u++) {
    var m = s.replace("%index%", u.toString());
    o = u, u >= e && (o = i - u - 1), m = m.replace("%value%", t[o].toString()), n += m, n += `
`;
  }
  return a = a.replace("%blur%", n), a = a.replace("%size%", i.toString()), a;
}
var uu = (
  /** @class */
  function(i) {
    E2(t, i);
    function t(e, a, n, s, o) {
      a === void 0 && (a = 8), n === void 0 && (n = 4), s === void 0 && (s = mt.FILTER_RESOLUTION), o === void 0 && (o = 5);
      var u = this, m = $T(o, e), g = DT(o);
      return u = i.call(
        this,
        // vertex shader
        m,
        // fragment shader
        g
      ) || this, u.horizontal = e, u.resolution = s, u._quality = 0, u.quality = n, u.blur = a, u;
    }
    return t.prototype.apply = function(e, a, n, s) {
      if (n ? this.horizontal ? this.uniforms.strength = 1 / n.width * (n.width / a.width) : this.uniforms.strength = 1 / n.height * (n.height / a.height) : this.horizontal ? this.uniforms.strength = 1 / e.renderer.width * (e.renderer.width / a.width) : this.uniforms.strength = 1 / e.renderer.height * (e.renderer.height / a.height), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, this.passes === 1)
        e.applyFilter(this, a, n, s);
      else {
        var o = e.getFilterTexture(), u = e.renderer, m = a, g = o;
        this.state.blend = !1, e.applyFilter(this, m, g, yr.CLEAR);
        for (var A = 1; A < this.passes - 1; A++) {
          e.bindAndClear(m, yr.BLIT), this.uniforms.uSampler = g;
          var x = g;
          g = m, m = x, u.shader.bind(this), u.geometry.draw(5);
        }
        this.state.blend = !0, e.applyFilter(this, g, n, s), e.returnFilterTexture(o);
      }
    }, Object.defineProperty(t.prototype, "blur", {
      /**
       * Sets the strength of both the blur.
       * @default 16
       */
      get: function() {
        return this.strength;
      },
      set: function(e) {
        this.padding = 1 + Math.abs(e) * 2, this.strength = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "quality", {
      /**
       * Sets the quality of the blur by modifying the number of passes. More passes means higher
       * quality bluring but the lower the performance.
       * @default 4
       */
      get: function() {
        return this._quality;
      },
      set: function(e) {
        this._quality = e, this.passes = e;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(gi)
), NT = (
  /** @class */
  function(i) {
    E2(t, i);
    function t(e, a, n, s) {
      e === void 0 && (e = 8), a === void 0 && (a = 4), n === void 0 && (n = mt.FILTER_RESOLUTION), s === void 0 && (s = 5);
      var o = i.call(this) || this;
      return o.blurXFilter = new uu(!0, e, a, n, s), o.blurYFilter = new uu(!1, e, a, n, s), o.resolution = n, o.quality = a, o.blur = e, o.repeatEdgePixels = !1, o;
    }
    return t.prototype.apply = function(e, a, n, s) {
      var o = Math.abs(this.blurXFilter.strength), u = Math.abs(this.blurYFilter.strength);
      if (o && u) {
        var m = e.getFilterTexture();
        this.blurXFilter.apply(e, a, m, yr.CLEAR), this.blurYFilter.apply(e, m, n, s), e.returnFilterTexture(m);
      } else
        u ? this.blurYFilter.apply(e, a, n, s) : this.blurXFilter.apply(e, a, n, s);
    }, t.prototype.updatePadding = function() {
      this._repeatEdgePixels ? this.padding = 0 : this.padding = Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) * 2;
    }, Object.defineProperty(t.prototype, "blur", {
      /**
       * Sets the strength of both the blurX and blurY properties simultaneously
       * @default 2
       */
      get: function() {
        return this.blurXFilter.blur;
      },
      set: function(e) {
        this.blurXFilter.blur = this.blurYFilter.blur = e, this.updatePadding();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "quality", {
      /**
       * Sets the number of passes for blur. More passes means higher quality bluring.
       * @default 1
       */
      get: function() {
        return this.blurXFilter.quality;
      },
      set: function(e) {
        this.blurXFilter.quality = this.blurYFilter.quality = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "blurX", {
      /**
       * Sets the strength of the blurX property
       * @default 2
       */
      get: function() {
        return this.blurXFilter.blur;
      },
      set: function(e) {
        this.blurXFilter.blur = e, this.updatePadding();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "blurY", {
      /**
       * Sets the strength of the blurY property
       * @default 2
       */
      get: function() {
        return this.blurYFilter.blur;
      },
      set: function(e) {
        this.blurYFilter.blur = e, this.updatePadding();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "blendMode", {
      /**
       * Sets the blendmode of the filter
       * @default PIXI.BLEND_MODES.NORMAL
       */
      get: function() {
        return this.blurYFilter.blendMode;
      },
      set: function(e) {
        this.blurYFilter.blendMode = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "repeatEdgePixels", {
      /**
       * If set to true the edge of the target will be clamped
       * @default false
       */
      get: function() {
        return this._repeatEdgePixels;
      },
      set: function(e) {
        this._repeatEdgePixels = e, this.updatePadding();
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(gi)
);
/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var lu = function(i, t) {
  return lu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, lu(i, t);
};
function FT(i, t) {
  lu(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var HT = `varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`, fu = (
  /** @class */
  function(i) {
    FT(t, i);
    function t() {
      var e = this, a = {
        m: new Float32Array([
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0
        ]),
        uAlpha: 1
      };
      return e = i.call(this, il, HT, a) || this, e.alpha = 1, e;
    }
    return t.prototype._loadMatrix = function(e, a) {
      a === void 0 && (a = !1);
      var n = e;
      a && (this._multiply(n, this.uniforms.m, e), n = this._colorMatrix(n)), this.uniforms.m = n;
    }, t.prototype._multiply = function(e, a, n) {
      return e[0] = a[0] * n[0] + a[1] * n[5] + a[2] * n[10] + a[3] * n[15], e[1] = a[0] * n[1] + a[1] * n[6] + a[2] * n[11] + a[3] * n[16], e[2] = a[0] * n[2] + a[1] * n[7] + a[2] * n[12] + a[3] * n[17], e[3] = a[0] * n[3] + a[1] * n[8] + a[2] * n[13] + a[3] * n[18], e[4] = a[0] * n[4] + a[1] * n[9] + a[2] * n[14] + a[3] * n[19] + a[4], e[5] = a[5] * n[0] + a[6] * n[5] + a[7] * n[10] + a[8] * n[15], e[6] = a[5] * n[1] + a[6] * n[6] + a[7] * n[11] + a[8] * n[16], e[7] = a[5] * n[2] + a[6] * n[7] + a[7] * n[12] + a[8] * n[17], e[8] = a[5] * n[3] + a[6] * n[8] + a[7] * n[13] + a[8] * n[18], e[9] = a[5] * n[4] + a[6] * n[9] + a[7] * n[14] + a[8] * n[19] + a[9], e[10] = a[10] * n[0] + a[11] * n[5] + a[12] * n[10] + a[13] * n[15], e[11] = a[10] * n[1] + a[11] * n[6] + a[12] * n[11] + a[13] * n[16], e[12] = a[10] * n[2] + a[11] * n[7] + a[12] * n[12] + a[13] * n[17], e[13] = a[10] * n[3] + a[11] * n[8] + a[12] * n[13] + a[13] * n[18], e[14] = a[10] * n[4] + a[11] * n[9] + a[12] * n[14] + a[13] * n[19] + a[14], e[15] = a[15] * n[0] + a[16] * n[5] + a[17] * n[10] + a[18] * n[15], e[16] = a[15] * n[1] + a[16] * n[6] + a[17] * n[11] + a[18] * n[16], e[17] = a[15] * n[2] + a[16] * n[7] + a[17] * n[12] + a[18] * n[17], e[18] = a[15] * n[3] + a[16] * n[8] + a[17] * n[13] + a[18] * n[18], e[19] = a[15] * n[4] + a[16] * n[9] + a[17] * n[14] + a[18] * n[19] + a[19], e;
    }, t.prototype._colorMatrix = function(e) {
      var a = new Float32Array(e);
      return a[4] /= 255, a[9] /= 255, a[14] /= 255, a[19] /= 255, a;
    }, t.prototype.brightness = function(e, a) {
      var n = [
        e,
        0,
        0,
        0,
        0,
        0,
        e,
        0,
        0,
        0,
        0,
        0,
        e,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, a);
    }, t.prototype.tint = function(e, a) {
      var n = e >> 16 & 255, s = e >> 8 & 255, o = e & 255, u = [
        n / 255,
        0,
        0,
        0,
        0,
        0,
        s / 255,
        0,
        0,
        0,
        0,
        0,
        o / 255,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(u, a);
    }, t.prototype.greyscale = function(e, a) {
      var n = [
        e,
        e,
        e,
        0,
        0,
        e,
        e,
        e,
        0,
        0,
        e,
        e,
        e,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, a);
    }, t.prototype.blackAndWhite = function(e) {
      var a = [
        0.3,
        0.6,
        0.1,
        0,
        0,
        0.3,
        0.6,
        0.1,
        0,
        0,
        0.3,
        0.6,
        0.1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.hue = function(e, a) {
      e = (e || 0) / 180 * Math.PI;
      var n = Math.cos(e), s = Math.sin(e), o = Math.sqrt, u = 1 / 3, m = o(u), g = n + (1 - n) * u, A = u * (1 - n) - m * s, x = u * (1 - n) + m * s, w = u * (1 - n) + m * s, C = n + u * (1 - n), O = u * (1 - n) - m * s, L = u * (1 - n) - m * s, D = u * (1 - n) + m * s, H = n + u * (1 - n), k = [
        g,
        A,
        x,
        0,
        0,
        w,
        C,
        O,
        0,
        0,
        L,
        D,
        H,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(k, a);
    }, t.prototype.contrast = function(e, a) {
      var n = (e || 0) + 1, s = -0.5 * (n - 1), o = [
        n,
        0,
        0,
        0,
        s,
        0,
        n,
        0,
        0,
        s,
        0,
        0,
        n,
        0,
        s,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(o, a);
    }, t.prototype.saturate = function(e, a) {
      e === void 0 && (e = 0);
      var n = e * 2 / 3 + 1, s = (n - 1) * -0.5, o = [
        n,
        s,
        s,
        0,
        0,
        s,
        n,
        s,
        0,
        0,
        s,
        s,
        n,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(o, a);
    }, t.prototype.desaturate = function() {
      this.saturate(-1);
    }, t.prototype.negative = function(e) {
      var a = [
        -1,
        0,
        0,
        1,
        0,
        0,
        -1,
        0,
        1,
        0,
        0,
        0,
        -1,
        1,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.sepia = function(e) {
      var a = [
        0.393,
        0.7689999,
        0.18899999,
        0,
        0,
        0.349,
        0.6859999,
        0.16799999,
        0,
        0,
        0.272,
        0.5339999,
        0.13099999,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.technicolor = function(e) {
      var a = [
        1.9125277891456083,
        -0.8545344976951645,
        -0.09155508482755585,
        0,
        11.793603434377337,
        -0.3087833385928097,
        1.7658908555458428,
        -0.10601743074722245,
        0,
        -70.35205161461398,
        -0.231103377548616,
        -0.7501899197440212,
        1.847597816108189,
        0,
        30.950940869491138,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.polaroid = function(e) {
      var a = [
        1.438,
        -0.062,
        -0.062,
        0,
        0,
        -0.122,
        1.378,
        -0.122,
        0,
        0,
        -0.016,
        -0.016,
        1.483,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.toBGR = function(e) {
      var a = [
        0,
        0,
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.kodachrome = function(e) {
      var a = [
        1.1285582396593525,
        -0.3967382283601348,
        -0.03992559172921793,
        0,
        63.72958762196502,
        -0.16404339962244616,
        1.0835251566291304,
        -0.05498805115633132,
        0,
        24.732407896706203,
        -0.16786010706155763,
        -0.5603416277695248,
        1.6014850761964943,
        0,
        35.62982807460946,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.browni = function(e) {
      var a = [
        0.5997023498159715,
        0.34553243048391263,
        -0.2708298674538042,
        0,
        47.43192855600873,
        -0.037703249837783157,
        0.8609577587992641,
        0.15059552388459913,
        0,
        -36.96841498319127,
        0.24113635128153335,
        -0.07441037908422492,
        0.44972182064877153,
        0,
        -7.562075277591283,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.vintage = function(e) {
      var a = [
        0.6279345635605994,
        0.3202183420819367,
        -0.03965408211312453,
        0,
        9.651285835294123,
        0.02578397704808868,
        0.6441188644374771,
        0.03259127616149294,
        0,
        7.462829176470591,
        0.0466055556782719,
        -0.0851232987247891,
        0.5241648018700465,
        0,
        5.159190588235296,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.colorTone = function(e, a, n, s, o) {
      e = e || 0.2, a = a || 0.15, n = n || 16770432, s = s || 3375104;
      var u = (n >> 16 & 255) / 255, m = (n >> 8 & 255) / 255, g = (n & 255) / 255, A = (s >> 16 & 255) / 255, x = (s >> 8 & 255) / 255, w = (s & 255) / 255, C = [
        0.3,
        0.59,
        0.11,
        0,
        0,
        u,
        m,
        g,
        e,
        0,
        A,
        x,
        w,
        a,
        0,
        u - A,
        m - x,
        g - w,
        0,
        0
      ];
      this._loadMatrix(C, o);
    }, t.prototype.night = function(e, a) {
      e = e || 0.1;
      var n = [
        e * -2,
        -e,
        0,
        0,
        0,
        -e,
        0,
        e,
        0,
        0,
        0,
        e,
        e * 2,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, a);
    }, t.prototype.predator = function(e, a) {
      var n = [
        // row 1
        11.224130630493164 * e,
        -4.794486999511719 * e,
        -2.8746118545532227 * e,
        0 * e,
        0.40342438220977783 * e,
        // row 2
        -3.6330697536468506 * e,
        9.193157196044922 * e,
        -2.951810836791992 * e,
        0 * e,
        -1.316135048866272 * e,
        // row 3
        -3.2184197902679443 * e,
        -4.2375030517578125 * e,
        7.476448059082031 * e,
        0 * e,
        0.8044459223747253 * e,
        // row 4
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(n, a);
    }, t.prototype.lsd = function(e) {
      var a = [
        2,
        -0.4,
        0.5,
        0,
        0,
        -0.5,
        2,
        -0.4,
        0,
        0,
        -0.4,
        -0.5,
        3,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(a, e);
    }, t.prototype.reset = function() {
      var e = [
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(e, !1);
    }, Object.defineProperty(t.prototype, "matrix", {
      /**
       * The matrix of the color matrix filter
       * @member {number[]}
       * @default [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]
       */
      get: function() {
        return this.uniforms.m;
      },
      set: function(e) {
        this.uniforms.m = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "alpha", {
      /**
       * The opacity value to use when mixing the original and resultant colors.
       *
       * When the value is 0, the original color is used without modification.
       * When the value is 1, the result color is used.
       * When in the range (0, 1) the color is interpolated between the original and result by this amount.
       * @default 1
       */
      get: function() {
        return this.uniforms.uAlpha;
      },
      set: function(e) {
        this.uniforms.uAlpha = e;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(gi)
);
fu.prototype.grayscale = fu.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var cu = function(i, t) {
  return cu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, cu(i, t);
};
function BT(i, t) {
  cu(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var kT = `varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`, UT = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`, GT = (
  /** @class */
  function(i) {
    BT(t, i);
    function t(e, a) {
      var n = this, s = new be();
      return e.renderable = !1, n = i.call(this, UT, kT, {
        mapSampler: e._texture,
        filterMatrix: s,
        scale: { x: 1, y: 1 },
        rotation: new Float32Array([1, 0, 0, 1])
      }) || this, n.maskSprite = e, n.maskMatrix = s, a == null && (a = 20), n.scale = new le(a, a), n;
    }
    return t.prototype.apply = function(e, a, n, s) {
      this.uniforms.filterMatrix = e.calculateSpriteMatrix(this.maskMatrix, this.maskSprite), this.uniforms.scale.x = this.scale.x, this.uniforms.scale.y = this.scale.y;
      var o = this.maskSprite.worldTransform, u = Math.sqrt(o.a * o.a + o.b * o.b), m = Math.sqrt(o.c * o.c + o.d * o.d);
      u !== 0 && m !== 0 && (this.uniforms.rotation[0] = o.a / u, this.uniforms.rotation[1] = o.b / u, this.uniforms.rotation[2] = o.c / m, this.uniforms.rotation[3] = o.d / m), e.applyFilter(this, a, n, s);
    }, Object.defineProperty(t.prototype, "map", {
      /** The texture used for the displacement map. Must be power of 2 sized texture. */
      get: function() {
        return this.uniforms.mapSampler;
      },
      set: function(e) {
        this.uniforms.mapSampler = e;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(gi)
);
/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var du = function(i, t) {
  return du = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, du(i, t);
};
function XT(i, t) {
  du(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var VT = `
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`, YT = `varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`, zT = (
  /** @class */
  function(i) {
    XT(t, i);
    function t() {
      return i.call(this, VT, YT) || this;
    }
    return t;
  }(gi)
);
/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var pu = function(i, t) {
  return pu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, pu(i, t);
};
function KT(i, t) {
  pu(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var WT = `precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`, jT = (
  /** @class */
  function(i) {
    KT(t, i);
    function t(e, a) {
      e === void 0 && (e = 0.5), a === void 0 && (a = Math.random());
      var n = i.call(this, il, WT, {
        uNoise: 0,
        uSeed: 0
      }) || this;
      return n.noise = e, n.seed = a, n;
    }
    return Object.defineProperty(t.prototype, "noise", {
      /**
       * The amount of noise to apply, this value should be in the range (0, 1].
       * @default 0.5
       */
      get: function() {
        return this.uniforms.uNoise;
      },
      set: function(e) {
        this.uniforms.uNoise = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "seed", {
      /** A seed value to apply to the random noise generation. `Math.random()` is a good value to use. */
      get: function() {
        return this.uniforms.uSeed;
      },
      set: function(e) {
        this.uniforms.uSeed = e;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(gi)
);
/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var w2 = new be();
Ie.prototype._cacheAsBitmap = !1;
Ie.prototype._cacheData = null;
Ie.prototype._cacheAsBitmapResolution = null;
Ie.prototype._cacheAsBitmapMultisample = _e.NONE;
var QT = (
  /** @class */
  /* @__PURE__ */ function() {
    function i() {
      this.textureCacheId = null, this.originalRender = null, this.originalRenderCanvas = null, this.originalCalculateBounds = null, this.originalGetLocalBounds = null, this.originalUpdateTransform = null, this.originalDestroy = null, this.originalMask = null, this.originalFilterArea = null, this.originalContainsPoint = null, this.sprite = null;
    }
    return i;
  }()
);
Object.defineProperties(Ie.prototype, {
  /**
   * The resolution to use for cacheAsBitmap. By default this will use the renderer's resolution
   * but can be overriden for performance. Lower values will reduce memory usage at the expense
   * of render quality. A falsey value of `null` or `0` will default to the renderer's resolution.
   * If `cacheAsBitmap` is set to `true`, this will re-render with the new resolution.
   * @member {number} cacheAsBitmapResolution
   * @memberof PIXI.DisplayObject#
   * @default null
   */
  cacheAsBitmapResolution: {
    get: function() {
      return this._cacheAsBitmapResolution;
    },
    set: function(i) {
      i !== this._cacheAsBitmapResolution && (this._cacheAsBitmapResolution = i, this.cacheAsBitmap && (this.cacheAsBitmap = !1, this.cacheAsBitmap = !0));
    }
  },
  /**
   * The number of samples to use for cacheAsBitmap. If set to `null`, the renderer's
   * sample count is used.
   * If `cacheAsBitmap` is set to `true`, this will re-render with the new number of samples.
   * @member {number} cacheAsBitmapMultisample
   * @memberof PIXI.DisplayObject#
   * @default PIXI.MSAA_QUALITY.NONE
   */
  cacheAsBitmapMultisample: {
    get: function() {
      return this._cacheAsBitmapMultisample;
    },
    set: function(i) {
      i !== this._cacheAsBitmapMultisample && (this._cacheAsBitmapMultisample = i, this.cacheAsBitmap && (this.cacheAsBitmap = !1, this.cacheAsBitmap = !0));
    }
  },
  /**
   * Set this to true if you want this display object to be cached as a bitmap.
   * This basically takes a snap shot of the display object as it is at that moment. It can
   * provide a performance benefit for complex static displayObjects.
   * To remove simply set this property to `false`
   *
   * IMPORTANT GOTCHA - Make sure that all your textures are preloaded BEFORE setting this property to true
   * as it will take a snapshot of what is currently there. If the textures have not loaded then they will not appear.
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  cacheAsBitmap: {
    get: function() {
      return this._cacheAsBitmap;
    },
    set: function(i) {
      if (this._cacheAsBitmap !== i) {
        this._cacheAsBitmap = i;
        var t;
        i ? (this._cacheData || (this._cacheData = new QT()), t = this._cacheData, t.originalRender = this.render, t.originalRenderCanvas = this.renderCanvas, t.originalUpdateTransform = this.updateTransform, t.originalCalculateBounds = this.calculateBounds, t.originalGetLocalBounds = this.getLocalBounds, t.originalDestroy = this.destroy, t.originalContainsPoint = this.containsPoint, t.originalMask = this._mask, t.originalFilterArea = this.filterArea, this.render = this._renderCached, this.renderCanvas = this._renderCachedCanvas, this.destroy = this._cacheAsBitmapDestroy) : (t = this._cacheData, t.sprite && this._destroyCachedDisplayObject(), this.render = t.originalRender, this.renderCanvas = t.originalRenderCanvas, this.calculateBounds = t.originalCalculateBounds, this.getLocalBounds = t.originalGetLocalBounds, this.destroy = t.originalDestroy, this.updateTransform = t.originalUpdateTransform, this.containsPoint = t.originalContainsPoint, this._mask = t.originalMask, this.filterArea = t.originalFilterArea);
      }
    }
  }
});
Ie.prototype._renderCached = function(t) {
  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(t), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._render(t));
};
Ie.prototype._initCachedDisplayObject = function(t) {
  var e;
  if (!(this._cacheData && this._cacheData.sprite)) {
    var a = this.alpha;
    this.alpha = 1, t.batch.flush();
    var n = this.getLocalBounds(null, !0).clone();
    if (this.filters && this.filters.length) {
      var s = this.filters[0].padding;
      n.pad(s);
    }
    n.ceil(mt.RESOLUTION);
    var o = t.renderTexture.current, u = t.renderTexture.sourceFrame.clone(), m = t.renderTexture.destinationFrame.clone(), g = t.projection.transform, A = Oi.create({
      width: n.width,
      height: n.height,
      resolution: this.cacheAsBitmapResolution || t.resolution,
      multisample: (e = this.cacheAsBitmapMultisample) !== null && e !== void 0 ? e : t.multisample
    }), x = "cacheAsBitmap_" + Ci();
    this._cacheData.textureCacheId = x, Qt.addToCache(A.baseTexture, x), Ot.addToCache(A, x);
    var w = this.transform.localTransform.copyTo(w2).invert().translate(-n.x, -n.y);
    this.render = this._cacheData.originalRender, t.render(this, { renderTexture: A, clear: !0, transform: w, skipUpdateTransform: !1 }), t.framebuffer.blit(), t.projection.transform = g, t.renderTexture.bind(o, u, m), this.render = this._renderCached, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null, this.alpha = a;
    var C = new Va(A);
    C.transform.worldTransform = this.transform.worldTransform, C.anchor.x = -(n.x / n.width), C.anchor.y = -(n.y / n.height), C.alpha = a, C._bounds = this._bounds, this._cacheData.sprite = C, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.enableTempParent(), this.updateTransform(), this.disableTempParent(null)), this.containsPoint = C.containsPoint.bind(C);
  }
};
Ie.prototype._renderCachedCanvas = function(t) {
  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(t), this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._renderCanvas(t));
};
Ie.prototype._initCachedDisplayObjectCanvas = function(t) {
  if (!(this._cacheData && this._cacheData.sprite)) {
    var e = this.getLocalBounds(null, !0), a = this.alpha;
    this.alpha = 1;
    var n = t.context, s = t._projTransform;
    e.ceil(mt.RESOLUTION);
    var o = Oi.create({ width: e.width, height: e.height }), u = "cacheAsBitmap_" + Ci();
    this._cacheData.textureCacheId = u, Qt.addToCache(o.baseTexture, u), Ot.addToCache(o, u);
    var m = w2;
    this.transform.localTransform.copyTo(m), m.invert(), m.tx -= e.x, m.ty -= e.y, this.renderCanvas = this._cacheData.originalRenderCanvas, t.render(this, { renderTexture: o, clear: !0, transform: m, skipUpdateTransform: !1 }), t.context = n, t._projTransform = s, this.renderCanvas = this._renderCachedCanvas, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null, this.alpha = a;
    var g = new Va(o);
    g.transform.worldTransform = this.transform.worldTransform, g.anchor.x = -(e.x / e.width), g.anchor.y = -(e.y / e.height), g.alpha = a, g._bounds = this._bounds, this._cacheData.sprite = g, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.parent = t._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.containsPoint = g.containsPoint.bind(g);
  }
};
Ie.prototype._calculateCachedBounds = function() {
  this._bounds.clear(), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite._calculateBounds(), this._bounds.updateID = this._boundsID;
};
Ie.prototype._getCachedLocalBounds = function() {
  return this._cacheData.sprite.getLocalBounds(null);
};
Ie.prototype._destroyCachedDisplayObject = function() {
  this._cacheData.sprite._texture.destroy(!0), this._cacheData.sprite = null, Qt.removeFromCache(this._cacheData.textureCacheId), Ot.removeFromCache(this._cacheData.textureCacheId), this._cacheData.textureCacheId = null;
};
Ie.prototype._cacheAsBitmapDestroy = function(t) {
  this.cacheAsBitmap = !1, this.destroy(t);
};
/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ie.prototype.name = null;
wr.prototype.getChildByName = function(t, e) {
  for (var a = 0, n = this.children.length; a < n; a++)
    if (this.children[a].name === t)
      return this.children[a];
  if (e)
    for (var a = 0, n = this.children.length; a < n; a++) {
      var s = this.children[a];
      if (s.getChildByName) {
        var o = s.getChildByName(t, !0);
        if (o)
          return o;
      }
    }
  return null;
};
/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ie.prototype.getGlobalPosition = function(t, e) {
  return t === void 0 && (t = new le()), e === void 0 && (e = !1), this.parent ? this.parent.toGlobal(this.position, t, e) : (t.x = this.position.x, t.y = this.position.y), t;
};
/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var I2 = (
  /** @class */
  function() {
    function i() {
    }
    return i.init = function(t) {
      var e = this;
      Object.defineProperty(
        this,
        "resizeTo",
        /**
         * The HTML element or window to automatically resize the
         * renderer's view element to match width and height.
         * @member {Window|HTMLElement}
         * @name resizeTo
         * @memberof PIXI.Application#
         */
        {
          set: function(a) {
            globalThis.removeEventListener("resize", this.queueResize), this._resizeTo = a, a && (globalThis.addEventListener("resize", this.queueResize), this.resize());
          },
          get: function() {
            return this._resizeTo;
          }
        }
      ), this.queueResize = function() {
        e._resizeTo && (e.cancelResize(), e._resizeId = requestAnimationFrame(function() {
          return e.resize();
        }));
      }, this.cancelResize = function() {
        e._resizeId && (cancelAnimationFrame(e._resizeId), e._resizeId = null);
      }, this.resize = function() {
        if (e._resizeTo) {
          e.cancelResize();
          var a, n;
          if (e._resizeTo === globalThis.window)
            a = globalThis.innerWidth, n = globalThis.innerHeight;
          else {
            var s = e._resizeTo, o = s.clientWidth, u = s.clientHeight;
            a = o, n = u;
          }
          e.renderer.resize(a, n);
        }
      }, this._resizeId = null, this._resizeTo = null, this.resizeTo = t.resizeTo || null;
    }, i.destroy = function() {
      globalThis.removeEventListener("resize", this.queueResize), this.cancelResize(), this.cancelResize = null, this.queueResize = null, this.resizeTo = null, this.resize = null;
    }, i.extension = se.Application, i;
  }()
), El = (
  /** @class */
  function() {
    function i(t) {
      var e = this;
      this.stage = new wr(), t = Object.assign({
        forceCanvas: !1
      }, t), this.renderer = ld(t), i._plugins.forEach(function(a) {
        a.init.call(e, t);
      });
    }
    return i.registerPlugin = function(t) {
      sr("6.5.0", "Application.registerPlugin() is deprecated, use extensions.add()"), ri.add({
        type: se.Application,
        ref: t
      });
    }, i.prototype.render = function() {
      this.renderer.render(this.stage);
    }, Object.defineProperty(i.prototype, "view", {
      /**
       * Reference to the renderer's canvas element.
       * @member {HTMLCanvasElement}
       * @readonly
       */
      get: function() {
        return this.renderer.view;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(i.prototype, "screen", {
      /**
       * Reference to the renderer's screen rectangle. Its safe to use as `filterArea` or `hitArea` for the whole screen.
       * @member {PIXI.Rectangle}
       * @readonly
       */
      get: function() {
        return this.renderer.screen;
      },
      enumerable: !1,
      configurable: !0
    }), i.prototype.destroy = function(t, e) {
      var a = this, n = i._plugins.slice(0);
      n.reverse(), n.forEach(function(s) {
        s.destroy.call(a);
      }), this.stage.destroy(e), this.stage = null, this.renderer.destroy(t), this.renderer = null;
    }, i._plugins = [], i;
  }()
);
ri.handleByList(se.Application, El._plugins);
ri.add(I2);
/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var _u = function(i, t) {
  return _u = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, _u(i, t);
};
function Ya(i, t) {
  _u(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var P2 = (
  /** @class */
  function(i) {
    Ya(t, i);
    function t(e, a, n, s) {
      e === void 0 && (e = 100), a === void 0 && (a = 100), n === void 0 && (n = 10), s === void 0 && (s = 10);
      var o = i.call(this) || this;
      return o.segWidth = n, o.segHeight = s, o.width = e, o.height = a, o.build(), o;
    }
    return t.prototype.build = function() {
      for (var e = this.segWidth * this.segHeight, a = [], n = [], s = [], o = this.segWidth - 1, u = this.segHeight - 1, m = this.width / o, g = this.height / u, A = 0; A < e; A++) {
        var x = A % this.segWidth, w = A / this.segWidth | 0;
        a.push(x * m, w * g), n.push(x / o, w / u);
      }
      for (var C = o * u, A = 0; A < C; A++) {
        var O = A % o, L = A / o | 0, D = L * this.segWidth + O, H = L * this.segWidth + O + 1, k = (L + 1) * this.segWidth + O, G = (L + 1) * this.segWidth + O + 1;
        s.push(D, H, k, H, G, k);
      }
      this.buffers[0].data = new Float32Array(a), this.buffers[1].data = new Float32Array(n), this.indexBuffer.data = new Uint16Array(s), this.buffers[0].update(), this.buffers[1].update(), this.indexBuffer.update();
    }, t;
  }(Xn)
), M2 = (
  /** @class */
  function(i) {
    Ya(t, i);
    function t(e, a, n) {
      e === void 0 && (e = 200), n === void 0 && (n = 0);
      var s = i.call(this, new Float32Array(a.length * 4), new Float32Array(a.length * 4), new Uint16Array((a.length - 1) * 6)) || this;
      return s.points = a, s._width = e, s.textureScale = n, s.build(), s;
    }
    return Object.defineProperty(t.prototype, "width", {
      /**
       * The width (i.e., thickness) of the rope.
       * @readonly
       */
      get: function() {
        return this._width;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.build = function() {
      var e = this.points;
      if (e) {
        var a = this.getBuffer("aVertexPosition"), n = this.getBuffer("aTextureCoord"), s = this.getIndex();
        if (!(e.length < 1)) {
          a.data.length / 4 !== e.length && (a.data = new Float32Array(e.length * 4), n.data = new Float32Array(e.length * 4), s.data = new Uint16Array((e.length - 1) * 6));
          var o = n.data, u = s.data;
          o[0] = 0, o[1] = 0, o[2] = 0, o[3] = 1;
          for (var m = 0, g = e[0], A = this._width * this.textureScale, x = e.length, w = 0; w < x; w++) {
            var C = w * 4;
            if (this.textureScale > 0) {
              var O = g.x - e[w].x, L = g.y - e[w].y, D = Math.sqrt(O * O + L * L);
              g = e[w], m += D / A;
            } else
              m = w / (x - 1);
            o[C] = m, o[C + 1] = 0, o[C + 2] = m, o[C + 3] = 1;
          }
          for (var H = 0, w = 0; w < x - 1; w++) {
            var C = w * 2;
            u[H++] = C, u[H++] = C + 1, u[H++] = C + 2, u[H++] = C + 2, u[H++] = C + 1, u[H++] = C + 3;
          }
          n.update(), s.update(), this.updateVertices();
        }
      }
    }, t.prototype.updateVertices = function() {
      var e = this.points;
      if (!(e.length < 1)) {
        for (var a = e[0], n, s = 0, o = 0, u = this.buffers[0].data, m = e.length, g = 0; g < m; g++) {
          var A = e[g], x = g * 4;
          g < e.length - 1 ? n = e[g + 1] : n = A, o = -(n.x - a.x), s = n.y - a.y;
          var w = Math.sqrt(s * s + o * o), C = this.textureScale > 0 ? this.textureScale * this._width / 2 : this._width / 2;
          s /= w, o /= w, s *= C, o *= C, u[x] = A.x + s, u[x + 1] = A.y + o, u[x + 2] = A.x - s, u[x + 3] = A.y - o, a = A;
        }
        this.buffers[0].update();
      }
    }, t.prototype.update = function() {
      this.textureScale > 0 ? this.build() : this.updateVertices();
    }, t;
  }(Xn)
), JT = (
  /** @class */
  function(i) {
    Ya(t, i);
    function t(e, a, n) {
      n === void 0 && (n = 0);
      var s = this, o = new M2(e.height, a, n), u = new Ha(e);
      return n > 0 && (e.baseTexture.wrapMode = Nr.REPEAT), s = i.call(this, o, u) || this, s.autoUpdate = !0, s;
    }
    return t.prototype._render = function(e) {
      var a = this.geometry;
      (this.autoUpdate || a._width !== this.shader.texture.height) && (a._width = this.shader.texture.height, a.update()), i.prototype._render.call(this, e);
    }, t;
  }(Fa)
), C2 = (
  /** @class */
  function(i) {
    Ya(t, i);
    function t(e, a, n) {
      var s = this, o = new P2(e.width, e.height, a, n), u = new Ha(Ot.WHITE);
      return s = i.call(this, o, u) || this, s.texture = e, s.autoResize = !0, s;
    }
    return t.prototype.textureUpdated = function() {
      this._textureID = this.shader.texture._updateID;
      var e = this.geometry, a = this.shader.texture, n = a.width, s = a.height;
      this.autoResize && (e.width !== n || e.height !== s) && (e.width = this.shader.texture.width, e.height = this.shader.texture.height, e.build());
    }, Object.defineProperty(t.prototype, "texture", {
      get: function() {
        return this.shader.texture;
      },
      set: function(e) {
        this.shader.texture !== e && (this.shader.texture = e, this._textureID = -1, e.baseTexture.valid ? this.textureUpdated() : e.once("update", this.textureUpdated, this));
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._render = function(e) {
      this._textureID !== this.shader.texture._updateID && this.textureUpdated(), i.prototype._render.call(this, e);
    }, t.prototype.destroy = function(e) {
      this.shader.texture.off("update", this.textureUpdated, this), i.prototype.destroy.call(this, e);
    }, t;
  }(Fa)
), qT = (
  /** @class */
  function(i) {
    Ya(t, i);
    function t(e, a, n, s, o) {
      e === void 0 && (e = Ot.EMPTY);
      var u = this, m = new Xn(a, n, s);
      m.getBuffer("aVertexPosition").static = !1;
      var g = new Ha(e);
      return u = i.call(this, m, g, null, o) || this, u.autoUpdate = !0, u;
    }
    return Object.defineProperty(t.prototype, "vertices", {
      /**
       * Collection of vertices data.
       * @type {Float32Array}
       */
      get: function() {
        return this.geometry.getBuffer("aVertexPosition").data;
      },
      set: function(e) {
        this.geometry.getBuffer("aVertexPosition").data = e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._render = function(e) {
      this.autoUpdate && this.geometry.getBuffer("aVertexPosition").update(), i.prototype._render.call(this, e);
    }, t;
  }(Fa)
), Ts = 10, ZT = (
  /** @class */
  function(i) {
    Ya(t, i);
    function t(e, a, n, s, o) {
      a === void 0 && (a = Ts), n === void 0 && (n = Ts), s === void 0 && (s = Ts), o === void 0 && (o = Ts);
      var u = i.call(this, Ot.WHITE, 4, 4) || this;
      return u._origWidth = e.orig.width, u._origHeight = e.orig.height, u._width = u._origWidth, u._height = u._origHeight, u._leftWidth = a, u._rightWidth = s, u._topHeight = n, u._bottomHeight = o, u.texture = e, u;
    }
    return t.prototype.textureUpdated = function() {
      this._textureID = this.shader.texture._updateID, this._refresh();
    }, Object.defineProperty(t.prototype, "vertices", {
      get: function() {
        return this.geometry.getBuffer("aVertexPosition").data;
      },
      set: function(e) {
        this.geometry.getBuffer("aVertexPosition").data = e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.updateHorizontalVertices = function() {
      var e = this.vertices, a = this._getMinScale();
      e[9] = e[11] = e[13] = e[15] = this._topHeight * a, e[17] = e[19] = e[21] = e[23] = this._height - this._bottomHeight * a, e[25] = e[27] = e[29] = e[31] = this._height;
    }, t.prototype.updateVerticalVertices = function() {
      var e = this.vertices, a = this._getMinScale();
      e[2] = e[10] = e[18] = e[26] = this._leftWidth * a, e[4] = e[12] = e[20] = e[28] = this._width - this._rightWidth * a, e[6] = e[14] = e[22] = e[30] = this._width;
    }, t.prototype._getMinScale = function() {
      var e = this._leftWidth + this._rightWidth, a = this._width > e ? 1 : this._width / e, n = this._topHeight + this._bottomHeight, s = this._height > n ? 1 : this._height / n, o = Math.min(a, s);
      return o;
    }, Object.defineProperty(t.prototype, "width", {
      /** The width of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */
      get: function() {
        return this._width;
      },
      set: function(e) {
        this._width = e, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      /** The height of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */
      get: function() {
        return this._height;
      },
      set: function(e) {
        this._height = e, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "leftWidth", {
      /** The width of the left column. */
      get: function() {
        return this._leftWidth;
      },
      set: function(e) {
        this._leftWidth = e, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "rightWidth", {
      /** The width of the right column. */
      get: function() {
        return this._rightWidth;
      },
      set: function(e) {
        this._rightWidth = e, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "topHeight", {
      /** The height of the top row. */
      get: function() {
        return this._topHeight;
      },
      set: function(e) {
        this._topHeight = e, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "bottomHeight", {
      /** The height of the bottom row. */
      get: function() {
        return this._bottomHeight;
      },
      set: function(e) {
        this._bottomHeight = e, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._refresh = function() {
      var e = this.texture, a = this.geometry.buffers[1].data;
      this._origWidth = e.orig.width, this._origHeight = e.orig.height;
      var n = 1 / this._origWidth, s = 1 / this._origHeight;
      a[0] = a[8] = a[16] = a[24] = 0, a[1] = a[3] = a[5] = a[7] = 0, a[6] = a[14] = a[22] = a[30] = 1, a[25] = a[27] = a[29] = a[31] = 1, a[2] = a[10] = a[18] = a[26] = n * this._leftWidth, a[4] = a[12] = a[20] = a[28] = 1 - n * this._rightWidth, a[9] = a[11] = a[13] = a[15] = s * this._topHeight, a[17] = a[19] = a[21] = a[23] = 1 - s * this._bottomHeight, this.updateHorizontalVertices(), this.updateVerticalVertices(), this.geometry.buffers[0].update(), this.geometry.buffers[1].update();
    }, t;
  }(C2)
);
/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var vu = function(i, t) {
  return vu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e, a) {
    e.__proto__ = a;
  } || function(e, a) {
    for (var n in a)
      a.hasOwnProperty(n) && (e[n] = a[n]);
  }, vu(i, t);
};
function tA(i, t) {
  vu(i, t);
  function e() {
    this.constructor = i;
  }
  i.prototype = t === null ? Object.create(t) : (e.prototype = t.prototype, new e());
}
var eA = (
  /** @class */
  function(i) {
    tA(t, i);
    function t(e, a) {
      a === void 0 && (a = !0);
      var n = i.call(this, e[0] instanceof Ot ? e[0] : e[0].texture) || this;
      return n._textures = null, n._durations = null, n._autoUpdate = a, n._isConnectedToTicker = !1, n.animationSpeed = 1, n.loop = !0, n.updateAnchor = !1, n.onComplete = null, n.onFrameChange = null, n.onLoop = null, n._currentTime = 0, n._playing = !1, n._previousFrame = null, n.textures = e, n;
    }
    return t.prototype.stop = function() {
      this._playing && (this._playing = !1, this._autoUpdate && this._isConnectedToTicker && (We.shared.remove(this.update, this), this._isConnectedToTicker = !1));
    }, t.prototype.play = function() {
      this._playing || (this._playing = !0, this._autoUpdate && !this._isConnectedToTicker && (We.shared.add(this.update, this, ti.HIGH), this._isConnectedToTicker = !0));
    }, t.prototype.gotoAndStop = function(e) {
      this.stop();
      var a = this.currentFrame;
      this._currentTime = e, a !== this.currentFrame && this.updateTexture();
    }, t.prototype.gotoAndPlay = function(e) {
      var a = this.currentFrame;
      this._currentTime = e, a !== this.currentFrame && this.updateTexture(), this.play();
    }, t.prototype.update = function(e) {
      if (this._playing) {
        var a = this.animationSpeed * e, n = this.currentFrame;
        if (this._durations !== null) {
          var s = this._currentTime % 1 * this._durations[this.currentFrame];
          for (s += a / 60 * 1e3; s < 0; )
            this._currentTime--, s += this._durations[this.currentFrame];
          var o = Math.sign(this.animationSpeed * e);
          for (this._currentTime = Math.floor(this._currentTime); s >= this._durations[this.currentFrame]; )
            s -= this._durations[this.currentFrame] * o, this._currentTime += o;
          this._currentTime += s / this._durations[this.currentFrame];
        } else
          this._currentTime += a;
        this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0), this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1), this.onComplete && this.onComplete()) : n !== this.currentFrame && (this.loop && this.onLoop && (this.animationSpeed > 0 && this.currentFrame < n ? this.onLoop() : this.animationSpeed < 0 && this.currentFrame > n && this.onLoop()), this.updateTexture());
      }
    }, t.prototype.updateTexture = function() {
      var e = this.currentFrame;
      this._previousFrame !== e && (this._previousFrame = e, this._texture = this._textures[e], this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this.uvs = this._texture._uvs.uvsFloat32, this.updateAnchor && this._anchor.copyFrom(this._texture.defaultAnchor), this.onFrameChange && this.onFrameChange(this.currentFrame));
    }, t.prototype.destroy = function(e) {
      this.stop(), i.prototype.destroy.call(this, e), this.onComplete = null, this.onFrameChange = null, this.onLoop = null;
    }, t.fromFrames = function(e) {
      for (var a = [], n = 0; n < e.length; ++n)
        a.push(Ot.from(e[n]));
      return new t(a);
    }, t.fromImages = function(e) {
      for (var a = [], n = 0; n < e.length; ++n)
        a.push(Ot.from(e[n]));
      return new t(a);
    }, Object.defineProperty(t.prototype, "totalFrames", {
      /**
       * The total number of frames in the AnimatedSprite. This is the same as number of textures
       * assigned to the AnimatedSprite.
       * @readonly
       * @default 0
       */
      get: function() {
        return this._textures.length;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "textures", {
      /** The array of textures used for this AnimatedSprite. */
      get: function() {
        return this._textures;
      },
      set: function(e) {
        if (e[0] instanceof Ot)
          this._textures = e, this._durations = null;
        else {
          this._textures = [], this._durations = [];
          for (var a = 0; a < e.length; a++)
            this._textures.push(e[a].texture), this._durations.push(e[a].time);
        }
        this._previousFrame = null, this.gotoAndStop(0), this.updateTexture();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "currentFrame", {
      /**
       * The AnimatedSprites current frame index.
       * @readonly
       */
      get: function() {
        var e = Math.floor(this._currentTime) % this._textures.length;
        return e < 0 && (e += this._textures.length), e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "playing", {
      /**
       * Indicates if the AnimatedSprite is currently playing.
       * @readonly
       */
      get: function() {
        return this._playing;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "autoUpdate", {
      /** Whether to use PIXI.Ticker.shared to auto update animation time. */
      get: function() {
        return this._autoUpdate;
      },
      set: function(e) {
        e !== this._autoUpdate && (this._autoUpdate = e, !this._autoUpdate && this._isConnectedToTicker ? (We.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._playing && (We.shared.add(this.update, this), this._isConnectedToTicker = !0));
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }(Va)
);
/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
ri.add(
  // Install renderer plugins
  zd,
  Qd,
  jd,
  f2,
  _2,
  nl,
  y2,
  // Install loader plugins
  S2,
  r2,
  h2,
  u2,
  m2,
  // Install application plugins
  Uc,
  qd
);
var rA = {
  AlphaFilter: CT,
  BlurFilter: NT,
  BlurFilterPass: uu,
  ColorMatrixFilter: fu,
  DisplacementFilter: GT,
  FXAAFilter: zT,
  NoiseFilter: jT
};
const iA = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  get ALPHA_MODES() {
    return Er;
  },
  AbstractBatchRenderer: cd,
  AbstractMultiResource: qs,
  AbstractRenderer: ud,
  AccessibilityManager: zd,
  AnimatedSprite: eA,
  AppLoaderPlugin: qd,
  Application: El,
  ArrayResource: Ru,
  Attribute: Lh,
  get BLEND_MODES() {
    return It;
  },
  get BUFFER_BITS() {
    return Tn;
  },
  get BUFFER_TYPE() {
    return Fr;
  },
  BaseImageResource: ei,
  BasePrepare: d2,
  BaseRenderTexture: Bu,
  BaseTexture: Qt,
  BatchDrawCall: Hs,
  BatchGeometry: al,
  BatchPluginFactory: pd,
  BatchRenderer: nl,
  BatchShaderGenerator: dd,
  BatchSystem: Xu,
  BatchTextureArray: Bs,
  BitmapFont: li,
  BitmapFontData: Bn,
  BitmapFontLoader: S2,
  BitmapText: IT,
  BlobResource: e2,
  Bounds: $n,
  BrowserAdapter: ic,
  Buffer: Fe,
  BufferResource: ha,
  get CLEAR_MODES() {
    return yr;
  },
  get COLOR_MASK_BITS() {
    return ch;
  },
  CanvasResource: Lu,
  Circle: Fc,
  CompressedTextureLoader: r2,
  CompressedTextureResource: Xs,
  Container: wr,
  ContextSystem: Vu,
  CountLimiter: c2,
  CubeResource: Du,
  DDSLoader: h2,
  DEG_TO_RAD: Nc,
  get DRAW_MODES() {
    return xr;
  },
  DisplayObject: Ie,
  get ENV() {
    return Zr;
  },
  Ellipse: Hc,
  get ExtensionType() {
    return se;
  },
  Extract: Qd,
  get FORMATS() {
    return ot;
  },
  FORMATS_TO_COMPONENTS: n2,
  FillStyle: bl,
  Filter: gi,
  FilterState: Yc,
  FilterSystem: Gu,
  Framebuffer: Fs,
  FramebufferSystem: Yu,
  get GC_MODES() {
    return Sn;
  },
  GLFramebuffer: zc,
  GLProgram: sd,
  GLTexture: ws,
  GRAPHICS_CURVES: La,
  Geometry: Ga,
  GeometrySystem: zu,
  Graphics: Da,
  GraphicsData: Yh,
  GraphicsGeometry: Bd,
  IGLUniformData: Ny,
  INSTALLED: On,
  get INTERNAL_FORMATS() {
    return Ht;
  },
  INTERNAL_FORMAT_TO_BYTES_PER_PIXEL: Hn,
  ImageBitmapResource: Hu,
  ImageResource: Zs,
  InteractionData: Qh,
  InteractionEvent: Kd,
  InteractionManager: jd,
  InteractionTrackingData: Ms,
  KTXLoader: u2,
  get LINE_CAP() {
    return di;
  },
  get LINE_JOIN() {
    return Qr;
  },
  LineStyle: kd,
  Loader: Fn,
  get LoaderResource() {
    return Se;
  },
  get MASK_TYPES() {
    return Me;
  },
  get MIPMAP_MODES() {
    return Sr;
  },
  get MSAA_QUALITY() {
    return _e;
  },
  MaskData: Kc,
  MaskSystem: Ku,
  Matrix: be,
  Mesh: Fa,
  MeshBatchUvs: b2,
  MeshGeometry: Xn,
  MeshMaterial: Ha,
  NineSlicePlane: ZT,
  ObjectRenderer: Gn,
  ObservablePoint: wi,
  PI_2: Cn,
  get PRECISION() {
    return cr;
  },
  ParticleContainer: tT,
  ParticleRenderer: f2,
  PlaneGeometry: P2,
  Point: le,
  Polygon: gn,
  Prepare: _2,
  Program: Xa,
  ProjectionSystem: Qu,
  Quad: Vc,
  QuadUv: Uu,
  RAD_TO_DEG: Dc,
  get RENDERER_TYPE() {
    return Ca;
  },
  Rectangle: zt,
  RenderTexture: Oi,
  RenderTexturePool: Xc,
  RenderTextureSystem: Ju,
  Renderer: rl,
  ResizePlugin: I2,
  Resource: oa,
  RopeGeometry: M2,
  RoundedRectangle: Bc,
  Runner: Ke,
  get SAMPLER_TYPES() {
    return An;
  },
  get SCALE_MODES() {
    return Dr;
  },
  get SHAPES() {
    return Ve;
  },
  SVGResource: Nu,
  ScissorSystem: Wu,
  Shader: pi,
  ShaderSystem: qu,
  SimpleMesh: qT,
  SimplePlane: C2,
  SimpleRope: JT,
  Sprite: Va,
  SpriteMaskFilter: td,
  Spritesheet: v2,
  SpritesheetLoader: m2,
  State: Di,
  StateSystem: Zu,
  StencilSystem: ju,
  System: qy,
  get TARGETS() {
    return Ii;
  },
  get TEXT_GRADIENT() {
    return Na;
  },
  get TYPES() {
    return wt;
  },
  TYPES_TO_BYTES_PER_COMPONENT: eu,
  TYPES_TO_BYTES_PER_PIXEL: s2,
  TemporaryDisplayObject: hl,
  Text: so,
  TextFormat: x2,
  TextMetrics: Br,
  TextStyle: Ri,
  Texture: Ot,
  TextureGCSystem: tl,
  TextureLoader: Zd,
  TextureMatrix: to,
  TextureSystem: el,
  TextureUvs: ku,
  Ticker: We,
  TickerPlugin: Uc,
  TilingSprite: pT,
  TilingSpriteRenderer: y2,
  TimeLimiter: dT,
  Transform: Qs,
  get UPDATE_PRIORITY() {
    return ti;
  },
  UniformGroup: Pi,
  VERSION: eb,
  VideoResource: Fu,
  ViewableBuffer: ks,
  get WRAP_MODES() {
    return Nr;
  },
  XMLFormat: Vs,
  XMLStringFormat: T2,
  accessibleTarget: Yd,
  autoDetectFormat: Sl,
  autoDetectRenderer: ld,
  autoDetectResource: Js,
  checkMaxIfStatementsInShader: Zc,
  createUBOElements: id,
  defaultFilterVertex: il,
  defaultVertex: fd,
  extensions: ri,
  filters: rA,
  generateProgram: od,
  generateUniformBufferSync: nd,
  getTestContext: Qc,
  getUBOData: ad,
  graphicsUtils: k4,
  groupD8: ye,
  interactiveTarget: Wd,
  isMobile: Tr,
  parseDDS: a2,
  parseKTX: o2,
  resources: _d,
  settings: mt,
  systems: vd,
  uniformParsers: ia,
  utils: sy
}, Symbol.toStringTag, { value: "Module" }));
class aA {
  constructor(t) {
    Dt(this, "app");
    this.stage = t, window.PIXI = iA, window.PIXI.utils.skipHello(), this.app = new El({
      view: this.stage.canvasElement,
      resolution: 2,
      autoStart: !0,
      autoDensity: !0,
      backgroundAlpha: 0,
      resizeTo: this.stage.element
    });
  }
  mount(t) {
    t ? (this.clearAppStage(), this.app.stage.addChild(t)) : console.error("");
  }
  unMount() {
    this.clearAppStage();
  }
  // 
  clearAppStage() {
    var e;
    (((e = this.app) == null ? void 0 : e.stage.children.length) || 0) > 0 && this.app.stage.removeChildren(0);
  }
  resize() {
    var t;
    (t = this.app) == null || t.resize();
  }
}
const mu = (i) => {
  localStorage.setItem("OML2D_STATUS", i);
}, J0 = () => localStorage.getItem("OML2D_STATUS"), nA = (i) => {
  localStorage.setItem("OML2D_MODEL_INDEX", i.toString());
}, sA = () => Number(localStorage.getItem("OML2D_MODEL_INDEX")), oA = (i) => {
  localStorage.setItem("OML2D_MODEL_CLOTHES_INDEX", i.toString());
}, hA = () => Number(localStorage.getItem("OML2D_MODEL_CLOTHES_INDEX"));
class uA {
  constructor(t, e) {
    Dt(this, "element");
    Dt(this, "canvasElement");
    Dt(this, "status", !1);
    Dt(this, "style", {});
    Dt(this, "canvasStyle", {});
    Dt(this, "currentModelIndex", 0);
    this.options = t, this.events = e;
  }
  create() {
    this.element = vi({ id: _i.stage, tagName: "div" }), this.canvasElement = vi({ id: _i.canvas, tagName: "canvas" });
  }
  set modelIndex(t) {
    this.currentModelIndex = t;
  }
  get modelIndex() {
    return this.currentModelIndex;
  }
  mount() {
    this.element && this.canvasElement && (this.element.append(this.canvasElement), this.options.parentElement.append(this.element));
  }
  reloadStyle(t = {}) {
    var e, a, n, s;
    switch (t = Ne(t, this.options.stageStyle), t = Ne(t, xn(this.options.dockedPosition)), Ba()) {
      case rr.mobile:
        t = Ne(t, ((a = (e = this.options.models) == null ? void 0 : e[this.modelIndex]) == null ? void 0 : a.mobileStageStyle) || {});
        break;
      case rr.pc:
        t = Ne(t, ((s = (n = this.options.models) == null ? void 0 : n[this.modelIndex]) == null ? void 0 : s.stageStyle) || {});
        break;
    }
    this.setStyle(Jr(Ne(G2, t)));
  }
  unMount() {
    var t;
    (t = this.element) == null || t.remove();
  }
  reMount() {
    this.unMount(), this.mount();
  }
  setStyle(t, e) {
    this.element && (this.style = {}, this.style = Ne(this.style, t), aa(this.style, this.element), this.setCanvasStyle({ width: "100%", height: "100%", zIndex: "9998", position: "relative" }), e == null || e());
  }
  setCanvasStyle(t) {
    this.canvasElement && (this.canvasStyle = Ne(this.canvasStyle, t), aa(this.canvasStyle, this.canvasElement));
  }
  get transitionTime() {
    return this.options.transitionTime;
  }
  /**
   * 
   */
  slideIn() {
    return this.setStyle({
      animationName: "oml2d-stage-slide-in",
      animationDuration: `${this.transitionTime}ms`,
      animationFillMode: "forwards"
    }), new Promise((t) => {
      setTimeout(() => {
        this.status = !0, this.events.emit("stageSlideIn"), mu("active"), t();
      }, this.transitionTime);
    });
  }
  /**
   * 
   */
  slideOut() {
    return new Promise((t) => {
      this.status ? (this.setStyle({
        animationName: "oml2d-stage-slide-out",
        animationDuration: `${this.transitionTime}ms`,
        animationFillMode: "forwards"
      }), setTimeout(() => {
        this.status = !1, this.events.emit("stageSlideOut"), mu("sleep"), t();
      }, this.transitionTime)) : t();
    });
  }
}
class lA {
  constructor(t) {
    Dt(this, "element");
    Dt(this, "style", {});
    Dt(this, "timer", 0);
    Dt(this, "status", !1);
    this.options = t;
  }
  get statusBarOptions() {
    return this.options.statusBar;
  }
  create() {
    this.options.statusBar.disable || (this.element = vi({ id: _i.statusBar, tagName: "div", innerText: "" }));
  }
  mount() {
    this.element && this.options.parentElement.append(this.element);
  }
  reloadStyle() {
    switch (this.style = {}, Ba()) {
      case rr.pc:
        this.setStyle(Jr(Ne(xn(this.options.dockedPosition), this.options.statusBar.style || {})));
        break;
      case rr.mobile:
        this.setStyle(
          Jr(Ne(xn(this.options.dockedPosition), this.options.statusBar.mobileStyle || {}))
        );
        break;
    }
  }
  // 
  initializeStyle() {
    this.setColor(this.options.primaryColor), this.reloadStyle();
  }
  // 
  unMount() {
    var t;
    (t = this.element) == null || t.remove();
  }
  // 
  reMounte() {
    this.unMount(), this.mount();
  }
  /**
   * 
   * @param style
   */
  setStyle(t) {
    this.element && (this.style = Ne(this.style, t), aa(t, this.element));
  }
  slideIn() {
    return new Promise((t) => {
      this.status && t(), this.setStyle({
        animationName: `oml2d-status-bar-${this.options.dockedPosition}-slide-in`,
        animationDuration: `${this.statusBarOptions.transitionTime}ms`,
        animationFillMode: "forwards"
      }), setTimeout(() => {
        this.status = !0, t();
      }, this.statusBarOptions.transitionTime);
    });
  }
  slideOut() {
    return new Promise((t) => {
      this.status ? (this.setStyle({
        animationName: `oml2d-status-bar-${this.options.dockedPosition}-slide-out`,
        animationDuration: `${this.statusBarOptions.transitionTime}ms`,
        animationFillMode: "forwards"
      }), setTimeout(() => {
        this.status = !0, t();
      }, this.statusBarOptions.transitionTime)) : t();
    });
  }
  showLoading() {
    this.open(
      `
      <div style="margin-bottom:3px;">${this.statusBarOptions.loadingMessage}</div>
      <svg class="oml2d-icon oml2d-loading" aria-hidden="true">
        <use xlink:href=#${this.statusBarOptions.loadingIcon}></use>
      </svg>
    `
    );
  }
  hideLoading() {
    this.popup(this.statusBarOptions.loadSuccessMessage, 1e3);
  }
  setHoverEvent(t) {
    this.element && (this.element.onmouseover = (t == null ? void 0 : t.onIn) || null, this.element.onmouseout = (t == null ? void 0 : t.onOut) || null);
  }
  setClickEvent(t) {
    this.element && (this.element.onclick = t);
  }
  // hover
  clearHoverEvent() {
    this.element && (this.element.onmouseover = null, this.element.onmouseout = null);
  }
  // 
  clearClickEvent() {
    this.element && (this.element.onclick = null);
  }
  rest() {
    this.popup(this.statusBarOptions.restMessage, this.statusBarOptions.restMessageDuration);
  }
  /**
   * , 
   * @param reloadFn
   */
  loadingError(t) {
    this.setHoverEvent({
      onIn: () => {
        this.setContent(this.statusBarOptions.reloadMessage);
      },
      onOut: () => {
        this.setContent(this.statusBarOptions.loadFailMessage);
      }
    }), this.setClickEvent(() => {
      t();
    }), this.open(this.statusBarOptions.loadFailMessage, this.options.statusBar.errorColor);
  }
  get stateColor() {
    return {
      info: this.options.primaryColor,
      error: this.options.statusBar.errorColor
    };
  }
  setColor(t) {
    t && this.setStyle({ backgroundColor: t });
  }
  open(t, e = this.options.primaryColor) {
    this.popup(t, !1, e);
  }
  close(t, e = this.options.primaryColor, a = 0) {
    this.popup(t, a, e);
  }
  /**
   * , , delayfalse
   * @param message
   * @param state
   * @param delay
   */
  popup(t, e = 0, a = this.options.primaryColor) {
    clearTimeout(this.timer), this.setColor(a), t && this.setContent(t), this.slideIn(), Os(e) && (this.timer = setTimeout(() => {
      this.slideOut();
    }, e + this.statusBarOptions.transitionTime));
  }
  setContent(t) {
    this.element && (this.element.innerHTML = t);
  }
}
class fA {
  constructor(t, e) {
    Dt(this, "idlePlayer");
    Dt(this, "element");
    Dt(this, "contentElement");
    Dt(this, "closeTimer", 0);
    Dt(this, "transitionTime", 1e3);
    // 
    Dt(this, "style", {});
    Dt(this, "priority", 0);
    // 
    Dt(this, "contentStyle", {});
    Dt(this, "_tipsOptions", Ea.tips);
    this.options = t, this.oml2d = e;
  }
  reload(t) {
    this.clear(), this.unmount(), this.create(), this.reloadStyle(), this.mount(t);
  }
  get tipsOptions() {
    return this._tipsOptions;
  }
  set tipsOptions(t) {
    let e;
    pn(t) ? e = Ne(
      Ea.tips,
      t(this.options.models[this.oml2d.modelIndex || 0], this.oml2d.modelIndex || 0)
    ) : e = t, this._tipsOptions = e;
  }
  create() {
    this.tipsOptions = this.options.tips, this.idlePlayer = this.createIdleMessagePlayer(), this.element = vi({ id: _i.tips, tagName: "div" }), this.contentElement = vi({ id: "oml2d-tips-content", tagName: "div" });
  }
  mount(t) {
    this.element && this.contentElement && (this.element.append(this.contentElement), t.append(this.element));
  }
  unmount() {
    var t, e;
    (t = this.element) == null || t.remove(), (e = this.contentElement) == null || e.remove();
  }
  get primaryColor() {
    return this.options.primaryColor;
  }
  // 
  reloadStyle() {
    switch (this.style = {}, this.setContentStyle({
      wordBreak: "break-all",
      display: "-webkit-box",
      textOverflow: "ellipsis",
      WebkitBoxOrient: "vertical",
      WebkitLineClamp: this.tipsOptions.messageLine,
      overflow: "hidden"
    }), Ba()) {
      case rr.pc:
        this.setStyle(Jr(this.tipsOptions.style || {}));
        break;
      case rr.mobile:
        this.setStyle(Jr(this.tipsOptions.mobileStyle || {}));
        break;
    }
  }
  /**
   * 
   * @param style
   */
  setStyle(t = {}) {
    var e;
    this.element && (this.style = Ne(this.style, t), (e = this.style).backgroundColor || (e.backgroundColor = this.options.primaryColor), aa(this.style, this.element));
  }
  setContentStyle(t) {
    this.contentElement && (this.contentStyle = Ne(this.contentStyle, t), aa(this.contentStyle, this.contentElement));
  }
  setContent(t) {
    this.contentElement && (this.contentElement.innerHTML = t);
  }
  showMessage(t, e = 3e3, a = 0) {
    a < this.priority || (this.priority = a, this.closeTimer && clearTimeout(this.closeTimer), this.setContent(t), this.setStyle({
      animationName: "oml2d-display-tips,oml2d-shake-tips"
    }), this.closeTimer = setTimeout(() => {
      this.setStyle({
        animationName: "oml2d-hidden-tips,oml2d-shake-tips"
      }), this.priority = 0;
    }, e));
  }
  /**
   * 
   */
  clear() {
    var t;
    this.setStyle({
      animationName: "oml2d-hidden-tips,oml2d-shake-tips"
    }), (t = this.idlePlayer) == null || t.stop(), clearTimeout(this.closeTimer), this.priority = 0;
  }
  /**
   * , , 
   */
  notification(t, e = 3e3, a = 3) {
    var n;
    (n = this.idlePlayer) == null || n.stop(), this.showMessage(t, e, a), setTimeout(() => {
      var s;
      (s = this.idlePlayer) == null || s.start();
    }, e + this.transitionTime);
  }
  /**
   * 
   */
  welcome() {
    const t = J2(this.tipsOptions.welcomeTips || {}), { duration: e, priority: a } = this.tipsOptions.welcomeTips;
    this.notification(t, e, a);
  }
  /**
   * 
   */
  copy() {
    if (this.tipsOptions.copyTips.message.length) {
      const t = fh(this.tipsOptions.copyTips.message) || "";
      this.notification(t, this.tipsOptions.copyTips.duration, this.tipsOptions.copyTips.priority);
    }
  }
  /**
   * 
   * @returns
   */
  createIdleMessagePlayer() {
    let t = "";
    const e = B2(() => ar(this, null, function* () {
      this.tipsOptions.idleTips.wordTheDay ? pn(this.tipsOptions.idleTips.wordTheDay) ? t = yield cf(this.tipsOptions.idleTips.wordTheDay) : t = yield cf() : pn(this.tipsOptions.idleTips.message) ? t = yield this.tipsOptions.idleTips.message() : t = fh(this.tipsOptions.idleTips.message || []) || "", t ? (this.showMessage(t, this.tipsOptions.idleTips.duration, this.tipsOptions.idleTips.priority), yield Z2(this.tipsOptions.idleTips.duration)) : e.stop();
    }), this.tipsOptions.idleTips.interval);
    return e;
  }
}
class cA {
  constructor(t) {
    Dt(this, "globalStyle");
    Dt(this, "stage");
    Dt(this, "statusBar");
    Dt(this, "tips");
    Dt(this, "menus");
    Dt(this, "models");
    Dt(this, "pixiApp");
    Dt(this, "_modelIndex", 0);
    Dt(this, "_modelClothesIndex", 0);
    Dt(this, "version", "0.19.3");
    Dt(this, "options");
    Dt(this, "events");
    this.events = new k2(), this.options = rp(Ea, t), this.globalStyle = new ap(this.options), this.stage = new uA(this.options, this.events), this.statusBar = new lA(this.options), this.tips = new fA(this.options, this), this.menus = new np(this.options, this), this.models = new j4(this.options, this.events), this.modelIndex = sA(), this.modelClothesIndex = hA(), this.initialize();
  }
  set modelIndex(t) {
    t > this.options.models.length - 1 && (t = 0), this._modelIndex = t, this.stage.modelIndex = t, this.models.modelIndex = t, nA(t);
  }
  get modelIndex() {
    return this._modelIndex;
  }
  set modelClothesIndex(t) {
    this._modelClothesIndex = t, this.models.modelClothesIndex = t, oA(t);
  }
  get modelClothesIndex() {
    return this._modelClothesIndex;
  }
  /**
   *  hit area 
   */
  showModelHitAreaFrames() {
    this.models.removeHitAreaFrames();
  }
  /**
   *  hit area 
   */
  hideModelHitAreaFrames() {
    this.models.addHitAreaFrames();
  }
  /**
   * 
   */
  setModelScale(t) {
    this.models.setScale(t);
  }
  stopTipsIdle() {
    var t;
    (t = this.tips.idlePlayer) == null || t.stop();
  }
  startTipsIdle() {
    var t;
    (t = this.tips.idlePlayer) == null || t.start();
  }
  statusBarPopup(t, e, a) {
    this.statusBar.popup(t, e, a);
  }
  setStatusBarHoverEvent(t) {
    this.statusBar.setHoverEvent(t);
  }
  tipsMessage(t, e, a) {
    this.tips.notification(t, e, a);
  }
  setStageStyle(t) {
    this.stage.setStyle(Jr(t));
  }
  setModelPosition(t) {
    const { x: e = 0, y: a = 0 } = t;
    this.models.setPosition(e, a);
  }
  /**
   * 
   */
  get mobileHidden() {
    return !this.options.mobileDisplay && Ba() === rr.mobile;
  }
  /**
   * 
   */
  create() {
    this.stage.create(), this.pixiApp = new aA(this.stage), this.statusBar.create(), this.statusBar.initializeStyle();
  }
  /**
   * 
   */
  mount() {
    this.stage.mount(), this.statusBar.mount();
  }
  /**
   * 
   */
  loadModel() {
    return ar(this, null, function* () {
      if (this.tips.clear(), yield this.stage.slideOut(), !(!this.options.models || !this.options.models.length)) {
        if (this.mobileHidden) {
          this.statusBar.rest();
          return;
        }
        return this.statusBar.showLoading(), this.models.create().catch(() => {
          this.statusBar.loadingError(() => void this.reloadModel());
        }).then(() => {
          var t, e;
          (t = this.pixiApp) == null || t.mount(this.models.model), this.menus.reload(this.stage.element), this.tips.reload(this.stage.element), this.models.settingModel(), this.stage.reloadStyle(this.models.modelSize), (e = this.pixiApp) == null || e.resize(), this.statusBar.hideLoading();
        });
      }
    });
  }
  /**
   * 
   */
  reloadModel() {
    return ar(this, null, function* () {
      var t;
      yield this.loadModel(), yield this.stage.slideIn(), (t = this.tips.idlePlayer) == null || t.start();
    });
  }
  /**
   * 
   */
  loadRandomModel() {
    return ar(this, null, function* () {
      var t;
      this.modelIndex = ip(this.options.models.length, this.modelIndex), this.modelClothesIndex = 0, this.statusBar.open(this.options.statusBar.switchingMessage), yield this.loadModel(), yield this.stage.slideIn(), (t = this.tips.idlePlayer) == null || t.start();
    });
  }
  /**
   * 
   */
  loadNextModel() {
    return ar(this, null, function* () {
      var t;
      ++this.modelIndex >= this.options.models.length && (this.modelIndex = 0), this.modelClothesIndex = 0, this.statusBar.open(this.options.statusBar.switchingMessage), yield this.loadModel(), yield this.stage.slideIn(), (t = this.tips.idlePlayer) == null || t.start();
    });
  }
  /**
   * 
   */
  loadModelByIndex(t, e) {
    return ar(this, null, function* () {
      var a;
      t >= 0 && t < this.options.models.length && (this.modelIndex = t, this.modelClothesIndex = e || 0, this.statusBar.open(this.options.statusBar.switchingMessage), yield this.loadModel(), yield this.stage.slideIn(), (a = this.tips.idlePlayer) == null || a.start());
    });
  }
  /**
   * 
   */
  loadModelByName(t, e) {
    return ar(this, null, function* () {
      var n;
      const a = this.options.models.findIndex((s) => s.name === t);
      a > 0 && (this.modelIndex = a, this.modelClothesIndex = e || 0, this.statusBar.open(this.options.statusBar.switchingMessage), yield this.loadModel(), yield this.stage.slideIn(), (n = this.tips.idlePlayer) == null || n.start());
    });
  }
  loadNextModelClothes() {
    return ar(this, null, function* () {
      const t = this.options.models[this.modelIndex].path;
      Z0(this.options.models[this.modelIndex].path) && this.options.models.length ? (++this.modelClothesIndex >= t.length && (this.modelClothesIndex = 0), yield this.loadModel(), yield this.stage.slideIn()) : this.tips.notification("~", 5e3, 3);
    });
  }
  /**
   * 
   * @param rotation
   */
  setModelRotation(t) {
    this.models.setRotation(t);
  }
  /**
   * 
   * @param anchor
   */
  setModelAnchor(t) {
    const { x: e, y: a } = t;
    this.models.setAnchor(e, a);
  }
  // 
  initialize() {
    tp(), this.options.sayHello && q2(), this.registerGlobalEvent(), this.globalStyle.initialize(), this.create(), this.mount(), this.loadModel().then(() => {
      const t = J0() || this.options.initialStatus;
      J0() || mu(this.options.initialStatus), t === "sleep" ? (this.tips.clear(), this.statusBar.open(this.options.statusBar.restMessage), this.statusBar.setClickEvent(() => {
        var e;
        this.stage.slideIn(), (e = this.tips.idlePlayer) == null || e.start(), this.statusBar.close(), this.statusBar.clearHoverEvent(), this.statusBar.clearClickEvent();
      })) : this.stage.slideIn();
    });
  }
  /**
   * 
   */
  stageSlideIn() {
    return ar(this, null, function* () {
      yield this.stage.slideIn();
    });
  }
  /**
   * 
   */
  stageSlideOut() {
    return ar(this, null, function* () {
      yield this.stage.slideOut();
    });
  }
  /**
   * 
   * @param content
   * @param color
   */
  statusBarOpen(t, e) {
    this.statusBar.open(t, e);
  }
  /**
   * 
   */
  clearTips() {
    this.tips.clear();
  }
  /**
   * 
   * @param fn
   */
  setStatusBarClickEvent(t) {
    this.statusBar.setClickEvent(t);
  }
  /**
   * 
   * @param content
   * @param color
   * @param delay
   */
  statusBarClose(t, e, a) {
    this.statusBar.close(t, a, e);
  }
  /**
   * 
   */
  statusBarClearEvents() {
    this.statusBar.clearClickEvent(), this.statusBar.clearHoverEvent();
  }
  /**
   * 
   * @param fn
   */
  onStageSlideIn(t) {
    this.events.add("stageSlideIn", t);
  }
  /**
   * 
   * @param fn
   */
  onStageSlideOut(t) {
    this.events.add("stageSlideOut", t);
  }
  /**
   * 
   * @param fn
   */
  onLoad(t) {
    this.events.add("load", t);
  }
  /**
   * 
   */
  registerGlobalEvent() {
    ep(() => {
      this.reloadModel();
    }), this.onStageSlideIn(() => {
      this.tips.welcome();
    }), window.document.oncopy = () => {
      this.tips.copy();
    };
  }
}
const pA = (i) => new cA(i);
export {
  pA as loadOml2d
};
